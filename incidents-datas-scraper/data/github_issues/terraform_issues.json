{
  "tech": "terraform",
  "count": 295,
  "examples": [
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 38133,
      "title": "terraform_data - output exposure vector - output attribute doesn't inherit the sensitive flag from input (for data azurerm_key_vault_secret)",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.14.4\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/azurerm v4.33.0\n```\n\n### Terraform Configuration Files\n\n```terraform\nresource \"terraform_data\" \"test\" {\n  input = {\n    secret_token = data.azurerm_key_vault_secret.test.value\n  }\n\n  triggers_replace = {\n    test = var.test\n  }\n  provisioner \"local-exec\" {\n\n    command = <<-EOT\n    echo Hello World\n    echo Test ref - ${self.input.secret_token}\n    EOT\n    when = create\n  }\n  provisioner \"local-exec\" {\n    command = <<-EOT\n    echo Bye World\n    echo Test ref - ${self.input.secret_token}\n    EOT\n    when = destroy\n  }\n}\n```\n\n\n### Debug Output\n\n```terraform\nFor creation:\n  # terraform_data.test will be created\n  + resource \"terraform_data\" \"test\" {\n      + id               = (known after apply)\n      + input            = {\n          + secret_token = (sensitive value)\n        }\n      + output           = (known after apply)\n      + triggers_replace = {\n          + test = \"test\"\n        }\n    }\nterraform_data.test: Creating...\nterraform_data.test: Provisioning with 'local-exec'...\nterraform_data.test (local-exec): (output suppressed due to sensitive value in config)\nterraform_data.test (local-exec): (output suppressed due to sensitive value in config)\nterraform_data.test (local-exec): (output suppressed due to sensitive value in config)\n\nFor deletion (!):\n  # terraform_data.test will be destroyed\n  - resource \"terraform_data\" \"test\" {\n      - id               = \"203ef1f3-b51f-8c00-63e4-3df54504ab7c\" -> null\n      - input            = {\n          - secret_token = (sensitive value)\n        } -> null\n      - output           = {\n          - secret_token = \"ultra-hidden-secret-in-the-kv\" <-- ????\n        } -> null\n      - triggers_replace = {\n          - test = \"test\"\n        } -> null\n    }\n```\n\n### Expected Behavior\n\nWhen using terraform_data resource with sensitive values in the input attribute, the output attribute should preserve the sensitive marking to prevent secret exposure in plan/destroy output.\n\n```terraform\nresource \"terraform_data\" \"test\" {\n  input = {\n    secret_token = data.azurerm_key_vault_secret.test.value\n  }\n}\nExpected destroy output:\n- output = {\n    - secret_token = (sensitive value)\n  } -> null\n```\n\n\n### Actual Behavior\n\nThe `output` attribute does **not** inherit the default `sensitive` flag from data keyvault_secret.value from `input`, causing secrets to be exposed in plaintext during plan and destroy operations.\n\n```terraform\n  - output           = {\n      - secret_token = \"ultra-hidden-secret-in-the-kv\"\n    } -> null\n```\nThis occurs even when:\n- The source value is marked sensitive (e.g., from data.azurerm_key_vault_secret.test.value)\n- The input attribute correctly shows (sensitive value) - see above\n\n### Steps to Reproduce\n\n1. take configuration from above\n2. run terraform apply\n3. run terraform destroy (or change trigger to force replace)\n\n### Additional Context\n\nThis issue creates a security vulnerability where:\n- Secrets are logged in CI/CD pipelines (Azure DevOps, GitHub Actions, etc.)\n- Sensitive data appears in Terraform output captured by logging systems\n- No workaround exists for destroy-time provisioners (cannot use environment due to destroy-time reference restrictions) as I dont want to use triggers (in null_resource) or trigger_replace here :) I dont want to trigger based on changed i.e. api token, I want to keep token only for input/output.\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "The issue persists even when explicitly wrapping the value with sensitive()\n```terraform\nresource \"terraform_data\" \"test\" {\n  input = {\n    secret_token = sensitive(data.azurerm_key_vault_secret.test.value)\n  }\n\n  triggers_replace = {\n    test = var.test\n  }\n  \n  # ... provisioners\n}\n```\n\nOutput:\n```hcl\n~ output = {\n    - secret_token = \"ultra-hidden-secret-in-the-kv\"  # <-- STILL EXPOSED\n  } -> (known after apply)\n```\nThis demonstrates that:\nthe output attribute ignores the sensitive() function applied to input values; \"double-wrapping\" (data secret + sensitive() )provides no additional protection.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2026-02-06T10:42:46Z",
      "closed_at": "2026-02-06T12:38:38Z",
      "url": "https://github.com/hashicorp/terraform/issues/38133",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 38034,
      "title": "Terraform adds 443 port on the shasum url provided by registry protocol",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.14.3\non linux_amd64\n```\n\n### Terraform Configuration Files\n\n```terraform\nterraform {\n  required_providers {\n    mydevops = {\n      source  = \"*******/local-terraform-provider-rt-ns-****/****\"\n      version = \"0.2.1-SNAPSHOT-980c67e\"\n    }\n  }\n}\n```\n\nI am using JFrog Artifactory here to distribute the Terraform provider.\n\n### Debug Output\n\n```\n2025-12-31T11:35:34.276+0100 [DEBUG] Service discovery for **** at https://***/.well-known/terraform.json\n2025-12-31T11:35:34.372+0100 [DEBUG] GET https://***:443/artifactory/api/terraform/v1/providers/local-terraform-provider-rt-ns-***/***/versions\n2025-12-31T11:35:34.511+0100 [DEBUG] GET https://***:443/artifactory/api/terraform/v1/providers/local-terraform-provider-rt-ns-***/***/0.2.1-SNAPSHOT-980c67e/download/linux/amd64\n2025-12-31T11:35:34.808+0100 [DEBUG] GET https://***:443:443/artifactory/api/terraform/local-terraform-provider/providers/***/***/0.2.1-SNAPSHOT-980c67e/terraform-provider-***_0.2.1-SNAPSHOT-980c67e_SHA256SUMS?sig=[MASKED]\n2025-12-31T11:35:34.889+0100 [DEBUG] GET https://***:443:443/artifactory/api/terraform/local-terraform-provider/providers/***/***/0.2.1-SNAPSHOT-980c67e/terraform-provider-***_0.2.1-SNAPSHOT-980c67e_SHA256SUMS?sig=[MASKED] (status: 502): retrying in 1s (1 left)\n2025-12-31T11:35:35.889+0100 [INFO]  Previous request to the remote registry failed, attempting retry.\n```\n\nWe can see here all the requests succeeded but the `SHA256SUMS`. It add two `:443:443` \n\nThis is the output of `https://***:443/artifactory/api/terraform/v1/providers/local-terraform-provider-rt-ns-***/***/0.2.1-SNAPSHOT-980c67e/download/linux/amd64`:\n\n```json\n{\n  \"protocols\" : [ ],\n  \"os\" : \"linux\",\n  \"arch\" : \"amd64\",\n  \"filename\" : \"terraform-provider-***_0.2.1-SNAPSHOT-980c67e_linux_amd64.zip\",\n  \"download_url\" : \"https://***:443/artifactory/api/terraform/local-terraform-provider/providers/***/***/0.2.1-SNAPSHOT-980c67e/terraform-provider-***_0.2.1-SNAPSHOT-980c67e_linux_amd64.zip?sig=[MASKED]\",\n  \"shasums_url\" : \"https://***:443/artifactory/api/terraform/local-terraform-provider/providers/***/***/0.2.1-SNAPSHOT-980c67e/terraform-provider-***_0.2.1-SNAPSHOT-980c67e_SHA256SUMS?sig=[MASKED]\",\n  \"shasums_signature_url\" : \"https://***:443/artifactory/api/terraform/local-terraform-provider/providers/***/***/0.2.1-SNAPSHOT-980c67e/terraform-provider-***_0.2.1-SNAPSHOT-980c67e_SHA256SUMS.sig?sig=[MASKED]\",\n  \"shasum\" : \"[MASKED]\",\n  \"signing_keys\" : {\n    \"gpg_public_keys\" : [ {\n      \"key_id\" : \"**\",\n      \"ascii_armor\" : \"-----BEGIN PGP PUBLIC KEY BLOCK-----\\n\\n[MASKED]\\n-----END PGP PUBLIC KEY BLOCK-----\\n\"\n    } ]\n  }\n}\n```\n\nWe can see Artifactory already added `:443` everywhere (but it does on every JSON returned by the registry protocol not only here).\n\n\n### Expected Behavior\n\nTerraform should be able to download the provider.\n\n### Actual Behavior\n\nTerraform fails on downloading the `SHA256SUMS` file because it adds another `:443` in the URL.\n\nIt does not add this extra `:443` on other URLs\n\n### Steps to Reproduce\n\n1. Set up JFrog Artifactory as the registry\n2. Upload a provider\n3. `terraform init`\n\n=> The configuration of JFrog Artifactory adds explicitly the port in all of the URLs.\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-12-31T10:43:40Z",
      "closed_at": "2026-01-03T21:11:39Z",
      "url": "https://github.com/hashicorp/terraform/issues/38034",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 38078,
      "title": "Terraform plan incorrectly displays changed resource's block as unchanged/hidden.",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.14.3\non linux_amd64\n+ provider registry.terraform.io/hashicorp/aws v6.28.0\n```\n\n### Terraform Configuration Files\n\n```terraform\nprovider \"aws\" {\n  region     = \"us-west-2\"\n}\n\nresource \"aws_security_group\" \"rabbitmq\" {\n  name        = \"test-aws-security-group-rabbitmq\"\n}\n\n# Note: The following assumes a Default VPC exists.\nresource \"aws_mq_broker\" \"rabbitmq\" {\n  # for_each = {}\n  for_each = { 0 = 0 }\n\n  broker_name        = \"test-aws-mq-broker-rabbitmq\"\n  engine_type        = \"RabbitMQ\"\n  engine_version     = \"3.13\"\n  host_instance_type = \"mq.m7g.medium\"\n  auto_minor_version_upgrade = true\n\n  user {\n    username = \"rabbitmq-user\"\n    password = \"helloworld123\"\n  }\n\n  security_groups     = [aws_security_group.rabbitmq.id]\n}\n\n```\n\n\n### Debug Output\n\nSee \"Steps to Reproduce\" below.\n\n### Expected Behavior\n\nThere should be some indication that the resource's block will be changed (even if it contains sensitive values).\n\n### Actual Behavior\n\nThe plan's diff does not indicate any sort of change to the resource's blocks (in this case the `aws_mq_broker` resource's `user` block). Instead it incorrectly displays: `# (4 unchanged blocks hidden)`, when there is in fact a changed block.\n\n### Steps to Reproduce\n\n```bash\n### 1. Run first apply.\n#\nAWS_PROFILE=my-profile terraform apply\n# Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\n#   + create\n# \n# Terraform will perform the following actions:\n# \n#   # aws_mq_broker.rabbitmq[\"0\"] will be created\n#   + resource \"aws_mq_broker\" \"rabbitmq\" {\n#       + apply_immediately             = false\n#       + arn                           = (known after apply)\n#       + authentication_strategy       = (known after apply)\n#       + auto_minor_version_upgrade    = true\n#       + broker_name                   = \"test-aws-mq-broker-rabbitmq\"\n#       + data_replication_mode         = (known after apply)\n#       + deployment_mode               = \"SINGLE_INSTANCE\"\n#       + engine_type                   = \"RabbitMQ\"\n#       + engine_version                = \"3.13\"\n#       + host_instance_type            = \"mq.m7g.medium\"\n#       + id                            = (known after apply)\n#       + instances                     = (known after apply)\n#       + pending_data_replication_mode = (known after apply)\n#       + publicly_accessible           = false\n#       + region                        = \"us-west-2\"\n#       + security_groups               = (known after apply)\n#       + storage_type                  = (known after apply)\n#       + subnet_ids                    = (known after apply)\n#       + tags_all                      = (known after apply)\n# \n#       + configuration (known after apply)\n# \n#       + maintenance_window_start_time (known after apply)\n# \n#       + user {\n#           # At least one attribute in this block is (or was) sensitive,\n#           # so its contents will not be displayed.\n#         }\n#     }\n# \n#   # aws_security_group.rabbitmq will be created\n#   + resource \"aws_security_group\" \"rabbitmq\" {\n#       + arn                    = (known after apply)\n#       + description            = \"Managed by Terraform\"\n#       + egress                 = (known after apply)\n#       + id                     = (known after apply)\n#       + ingress                = (known after apply)\n#       + name                   = \"test-aws-security-group-rabbitmq\"\n#       + name_prefix            = (known after apply)\n#       + owner_id               = (known after apply)\n#       + region                 = \"us-west-2\"\n#       + revoke_rules_on_delete = false\n#       + tags_all               = (known after apply)\n#       + vpc_id                 = (known after apply)\n#     }\n# \n# Plan: 2 to add, 0 to change, 0 to destroy.\n# \n# Do you want to perform these actions?\n#   Terraform will perform the actions described above.\n#   Only 'yes' will be accepted to approve.\n# \n#   Enter a value: yes\n# \n# aws_security_group.rabbitmq: Creating...\n# aws_security_group.rabbitmq: Creation complete after 3s [id=sg-009b3864fafe31b10]\n# aws_mq_broker.rabbitmq[\"0\"]: Creating...\n# aws_mq_broker.rabbitmq[\"0\"]: Still creating... [00m10s elapsed]\n# ...Wait 10 minutes for the MQ to deploy...\n# aws_mq_broker.rabbitmq[\"0\"]: Still creating... [09m10s elapsed]\n# aws_mq_broker.rabbitmq[\"0\"]: Creation complete after 9m13s [id=b-9670ac1c-e8e7-4c74-8a1b-4d5c4cf37212]\n# \n# Apply complete! Resources: 2 added, 0 changed, 0 destroyed.\n\n\n### 2. Run plan after initial apply.\n#\nAWS_PROFILE=my-profile terraform plan\n# aws_security_group.rabbitmq: Refreshing state... [id=sg-009b3864fafe31b10]\n# aws_mq_broker.rabbitmq[\"0\"]: Refreshing state... [id=b-9670ac1c-e8e7-4c74-8a1b-4d5c4cf37212]\n# \n# Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\n#   ~ update in-place\n# \n# Terraform will perform the following actions:\n# \n#   # aws_mq_broker.rabbitmq[\"0\"] will be updated in-place\n#   ~ resource \"aws_mq_broker\" \"rabbitmq\" {    ############################# DOES NOT SHOW WHAT CHANGED ###########################\n#         id                            = \"b-9670ac1c-e8e7-4c74-8a1b-4d5c4cf37212\"\n#         tags                          = {}\n#         # (18 unchanged attributes hidden)\n# \n#         # (4 unchanged blocks hidden)    ############################# `user` block has changed, follow steps below to see diff ###########################\n#     }\n# \n# Plan: 0 to add, 1 to change, 0 to destroy.\n\n\n### 3. Generate plan tfplan.json\n#\nAWS_PROFILE=my-profile terraform plan -out tfplan\nAWS_PROFILE=my-profile terraform show -json tfplan | jq -r >tfplan.json\n\n# Verify number of changed resources (there should be only the aws_mq_broker).\ncat tfplan.json | jq -r '[.resource_changes | .[] | select(.change.actions[] | contains(\"update\"))] | length'\n\n# Capture the planned changes in it's own file.\ncat tfplan.json | jq -r '.resource_changes | .[] | select(.change.actions[] | contains(\"update\"))' >tfplan-mq-updated.json\n\n\n### 4. View the hidden block's changes:\n#\n# Diff the non-sensitive changes (should be no changes here).\ndiff -u  <(cat tfplan-mq-updated.json | jq -r '.change.before') <(cat tfplan-mq-updated.json | jq -r '.change.after')\n\n# Diff the sensitive changes (user block has changed).\ndiff -u  <(cat tfplan-mq-updated.json | jq -r '.change.before_sensitive') <(cat tfplan-mq-updated.json | jq -r '.change.after_sensitive')\n#\n# --- /dev/fd/63  2026-01-20 13:42:25.334274392 -0600\n# +++ /dev/fd/62  2026-01-20 13:42:25.334274392 -0600\n# @@ -27,5 +27,5 @@\n#    ],\n#    \"tags\": {},\n#    \"tags_all\": {},\n# -  \"user\": true\n# +  \"user\": []\n# }\n```\n\n### Additional Context\n\n_No response_\n\n### References\n\nSemi related bug report to the AWS Provider: https://github.com/hashicorp/terraform-provider-aws/issues/46061\n\n### Generative AI / LLM assisted development?\n\nNo.",
      "solution": "Hi @emactaggart \n\nThe first thing I see here is that the resource should not produce a diff, so the fact that you have a change at all is a problem with the provider. That however is more likely attributed to the use of the legacy SDK, and not fully solvable until migration off the SDK is complete. The handling of the `user` block in particular might be more related to the remote API, but again would probably require migrating off the SDK for any more advanced solution.\n\nAside from the spurious change in the follow up plan, the issue you see stems from the provider returning a different `user` block value during read. You can see that change in the detailed json output under `resource_drift`, where the configured value is replaced with an empty block value. Within the defined planing rules, the resource is allowed to maintain that empty `user` block during the plan, even though declaring that the configured value and the empty value are semantically equivalent is a bit dubious. Surprisingly enough, with all the warnings that the `aws_mq_broker` generates during plan, the `user` block is actually handled entirely according to the data consistency rules, albeit in a nonconventional manner.\n\nTo summarize: the resource reported that the `user` block is actually empty, it then suppressed any change to that block in the plan, resulting in a plan which has no changes for `user` as reported.\n\n---\n\nHey @jbardin,\n\nThanks for the quick and helpful response!\n\nSo just to clarify a few things:\n\n- Can you elaborate what you mean by: \"configured value and the empty value are semantically equivalent\"? What is dubious about this? \n   - As in the provider is treating these user values as equivalent or terraform plan is treating them as equivalent? \n     (\"these\", in this context, being `resource_changes.aws_mq_broker`'s `\"before_sensitive.user\": true` and `\"after_sensitive.user\": []`).\n   - Or the issue is between the `resource_drift.aws_mq_broker.after.user` and the `resource_changes.aws_mq_broker.before_sensitive.user`, as they shouldn't be treated different by the provider?\n\n- Regarding your summary:\n  - The issue is that the provider is incorrectly \"suppressing\" changes of the `user` block, despite not suppressing changes to the resource? \n  - Or the other way around: Incorrectly indicating changes to the resource while correctly suppressing changes to the `user` block?\n  - Or something else?\n\nJust so that I can find out/learn more: \n\n- Did you dig through the `aws_mq_broker` provider source at all to determine any of this? Or purely dig through the `tfplan.json`? Or something else?\n\n\n---\n\nThe change I'm referring to is that there is a configured value in the `user` block in the configuration and the prior state, but the next `ReadResource` call returns no value within that block. The subsequent plan would normally indicate an update to match the configuration, but the provider overrode that in order for there to be no update to the value. The provider is considering the lack of state `user` value semantically equal to any configured `user` value. This leaves only the change in the value's sensitivity left in the plan, since the sensitive value from configuration is no longer present at all, but because the value doesn't exist, it can't be expressed in the UI.\n\nIn practice the provider is expected to maintain any configured values, and saying that no value is equal to a configured value is confusing at best. This means the prior value of `user` should have been returned and maintained in the state, because it does change how that attribute is evaluated in the configuration. Modern providers would usually encounter an error trying to so this, because they wouldn't model a single object as a set element, which is the only way this escapes detection. This probably also means the provider can't update credentials either.\n\nAns now that you mention it, according to the source comments it seems that the credentials are not readable from the api, which is probably why the provider tried this pattern at all. We now have write-only attribute to fill this role, but again, that requires updating the resource implementation.\n\nMy diagnosis was initially derived from the json plan information, but I did also watch the warnings in the plan logs to see if there were any more clues. Having seen thousands of these, and knowing the underlying protocol, I can piece the possible operations together pretty well. The behavior of the legacy SDK when shimmed into the modern protocol is quite obtuse at times though, and a lot of time isn't spent tracing these temporary inconsistencies, since moving the resource to the provider framework will directly solve, or force a resolution to most of the problems.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2026-01-20T20:39:21Z",
      "closed_at": "2026-01-20T21:49:52Z",
      "url": "https://github.com/hashicorp/terraform/issues/38078",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 38079,
      "title": "Terraform AWS Provider Version Conflict and State Issues",
      "problem": "### Terraform Version\n\n```shell\nTerraform v0.13.0.\n```\n\n### Terraform Configuration Files\n\nterraform {\n  required_providers {\n    aws = {\n      version = \"~> 4.65.0\"\n    }\n    \n  }\n\n}\n\n\n### Debug Output\n\nInitializing provider plugins...\n- Finding hashicorp/template versions matching \">= 2.1.0, >= 2.1.0, >= 2.1.0, >= 2.1.0, >= 2.1.0, >= 2.1.0, >= 2.1.0, >= 2.1.0, >= 2.1.0, >= 2.1.0, >= 2.1.0, >= 2.1.0, >= 2.1.0, >= 2.1.0, >= 2.1.0\"...\n- Finding hashicorp/random versions matching \">= 2.2.1, >= 2.2.1, >= 2.2.1, >= 2.2.1, >= 2.2.1, >= 2.2.1, >= 2.2.1, >= 2.2.1, >= 2.2.1, >= 2.2.1, >= 2.2.1, >= 2.2.1, >= 2.2.1, >= 2.2.1, >= 2.2.1\"...\n- Finding hashicorp/aws versions matching \"~> 4.65.0, ~> 5.0, >= 2.47.0, >= 2.47.0, >= 2.47.0, ~> 5.0, >= 2.47.0, >= 2.47.0, >= 2.47.0, ~> 5.0, ~> 5.0, >= 2.47.0, >= 2.47.0, ~> 5.0, ~> 5.0, ~> 5.0, ~> 5.0, >= 2.47.0, >= 2.47.0, ~> 5.0, ~> 5.0, >= 2.47.0, ~> 5.0, >= 2.47.0, >= 2.47.0, ~> 5.0, ~> 5.0, >= 2.47.0, >= 2.47.0\"...\n- Installing hashicorp/template v2.2.0...\n- Installed hashicorp/template v2.2.0 (self-signed, key ID 34365D9472D7468F)\n- Installing hashicorp/random v3.7.2...\n- Installed hashicorp/random v3.7.2 (self-signed, key ID 34365D9472D7468F)\nPartner and community providers are signed by their developers.\nIf you'd like to know more about provider signing, you can read about it here:\nhttps://www.terraform.io/docs/plugins/signing.html\nError: Failed to query available provider packages\nCould not retrieve the list of available versions for provider hashicorp/aws:\nno available releases match the given constraints ~> 4.65.0, ~> 5.0, >=\n2.47.0, >= 2.47.0, >= 2.47.0, ~> 5.0, >= 2.47.0, >= 2.47.0, >= 2.47.0, ~> 5.0,\n~> 5.0, >= 2.47.0, >= 2.47.0, ~> 5.0, ~> 5.0, ~> 5.0, ~> 5.0, >= 2.47.0, >=\n2.47.0, ~> 5.0, ~> 5.0, >= 2.47.0, ~> 5.0, >= 2.47.0, >= 2.47.0, ~> 5.0, ~>\n5.0, >= 2.47.0, >= 2.47.0\nCleaning up file based variables\n00:01\nERROR: Job failed: exit status 1\n\n\n### Expected Behavior\n\nError: Invalid resource instance data in state\n  on .terraform/modules/vpc_vas/vpc/main.tf line 3:\n   3: resource \"aws_vpc\" \"vpc_vc01\" {\nInstance module.vpc_vas.aws_vpc.vpc_vc01 data could not be decoded from the\nstate: unsupported attribute \"enable_classiclink\".\nCleaning up file based variables\n00:00\nERROR: Job failed: exit status 1\n\n### Actual Behavior\n\nError: Invalid resource instance data in state\n  on .terraform/modules/vpc_vas/vpc/main.tf line 3:\n   3: resource \"aws_vpc\" \"vpc_vc01\" {\nInstance module.vpc_vas.aws_vpc.vpc_vc01 data could not be decoded from the\nstate: unsupported attribute \"enable_classiclink\".\nCleaning up file based variables\n00:00\nERROR: Job failed: exit status 1\n\n### Steps to Reproduce\n\nRemoved .terraform and .terraform.lock.hcl\n\nRan terraform init -upgrade\n\nRemoved resources from the state\n\nRe-imported the resources\n\n### Additional Context\n\nHello Team,\n\nI am using Terraform v0.13.0 for my project and encountered the following issue during initialization.\n\n**Error during `terraform init`:**\n\nInitializing provider plugins...\nTerraform failed to retrieve the list of available versions for provider `hashicorp/aws` due to conflicting version constraints:\n\n* `~> 4.65.0`\n* `~> 5.0`\n* `>= 2.47.0`\n\nAs a result, Terraform could not find a single AWS provider version that satisfies all constraints, and the job failed.\n\nInitially, my AWS provider configuration was:\n\n```hcl\nterraform {\n  required_providers {\n    aws = {\n      version = \"~> 4.65.0\"\n    }\n  }\n}\n```\n\nLater, I upgraded the AWS provider to:\n\n```hcl\nterraform {\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \">= 5.0\"\n    }\n  }\n}\n```\n\nAfter upgrading, I encountered the following error:\n\n```\nError: Invalid resource instance data in state\nunsupported attribute \"enable_classiclink\"\n```\n\nTo resolve this, I performed the following workaround:\n\n* Removed `.terraform` and `.terraform.lock.hcl`\n* Ran `terraform init -upgrade`\n* Removed resources from the state\n* Re-imported the resources\n\nAfter this workaround, `terraform plan` shows that Terraform wants to destroy and recreate almost all resources:\n\n```\nPlan: 330 to add, 29 to change, 329 to destroy\n```\n\nI do not understand why Terraform is attempting to recreate all resources after the provider upgrade.\nPlease help me understand the root cause and advise on the correct way to resolve this issue without recreating the entire infrastructure.\n\nThank you.\n\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hi @prodipto03ei38,\n\nIt looks like you may have multiple issues that are making your problem more confusing. I'm not sure exactly where you want to be, because your expected and actual behavior are identical in the post. \n\nWhat I think has happened is that in removing your `.terraform` directory, you have modules which were not pinned to specific versions, and you have effectively changed a lot of your configuration. The first clue is `no available releases match the given constraints`, which means there are modules declaring provider constraints which conflict and can't be resolved.\n\nThe first thing you need to do is restore your working directory to a previously working state. A major impediment here is that you are using a very old version of Terraform, which has many issues that have long since been resolved, and newer provider versions may be implicitly relying on, and I think the \"Invalid resource instance data in state\" may be one of them.\n\nIt would probably me most prudent then to work on upgrading Terraform first, before embarking on other upgrades in your configuration \n\n---\n\nHi James Bardin,\n\nThank you for your response.\n\nLet me clarify my environment and the steps I followed, as I believe some important context may be missing.\n\nI am running Terraform in a **self-managed GitLab setup**, where:\n\n* **GitLab** is used for source code management\n* **Terraform is executed via GitLab Runners**\n* **S3 backend** is used to store the Terraform state file\n* **DynamoDB** is used for state locking\n\nBefore applying any changes to production, I followed a standard promotion approach:\n\n1. I first tested the AWS provider upgrade in a **non-production (test) environment**.\n2. In test, I performed the following steps:\n\n   * Removed `.terraform` and `.terraform.lock.hcl`\n   * Ran `terraform init -upgrade`\n   * Removed affected resources from the state\n   * Re-imported the resources\n3. After these steps, **terraform plan and apply behaved as expected in the test environment**, with no large-scale resource recreation.\n\nOnly after validating this successfully in test did I implement the **same procedure in the production project**.\n\nHowever, in production\u2014despite using the same backend (S3 + DynamoDB), workflow, and codebase\u2014Terraform now produces the following plan:\n\n> Plan: 330 to add, 29 to change, 329 to destroy\n\nThis is the main point of concern, as I do not understand why Terraform is now treating almost all resources as needing replacement, given that:\n\n* The infrastructure already exists\n* The resources were re-imported\n* The same process worked correctly in the test environment\n\nI understand your point regarding the very old Terraform version (v0.13.0), and I agree that upgrading Terraform itself is likely a necessary step. However, I would like to better understand:\n\n* The **root cause** of why the provider upgrade combined with state re-import leads to such widespread diffs in production\n* Whether this behavior is expected due to **schema/state incompatibilities** between AWS provider v4 and v5 when using Terraform 0.13\n* The **correct and safest migration path** to avoid full resource recreation, especially in a production environment\n\nAny guidance on how to stabilize the state and provider versions\u2014or a recommended step-by-step upgrade path\u2014would be greatly appreciated.\n\nThank you for your time and support.\n\nBest regards,\nProdipto \n\n",
      "labels": [
        "bug",
        "provider/aws",
        "new"
      ],
      "created_at": "2026-01-21T04:08:57Z",
      "closed_at": "2026-01-21T14:29:51Z",
      "url": "https://github.com/hashicorp/terraform/issues/38079",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 38023,
      "title": "Introduce resource attributes defined only on resource creation to avoid unnecessary updates in depending resources",
      "problem": "### Terraform Version\n\n```shell\nN/A\n```\n\n### Use Cases\n\nThis is an attempt to overcome the known limitation that `data` sources are being recreated/repulled if they `depends_on` the resource with pending updates. Let's take a look at the following example:\n```\nresource \"aws_sns_topic\" \"my_topic\" {\n  name = \"my-topic\"\n}\n\nresource \"aws_iam_role\" \"sns_access_role\" {\n  name = \"sns-access-role\"\n\n  assume_role_policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Effect    = \"Allow\"\n        Action    = \"sts:AssumeRole\"\n        Principal = {\n          Service = \"ec2.amazonaws.com\"\n        }\n      }\n    ]\n  })\n}\n\ndata \"aws_iam_policy_document\" \"sns_access_policy\" {\n  statement {\n    actions   = [\"sns:Publish\", \"sns:Subscribe\", \"sns:ListSubscriptionsByTopic\"]\n    resources = [aws_sns_topic.my_topic.arn]\n  }\n}\n\nresource \"aws_iam_role_policy\" \"sns_access_inline_policy\" {\n  name = \"sns-access-inline-policy\"\n  role = aws_iam_role.sns_access_role.name\n  policy = data.aws_iam_policy_document.sns_access_policy.json\n}\n```\n\nIf I update `aws_sns_topic`, the `aws_iam_policy_document` will be repulled leading to `aws_iam_role_policy` updates.\n\n### Attempted Solutions\n\nCalculate topic ARN in locals and use it in data source:\n```\nlocals {\n   topic_arn = \"arn:aws:sns:${data.aws_region.current.name}:${data.aws_caller_identity.current.account_id}:my-topic\"\n}\n\n...\n\ndata \"aws_iam_policy_document\" \"sns_access_policy\" {\n  statement {\n    actions   = [\"sns:Publish\", \"sns:Subscribe\", \"sns:ListSubscriptionsByTopic\"]\n    resources = [local.topic_arn]\n  }\n}\n```\n\n\n### Proposal\n\nUsually resources have some attributes, such as identifiers (`arn` in AWS or `id` in Azure) that are defined on the resource creation and remain unchanged on in-place (`~`) modification. However, currently Terraform doesn't take it into account (at least in `data` sources case) and it leads to a complex Terraform plan.\n\n### References\n\nThere are many similar GitHub issues but I really don't know which one to link.",
      "solution": "Hi @AlexPykavy,\n\nProviders already have the tools to do this. If a computed attribute is not changing, a provider will maintain that value in the plan. Even if a computed attribute is changing, refinements can be added to indicate certain ranges of possible values to help Terraform plan more accurately. If an update to the role indicates a change to the `arn` when it is not necessary to do so, then you should open an issue with the provider.\n\nIf the plan does not indicate that the `arn` is changing, then there is nothing else the provider can do, and you need to change the configuration. You work around the direct reference between data resource by indirecting it through a `local` value:\n\n```\nlocals {\n  my_topic_arn = aws_sns_topic.my_topic.arn\n}\n\ndata \"aws_iam_policy_document\" \"sns_access_policy\" {\n  statement {\n    actions   = [\"sns:Publish\", \"sns:Subscribe\", \"sns:ListSubscriptionsByTopic\"]\n    resources = [local.my_topic_arn]\n  }\n}\n```\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "new"
      ],
      "created_at": "2025-12-20T11:09:09Z",
      "closed_at": "2025-12-22T14:21:26Z",
      "url": "https://github.com/hashicorp/terraform/issues/38023",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 38054,
      "title": "templatestring() - expects only 2 argument(s)",
      "problem": "### Terraform Version\n\n```shell\nterraform --version\nTerraform v1.14.3\non darwin_arm64\n```\n\n### Terraform Configuration Files\n\n```\nlocals {\n  template = \"$${service_name}-$${environment}-$${location}-$${resource}\"\n\n  base_vars = {\n    environment  = \"test\",\n    service_name = \"aws\",\n    location     = \"use1\"\n  }\n}\n\noutput \"s3_name\" {\n  value = templatestring(local.template, local.base_vars, {resource = \"s3_bucket\"})\n}\n```\n\n\n### Debug Output\n\n```\n2026-01-13T11:26:42.739-0500 [INFO]  Terraform version: 1.14.3\n2026-01-13T11:26:42.739-0500 [DEBUG] using github.com/hashicorp/go-tfe v1.94.0\n2026-01-13T11:26:42.739-0500 [DEBUG] using github.com/hashicorp/hcl/v2 v2.24.0\n2026-01-13T11:26:42.739-0500 [DEBUG] using github.com/hashicorp/terraform-svchost v0.1.1\n2026-01-13T11:26:42.739-0500 [DEBUG] using github.com/zclconf/go-cty v1.16.3\n2026-01-13T11:26:42.739-0500 [INFO]  Go runtime version: go1.25.5\n2026-01-13T11:26:42.739-0500 [INFO]  CLI args: []string{\"terraform\", \"plan\"}\n2026-01-13T11:26:42.739-0500 [TRACE] Stdout is a terminal of width 190\n2026-01-13T11:26:42.739-0500 [TRACE] Stderr is a terminal of width 190\n2026-01-13T11:26:42.739-0500 [TRACE] Stdin is a terminal\n2026-01-13T11:26:42.739-0500 [DEBUG] Attempting to open CLI config file: /Users/muaztahir/.terraformrc\n2026-01-13T11:26:42.739-0500 [DEBUG] File doesn't exist, but doesn't need to. Ignoring.\n2026-01-13T11:26:42.739-0500 [DEBUG] ignoring non-existing provider search directory terraform.d/plugins\n2026-01-13T11:26:42.739-0500 [DEBUG] ignoring non-existing provider search directory /Users/muaztahir/.terraform.d/plugins\n2026-01-13T11:26:42.739-0500 [DEBUG] ignoring non-existing provider search directory /Users/muaztahir/Library/Application Support/io.terraform/plugins\n2026-01-13T11:26:42.739-0500 [DEBUG] ignoring non-existing provider search directory /Library/Application Support/io.terraform/plugins\n2026-01-13T11:26:42.740-0500 [INFO]  CLI command args: []string{\"plan\"}\n2026-01-13T11:26:42.743-0500 [TRACE] Meta.Backend: no config given or present on disk, so returning nil config\n2026-01-13T11:26:42.744-0500 [TRACE] Meta.Backend: backend has not previously been initialized in this working directory\n2026-01-13T11:26:42.744-0500 [TRACE] Meta.Backend: using default local state only (no backend configuration, and no existing initialized backend)\n2026-01-13T11:26:42.744-0500 [TRACE] Meta.Backend: instantiated backend of type <nil>\n2026-01-13T11:26:42.744-0500 [DEBUG] checking for provisioner in \".\"\n2026-01-13T11:26:42.745-0500 [DEBUG] checking for provisioner in \"/opt/homebrew/bin\"\n2026-01-13T11:26:42.745-0500 [TRACE] Meta.Backend: backend <nil> does not support operations, so wrapping it in a local backend\n2026-01-13T11:26:42.746-0500 [INFO]  backend/local: starting Plan operation\n2026-01-13T11:26:42.748-0500 [TRACE] backend/local: requesting state manager for workspace \"default\"\n2026-01-13T11:26:42.748-0500 [TRACE] backend/local: state manager for workspace \"default\" will:\n - read initial snapshot from terraform.tfstate\n - write new snapshots to terraform.tfstate\n - create any backup at terraform.tfstate.backup\n2026-01-13T11:26:42.748-0500 [TRACE] backend/local: requesting state lock for workspace \"default\"\n2026-01-13T11:26:42.750-0500 [TRACE] statemgr.Filesystem: preparing to manage state snapshots at terraform.tfstate\n2026-01-13T11:26:42.750-0500 [TRACE] statemgr.Filesystem: no previously-stored snapshot exists\n2026-01-13T11:26:42.750-0500 [TRACE] statemgr.Filesystem: locking terraform.tfstate using fcntl flock\n2026-01-13T11:26:42.750-0500 [TRACE] statemgr.Filesystem: writing lock metadata to .terraform.tfstate.lock.info\n2026-01-13T11:26:42.750-0500 [TRACE] backend/local: reading remote state for workspace \"default\"\n2026-01-13T11:26:42.750-0500 [TRACE] statemgr.Filesystem: reading latest snapshot from terraform.tfstate\n2026-01-13T11:26:42.750-0500 [TRACE] statemgr.Filesystem: snapshot file has nil snapshot, but that's okay\n2026-01-13T11:26:42.750-0500 [TRACE] statemgr.Filesystem: read nil snapshot\n2026-01-13T11:26:42.750-0500 [TRACE] backend/local: populating backendrun.LocalRun for current working directory\n2026-01-13T11:26:42.752-0500 [TRACE] terraform.NewContext: starting\n2026-01-13T11:26:42.752-0500 [TRACE] terraform.NewContext: complete\n2026-01-13T11:26:42.752-0500 [TRACE] backend/local: requesting interactive input, if necessary\n2026-01-13T11:26:42.753-0500 [TRACE] Context.Input: Prompting for provider arguments\n2026-01-13T11:26:42.753-0500 [TRACE] backend/local: running validation operation\n2026-01-13T11:26:42.753-0500 [DEBUG] Building and walking validate graph\n2026-01-13T11:26:42.753-0500 [TRACE] building graph for walkValidate\n2026-01-13T11:26:42.754-0500 [TRACE] Executing graph transform *terraform.ConfigTransformer\n2026-01-13T11:26:42.754-0500 [TRACE] ConfigTransformer: Starting for path:\n2026-01-13T11:26:42.754-0500 [TRACE] Executing graph transform *terraform.ActionTriggerConfigTransformer\n2026-01-13T11:26:42.754-0500 [TRACE] Executing graph transform *terraform.ActionInvokePlanTransformer\n2026-01-13T11:26:42.754-0500 [TRACE] Executing graph transform *terraform.RootVariableTransformer\n2026-01-13T11:26:42.754-0500 [TRACE] Executing graph transform *terraform.ModuleVariableTransformer\n2026-01-13T11:26:42.754-0500 [TRACE] Executing graph transform *terraform.variableValidationTransformer\n2026-01-13T11:26:42.754-0500 [TRACE] variableValidationTransformer: adding validation nodes for any existing variable evaluation nodes\n2026-01-13T11:26:42.754-0500 [TRACE] Executing graph transform *terraform.LocalTransformer\n2026-01-13T11:26:42.754-0500 [TRACE] Executing graph transform *terraform.OutputTransformer\n2026-01-13T11:26:42.754-0500 [TRACE] OutputTransformer: adding s3_name as *terraform.nodeExpandOutput\n2026-01-13T11:26:42.754-0500 [TRACE] Executing graph transform *terraform.checkTransformer\n2026-01-13T11:26:42.754-0500 [TRACE] Executing graph transform *terraform.OrphanResourceInstanceTransformer\n2026-01-13T11:26:42.754-0500 [TRACE] Executing graph transform *terraform.StateTransformer\n2026-01-13T11:26:42.754-0500 [TRACE] StateTransformer: pointless no-op call, creating no nodes at all\n2026-01-13T11:26:42.754-0500 [TRACE] Executing graph transform *terraform.AttachStateTransformer\n2026-01-13T11:26:42.754-0500 [TRACE] Executing graph transform *terraform.OrphanOutputTransformer\n2026-01-13T11:26:42.754-0500 [TRACE] Executing graph transform *terraform.AttachResourceConfigTransformer\n2026-01-13T11:26:42.754-0500 [TRACE] Executing graph transform *terraform.graphTransformerMulti\n2026-01-13T11:26:42.754-0500 [TRACE] (graphTransformerMulti) Executing graph transform *terraform.externalProviderTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] (graphTransformerMulti) Completed graph transform *terraform.externalProviderTransformer with new graph:\n  local.base_vars (expand) - *terraform.nodeExpandLocal\n  local.template (expand) - *terraform.nodeExpandLocal\n  output.s3_name (expand) - *terraform.nodeExpandOutput\n  ------\n2026-01-13T11:26:42.755-0500 [TRACE] (graphTransformerMulti) Executing graph transform *terraform.ProviderConfigTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] (graphTransformerMulti) Completed graph transform *terraform.ProviderConfigTransformer (no changes)\n2026-01-13T11:26:42.755-0500 [TRACE] (graphTransformerMulti) Executing graph transform *terraform.MissingProviderTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] (graphTransformerMulti) Completed graph transform *terraform.MissingProviderTransformer (no changes)\n2026-01-13T11:26:42.755-0500 [TRACE] (graphTransformerMulti) Executing graph transform *terraform.ProviderTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] (graphTransformerMulti) Completed graph transform *terraform.ProviderTransformer (no changes)\n2026-01-13T11:26:42.755-0500 [TRACE] (graphTransformerMulti) Executing graph transform *terraform.PruneProviderTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] (graphTransformerMulti) Completed graph transform *terraform.PruneProviderTransformer (no changes)\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.RemovedModuleTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.AttachSchemaTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.ModuleExpansionTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.ExternalReferenceTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.ReferenceTransformer\n2026-01-13T11:26:42.755-0500 [DEBUG] ReferenceTransformer: \"local.base_vars (expand)\" references: []\n2026-01-13T11:26:42.755-0500 [DEBUG] ReferenceTransformer: \"local.template (expand)\" references: []\n2026-01-13T11:26:42.755-0500 [DEBUG] ReferenceTransformer: \"output.s3_name (expand)\" references: [local.template (expand) local.base_vars (expand)]\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.AttachDependenciesTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] AttachDependenciesTransformer: output.s3_name (expand) depends on []\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.attachDataResourceDependsOnTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.DestroyEdgeTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.pruneUnusedNodesTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.TargetsTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.QueryTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.ForcedCBDTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.ephemeralResourceCloseTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.CloseProviderTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.CloseRootModuleTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] Executing graph transform *terraform.TransitiveReductionTransformer\n2026-01-13T11:26:42.755-0500 [TRACE] Completed graph transform:\nlocal.base_vars (expand) - *terraform.nodeExpandLocal\nlocal.template (expand) - *terraform.nodeExpandLocal\noutput.s3_name (expand) - *terraform.nodeExpandOutput\n  local.base_vars (expand) - *terraform.nodeExpandLocal\n  local.template (expand) - *terraform.nodeExpandLocal\nroot - *terraform.nodeCloseModule\n  output.s3_name (expand) - *terraform.nodeExpandOutput\n  ------\n2026-01-13T11:26:42.755-0500 [DEBUG] Starting graph walk: walkValidate\n2026-01-13T11:26:42.757-0500 [TRACE] vertex \"local.template (expand)\": starting visit (*terraform.nodeExpandLocal)\n2026-01-13T11:26:42.758-0500 [TRACE] vertex \"local.base_vars (expand)\": starting visit (*terraform.nodeExpandLocal)\n2026-01-13T11:26:42.758-0500 [TRACE] vertex \"local.template (expand)\": does not belong to any module instance\n2026-01-13T11:26:42.758-0500 [TRACE] vertex \"local.template (expand)\": expanding dynamic subgraph\n2026-01-13T11:26:42.758-0500 [TRACE] Expanding local: adding local.template as *terraform.NodeLocal\n2026-01-13T11:26:42.758-0500 [TRACE] vertex \"local.template (expand)\": entering dynamic subgraph\n2026-01-13T11:26:42.758-0500 [TRACE] vertex \"local.base_vars (expand)\": does not belong to any module instance\n2026-01-13T11:26:42.758-0500 [TRACE] vertex \"local.base_vars (expand)\": expanding dynamic subgraph\n2026-01-13T11:26:42.758-0500 [TRACE] Expanding local: adding local.base_vars as *terraform.NodeLocal\n2026-01-13T11:26:42.758-0500 [TRACE] vertex \"local.base_vars (expand)\": entering dynamic subgraph\n2026-01-13T11:26:42.758-0500 [TRACE] vertex \"local.base_vars\": starting visit (*terraform.NodeLocal)\n2026-01-13T11:26:42.758-0500 [TRACE] vertex \"local.base_vars\": belongs to\n2026-01-13T11:26:42.758-0500 [TRACE] vertex \"local.template\": starting visit (*terraform.NodeLocal)\n2026-01-13T11:26:42.758-0500 [TRACE] vertex \"local.template\": belongs to\n2026-01-13T11:26:42.759-0500 [TRACE] vertex \"local.template\": visit complete\n2026-01-13T11:26:42.759-0500 [TRACE] vertex \"local.base_vars\": visit complete\n2026-01-13T11:26:42.759-0500 [TRACE] vertex \"root\": starting visit (terraform.graphNodeRoot)\n2026-01-13T11:26:42.759-0500 [TRACE] vertex \"root\": does not belong to any module instance\n2026-01-13T11:26:42.759-0500 [TRACE] vertex \"root\": visit complete\n2026-01-13T11:26:42.759-0500 [TRACE] vertex \"local.template (expand)\": dynamic subgraph completed successfully\n2026-01-13T11:26:42.759-0500 [TRACE] vertex \"local.template (expand)\": visit complete\n2026-01-13T11:26:42.759-0500 [TRACE] vertex \"root\": starting visit (terraform.graphNodeRoot)\n2026-01-13T11:26:42.759-0500 [TRACE] vertex \"root\": does not belong to any module instance\n2026-01-13T11:26:42.759-0500 [TRACE] vertex \"root\": visit complete\n2026-01-13T11:26:42.759-0500 [TRACE] vertex \"local.base_vars (expand)\": dynamic subgraph completed successfully\n2026-01-13T11:26:42.759-0500 [TRACE] vertex \"local.base_vars (expand)\": visit complete\n2026-01-13T11:26:42.759-0500 [TRACE] vertex \"output.s3_name (expand)\": starting visit (*terraform.nodeExpandOutput)\n2026-01-13T11:26:42.760-0500 [TRACE] vertex \"output.s3_name (expand)\": does not belong to any module instance\n2026-01-13T11:26:42.760-0500 [TRACE] vertex \"output.s3_name (expand)\": expanding dynamic subgraph\n2026-01-13T11:26:42.760-0500 [TRACE] Expanding output: adding output.s3_name as *terraform.NodeApplyableOutput\n2026-01-13T11:26:42.760-0500 [TRACE] vertex \"output.s3_name (expand)\": entering dynamic subgraph\n2026-01-13T11:26:42.760-0500 [TRACE] vertex \"output.s3_name\": starting visit (*terraform.NodeApplyableOutput)\n2026-01-13T11:26:42.760-0500 [TRACE] vertex \"output.s3_name\": belongs to\n2026-01-13T11:26:42.761-0500 [ERROR] vertex \"output.s3_name\" error: Too many function arguments\n2026-01-13T11:26:42.761-0500 [TRACE] vertex \"output.s3_name\": visit complete, with errors\n2026-01-13T11:26:42.761-0500 [TRACE] dag/walk: upstream of \"root\" errored, so skipping\n2026-01-13T11:26:42.761-0500 [TRACE] vertex \"output.s3_name (expand)\": dynamic subgraph encountered errors: Too many function arguments\n2026-01-13T11:26:42.761-0500 [ERROR] vertex \"output.s3_name (expand)\" error: Too many function arguments\n2026-01-13T11:26:42.761-0500 [TRACE] vertex \"output.s3_name (expand)\": visit complete, with errors\n2026-01-13T11:26:42.761-0500 [TRACE] dag/walk: upstream of \"root\" errored, so skipping\n2026-01-13T11:26:42.761-0500 [TRACE] statemgr.Filesystem: removing lock metadata file .terraform.tfstate.lock.info\n2026-01-13T11:26:42.761-0500 [TRACE] statemgr.Filesystem: unlocking terraform.tfstate using fcntl flock\n```\n\n\n### Expected Behavior\n\n```\nterraform plan\n\nChanges to Outputs:\n  + s3_name = \"aws-test-use1-s3_bucket\"\n\nYou can apply this plan to save these new output values to the Terraform state, without changing any real infrastructure.\n```\n\n### Actual Behavior\n\nterraform plan\n\u2577\n\u2502 Error: Too many function arguments\n\u2502 \n\u2502   on template_string.tf line 13, in output \"s3_name\":\n\u2502   13:   value = templatestring(local.template, local.base_vars, {resource = \"s3_bucket\"})\n\u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502     \u2502 while calling templatestring(template, vars)\n\u2502     \u2502 local.base_vars is object with 3 attributes\n\u2502     \u2502 local.template is \"${service_name}-${environment}-${location}-${resource}\"\n\u2502 \n\u2502 Function \"templatestring\" expects only 2 argument(s).\n\n### Steps to Reproduce\n\n1. `terraform plan`\n\n### Additional Context\n\nI\u2019m encountering an error when running this configuration stating that templatestring expects only two arguments. However, the Terraform documentation mentions that you can specify additional arguments to provide multiple variables to the template. \n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hi @Extra-Citron-7630,\n\nThanks for filing the issue. The `templatestring` function appears to be working as designed, however the function documentation was changed for some reason. The original docs can be seen in the v1.9 release here: https://developer.hashicorp.com/terraform/language/v1.9.x/functions/templatestring\n\nThanks!",
      "labels": [
        "bug",
        "documentation",
        "new"
      ],
      "created_at": "2026-01-13T16:30:02Z",
      "closed_at": "2026-01-19T11:22:27Z",
      "url": "https://github.com/hashicorp/terraform/issues/38054",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 36740,
      "title": "replace_triggered_by doesn't report error if given attribute references don't exist",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.11.2\non linux_amd64\n```\n\n### Terraform Configuration Files\n\n```terraform\nresource \"null_resource\" \"r1\" {\n}\n\nresource \"null_resource\" \"r2\" {\n    lifecycle {\n        replace_triggered_by = [null_resource.r1.foo.bar.baz[0].bif] # does not error, but should\n        # replace_triggered_by = [null_resource.r3] # correctly reports error\n    }\n}\n```\n\n### Debug Output\n\nnone\n\n### Expected Behavior\n\nI expect the configuration above to yield an error.  `null_resource.r1.foo.bar.baz[0].bif` is not a real attribute reference.\n\n### Actual Behavior\n\n```\n$ terraform apply\nnull_resource.r1: Refreshing state... [id=1800298252482723122]\nnull_resource.r2: Refreshing state... [id=3647057674329973682]\n\nNo changes. Your infrastructure matches the configuration.\n\nTerraform has compared your real infrastructure against your configuration and found no differences, so no changes are needed.\n\nApply complete! Resources: 0 added, 0 changed, 0 destroyed.\n```\n\n### Steps to Reproduce\n\n1. `terraform init`\n2. `terraform apply`\n\n### Additional Context\n\nSince `replace_triggered_by` is expecting a list of resources or attributes, I'd expect that it would check that those references at least were valid references.  It's extremely easy to make a mistake here (e.g., forgetting [0], or a typo, etc) and for a resource not to get replaced because of that typo.\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-03-20T17:20:04Z",
      "closed_at": "2025-12-17T19:50:53Z",
      "url": "https://github.com/hashicorp/terraform/issues/36740",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 38027,
      "title": "Terraform crashes with nil pointer dereference during backend migration when permission errors occur",
      "problem": "### Terraform Version\nLatest from main branch (as of 2025-12-23)\n\n### Terraform Configuration Files\n```hcl\nterraform {\n  backend \"gcs\" {\n    bucket = \"my-terraform-state-bucket\"\n    prefix = \"live/global/backend\"\n  }\n}\n```\n\n### Expected Behavior\nWhen migrating from local backend to GCS backend, if the user lacks sufficient permissions (e.g., `storage.objects.get`), Terraform should display a clear error message indicating the permission issue.\n\n### Actual Behavior\nTerraform crashes with a nil pointer dereference panic.\n\n### Steps to Reproduce\n1. Create a GCS bucket for Terraform state\n2. Ensure your user has permission to create the bucket but NOT `storage.objects.get` permission (e.g., only has `storage.buckets.create`)\n3. Configure a GCS backend in your Terraform configuration\n4. Run `terraform init` to migrate from local state to GCS backend\n\n### Crash Output\n```\n\u276f tf init -migrate-state\nInitializing the backend...\n\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\nTerraform crashed! This is always indicative of a bug within Terraform.\nPlease report the crash with Terraform[1] so that we can fix this.\n\nWhen reporting bugs, please include your terraform version, the stack trace\nshown below, and any additional information which may help replicate the issue.\n\n[1]: https://github.com/hashicorp/terraform/issues\n\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\npanic: runtime error: invalid memory address or nil pointer dereference\ngoroutine 1 [running]:\nruntime/debug.Stack()\n\truntime/debug/stack.go:26 +0x64\ngithub.com/hashicorp/terraform/internal/logging.PanicHandler()\n\tgithub.com/hashicorp/terraform/internal/logging/panic.go:84 +0x16c\npanic({0x105b0bbc0?, 0x107f97bd0?})\n\truntime/panic.go:783 +0x120\ngithub.com/hashicorp/terraform/internal/command.(*Meta).backendMigrateState_s_s(0x140006fe000, 0x1400041cd90)\n\tgithub.com/hashicorp/terraform/internal/command/meta_backend_migrate.go:321 +0x768\ngithub.com/hashicorp/terraform/internal/command.(*Meta).backendMigrateState(0x140006fe000, 0x1400041cd90)\n\tgithub.com/hashicorp/terraform/internal/command/meta_backend_migrate.go:138 +0x414\ngithub.com/hashicorp/terraform/internal/command.(*Meta).backend_C_r_s(0x140006fe000, 0x140004fc500, 0x7828c893, 0x140007482a0, 0x1400067f418)\n\tgithub.com/hashicorp/terraform/internal/command/meta_backend.go:1215 +0xfe4\ngithub.com/hashicorp/terraform/internal/command.(*Meta).backendFromConfig(0x140006fe000, 0x1400049f418)\n\tgithub.com/hashicorp/terraform/internal/command/meta_backend.go:780 +0xdd0\ngithub.com/hashicorp/terraform/internal/command.(*Meta).Backend(0x140006fe000, 0x0?)\n\tgithub.com/hashicorp/terraform/internal/command/meta_backend.go:119 +0x60\ngithub.com/hashicorp/terraform/internal/command.(*InitCommand).initBackend(0x140006fe000, {0x1061f4b50?, 0x140000fedc0?}, 0x1400070f9e0, {{0x1050446bd?, 0x1028b3fbc?}, 0x1400000f428?}, 0x48, {0x1061fb760, 0x1400011c110})\n\tgithub.com/hashicorp/terraform/internal/command/init.go:360 +0xd80\ngithub.com/hashicorp/terraform/internal/command.(*InitCommand).run(0x140006fe000, 0x140006380d0, {0x1061fb760, 0x1400011c110})\n\tgithub.com/hashicorp/terraform/internal/command/init_run.go:185 +0xa90\ngithub.com/hashicorp/terraform/internal/command.(*InitCommand).Run(0x140006fe000, {0x1400011a200?, 0x105be05a0?, 0x0?})\n\tgithub.com/hashicorp/terraform/internal/command/init.go:74 +0x120\ngithub.com/hashicorp/cli.(*CLI).Run(0x140003ea280)\n\tgithub.com/hashicorp/cli@v1.1.7/cli.go:265 +0x420\nmain.realMain()\n\tgithub.com/hashicorp/terraform/main.go:339 +0x1784\nmain.main()\n\tgithub.com/hashicorp/terraform/main.go:64 +0x1c\n```\n\n### Root Cause\nIn `internal/command/meta_backend_migrate.go` around line 284-323, the code calls `opts.Destination.StateMgr()` which can return errors in the diagnostics. However, the code only handles the specific case of `backend.ErrDefaultWorkspaceNotSupported`:\n\n```go\ndestinationState, sDiags := opts.Destination.StateMgr(opts.destinationWorkspace)\nif sDiags.HasErrors() && sDiags.Err().Error() == backend.ErrDefaultWorkspaceNotSupported.Error() {\n    // Special handling for workspace not supported...\n}\n// No handling for OTHER errors - destinationState is nil!\nif err := destinationState.RefreshState(); err != nil {  // <- CRASH: nil pointer dereference\n```\n\nWhen any error OTHER than `ErrDefaultWorkspaceNotSupported` occurs (such as permission errors, network errors, etc.), the code skips the if block, leaving `destinationState` as `nil`, then immediately tries to call `destinationState.RefreshState()`, causing the panic.\n\n### Additional Context\nThis is similar to #24100 which reported the same crash for the OSS backend. The root cause is identical - the code doesn't properly handle all error cases from `StateMgr()`.\n\nThe bug affects any backend migration scenario where `StateMgr()` returns an error that isn't `ErrDefaultWorkspaceNotSupported`, including:\n- GCS backend with insufficient permissions (as shown here)\n- OSS backend (as reported in #24100)\n- Potentially other backends with similar error conditions\n\n### Fix Available\nI have a fix ready that properly handles all errors from `StateMgr()` by adding an else clause to return the error immediately instead of allowing the code to continue with a nil `destinationState`. Will submit a PR shortly.",
      "solution": "Same issue:\n```\n\n> terraform apply\n\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\nTerraform crashed! This is always indicative of a bug within Terraform.\nPlease report the crash with Terraform[1] so that we can fix this.\n\nWhen reporting bugs, please include your terraform version, the stack trace\nshown below, and any additional information which may help replicate the issue.\n\n[1]: https://github.com/hashicorp/terraform/issues\n\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\nvalue is marked, so must be unmarked first\ngoroutine 8486 [running]:\nruntime/debug.Stack()\n\t/Users/runner/hostedtoolcache/go/1.21.1/x64/src/runtime/debug/stack.go:24 +0x64\nruntime/debug.PrintStack()\n\t/Users/runner/hostedtoolcache/go/1.21.1/x64/src/runtime/debug/stack.go:16 +0x1c\ngithub.com/hashicorp/terraform/internal/logging.PanicHandler()\n\t/Users/runner/work/terraform/terraform/internal/logging/panic.go:58 +0x164\npanic({0x10304e8a0?, 0x10363e060?})\n\t/Users/runner/hostedtoolcache/go/1.21.1/x64/src/runtime/panic.go:920 +0x26c\ngithub.com/zclconf/go-cty/cty.Value.assertUnmarked(...)\n\t/Users/runner/go/pkg/mod/github.com/zclconf/go-cty@v1.14.0/cty/marks.go:141\ngithub.com/zclconf/go-cty/cty.Value.AsString({{{0x10367bb88?, 0x14000132bd9?}}, {0x1032db9a0?, 0x14009c562a0?}})\n\t/Users/runner/go/pkg/mod/github.com/zclconf/go-cty@v1.14.0/cty/value_ops.go:1385 +0x54\ngithub.com/zclconf/go-cty/cty.Value.Range({{{0x10367bb88?, 0x14000132bd9?}}, {0x1032db9a0?, 0x14009c562a0?}})\n\t/Users/runner/go/pkg/mod/github.com/zclconf/go-cty@v1.14.0/cty/value_range.go:53 +0x25c\ngithub.com/hashicorp/hcl/v2/hclsyntax.(*ConditionalExpr).Value(0x140014393b0, 0x14009c56288)\n\t/Users/runner/go/pkg/mod/github.com/hashicorp/hcl/v2@v2.18.0/hclsyntax/expression.go:746 +0x9dc\ngithub.com/hashicorp/terraform/internal/lang.(*Scope).EvalExpr(0x14009c2fcb0, {0x10367c258?, 0x140014393b0}, {{0x10367c3a8?, 0x104e38580?}})\n\t/Users/runner/work/terraform/terraform/internal/lang/eval.go:175 +0x17c\ngithub.com/hashicorp/terraform/internal/terraform.(*nodeModuleVariable).evalModuleVariable(0x140090c9ce0, {0x103696450?, 0x14004c4b500?}, 0x58?)\n\t/Users/runner/work/terraform/terraform/internal/terraform/node_module_variable.go:248 +0x1dc\ngithub.com/hashicorp/terraform/internal/terraform.(*nodeModuleVariable).Execute(0x140090c9ce0, {0x103696450, 0x14004c4b500}, 0x80?)\n\t/Users/runner/work/terraform/terraform/internal/terraform/node_module_variable.go:183 +0xd8\ngithub.com/hashicorp/terraform/internal/terraform.(*ContextGraphWalker).Execute(0x140050325a0, {0x103696450, 0x14004c4b500}, {0x1310cb838, 0x140090c9ce0})\n\t/Users/runner/work/terraform/terraform/internal/terraform/graph_walk_context.go:143 +0xa0\ngithub.com/hashicorp/terraform/internal/terraform.(*Graph).walk.func1({0x1033c6a60, 0x140090c9ce0})\n\t/Users/runner/work/terraform/terraform/internal/terraform/graph.go:78 +0x280\ngithub.com/hashicorp/terraform/internal/dag.(*Walker).walkVertex(0x140090c9da0, {0x1033c6a60, 0x140090c9ce0}, 0x14009c08b40)\n\t/Users/runner/work/terraform/terraform/internal/dag/walk.go:384 +0x2a8\ncreated by github.com/hashicorp/terraform/internal/dag.(*Walker).Update in goroutine 3209\n\t/Users/runner/work/terraform/terraform/internal/dag/walk.go:307 +0xb0c\n```",
      "labels": [
        "bug",
        "crash"
      ],
      "created_at": "2025-12-23T18:32:37Z",
      "closed_at": "2026-01-14T11:41:25Z",
      "url": "https://github.com/hashicorp/terraform/issues/38027",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 38043,
      "title": "Support a function: `env()` to read an environment variable",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.14.0-dev\non linux_amd64\n\nYour version of Terraform is out of date! The latest version\nis 1.14.3. You can update by downloading from https://developer.hashicorp.com/terraform/install\n```\n\n### Use Cases\n\nTFC allows [manually generate workload identity tokens](https://developer.hashicorp.com/terraform/cloud-docs/dynamic-provider-credentials/manual-generation), which end up to be:\n\n> ... each plan and apply will have a TFC_WORKLOAD_IDENTITY_TOKEN variable available in the run environment, which contains a [workload identity token](https://developer.hashicorp.com/terraform/cloud-docs/workspaces/dynamic-provider-credentials/workload-identity-tokens).\n>\n> You can use this environment variable in custom agent hooks to enable custom auth workflows or to perform auth with providers which are not natively supported by dynamic credentials.\n\nNormally, a provider that supports workload identity won't explicitly honor the env var `TFC_WORKLOAD_IDENTITY_TOKEN[_TAG]`, instead it can has a dedicated provider attribute with another name, and optionally with another honored env var name, e.g. `oidc_token` (with env var `OIDC_TOKEN`).\n\nIn this case, it seems the only possible way to *perform auth with providers which are not natively supported by dynamic credentials* is to somehow read the value of env var `TFC_WORKLOAD_IDENTITY_TOKEN` and set it to the target provider's config.\n\nApart from the use case in TFC, it actually applies to all other environments where you don't have direct access to, e.g. github workflow, AzureDevops pipeline, etc.\n\n### Attempted Solutions\n\nFrom: https://github.com/microsoft/terraform-provider-azuredevops/issues/1479\n\n```\ndata \"external\" \"env\" { program = [\"jq\", \"-n\", \"{TFC_WORKLOAD_IDENTITY_TOKEN: env.TFC_WORKLOAD_IDENTITY_TOKEN}\"] }\n\nprovider \"azuredevops\" {\n  org_service_url = \"https://dev.azure.com/${var.organization}\"\n\n  use_oidc = var.ado_use_oidc\n  oidc_token    = data.external.env.result.TFC_WORKLOAD_IDENTITY_TOKEN\n  client_id = var.ado_client_id\n  tenant_id = var.ado_tenant_id\n}\n```\n\nAlternatively, I can think of using some 3rd-party providers that expose a function to read a env var.\n\n### Proposal\n\nSupport a 1st class function: `env()`, similar to https://developer.hashicorp.com/packer/docs/templates/hcl_templates/functions/contextual/env.\n\n### References\n\n_No response_",
      "solution": "Thanks for this feature request! If you are viewing this issue and would like to indicate your interest, please use the \ud83d\udc4d reaction on the issue description to upvote this issue. We also welcome additional use case descriptions. Thanks again!\n\n---\n\nFWIW, I believe the intention behind the `TFC_WORKLOAD_IDENTITY_TOKEN` environment variable is for it to be consumed by [HCP Terraform Agent hooks](https://developer.hashicorp.com/terraform/cloud-docs/agents/hooks), rather than by Terraform CLI directly. The quoted documentation refers to this as \"custom agent hooks\".\n\nSpecifically, [a hook can generate a file with additional environment variables](https://developer.hashicorp.com/terraform/cloud-docs/agents/hooks#setting-terraform-environment-variables), so the hook code can check for the `TFC_WORKLOAD_IDENTITY_TOKEN` environment variable and then write out a `TF_VAR_`-prefixed environment variable whose name matches an input variable that was declared as ephemeral in the root module.\n\nThe OIDC features in HCP Terraform Workspaces are designed under the assumption that it's HCP Terraform Agent that configures the credentials. Historically that was done by the agent automatically writing out an AWS credentials file that the `hashicorp/aws` provider would implicitly use. Ephemeral input variables now offer a different solution where you can pass the token into the module directly, but nonetheless these features were still designed for HCP Terraform Agent to handle it, rather than Terraform CLI handling it itself.\n\n(The federated identity features in HCP Terraform Stacks are easier to use, because the ephemeral values are passed directly into input variables, rather than relying on environment variables and special hooks.)\n\n---\n\nWith all of that said: I don't see any technical reason why a provider couldn't offer an ephemeral resource types for returning one or more values from environment variables. There are already community-maintained providers that expose environment variables as _data sources_, written before ephemeral resources were implemented.\n",
      "labels": [
        "enhancement",
        "new"
      ],
      "created_at": "2026-01-06T23:32:33Z",
      "closed_at": "2026-01-07T14:35:04Z",
      "url": "https://github.com/hashicorp/terraform/issues/38043",
      "comments_count": 12
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37761,
      "title": "Avoid unnecessary data lookup deferral",
      "problem": "### Terraform Version\n\n```shell\n1.5.4\n```\n\n### Use Cases\n\nWhen one resource that is managed by Terraform has dependent resources that are not managed by Terraform, it is sometimes necessary to use a data resource to retrieve the calculated attributes of the dependent resources.\n\nCurrently _any_ planned changes to the resource that is managed by Terraform will cause the data resource to be deferred to apply time. Even if the properties that are changing are not referenced by the data resource.\n\nFor any downstream resources that depend on the outputs of the data resource, they are forced plan pessimistically (usually a destroy and recreate).\n\nThis could be avoided if the logic that decides whether a data resource must be deferred was updated to look for any planned changes in each specific input, rather than considering resources as a whole.\n\n**Example scenario**\n\nA concrete scenario where we've encountered this was with the AWS provider. A planned change to a Transit Gateway prefix list was causing a planned drop and recreate of other TGW resources.\n\nThe same scenario exists with the VPC endpoint resource, which requires a separate data resource to retrieve the private ID for an interface endpoint.\n\nIn general, this is not a problem with any specific provider, but occurs any time the following setup is needed (where creating a \"thing_a\" will cause a \"thing_b\" to be automatically created)\n\n```\nresource \"foo_thing_a\" \"a\" {\n  some_property = \"foo\"\n}\n\ndata \"foo_thing_b\" \"b\" {\n  id = foo_thing_a.a.id\n}\n\nresource \"foo_thing_c\" \"c\" {\n  some_property = data.foo_thing_b.b.some_property\n}\n```\n\nIn the above scenario, a change to \"some_property\" guarantees the deferral of the data resource, which may cause \"c\" to be destroyed and recreated. This happens even if Terraform could work out that the ID of \"a\" wasn't planned to change.\n\n### Attempted Solutions\n\nThere are 3 workarounds for this that I know of.\n\n**1 - Live with it**\n\nSometimes it's harmless to have downstream resources be recreated. While it results in a messy plan, it may not cause any problems.\n\n**2 - Use custom diff logic**\n\nCustom diff logic in the provider resources can be used to override the default behavior. AWS tried this and found it was not a good option (they rolled back the change).\n\n**3 - Add extra outputs to the resources to avoid the data lookup**\n\nSometimes using a data resource can be avoided by adding the outputs to the main resource. This makes sense in certain circumstances (and was ultimately what AWS did) but it breaks encapsulation and complicates the provider.\n\n\n### Proposal\n\nI propose that the core Terraform logic is updated so that data lookup deferral only happens if the specific properties upon which the data resource depends are unknown until apply time.\n\n```\nresource \"foo_thing_a\" \"a\" {\n  property1 = \"p1\" # Changing this causes a possible change to \"output1\"\n  property2 = \"p2\" # Changing this doesn't cause a change to \"output1\"\n}\n\ndata \"foo_thing_b\" \"b\" {\n  id = foo_thing_a.a.output1\n}\n```\n\nIn the above setup, if the configuration has a change to proprety1, the schema would indicate that output1 may change. When the data resource is considered, it has to be be deferred.\n\nHowever, if the configuration only has a change to property2, then the schema would indicate that output1 will not change. The data resource can then be safely executed at plan time.\n\n### References\n\nHere are some examples of AWS grappling with this issue and trying the various workarounds.\n\nhttps://github.com/hashicorp/terraform-provider-aws/issues/30085 (demonstrates the side effect)\nhttps://github.com/hashicorp/terraform-provider-aws/pull/41292 (workaround 2)\nhttps://github.com/hashicorp/terraform-provider-aws/pull/43405 (workaround 2)\nhttps://github.com/hashicorp/terraform-provider-aws/pull/43436 (workaround 3)\nhttps://github.com/hashicorp/terraform-provider-aws/issues/43706 (my suggestion to AWS to rollback workaround 2)\n",
      "solution": "Hi @industrialzombie,\n\nThis is a known inconsistency with data resources in Terraform, which was only maintained for backwards compatibility. There were too many configurations depending on the way implicit dependencies works, and not enough time to deprecate and migrate all those configurations. The workaround is to indirect the reference between the data source and the managed resource.\n\n```\nresource \"foo_thing_a\" \"a\" {\n  some_property = \"foo\"\n}\n\nlocals {\n  foo_thing_a_id = foo_thing_a.a.id\n}\n\ndata \"foo_thing_b\" \"b\" {\n  id = local.foo_thing_a_id\n}\n\nresource \"foo_thing_c\" \"c\" {\n  some_property = data.foo_thing_b.b.some_property\n}\n```\n\nThis disconnects the implicit `depends_on` from the data source to the resource, and then planning can proceed only based on whether the data source's configuration is entirely known or not. See also #32042 and #30083 among others.\n\n---\n\nHey thanks @jbardin,\n\nI wasn't aware of this workaround - thank you for documenting it here for anyone facing the same issue in the future!\n\nSpeaking of documentation, this workaround used to be clearly documented (up to v1.11) but seems to have been reworded in the documentation (v1.12 onwards).\n\n```\nIn order to ensure that data sources are accessing the most up to date information possible\nin a wide variety of use cases, arguments directly referencing managed resources are treated\nthe same as if the resource was listed in depends_on. This behavior can be avoided when\ndesired by indirectly referencing the managed resource values through a local value, unless\nthe data resource itself has [custom conditions](https://developer.hashicorp.com/terraform/language/v1.11.x/data-sources#custom-condition-checks).\n```\nhttps://developer.hashicorp.com/terraform/language/v1.11.x/data-sources#data-resource-dependencies\n\n```\nTerraform correctly detects dependencies in your configuration, even when indirectly reference\na Terraform-managed resource values through a local value.\n```\nhttps://developer.hashicorp.com/terraform/language/v1.12.x/data-sources#dependencies\n\nI would be interested to know if anything changed in the provider; and if not, whether this workaround could be added back into the documentation.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "documentation"
      ],
      "created_at": "2025-10-10T17:19:54Z",
      "closed_at": "2025-12-12T13:29:33Z",
      "url": "https://github.com/hashicorp/terraform/issues/37761",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37702,
      "title": "Display the place were module was called",
      "problem": "### Description\n\nI use my module in many places like:\n```\nmodule \"a-aaaa-alb\" {\n  source = \"../a-aaaa-subdomain\"\n...\n\nmodule \"a-aaaa-base-domain\" {\n  count  = var.project_name == \"essentials\" ? 0 : 1\n  source = \"../a-aaaa-subdomain\"\n...\n\nmodule \"a-aaaa-portal-domain\" {\n  source = \"../a-aaaa-subdomain\"\n...\n\n```\n\nit would be nice to show from which module call these errors came:\n\n```\n Error: Invalid count argument\n\u2502\n\u2502   on modules/a-aaaa-subdomain/main.tf line 8, in resource \"aws_route53_record\" \"subdomain_A\":\n\u2502    8:   count = local.create_alias\n\u2502\n\u2502 The \"count\" value depends on resource attributes that cannot be determined until apply, so Terraform\n\u2502 cannot predict how many instances will be created. To work around this, use the -target argument to\n\u2502 first apply only the resources that the count depends on.\n\u2575\n\u2577\n\u2502 Error: Invalid count argument\n\u2502\n\u2502   on modules/a-aaaa-subdomain/main.tf line 8, in resource \"aws_route53_record\" \"subdomain_A\":\n\u2502    8:   count = local.create_alias\n\u2502\n\u2502 The \"count\" value depends on resource attributes that cannot be determined until apply, so Terraform\n\u2502 cannot predict how many instances will be created. To work around this, use the -target argument to\n\u2502 first apply only the resources that the count depends on.\n\u2575\n\u2577\n\u2502 Error: Invalid count argument\n\u2502\n\u2502   on modules/a-aaaa-subdomain/main.tf line 8, in resource \"aws_route53_record\" \"subdomain_A\":\n\u2502    8:   count = local.create_alias\n\u2502\n\u2502 The \"count\" value depends on resource attributes that cannot be determined until apply, so Terraform\n\u2502 cannot predict how many instances will be created. To work around this, use the -target argument to\n\u2502 first apply only the resources that the count depends on.\n\u2575\n```\nError messages are exactly the same for every usage of module.\n\n### Affected Resource(s) or Data Source(s)\n\n* module\n\n### Potential Terraform Configuration\n\n```hcl\n\n```\n\n\n### References\n\nMoved from [here](https://github.com/hashicorp/terraform-provider-aws/issues/44441)\n\n### Would you like to implement the enhancement?\n\nNo",
      "solution": "Since we have not heard back in a while I'm going to close the issue. If you have any updates regarding the issue, feel free to open a new issue with the requested information. If you have more questions, you can also use [the community forum](https://discuss.hashicorp.com/c/terraform-core) where there are more people ready to help.\n\nThanks!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new",
        "waiting for reproduction"
      ],
      "created_at": "2025-09-30T17:17:38Z",
      "closed_at": "2025-12-12T13:30:53Z",
      "url": "https://github.com/hashicorp/terraform/issues/37702",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37938,
      "title": "Issue importing resources when upgraded to v1.14.0 from v1.13.5.",
      "problem": "### Terraform Version\n\n```shell\nv1.14.0\n```\n\n### Terraform Configuration Files\n\n```terraform\n...terraform config...\n```\n\n\n### Debug Output\n\ndoes not work on v1.14.0\n```terraform import -var-file input.json aws_vpc.default vpc-HIDDEN\ndata.external.git_version: Reading...\ndata.external.git_version: Read complete after 0s [id=-]\naws_vpc.default: Importing from ID \"vpc-HIDDEN\"...\ndata.aws_api_gateway_rest_api.probe: Reading...\ndata.aws_acm_certificate.issued: Reading...\nmodule.target_account.data.aws_region.current: Reading...\nmodule.target_account.data.aws_caller_identity.current: Reading...\naws_vpc.default: Import prepared!\n  Prepared aws_vpc for import\naws_vpc.default: Refreshing state... [id=vpc-HIDDEN]\nmodule.target_account.data.aws_region.current: Read complete after 0s [id=us-east-1]\nmodule.target_account.data.aws_caller_identity.current: Read complete after 0s [id=HIDDEN]\ndata.aws_api_gateway_rest_api.probe: Read complete after 0s [id=HIDDEN]\ndata.aws_acm_certificate.issued: Read complete after 0s [id=arn:aws:acm:us-east-1:HIDDEN:certificate/HIDDEN]\nmodule.terraform_state_account.data.aws_caller_identity.current: Reading...\nmodule.terraform_state_account.data.aws_region.current: Reading...\nmodule.terraform_state_account.data.aws_region.current: Read complete after 0s [id=us-east-1]\nmodule.terraform_state_account.data.aws_caller_identity.current: Read complete after 0s [id=HIDDEN]\n\u2577\n\u2502 Error: Invalid for_each argument\n\u2502\n\u2502   on ../modules/peer/main.tf line 23, in resource \"aws_route\" \"ipv4_private_routes\":\n\u2502   23:   for_each = var.destination_cidr_block != \"\" ? var.private_route_table_ids : {}\n\u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502     \u2502 var.destination_cidr_block is \"10.1.0.0/16\"\n\u2502     \u2502 var.private_route_table_ids is a map of string, known only after apply\n\u2502\n\u2502 The \"for_each\" map includes keys derived from resource attributes that cannot be determined until apply, and so Terraform cannot determine the full set of keys that will identify the instances of this resource.\n\u2502\n\u2502 When working with unknown values in for_each, it's better to define the map keys statically in your configuration and place apply-time results only in the map values.\n\u2502\n\u2502 Alternatively, you could use the -target planning option to first apply only the resources that the for_each value depends on, and then apply a second time to fully converge.\n\u2575\n\n\u2577\n\u2502 Error: Invalid for_each argument\n\u2502\n\u2502   on ../modules/private_dns_zone/main.tf line 12, in resource \"aws_route53_record\" \"private\":\n\u2502   12:   for_each = {\n\u2502   13:     for record in var.records :\n\u2502   14:     record.name => record\n\u2502   15:   }\n\u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502     \u2502 var.records is a list of object, known only after apply\n\u2502\n\u2502 The \"for_each\" map includes keys derived from resource attributes that cannot be determined until apply, and so Terraform cannot determine the full set of keys that will identify the instances of this resource.\n\u2502\n\u2502 When working with unknown values in for_each, it's better to define the map keys statically in your configuration and place apply-time results only in the map values.\n\u2502\n\u2502 Alternatively, you could use the -target planning option to first apply only the resources that the for_each value depends on, and then apply a second time to fully converge.\n\u2575\n```\n\nworks fine on on v1.13.5\n```\nterraform import -var-file input.json aws_vpc.default vpc-HIDDEN\ndata.external.git_version: Reading...\ndata.external.git_version: Read complete after 0s [id=-]\nmodule.terraform_state_account.data.aws_caller_identity.current: Reading...\nmodule.terraform_state_account.data.aws_region.current: Reading...\nmodule.terraform_state_account.data.aws_region.current: Read complete after 0s [id=us-east-1]\nmodule.terraform_state_account.data.aws_caller_identity.current: Read complete after 0s [id=HIDDEN]\naws_vpc.default: Importing from ID \"HIDDEN\"...\ndata.aws_api_gateway_rest_api.probe: Reading...\ndata.aws_acm_certificate.issued: Reading...\naws_vpc.default: Import prepared!\n  Prepared aws_vpc for import\nmodule.target_account.data.aws_caller_identity.current: Reading...\naws_vpc.default: Refreshing state... [id=vpc-HIDDEN]\nmodule.target_account.data.aws_region.current: Reading...\nmodule.target_account.data.aws_region.current: Read complete after 0s [id=us-east-1]\nmodule.target_account.data.aws_caller_identity.current: Read complete after 0s [id=HIDDEN]\ndata.aws_api_gateway_rest_api.probe: Read complete after 0s [id=HIDDEN]\ndata.aws_acm_certificate.issued: Read complete after 1s [id=arn:aws:acm:us-east-1:HIDDEN:certificate/HIDDEN]\n\nImport successful!\n\nThe resources that were imported are shown above. These resources are now in\nyour Terraform state and will henceforth be managed by Terraform.\n```\n\n\n### Expected Behavior\n\nAs seem in the above v1.13.5 the resource should have successfully been imported\n\n### Actual Behavior\n\nIt fails given an error which is not helpful as we need these resources to be dynamic.\n\n### Steps to Reproduce\n\nterraform import aws_vpc.default vpc-123\n\n### Additional Context\n\nterraform apply works fine in both versions. I believe the issue is when you are importing and tfstate is not fully flushed out.\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hi @tomelliot16,\n\nThanks for filing the issue. Can you supply a configuration to reproduce the issue? Without a minimal reproducible example it's going to be difficult to pinpoint what might have changed to block your `import` command from working. \n\nThanks!\n\n\n---\n\nHi @tomelliot16,\n\nThanks for the example. The issue was created referencing v1.13.5, but your repro here uses v0.13 and v0.14. Those are very old versions of Terraform, and don't represent what is supported today. Are you certain this worked with v1.13?\n\n---\n\nInteresting yeah that was a total typo. And yes I run with v1.13.5 I cannot import successful with the above. What's crazy I know that using a large terraform project that I'm trying to simplify from we did succeed for months with v1.13/v1.12 and are able to run it as seen in the ticket description. I will keep digging into it. Funny enough I may have found a workaround for v1.14.0 but I still don't understand why it seems to work in v1.13.5.",
      "labels": [
        "bug",
        "waiting-response",
        "new",
        "waiting for reproduction"
      ],
      "created_at": "2025-11-24T20:11:22Z",
      "closed_at": "2025-12-12T17:06:27Z",
      "url": "https://github.com/hashicorp/terraform/issues/37938",
      "comments_count": 10
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37985,
      "title": "Terraform S3 Backend fails with \"No valid credential sources found\" using aws login",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.14.0\non linux_amd64\n+ provider registry.terraform.io/hashicorp/aws v6.18.0\n\nYour version of Terraform is out of date! The latest version\nis 1.14.1. You can update by downloading from https://developer.hashicorp.com/terraform/install\n```\n\n### Terraform Configuration Files\n\n```terraform\nterraform {\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"6.25.0\"\n    }\n  }\n\n  backend \"s3\" {\n    bucket = \"bucket-name\"\n    key    = \"state.tfstate\"\n    region = \"eu-west-1\"\n  }\n}\n\nprovider \"aws\" {\n  region = \"eu-west-1\"\n\n  default_tags {\n    tags = {\n      Environment = \"dev\"\n      Owner       = \"Jane Doe\"\n      Project     = local.service_name\n    }\n  }\n}\n```\n\n\n### Debug Output\n\nI do not think is needed since the issue is very straightforward\n\n### Expected Behavior\n\nTerraform S3 backend should use the credentials set up after aws login command. \n\n### Actual Behavior\n\nTerraform init fails with this error:\n```\n\u2577\n\u2502 Error: No valid credential sources found\n\u2502 \n\u2502 Please see https://developer.hashicorp.com/terraform/language/backend/s3\n\u2502 for more information about providing credentials.\n\u2502 \n\u2502 Error: failed to refresh cached credentials, no EC2 IMDS role found, operation error ec2imds: GetMetadata,\n\u2502 request canceled, context deadline exceeded\n\u2502 \n\u2575\n```\n\n### Steps to Reproduce\n\n1. aws login\n2. terraform init\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-12-10T18:14:58Z",
      "closed_at": "2025-12-10T18:41:32Z",
      "url": "https://github.com/hashicorp/terraform/issues/37985",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37987,
      "title": "Add proper support for conditional resources",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.14.1\n```\n\n### Use Cases\n\nCreating \"golden modules\" that need to elegantly support optional resources / configurations for different development teams.\n\n### Attempted Solutions\n\nUsing \"count\" and \"for each\" methods that are awkward at best.\n\n### Proposal\n\nOpenTofu 1.11.0 has delivered on a feature people have been asking for in Terraform FOR YEARS. The OpenTofu team seems to have more momentum in delivering on these requests than Hashicorp Terraform. While I don't particularly agree with the reason this project spun off (licensing), it does seem they are delivering on the idea of being more responsive to what people ask for.\n\nPlease try to keep Terraform at least on-par with what the OpenTofu team is delivering, by including a proper method of conditionally deploying resources based on a simple variable value. One that does not run into interpolation errors that current count and for each workarounds often generate.\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "new"
      ],
      "created_at": "2025-12-10T19:15:19Z",
      "closed_at": "2025-12-10T19:55:50Z",
      "url": "https://github.com/hashicorp/terraform/issues/37987",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37978,
      "title": "Action fails if attribute is configured to be WriteOnly",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.15.0-alpha20251203\n```\n\n### Terraform Configuration Files\n\n```terraform\n\nephemeral \"foxcon_schema_credentials\" \"test\" {}\n\naction \"foxcon_set_subject_mode\" \"ro\" {\n  config {\n    subject_name = var.subject_name\n    mode = \"READONLY\"\n    rest_endpoint = ephemeral.foxcon_schema_credentials.test.rest_endpoint\n  }\n}\n```\n\n\n### Debug Output\n\n```\n\u2577\n\u2502 Error: WriteOnly Attribute Not Allowed\n\u2502\n\u2502   with action.foxcon_set_subject_mode.ro,\n\u2502   on main.tf line 114, in action \"foxcon_set_subject_mode\" \"ro\":\n\u2502  114:     rest_endpoint = ephemeral.foxcon_schema_credentials.test.rest_endpoint\n\u2502\n\u2502 The resource contains a non-null value for WriteOnly attribute rest_endpoint. Write-only attributes are only supported in Terraform 1.11 and later.\n\u2575\n```\n\n\n### Expected Behavior\n\nI was expecting to be able to use ephemeral resources attribute in action since action`s attribute is Write-Only. Terraform versions is the latest available.\n\n### Actual Behavior\n\nI am getting a weird error saying I should be using terraform 1.11 or later.\n\n### Steps to Reproduce\n\n1. Create an action with Write-Only attributes\n2. Configure the write-only attribute with output from ephemeral resource\n3. Run terraform plan\n\n### Additional Context\n\nATM it is not possible to set sensitive parameter for an action attribute. I am trying to use ephemeral resource output with actions having write-only attribute.\n\naction schema:\n```go\nfunc (a *subjectModeAction) Schema(ctx context.Context, req action.SchemaRequest, resp *action.SchemaResponse) {\n\tresp.Schema = schema.Schema{\n\t\tAttributes: map[string]schema.Attribute{\n\t\t\t\"rest_endpoint\": schema.StringAttribute{\n\t\t\t\tOptional:    true,\n\t\t\t\tWriteOnly:   true,\n\t\t\t\tDescription: \"Schema registry rest endpoint\",\n\t\t\t},\n\t\t\t\"subject_name\": schema.StringAttribute{\n\t\t\t\tRequired:    true,\n\t\t\t\tDescription: \"Name of the subject\",\n\t\t\t},\n\t\t\t\"mode\": schema.StringAttribute{\n\t\t\t\tRequired:    true,\n\t\t\t\tDescription: \"Subject mode\",\n\t\t\t},\n\t\t},\n\t\tBlocks: map[string]schema.Block{\n\t\t\t\"credentials\": schema.SingleNestedBlock{\n\t\t\t\tAttributes: map[string]schema.Attribute{\n\t\t\t\t\t\"key\": schema.StringAttribute{\n\t\t\t\t\t\tOptional:  true,\n\t\t\t\t\t\tWriteOnly: true,\n\t\t\t\t\t},\n\t\t\t\t\t\"secret\": schema.StringAttribute{\n\t\t\t\t\t\tOptional:  true,\n\t\t\t\t\t\tWriteOnly: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t}\n}\n```\n\nAs soon as I set a value to the `rest_endpoint` terraform starts to fail with the below error:\n\n```\nThe resource contains a non-null value for WriteOnly attribute rest_endpoint. Write-only attributes are only supported in Terraform 1.11 and later.\n```\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\nN/A",
      "solution": "Hi @fox-md,\n\nThanks for filing the issue! This error message is not coming from Terraform however, it seems to be a validation problem in the plugin framework. It would be great if you could file the issue over there. Thanks!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new",
        "actions"
      ],
      "created_at": "2025-12-08T08:07:06Z",
      "closed_at": "2025-12-08T14:53:59Z",
      "url": "https://github.com/hashicorp/terraform/issues/37978",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37703,
      "title": "Terraform 1.12.0 crashes on terraform init with invalid memory address or nil pointer dereference",
      "problem": "### Terraform Version\n\n```shell\nv1.12.0\n```\n\n### Terraform Configuration Files\n\n```terraform\n...terraform config...\n```\n\n\n### Debug Output\n\n```\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\nTerraform crashed! This is always indicative of a bug within Terraform.\nPlease report the crash with Terraform[1] so that we can fix this.\n\nWhen reporting bugs, please include your terraform version, the stack trace\nshown below, and any additional information which may help replicate the issue.\n\n[1]: https://github.com/hashicorp/terraform/issues\n\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\npanic: runtime error: invalid memory address or nil pointer dereference\ngoroutine 1 [running]:\nruntime/debug.Stack()\n\truntime/debug/stack.go:26 +0x5e\ngithub.com/hashicorp/terraform/internal/logging.PanicHandler()\n\tgithub.com/hashicorp/terraform/internal/logging/panic.go:84 +0x16a\npanic({0x3346320?, 0x5c8e160?})\n\truntime/panic.go:792 +0x132\ngithub.com/hashicorp/terraform/internal/configs.(*Module).CheckCoreVersionRequirements(0x419ad4?, {0x0, 0x0, 0x0}, {0x0, 0x0})\n\tgithub.com/hashicorp/terraform/internal/configs/module.go:734 +0x45\ngithub.com/hashicorp/terraform/internal/configs.(*Config).CheckCoreVersionRequirements(0xc000870620)\n\tgithub.com/hashicorp/terraform/internal/configs/config.go:1051 +0x45\ngithub.com/hashicorp/terraform/internal/terraform.CheckCoreVersionRequirements(0xc000602c40?)\n\tgithub.com/hashicorp/terraform/internal/terraform/version_required.go:25 +0x18\ngithub.com/hashicorp/terraform/internal/command.(*InitCommand).Run(0xc000602c40, {0xc000070120?, 0x0?, 0x0?})\n\tgithub.com/hashicorp/terraform/internal/command/init.go:248 +0x14e5\ngithub.com/hashicorp/cli.(*CLI).Run(0xc00059d040)\n\tgithub.com/hashicorp/cli@v1.1.7/cli.go:265 +0x4de\nmain.realMain()\n\tgithub.com/hashicorp/terraform/main.go:339 +0x1deb\nmain.main()\n\tgithub.com/hashicorp/terraform/main.go:64 +0x13\n```\n\n### Expected Behavior\n\nterraform init should initialize the working directory without crashing.\n\n### Actual Behavior\n\nTerraform crashes with a nil pointer dereference panic.\n\n### Steps to Reproduce\n\n1. Run terraform init\n\n### Additional Context\n\nWe use `terraform-exec` library with a orchestrator. Our workers use shared pv for terraform operations. The thing is we face with this behaviour 1-2% of our operations. So we can not reproduce on demand.\n\nAliyun oss as backend and below openstack provider. \n```\n    openstack = {\n      source  = \"terraform-provider-openstack/openstack\"\n      version = \">= 1.34.1, < 2.0.0\"\n    }\n```\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hi @TuanSSM,\n\nThanks for filing the issue. The last supported release of v1.12 was v1.12.2, which has a couple additional patches if you want to verify whether that changes anything. \nIn order to fix something however, we need to verify what happens in the current release, so we need a way to reproduce this with v1.14. The config handling has changed a little recently, so you may find that it's no longer possible to induce the condition which led to the error.\n\nSeeing you you mention Terraform is being run through an orchestrator, with this config related crash happening intermittently, the situation that comes to mind is a filesystem race condition around the configuration itself rather than something non-deterministic within Terraform.\n\nThanks!\n\n---\n\nSince we have not heard back in a while I'm going to close the issue. If you have any updates regarding the issue, feel free to open a new issue with the requested information. If you have more questions, you can also use [the community forum](https://discuss.hashicorp.com/c/terraform-core) where there are more people ready to help.\n\nThanks!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new",
        "waiting for reproduction"
      ],
      "created_at": "2025-10-01T06:19:32Z",
      "closed_at": "2025-12-08T19:31:04Z",
      "url": "https://github.com/hashicorp/terraform/issues/37703",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37722,
      "title": "panic: checkable object status report for unexpected checkable object after 1.13.3 upgrade",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.3\non linux_amd64\n```\n\n### Terraform Configuration Files\n\n```terraform\nmodule \"my_platform_coordinates\" {\n  for_each       = toset(contains(var.features_opt-out, \"chart-remote-monitoring-stack\") ? [] : [var.platform.stage])\n  platform_stage = each.key\n  source         = \"tfe.corp.com/Global-Module-Sharing/cmdb/corp\"\n}\n```\n\n\n### Debug Output\n\n```\npanic: checkable object status report for unexpected checkable object module.kube_components.module.my_platform_coordinates[\"dev\"].var.platform_stage\ngoroutine 11579 [running]:\nruntime/debug.Stack()\n\truntime/debug/stack.go:26 +0x5e\ngithub.com/hashicorp/terraform/internal/logging.PanicHandler()\n\tgithub.com/hashicorp/terraform/internal/logging/panic.go:84 +0x16a\npanic({0x34fe320?, 0xc01b7d7400?})\n\truntime/panic.go:792 +0x132\ngithub.com/hashicorp/terraform/internal/terraform.(*Graph).walk.func1.1()\n\tgithub.com/hashicorp/terraform/internal/terraform/graph.go:59 +0x4c5\npanic({0x34fe320?, 0xc01b7d7400?})\n\truntime/panic.go:792 +0x132\ngithub.com/hashicorp/terraform/internal/checks.(*State).reportCheckResult(0xc009272cd8, {0x44a9ce0, 0xc00dc86990}, 0x6, 0x0, 0x50)\n\tgithub.com/hashicorp/terraform/internal/checks/state_report.go:108 +0x345\ngithub.com/hashicorp/terraform/internal/checks.(*State).ReportCheckResult(0x3aa6f20?, {0x44a9ce0?, 0xc00dc86990?}, 0xc00e009360?, 0x410?, 0xf?)\n\tgithub.com/hashicorp/terraform/internal/checks/state_report.go:73 +0xc5\ngithub.com/hashicorp/terraform/internal/terraform.evalVariableValidations({{0xc00dc84540, 0x2, 0x2}, {{}, {0xc004905d00, 0xe}}}, {0x44cd0c0, 0xc018c1ae00}, {0xc0069c16d0, 0x1, ...}, ...)\n\tgithub.com/hashicorp/terraform/internal/terraform/eval_variable.go:322 +0x1072\ngithub.com/hashicorp/terraform/internal/terraform.(*nodeVariableValidation).Execute(0xc014ecb680, {0x44cd0c0, 0xc014715300}, 0x50?)\n\tgithub.com/hashicorp/terraform/internal/terraform/node_variable_validation.go:126 +0x23e\ngithub.com/hashicorp/terraform/internal/terraform.(*ContextGraphWalker).Execute(0xc012ba94a0, {0x44cd0c0, 0xc014715300}, {0x7fbe708b2080, 0xc014ecb680})\n\tgithub.com/hashicorp/terraform/internal/terraform/graph_walk_context.go:163 +0xad\ngithub.com/hashicorp/terraform/internal/terraform.(*Graph).walk.func1({0x399fd00, 0xc014ecb680})\n\tgithub.com/hashicorp/terraform/internal/terraform/graph.go:143 +0x7c3\ngithub.com/hashicorp/terraform/internal/dag.(*Walker).walkVertex(0xc007ff8540, {0x399fd00, 0xc014ecb680}, 0xc005e88d80)\n\tgithub.com/hashicorp/terraform/internal/dag/walk.go:393 +0x2d1\ncreated by github.com/hashicorp/terraform/internal/dag.(*Walker).Update in goroutine 356\n\tgithub.com/hashicorp/terraform/internal/dag/walk.go:316 +0xf33\n```\n\n\n### Expected Behavior\n\nterraform shouldn't have crashed.\nshould have released its lock\n\n### Actual Behavior\n\nterraform crashed\n\n### Steps to Reproduce\n\nunclear, saw that issue once\n\n### Additional Context\n\nI upgraded our dev envs from terraform 1.12.2 to 1.13.3 couple days ago.\nYesterday, colleague of mine brought this up to me.\n\nWeirdly enough, the apply that failed, ran from a chain, where that module nor its parent had no diffs. Chain should have changed one local file, and some kubernetes object, completely unrelated, no shared variables, no dependencies\n\nTFE module involved had no changes in the last 2 weeks. Returns with a list of environments metadata, from local yaml files/part of that TFE module, based on search filters from inputs/variables.\nIn that TFE module, data is loaded with:\n\n```\nlocals {\n  matched_platforms = fileset(\"${path.module}/data/\", \"*.yml\")\n  known_platforms = {\n    for i in local.matched_platforms :\n    replace(reverse(split(\"/\", i))[0], \".yml\", \"\") => yamldecode(file(\"${path.module}/data/${i}\"))\n  }\n...\n```\n\nThen input filters are applied, only to return matches.\n\nChain was generated few minutes before running apply.\nConditions to include that module or not did not change -- in this case, it shouldn't be included at all, ternary should resolve to `[]`. Can't find any trace of that module in plan, beyond it being cloned at terraform init time.\n\nStill we should note: if the condition checked in that ternary returned otherwise, that `my_platform_coordinates[\"dev\"]` is exactly what I would have expected to find in my terraform plan logs.\n\nI couldn't find any changes in git either, that may suggest ternary's conditions would have resulted in inclusion.\nObject wasn't in chain to be applied ...\n\nCan't make sense out of it.\nSeen only once. That pipeline has been running fine before and after. Other dev environments are fine as well.\nStill, from the traces and recent changelogs, I'm a bit suspicious about https://github.com/hashicorp/terraform/pull/37001/files\n\nShould I be worried about promoting 1.13.3 further?\nAny chance this would be unrelated to upgrading terraform?\nWhat could it be?\n\nSorry I don't have much more. Let me know if there's anything else I can test trying to reproduce. Or if I'm just over-reacting.\n\nThanks.\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hi @faust64,\n\nThanks for filing the issue! Definitely not an overreaction, anytime you see a `panic` it represents a bug that we should fix, rather than some sort of transient runtime error. I doubt this is directly related to the upgrade, and it's definitely unrelated to the linked PR which has no impact on variable validations or graph structure. We've had a few reports with a very similar stack trace before, but none were followed up on with enough information to debug it, so I don't think it's something unique to 1.13, it's just a difficult to reproduce.\n\nIf you can produce a trace log with `TF_LOG_CORE=trace`, even with a successful apply, that might help track down the issue. It's going to be something related to the particular structure of the configuration and variable validation, so any related configuration would help too.\n\nThanks!\n\n---\n\nSince we have not heard back in a while I'm going to close the issue. If you have any updates regarding the issue, feel free to open a new issue with the requested information. If you have more questions, you can also use [the community forum](https://discuss.hashicorp.com/c/terraform-core) where there are more people ready to help.\n\nThanks!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "waiting-response",
        "new"
      ],
      "created_at": "2025-10-03T08:43:37Z",
      "closed_at": "2025-12-08T19:32:51Z",
      "url": "https://github.com/hashicorp/terraform/issues/37722",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37554,
      "title": "Make parallelism a provider-level configuration",
      "problem": "### Terraform Version\n\n```shell\n1.13\n```\n\n### Use Cases\n\nMany TF users are devloping pluings for APIs with various rate limiting and thoughput requirements. \nhttps://developer.hashicorp.com/terraform/cli/commands/apply#parallelism-n is a good solution for these, but asking the end user to remember enabling this flag for this one provider is a bad UX.\n\n\n\n### Attempted Solutions\n\nJust asking end users to set https://developer.hashicorp.com/terraform/cli/commands/apply#parallelism-n for our provider. When they forget to do so, rate limiting errors occur (core issue we're working around) and those can be quite cryptic. It's not clear for them that a flag for TF is required.\n\n### Proposal\n\nI'd like to be able to to bake parallelism into provider level field so the user is not required to set it, but can do so if they want.\n\nAdditionally, it would be great if parallelism could be managed on per-resource level but I understand that this would require significant redesign of graph walking algorithm.\n\n### References\n\n- https://discuss.hashicorp.com/t/specify-parallelism-for-null-resource/20884\n- https://discuss.hashicorp.com/t/per-provider-parallelism-options-for-disabling/57479",
      "solution": "Hi @ror6ax,\n\nThe parallelism flag isn't really meant to be a solution for API rate limits, it is used for the graph walk, applying equally to every object Terraform evaluates. That isn't really something that we would give providers control of, because it affects a great number of things outside of that provider's control, including other providers.\n\nProviders themselves are the only source of what they need for rate limiting, and already have the ability to implement that themselves (some already do). If the provider is setting their own rate limiting, and implementing that rate limiting, how does Terraform need to be involved in the process?\n\nThanks!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "waiting-response",
        "new"
      ],
      "created_at": "2025-09-03T11:56:54Z",
      "closed_at": "2025-12-08T19:39:42Z",
      "url": "https://github.com/hashicorp/terraform/issues/37554",
      "comments_count": 6
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37536,
      "title": "Terraform 0.14 \u2192 1.13.1: apply re-creates existing AWS resources (VPC/Subnets/NAT) instead of updating despite S3 remote state",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.1\non linux_amd64\n+ provider registry.terraform.io/hashicorp/aws v5.**x**\n+ provider registry.terraform.io/hashicorp/kubernetes v2.**x**\n+ provider registry.terraform.io/hashicorp/helm v2.**x**\n\n# Previously working on:\nTerraform v0.14.x\n+ provider registry.terraform.io/hashicorp/aws v3.**x**\n```\n\n### Terraform Configuration Files\n\nlocals {\n  # Your cluster name is set in module.eks as `cluster_name = var.name`.\n  # Keep this exactly the same expression the module uses.\n  cluster_name = var.name\n}\n\nprovider \"aws\" {\n  region = var.region\n  assume_role {\n    role_arn = \"arn:aws:iam::${var.target_account_id}:role/terraform\"\n  }\n}\n\n# EKS endpoint & CA (does not create a cycle because we don't reference module outputs)\ndata \"aws_eks_cluster\" \"this\" {\n  name = local.cluster_name\n}\n\n# Kubernetes provider: talk to EKS directly (no kubeconfig file needed)\nprovider \"kubernetes\" {\n  host                   = data.aws_eks_cluster.this.endpoint\n  cluster_ca_certificate = base64decode(data.aws_eks_cluster.this.certificate_authority[0].data)\n\n  # Use AWS CLI exec to fetch a token (works well in CI)\n  exec {\n    api_version = \"client.authentication.k8s.io/v1beta1\"\n    command     = \"aws\"\n    args        = [\n      \"eks\", \"get-token\",\n      \"--cluster-name\", local.cluster_name,\n      \"--region\", var.region,\n      \"--role-arn\", \"arn:aws:iam::${var.target_account_id}:role/terraform\"\n    ]\n  }\n}\n\n# Helm provider: piggyback on the same EKS connection\nprovider \"helm\" {\n  kubernetes {\n    host                   = data.aws_eks_cluster.this.endpoint\n    cluster_ca_certificate = base64decode(data.aws_eks_cluster.this.certificate_authority[0].data)\n\n    exec {\n      api_version = \"client.authentication.k8s.io/v1beta1\"\n      command     = \"aws\"\n      args        = [\n        \"eks\", \"get-token\",\n        \"--cluster-name\", local.cluster_name,\n        \"--region\", var.region,\n        \"--role-arn\", \"arn:aws:iam::${var.target_account_id}:role/terraform\"\n      ]\n    }\n  }\n}\n\n# (Optional) remote state \u2013 make sure encrypt is boolean\ndata \"terraform_remote_state\" \"state\" {\n  backend = \"s3\"\n  config = {\n    bucket         = var.backend_config_bucket\n    region         = var.backend_config_bucket_region\n    key            = \"${var.name}/${var.backend_config_tfstate_file_key}\"\n    dynamodb_table = \"terraform_locks\"\n    encrypt        = true\n  }\n}\n\n\nvpc.tf:\n`module \"vpc\" {\n  source = \"terraform-aws-modules/vpc/aws\"\n  version = \"~> 5.0\"\n  name = var.name\n  cidr = var.vpc_cidr\n\n  azs             = var.azs\n  private_subnets = var.private_subnets\n  public_subnets  = var.public_subnets\n\n  enable_nat_gateway = var.enable_nat_gateway\n  single_nat_gateway = var.single_nat_gateway\n\n  enable_dns_support   = var.enable_dns_support\n  enable_dns_hostnames = var.enable_dns_hostnames\n\n  tags = merge(\n    {\n      format(\"kubernetes.io/cluster/%s\", var.name) = \"shared\"\n    },\n    {\n      \"Terraform\" = \"true\"\n    },\n  )\n\n  public_subnet_tags = merge(\n    {\n      \"kubernetes.io/role/elb\" = \"1\"\n    },\n    {\n      \"type\" = \"public\"\n    },\n  )\n\n  private_subnet_tags = merge(\n    {\n      format(\"kubernetes.io/cluster/%s\", var.name) = \"shared\"\n    },\n    {\n      \"kubernetes.io/role/internal-elb\" = \"1\"\n    },\n    {\n      \"type\" = \"private\"\n    },\n  )\n}\n\n`\n\n### Debug Output\n\n```\nPlan: 316 to add, 0 to change, 0 to destroy.\n```\n\n\n### Expected Behavior\n\nAfter upgrading Terraform from v0.14.x to v1.13.1, terraform apply should recognize the existing remote state in S3 and update the existing resources in-place (e.g., upgrade EKS from 1.29 to 1.30, adjust subnets/NAT if needed), not create duplicates.\n\n### Actual Behavior\n\nWith Terraform v1.13.1, terraform apply proposes creating entirely new resources instead of updating existing ones.\n\nConcrete symptoms:\n\nAn existing VPC tagged/name \u201cqa\u201d remains, but apply creates a second VPC.\n\nSubnets and NAT Gateways are also duplicated (2\u00d7 subnets, 2\u00d7 NAT gateways, etc.).\n\nThe state backend is S3 with DynamoDB locking. State exists and was previously used on v0.14.x.\n\n### Steps to Reproduce\n\nInitial (working) setup on 0.14.x\n\nterraform init -reconfigure -backend-config=\"bucket=REDACTED\" -backend-config=\"key=qa/global.tfstate\" -backend-config=\"region=REDACTED\" -backend-config=\"dynamodb_table=terraform_locks\"\n\nterraform apply \u2192 creates aws_vpc.qa (and in real config: EKS + networking).\n\nUpgrade to 1.13.1\n\nUpgrade to Terraform v1.13.1 and providers (AWS ~>5).\n\n(Real-world parity) Keep key = \"${var.name}/...\" in backend; keep var.name = \"qa\" (intended to be unchanged).\n\nterraform init -upgrade -reconfigure -backend-config=\"bucket=REDACTED\" -backend-config=\"key=qa/global.tfstate\" -backend-config=\"region=REDACTED\" -backend-config=\"dynamodb_table=terraform_locks\"\n\nterraform plan / terraform apply\n\nObserved: plan/apply attempts to create a new VPC and other resources instead of recognizing the pre-existing ones from the same S3 state.\n\n### Additional Context\n\nWhat I already tried\nrm -rf .terraform && terraform init -reconfigure (with explicit backend-config values).\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Since we have not heard back in a while I'm going to close the issue. If you have any updates regarding the issue, feel free to open a new issue with the requested information. If you have more questions, you can also use [the community forum](https://discuss.hashicorp.com/c/terraform-core) where there are more people ready to help.\n\nThanks!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "waiting-response",
        "new"
      ],
      "created_at": "2025-08-30T23:33:17Z",
      "closed_at": "2025-12-08T19:40:38Z",
      "url": "https://github.com/hashicorp/terraform/issues/37536",
      "comments_count": 6
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37330,
      "title": "Terraform import failure for azure firewall policy with private-ip-range configuration",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.12.2\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/azurerm v3.117.1\n```\n\n### Terraform Configuration Files\n\n\nproviders.tf\n```\nterraform {\n  required_providers {\n    azurerm = {\n      source  = \"hashicorp/azurerm\"\n      version = \"~> 3.0\"\n    }\n  }\n}\n\nprovider \"azurerm\" {\n  features {}\n}\n```\nmain.tf\n```\nimport {\n  to = azurerm_firewall_policy.fw_policy \n  id = \"/subscriptions/<SubscriptionIDRedacted>/resourceGroups/<ResourceGroupNameRedacted>/providers/Microsoft.Network/firewallPolicies/<FirewallPolicyNameRedacted>\"\n}\n```\n\n\n### Debug Output\n\n```\n<script src=\"https://gist.github.com/vcsekhar/5b79b38e2607cacc6ccff06294578f56.js\"></script>\n\n```\n\n\n### Expected Behavior\n\nazure firewall policy should have been imported successfully\n\n### Actual Behavior\n\nfailed saying \nAttribute private_ip_ranges requires 1 item minimum, but config has only 0 declared.\n\n\n\n### Steps to Reproduce\n\n1. terraform init\n2.  terraform plan -generate-config-out=generated.tf \n\n### Additional Context\n\n<img width=\"2454\" height=\"1476\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/2ef5aa54-fdd2-4640-95f5-b7bde3cac712\" />\n<img width=\"2972\" height=\"1070\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/de2ae9c4-b9d1-4a37-8773-277442f6ca89\" />\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Since we have not heard back in a while I'm going to close the issue. If you have any updates regarding the issue, feel free to open a new issue with the requested information. If you have more questions, you can also use [the community forum](https://discuss.hashicorp.com/c/terraform-core) where there are more people ready to help.\n\nThanks!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "waiting-response",
        "new"
      ],
      "created_at": "2025-07-16T01:18:24Z",
      "closed_at": "2025-12-08T19:40:57Z",
      "url": "https://github.com/hashicorp/terraform/issues/37330",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 30469,
      "title": "Ability to not store certain attributes in TF state",
      "problem": "Terraform state can contain secrets, this is well documented. But sometimes, there are situations where I absolutely just don't want Terraform to retain the secret value.\r\n\r\n### Current Terraform Version\r\n<!---\r\nRun `terraform version` to show the version, and paste the result between the ``` marks below. This will record which version was current at the time of your feature request, to help manage the request backlog.\r\n\r\nIf you're not using the latest version, please check to see if something related to your request has already been implemented in a later version.\r\n-->\r\n\r\n```\r\nTerraform v1.1.5\r\non darwin_amd64\r\n```\r\n\r\n### Use-cases\r\n<!---\r\nIn order to properly evaluate a feature request, it is necessary to understand the use-cases for it.\r\n\r\nPlease describe below the _end goal_ you are trying to achieve that has led you to request this feature.\r\n\r\nPlease keep this section focused on the problem and not on the suggested solution. We'll get to that in a moment, below!\r\n-->\r\n\r\nLet's assume that TF is run as a service account which has the ability to create resources, and make some modifications to that resource. And let's assume that resources is a cloud database as well. The TF service account can create and set the initial user of the cloud database instance, but it doesn't immediately have access to the data in the database.\r\n\r\nAgain, let's assume the IAM permissions on the TF service account let it create the DB and initial user, but do not let it update the password for the DB. \r\n\r\nWhat I would like is a way to allow TF to bootstrap creating the DB, setting the initial static admin username and password, passing those same credentials on to be stored in HashiCorp Vault. This could be static KV secrets or the database secret engine used to create dynamic credentials by policy. TF would read a random password from the Vault `sys/policies/password/*/generate` path, and use that to set a random password for the admin user. In the end, the TF state file would not have stored the values from the Vault data source, or the cloud database resource in the TF state.\r\n\r\nNote: this assumes the TF user knows that they need to ignore changes and otherwise compensate for the fact that the IAM permissions may not allow for updating the password and/or the random password would change on each TF run.\r\n\r\n### Attempted Solutions\r\n<!---\r\nIf you've already tried to solve the problem within Terraform's existing features and found a limitation that prevented you from succeeding, please describe it below in as much detail as possible.\r\n\r\nIdeally, this would include real configuration snippets that you tried, real Terraform command lines you ran, and what results you got in each case.\r\n\r\nPlease remove any sensitive information such as passwords before sharing configuration snippets and command lines.\r\n--->\r\nI tried using `lifecycle.ignore_changes` - this works from a user experience perspective in that it will bootstrap the user and not change it on subsequent runs, but it still stores the actual password in the TF state.\r\n\r\n\r\n```hcl\r\nresource \"vault_generic_secret\" \"db_password\" {\r\n  path = \"secret/db\"\r\n\r\n  data_json = jsonencode({ password = data.vault_generic_secret.random_pw.data.password })\r\n  disable_read = true\r\n\r\n  lifecycle {\r\n    ignore_changes = [\r\n      data_json\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\n### Proposal\r\n<!---\r\nIf you have an idea for a way to address the problem via a change to Terraform features, please describe it below.\r\n\r\nIn this section, it's helpful to include specific examples of how what you are suggesting might look in configuration files, or on the command line, since that allows us to understand the full picture of what you are proposing.\r\n\r\nIf you're not sure of some details, don't worry! When we evaluate the feature request we may suggest modifications as necessary to work within the design constraints of Terraform Core.\r\n-->\r\nA setting, similar to `sensitive_attributes`, that tells TF to store the empty / zero version of that attribute's type in the state and not the actual value used at runtime.\r\n\r\nUnlike `sensitive_attributes`, this would need to be configurable by the user, similar to `lifecycle.ignore_changes`.\r\n\r\n```hcl\r\nresource \"vault_generic_secret\" \"db_password\" {\r\n  path = \"secret/db\"\r\n\r\n  data_json = jsonencode({ password = data.vault_generic_secret.random_pw.data.password })\r\n  disable_read = true\r\n\r\n  lifecycle {\r\n    ignore_changes = [\r\n      data, data_json\r\n    ]\r\n    do_not_store = [\r\n      data, data_json\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\nThis will cause config drift for user's who enable this and do not have a full grasp of where it is used.\r\n",
      "solution": "Hi @mbrancato! Thanks for sharing this use-case.\r\n\r\nA key part of meeting this request would be some way to ensure it doesn't cause Terraform to send invalid data to providers when performing the typical resource instance lifecycle actions that rely on previously-saved data: read, update, and delete. The current API contract is that a provider will receive exactly what it previously returned, and so providers are in principle allowed to rely on any attribute being preserved verbatim from the previous run.\r\n\r\nJust naively dropping any arbitrary attribute would therefore break this contract and thus cause providers to misbehave, potentially to the point of crashing altogether if the resulting object is something that the provider could never have generated itself and therefore not an input it's built to expect.\r\n\r\nThis part of the problem could potentially be addressed by adding something new to the provider schema model to allow providers to nominate a particular subset of their attributes as \"identifying\", which would then make them ineligible to be excluded from the state to ensure that they'll always be preserved for future operations. Providers would then presumably _not_ mark attributes likely to accept sensitive values as being identifying.\r\n\r\nA second part of the problem is that anything that's not included in the state must today not be available for references elsewhere, because references get populated from the state. In this case, that means that if you were to make `data.vault_generic_secret.random_pw.data.password` not be stored in the state then it would be forbidden to refer to it in any other resource, which seems like it would defeat the object here. (I see that you were talking about excluding the `data_json` attribute of the managed resource from the state, but I assume you'd also want to exclude the secret password you read from the data resource from the state, or else there would be no purpose to excluding it from the managed resource.)\r\n\r\nGiven all of this, I think a successful design to meet this use-case would need to address both of the following in detail:\r\n* How would we prevent excluding from the state attributes that the provider relies on for future operations against the same object? How exactly is that represented in the provider wire protocol, and how will it work with existing providers that don't yet support this extension? Each resource type implementation can currently make its own rules about this, so I expect that the answer will be to add something to the resource type schema to describe those subtleties, but perhaps there is a more general solution I'm not considering.\r\n* What restrictions will need to be imposed on making use of state-excluded data elsewhere in the configuration? In particular, what should happen when Terraform is asked to evaluate an expression derived from a value that was known on a previous run but not recorded in the state, and therefore has no known value for the current run?\r\n\r\n\r\n\r\n\n\n---\n\n@apparentlymart I might have missed something but I'll try to address your following points:\r\n\r\n- It's certainly possible to just let the provider fail ungracefully if the developer excluded from the state some important data that it has to use, I think this is a novelty security feature which only security oriented developers will be attracted to, and they will know to identify what can be removed from the state or not, also in big providers if we see this feature implemented I'm sure that providers will include a way to warn developers on what can and can't be excluded from the state\r\n- I think that whatever attribute is being included in the `do_not_store` list, should be replaced with a `REDACTED` or equivalent type of string that would imply to the running terraform that is fetching the state and trying to use this attribute, that this attribute has been redacted for security reasons from the state, and to gracefully throw an error message explaining the wrong use of the attribute, that way the developer will know not to use secrets that are placed in state files and to fetch them appropriately from their source and store them only in memory which is a better security practice.\r\n\r\nThanks for your response on the issue and I hope this can be implemented in some kind of way in the future!\n\n---\n\nI agree this would be nice. Especially with data objects it should be possible. \r\n\r\nRight now it happens that I want to use a data-object so I can reference certains attributes of this data object in my configuration, but I still want to keep other (sensitive) attributes from my state file. This is not possible right now. Even though i'm not using those specific attributes of the data object, they are still visible in my state file. My workaround would be to stop using data-objects and hardcoding certain things in my configurations, but the drawbacks regarding maintainability are way to large (possible breaking changes, the possibility that I introduce invalid configurations, etcetera)",
      "labels": [
        "enhancement",
        "new"
      ],
      "created_at": "2022-02-03T19:05:29Z",
      "closed_at": "2026-01-07T19:46:07Z",
      "url": "https://github.com/hashicorp/terraform/issues/30469",
      "comments_count": 16
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37971,
      "title": "Replacing security group on RDS instance leads to DetachNetworkInterface error",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.14.1\non windows_amd64\n+ provider registry.terraform.io/hashicorp/aws v6.23.0\n```\n\n### Terraform Configuration Files\n\n```terraform\nterraform {\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~> 6.0\"\n    }\n  }\n}\n\nprovider \"aws\" {\n  # target aws region.\n  region = \"eu-west-1\"\n}\n\nresource \"aws_db_instance\" \"default\" {\n  allocated_storage             = 10\n  db_name                       = \"mydb\"\n  engine                        = \"mysql\"\n  engine_version                = \"8.0\"\n  instance_class                = \"db.t3.micro\"\n  username                      = \"foo\"\n  password                      = \"baaaaaar\"\n  vpc_security_group_ids        = [ \"sg-09f7d1e78103ed6ae\",\n                                    \"sg-0a87fcac2744665d7\", aws_security_group.db.id ]\n  #depends_on = [ aws_security_group.manual ]\n}\n\nresource \"aws_security_group\" \"db\" {\n  name        = \"terraform-sg\"\n  description = \"created by terraform\"\n  #lifecycle {\n  #  create_before_destroy = true\n  #}\n}\n```\n\n\n### Debug Output\n\n```\n\u2502 Error: deleting ENIs using Security Group (sg-0f5b9958c2158ca75): 1 error occurred:\n\u2502       * detaching RDS ENI (eni-04cf7c00b668f5c36): detaching EC2 Network Interface (eni-04cf7c00b668f5c36/eni-attach-059627e484b57d0bf): operation error EC2: DetachNetworkInterface, https response error StatusCode: 400, RequestID: 2a02fe21-82b3-4156-95b1-65dc63adc66e, api error AuthFailure: You do not have permission to access the specified resource.\n```\n\n\n### Expected Behavior\n\nNot to get RDS ENI detached.\n\n### Actual Behavior\n\nterraform tries to detach network interface instead of just replacing one security group.\n\n### Steps to Reproduce\n\n1. Create the terraform stack\n2. Update the security group resource so it should be replaced for example update the name\n3. terraform will fail with error `deleting ENIs using Security Group`\n\n### Additional Context\n\nThe setup is just having RDS instance with security group created with terraform and one day you decide to replace that security group. Terraform plan will say the whole list of security groups will be deleted even though we just change only one security group from the list (which is unexpected). I suppose terraform deletes asks to delete all security groups on the network interface, but network interface has to have at least one group, the network interface gets detached. But the network interface belongs to RDS instance and we don't have rights to detach network interface managed by RDS.\n\n```\nTerraform will perform the following actions:\n\n  # aws_db_instance.default will be updated in-place\n  ~ resource \"aws_db_instance\" \"default\" {\n        id                                    = \"db-DE3JEYDG3KGUHGRHTZE7XCV3FY\"\n        tags                                  = {}\n      ~ vpc_security_group_ids                = [\n          - \"sg-09f7d1e78103ed6ae\",\n          - \"sg-0a87fcac2744665d7\",\n          - \"sg-0f5b9958c2158ca75\",\n        ] -> (known after apply)\n        # (72 unchanged attributes hidden)\n    }\n```\n\nBecause `vpc_security_group_ids` argument is a set, removing or adding security group gets tracked properly and added/removed by terraform with expected plan output. But if you have reference to a resource, terraform outputs change of the whole list instead of just the resource. I suppose since the new resource is not created and the id is not know, terraform decides to mark the whole list as deleted (I am not sure if this is a bug).\n\nI tried to add `depends_on = [ aws_security_group.manual ]` on the aws_db_instance resource, but it didn't help. Actually once somehow I managed to make it work, but I can't reproduce it consistently. I assume it is race condition/undefined behavior. Using `create_before_destroy = true` doesn't help either.\n\nThe only way to make it work is to remove the security group from `vpc_security_group_ids` before is recreated (terraform apply) and added it back after it is recreated (terraform apply again). Terraform will know what is the security group id to be added in the list and properly notice only one element from the set is changed and the network interface won't be detached.\n\nI belie this bug can happen also on EC2, but because I don't get error there I didn't want to investigate it further. Maybe there are other configurations that could lead to the same situation.\n\n\n### References\n\nI am not sure if this one is similar: https://github.com/hashicorp/terraform/issues/30741\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "The issue you link is exactly what I am experiencing. I didn't know where to look and what to search for. Now it is clear. Thanks @jbardin !\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "provider/aws",
        "new"
      ],
      "created_at": "2025-12-04T16:27:27Z",
      "closed_at": "2025-12-04T17:17:56Z",
      "url": "https://github.com/hashicorp/terraform/issues/37971",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37974,
      "title": "Cannot return ephemeral output from a component in Terraform Stacks",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.14.1\non darwin_arm64\n+ provider registry.terraform.io/alekc/kubectl v2.1.3\n+ provider registry.terraform.io/hashicorp/aws v6.20.0\n+ provider registry.terraform.io/hashicorp/cloudinit v2.3.7\n+ provider registry.terraform.io/hashicorp/helm v2.17.0\n+ provider registry.terraform.io/hashicorp/kubernetes v2.38.0\n+ provider registry.terraform.io/hashicorp/null v3.2.4\n+ provider registry.terraform.io/hashicorp/time v0.13.1\n+ provider registry.terraform.io/hashicorp/tls v4.1.0\n+ provider registry.terraform.io/infisical/infisical v0.15.31\n+ provider registry.terraform.io/okta/okta v6.4.0\n```\n\n### Terraform Configuration Files\n\n```terraform\ndata \"aws_eks_cluster_auth\" \"this\" {\n  name   = var.cluster_name\n  region = var.region\n}\noutput \"token\" {\n  description = \"Short-lived authentication token for the EKS cluster. Use this to configure Kubernetes providers.\"\n  value       = data.aws_eks_cluster_auth.this.token\n  sensitive   = true\n  ephemeral   = true\n}\n\noutput \"id\" {\n  description = \"The ID of the EKS cluster for which the authentication token is generated.\"\n  value       = data.aws_eks_cluster_auth.this.id\n}\nvariable \"cluster_name\" {\n  description = \"The name of the EKS cluster for which to generate authentication credentials.\"\n  type        = string\n}\n\nvariable \"region\" {\n  description = \"The AWS region where the EKS cluster is located.\"\n  type        = string\n  default     = null\n}\n\n```\n\n\n### Debug Output\n\n```\n...debug output, or link to a gist...\n```\n\n\n### Expected Behavior\n\nI understood PR https://github.com/hashicorp/terraform/pull/37813 as ephemeral outputs should be allowed in Terraform Stacks, as I need them to be able to authenticate with an EKS cluster without having to regenerate the plan after approving it beyond the lifetime of the token.\n\n### Actual Behavior\n\nOutput of `terraform stacks validate`:\n\n```\n\u2577\n\u2502 Error: Ephemeral output not allowed\n\u2502\n\u2502   on ./eks_creds/outputs.tf line 1:\n\u2502    1: output \"token\" {\n\u2502\n\u2502 Ephemeral outputs are not allowed in context of a root module\n\u2575\nFailure! Terraform Stacks configuration is not valid, please check and fix the errors printed above.\n```\n\nSame happens in HCP Terraform\n\n### Steps to Reproduce\n\nCreate a Terraform stack that uses this module (see Relevant Terraform Configuration Files):\n\n```hcl\ncomponent \"eks_creds\" {\n  source = \"./eks_creds\"\n\n  inputs = {\n    cluster_name = \"test-cluster\"\n    region       = \"us-east-1\"\n  }\n\n  providers = {\n    aws = provider.aws.target\n  }\n}\n```\n\nRun `terraform stacks validate`\n\n### Additional Context\n\nTerraform Stacks is running in HCP Terraform but this reproduces in terminal.\n\n### References\n\n- #37813 \n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Thanks for filing the issue @henrythor.\nWe have this tracked in #37822\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "duplicate"
      ],
      "created_at": "2025-12-05T10:43:02Z",
      "closed_at": "2025-12-05T13:56:38Z",
      "url": "https://github.com/hashicorp/terraform/issues/37974",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37915,
      "title": "In the context of PSS, add explicit check to prevent Terraform attempting to write 0 bytes to a state file",
      "problem": "## Background\n\nTerraform's codebase has separate concepts of state and state _files_. A state could be empty (no resources/data sources/outputs/checks etc) but a state file cannot be empty as it'll always contain data like the Terraform version, lineage etc. An empty state's state file is represented by a JSON object like this:\n\n```json\n{\n  \"version\": 4,\n  \"terraform_version\": \"1.14.0\",\n  \"serial\": 4,\n  \"lineage\": \"a0f911d6-cc86-a0d6-4d4c-967c11b80966\",\n  \"outputs\": {},\n  \"resources\": [],\n  \"check_results\": null\n}\n```\n\nCurrently when state file data is written to a remote location (i.e. a remote-state backends like `s3`) Terraform constructs a state file, which may or may not include state data, and then passes the bytes of that state file to the `Put` method of the client used for interacting with that external service:\n\nhttps://github.com/hashicorp/terraform/blob/053738fbf08d50261eccb463580525b88f461d8e/internal/states/remote/state.go#L205-L216\n\nDue to how this code is written, the Put method is always guaranteed to receive a non-zero number of bytes. And this is correct; it is not valid for Terraform to attempt to write 0 bytes to a remote file.\n\nIn contrast, it is [valid for Terraform to receive 0 bytes when trying to read a remote state](https://github.com/hashicorp/terraform/blob/053738fbf08d50261eccb463580525b88f461d8e/internal/states/remote/state.go#L143-L149), because that remote state file may not exist.\n\n## Out of scope\n\nThis issue doesn't include state storage on the local filesystem.\n\nThis issue is relevant to the [remote-state backends](https://github.com/Vasist10/terraform/tree/main/internal/backend/remote-state) _but_ each backend has its own implementation of a remote client. Ideally the `Put` method of those backends' clients would defend against bad input, but that would need to be implemented repeatedly for each backend. We'd like to avoid sweeping changes that touch all backends \ud83d\ude05 .\n\n## Proposal\n\nThere should be an explicit check to ensure that Terraform doesn't attempt to write 0 bytes to a pluggable state store, because that's always invalid.\n\nThis check could be implemented prior to [this line](https://github.com/hashicorp/terraform/blob/e8631898c99cbc200e4088d7d748cfeb9799c161/internal/states/remote/state.go#L213) that calls a remote clients' `Put` method, or implemented in the `Put` methods of individual remote client implementations themselves.\n\nIn future any implementations of pluggable state storage will all go through a single path: [`grpcClient`'s implementation of `Put`](https://github.com/hashicorp/terraform/blob/d884031b4bfda113943efc2274f7539511adeed1/internal/states/remote/remote_grpc.go#L81), so this is a good location for a check that asserts the incoming slice of bytes is not empty.\n\nThere is an equivalent check in the filesystem state manager (i.e. implementation of `local` backend's state storage on the local filesystem) that responds to a nil state file input by creating an empty state file:\n\nhttps://github.com/hashicorp/terraform/blob/d884031b4bfda113943efc2274f7539511adeed1/internal/states/statemgr/filesystem.go#L185-L188\n\nI don't think this is a good approach when dealing with _remote_ states. Instead of responding to a complete lack of data by supplying bytes for an empty data set (which could overwrite something) Terraform should instead raise an error diagnostic to return to the user. That will alert the user something is wrong while avoiding any existing state being impacted by the bug.",
      "solution": "Thanks @apparentlymart , that's useful context to have!\n\nI've updated the issue to be more explicitly scoped to only state accessed via remote clients.\n\nFor now I think we'd only implement this check for pluggable state storage, as there's a single client implementation reused for those. Maybe we'd add another redundant check in the `remote` package's `(s *State) PersistState` method to try and extend some checks to cover all remote-state backends without updating all their individual client implementations. But state storage on the local filesystem should be left unaffected.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement"
      ],
      "created_at": "2025-11-19T14:20:32Z",
      "closed_at": "2025-12-03T15:38:36Z",
      "url": "https://github.com/hashicorp/terraform/issues/37915",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37962,
      "title": "Error: The terraform-provider-aws_v6.23.0_x5.exe plugin crashed!",
      "problem": "### Terraform Version\n\n```shell\nC:\\Users\\gabor\\work\\wavestone\\rmtool2\\qbase_infrastructure\\env\\develop>terraform version\nTerraform v1.14.0\non windows_386\n+ provider registry.terraform.io/hashicorp/aws v6.23.0\n```\n\n### Terraform Configuration Files\n\n```terraform\n...terraform config...\n```\n\n\n### Debug Output\n\n```\n...debug output, or link to a gist...\n```\n\n\n### Expected Behavior\n\nterraform plan was executed.\n\n### Actual Behavior\n\nStack trace from the terraform-provider-aws_v6.23.0_x5.exe plugin:\n\npanic: Error reading level state: strconv.ParseInt: parsing \"2289465344\": value out of range\n\ngoroutine 210 [running]:\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*ResourceData).get(0x31622370, {0x31605b28, 0x1, 0x1}, 0x8)\n        github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource_data.go:694 +0x26f\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*ResourceData).State(0x31622370)\n        github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource_data.go:462 +0x487\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).ShimInstanceStateFromValue(0x2fe9c908, {{{0x1ef2a130, 0x31605128}}, {0x1a7736c0, 0x31606de0}})\n        github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource.go:741 +0x1c9\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*GRPCProviderServer).ReadResource(0x30ba6bb0, {0x1ef29f14, 0x3163a1f8}, 0x31614300)\n        github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/grpc_provider.go:866 +0x682\ngithub.com/hashicorp/terraform-plugin-mux/tf5muxserver.(*muxServer).ReadResource(0x30b7b450, {0x1ef29f14, 0x3163a120}, 0x31614300)\n        github.com/hashicorp/terraform-plugin-mux@v0.21.0/tf5muxserver/mux_server_ReadResource.go:35 +0x1d6\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/tf5server.(*server).ReadResource(0x309f55e0, {0x1ef29f14, 0x2ffbf3f8}, 0x2f4fc100)\n        github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/tf5server/server.go:862 +0x34f\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/internal/tfplugin5._Provider_ReadResource_Handler({0x1c67b860, 0x309f55e0}, {0x1ef29f14, 0x2ffbf3f8}, 0x2f4fc0c0, 0x0)\n        github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/tfplugin5/tfplugin5_grpc.pb.go:753 +0x98\ngoogle.golang.org/grpc.(*Server).processUnaryRPC(0x2fc18148, {0x1ef29f14, 0x317c05d0}, 0x316141e0, 0x30c98a80, 0x2c85656c, 0x0)\n        google.golang.org/grpc@v1.75.1/server.go:1431 +0x105d\ngoogle.golang.org/grpc.(*Server).handleStream(0x2fc18148, {0x1ef2a48c, 0x30b78488}, 0x316141e0)\n        google.golang.org/grpc@v1.75.1/server.go:1842 +0xe24\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1()\n        google.golang.org/grpc@v1.75.1/server.go:1061 +0x8a\ncreated by google.golang.org/grpc.(*Server).serveStreams.func2 in goroutine 84\n        google.golang.org/grpc@v1.75.1/server.go:1072 +0x12e\n\nError: The terraform-provider-aws_v6.23.0_x5.exe plugin crashed!\n\nThis is always indicative of a bug within the plugin. It would be immensely\nhelpful if you could report the crash with the plugin's maintainers so that it\ncan be fixed. The output above should help diagnose the issue.\n\n### Steps to Reproduce\n\nterraform plan\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "provider/aws",
        "new"
      ],
      "created_at": "2025-12-03T00:01:14Z",
      "closed_at": "2025-12-03T13:15:03Z",
      "url": "https://github.com/hashicorp/terraform/issues/37962",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37968,
      "title": "Terraform does not respect dependency order when updating and destroying related resources",
      "problem": "### Terraform Version\n\n```shell\n1.5.5\n```\n\n### Terraform Configuration Files\n\n```\n# Cloud NAT referencing a subnet\nmodule \"cloud_nat\" {\n  source = \"...\"\n  \n  subnets = [\n    { self_link = module.my_subnet.self_link }\n  ]\n}\n\nmodule \"my_subnet\" {\n  source = \"...\"\n  cidr   = \"100.80.0.0/24\"\n}Then I remove the subnet from the NAT and delete the subnet module:\n\nmodule \"cloud_nat\" {\n  source = \"...\"\n  subnets = []  # Removed subnet reference\n}\n\n\n```\n\n### Debug Output\n\n```\nTerraform used the selected providers to generate the following execution plan. Resource actions are\nindicated with the following symbols:\n  + create\n  ~ update in-place\n  - destroy\n\nTerraform will perform the following actions:\n\n  # google_compute_global_address.psc_google_apis will be created\n  + resource \"google_compute_global_address\" \"psc_google_apis\" {\n      + address            = \"100.80.0.1\"\n      + address_type       = \"INTERNAL\"\n      + creation_timestamp = (known after apply)\n      + effective_labels   = {\n          + \"goog-terraform-provisioned\" = \"true\"\n        }\n      + id                 = (known after apply)\n      + label_fingerprint  = (known after apply)\n      + name               = \"mexbank-psc-google-apis\"\n      + network            = \"https://www.googleapis.com/compute/v1/projects/fury-connectivity/global/networks/mexbank\"\n      + prefix_length      = (known after apply)\n      + project            = \"fury-connectivity\"\n      + purpose            = \"PRIVATE_SERVICE_CONNECT\"\n      + self_link          = (known after apply)\n      + terraform_labels   = {\n          + \"goog-terraform-provisioned\" = \"true\"\n        }\n    }\n\n  # google_compute_global_forwarding_rule.psc_google_apis will be created\n  + resource \"google_compute_global_forwarding_rule\" \"psc_google_apis\" {\n      + base_forwarding_rule  = (known after apply)\n      + effective_labels      = {\n          + \"purpose\" = \"global-private-service-connect\"\n          + \"segment\" = \"mexbank\"\n        }\n      + forwarding_rule_id    = (known after apply)\n      + id                    = (known after apply)\n      + ip_address            = (known after apply)\n      + ip_protocol           = (known after apply)\n      + label_fingerprint     = (known after apply)\n      + labels                = {\n          + \"purpose\" = \"global-private-service-connect\"\n          + \"segment\" = \"mexbank\"\n        }\n      + name                  = \"mexbank-psc-google-apis\"\n      + network               = \"https://www.googleapis.com/compute/v1/projects/fury-connectivity/global/networks/mexbank\"\n      + network_tier          = (known after apply)\n      + project               = \"fury-connectivity\"\n      + psc_connection_id     = (known after apply)\n      + psc_connection_status = (known after apply)\n      + self_link             = (known after apply)\n      + subnetwork            = (known after apply)\n      + target                = \"vpc-sc\"\n      + terraform_labels      = {\n          + \"purpose\" = \"global-private-service-connect\"\n          + \"segment\" = \"mexbank\"\n        }\n    }\n\n  # google_compute_router_nat.private_nat will be updated in-place\n  ~ resource \"google_compute_router_nat\" \"private_nat\" {\n        id                                  = \"fury-connectivity/us-east4/mexbank-router/mexbank-private-nat\"\n        name                                = \"mexbank-private-nat\"\n        # (17 unchanged attributes hidden)\n\n      - subnetwork {\n          - name                     = \"https://www.googleapis.com/compute/v1/projects/fury-connectivity/regions/us-east4/subnetworks/mexbank-overlap-test-us-east4\" -> null\n          - secondary_ip_range_names = [] -> null\n          - source_ip_ranges_to_nat  = [\n              - \"ALL_IP_RANGES\",\n            ] -> null\n        }\n\n        # (4 unchanged blocks hidden)\n    }\n\n  # time_sleep.wait_for_nat_update will be created\n  + resource \"time_sleep\" \"wait_for_nat_update\" {\n      + create_duration = \"30s\"\n      + id              = (known after apply)\n    }\n\n  # module.mexbank_cloud_nat_primary.google_compute_router_nat.dynamic_nat will be updated in-place\n  ~ resource \"google_compute_router_nat\" \"dynamic_nat\" {\n        id                                  = \"fury-connectivity/us-east4/mexbank-router/mexbank-primary-nat-dynamic-nat\"\n        name                                = \"mexbank-primary-nat-dynamic-nat\"\n        # (18 unchanged attributes hidden)\n\n      - subnetwork {\n          - name                     = \"https://www.googleapis.com/compute/v1/projects/fury-connectivity/regions/us-east4/subnetworks/mexbank-overlap-test-us-east4\" -> null\n          - secondary_ip_range_names = [] -> null\n          - source_ip_ranges_to_nat  = [\n              - \"ALL_IP_RANGES\",\n            ] -> null\n        }\n\n        # (4 unchanged blocks hidden)\n    }\n\n  # module.overlap-test-subnets.google_compute_subnetwork.this will be destroyed\n  # (because google_compute_subnetwork.this is not in configuration)\n  - resource \"google_compute_subnetwork\" \"this\" {\n      - creation_timestamp         = \"2025-10-30T08:54:19.663-07:00\" -> null\n      - description                = \"Subnet mexbank overlap-test - Private Google Access\" -> null\n      - enable_flow_logs           = false -> null\n      - gateway_address            = \"100.80.0.1\" -> null\n      - id                         = \"projects/fury-connectivity/regions/us-east4/subnetworks/mexbank-overlap-test-us-east4\" -> null\n      - ip_cidr_range              = \"100.80.0.0/24\" -> null\n      - name                       = \"mexbank-overlap-test-us-east4\" -> null\n      - network                    = \"https://www.googleapis.com/compute/v1/projects/fury-connectivity/global/networks/mexbank\" -> null\n      - private_ip_google_access   = true -> null\n      - private_ipv6_google_access = \"DISABLE_GOOGLE_ACCESS\" -> null\n      - project                    = \"fury-connectivity\" -> null\n      - purpose                    = \"PRIVATE\" -> null\n      - region                     = \"us-east4\" -> null\n      - self_link                  = \"https://www.googleapis.com/compute/v1/projects/fury-connectivity/regions/us-east4/subnetworks/mexbank-overlap-test-us-east4\" -> null\n      - stack_type                 = \"IPV4_ONLY\" -> null\n      - subnetwork_id              = 4385787466342085600 -> null\n    }\n\nPlan: 3 to add, 2 to change, 1 to destroy.\n\nDo you want to perform these actions?\n  Terraform will perform the actions described above.\n  Only 'yes' will be accepted to approve.\n\n  Enter a value: yes\n\nmodule.overlap-test-subnets.google_compute_subnetwork.this: Destroying... [id=projects/fury-connectivity/regions/us-east4/subnetworks/mexbank-overlap-test-us-east4]\n\u2577\n\u2502 Error: Error when reading or editing Subnetwork: googleapi: Error 400: The subnetwork resource 'projects/fury-connectivity/regions/us-east4/subnetworks/mexbank-overlap-test-us-east4' is already being used by 'projects/fury-connectivity/regions/us-east4/nats/mexbank-router-Nat', resourceInUseByAnotherResource\n\u2502 \n\u2502 \n\u2575\n\n```\n\n### Expected Behavior\n\n# module \"my_subnet\" removed entirely\n\n### Expected Behavior\n\nTerraform should:\n1. First update Cloud NAT (remove subnet from list)\n2. Then destroy the subnet\n\n### Actual Behavior\n\n### Actual Behavior\n\nTerraform attempts both operations in parallel, causing:\n\nError: The subnetwork resource is already being used by 'nats/xxx', resourceInUseByAnotherResource\n\n### Steps to Reproduce\n\n1. Steps to Reproduce\n2. Create a GCP subnet\n3. Reference it in a Cloud NAT\n4. Apply\n5. Remove subnet from NAT config AND delete subnet module\n6. Apply \u2192 Error\n\n### Additional Context\n\ndepends_on does not help (controls creation order, not update-before-destroy)\ntime_sleep is unreliable\n-target works but breaks single terraform apply workflow\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\nCursor, Claude-4.5-opus-high",
      "solution": "Hi @fede2305,\n\nIf a resource needs to be updated before a dependency is destroyed, then you must use `create_before_destroy` to achieve the desired order of operations. I can't see your configuration for the resources, but it appears you have not set `create_before_destroy = true` before creating the resources. Note that setting this after the fact will require applying the refreshed state so that the updated value is stored in the resources which you intend to remove.\n\nThe replacement order of resources is strictly defined, and since there have been no other reports of incorrect ordering in the past years since v1.5 was released it's unlikely that the order is somehow not being followed by this particular configuration. If you do have a reproduction we can use demonstrating an incorrect ordering, please add it here and we can review the issue further.\n\nThanks!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-12-03T19:45:39Z",
      "closed_at": "2025-12-03T20:03:56Z",
      "url": "https://github.com/hashicorp/terraform/issues/37968",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37958,
      "title": "Kinesis firehose failing validation when using S3tables bucket as Iceberg config endpoint",
      "problem": "### Terraform Version\n\n```shell\n6.23.0\n```\n\n### Terraform Configuration Files\n\n```\nresource \"aws_s3tables_table_bucket\" \"reporting_data\" {\n\n  name = \"reporting-data\"\n  tags = {\n    Name        = \"reporting_data_bucket\"\n    Description = \"S3 bucket for reporting data storage\"\n  }\n\n}\nresource \"aws_kinesis_firehose_delivery_stream\" \"events_stream\" {\n  name        = \"events-stream\"\n  destination = \"iceberg\"\n\n  iceberg_configuration {\n    role_arn           = aws_iam_role.firehose_reporting_role.arn\n    catalog_arn        = \"arn:aws:glue:us-east-1:${data.aws_caller_identity.current.account_id}:catalog/s3tablescatalog/${var.reporting_data_bucket_name}\"\n    buffering_size     = 10\n    buffering_interval = 400\n\n    s3_configuration {\n      role_arn   = aws_iam_role.firehose_reporting_role.arn\n      bucket_arn = aws_s3tables_table_bucket.reporting_data.arn\n    }\n\n    destination_table_configuration {\n      database_name = var.submission_events_table_namespace\n      table_name    = var.submission_events_table_name\n    }\n\n  }\n}\n```\n\n\n### Debug Output\n\n```\nError: creating Kinesis Firehose Delivery Stream (events-stream): operation error Firehose: CreateDeliveryStream, https response error StatusCode: 400, RequestID: id, api error ValidationException: 1 validation error detected: Value at 'icebergDestinationConfiguration.s3Configuration.bucketARN' failed to satisfy constraint: Member must satisfy regular expression pattern: arn:.*:s3:::[\\w\\.\\-]{1,255}\n```\n\n\n### Expected Behavior\n\nShould set up kinesis firehose stream with iceberg configuration pointing to an s3tables bucket\n\n### Actual Behavior\n\nValidation failed on s3 arn, s3 arn is in the format arn:.*:s3tables:::[\\w\\.\\-]{1,255}, where it is looking for arn:.*:s3:::[\\w\\.\\-]{1,255}\n\n### Steps to Reproduce\n\nterraform init\nterraform apply\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "provider/aws",
        "new"
      ],
      "created_at": "2025-12-02T14:00:57Z",
      "closed_at": "2025-12-02T14:33:35Z",
      "url": "https://github.com/hashicorp/terraform/issues/37958",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37943,
      "title": "Terraform Test - Check block warnings should be ignored during plan",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.4\non windows_amd64\n+ provider registry.terraform.io/hashicorp/random v3.7.2\n```\n\n### Terraform Configuration Files\n\n```terraform\nterraform {\n  required_providers {\n    random = {\n        source = \"hashicorp/random\"\n        version = \"~>3.0\"\n    }\n  }\n}\n\nresource \"random_integer\" \"test\" {\n  max = 1000\n  min = 1\n}\n\ncheck \"check_int\" {\n  assert {\n    condition = random_integer.test.result >= 10\n    error_message = \"Random integer is wrong.\"\n  }\n}\n```\n\n```hcl\n# plan.tftest.hcl\nrun \"check_fail\" {\n    command = plan\n}\n```\n\n\n### Debug Output\n\n```\n2025-11-26T09:47:06.448-0500 [INFO]  Terraform version: 1.13.4\n2025-11-26T09:47:06.450-0500 [DEBUG] using github.com/hashicorp/go-tfe v1.74.1\n2025-11-26T09:47:06.450-0500 [DEBUG] using github.com/hashicorp/hcl/v2 v2.24.0\n2025-11-26T09:47:06.450-0500 [DEBUG] using github.com/hashicorp/terraform-svchost v0.1.1\n2025-11-26T09:47:06.450-0500 [DEBUG] using github.com/zclconf/go-cty v1.16.3\n2025-11-26T09:47:06.450-0500 [INFO]  Go runtime version: go1.24.5\n2025-11-26T09:47:06.450-0500 [INFO]  CLI args: []string{\"C:\\\\Users\\\\NedBellavance\\\\.tenv\\\\Terraform\\\\1.13.4\\\\terraform\", \"test\"}\n2025-11-26T09:47:06.454-0500 [DEBUG] Attempting to open CLI config file: C:\\Users\\NedBellavance\\AppData\\Roaming\\terraform.rc\n2025-11-26T09:47:06.454-0500 [INFO]  Loading CLI configuration from C:\\Users\\NedBellavance\\AppData\\Roaming\\terraform.rc\n2025-11-26T09:47:06.455-0500 [INFO]  Loading CLI configuration from C:\\Users\\NedBellavance\\AppData\\Roaming\\terraform.d\\credentials.tfrc.json\n2025-11-26T09:47:06.455-0500 [DEBUG] Explicit provider installation configuration is set\n2025-11-26T09:47:06.456-0500 [INFO]  CLI command args: []string{\"test\"}\n2025-11-26T09:47:06.523-0500 [DEBUG] checking for provisioner in \".\"\n2025-11-26T09:47:06.523-0500 [DEBUG] checking for provisioner in \"C:\\\\Users\\\\NedBellavance\\\\.tenv\\\\Terraform\\\\1.13.4\"\n2025-11-26T09:47:06.523-0500 [DEBUG] TestSuiteRunner: found 1 files with 1 run blocks\nplan.tftest.hcl... in progress\n2025-11-26T09:47:06.524-0500 [DEBUG] created provider logger: level=debug\n2025-11-26T09:47:06.524-0500 [INFO]  provider: configuring client automatic mTLS\n2025-11-26T09:47:06.539-0500 [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/windows_amd64/terraform-provider-random_v3.7.2_x5.exe args=[\".terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/windows_amd64/terraform-provider-random_v3.7.2_x5.exe\"]     \n2025-11-26T09:47:06.549-0500 [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/windows_amd64/terraform-provider-random_v3.7.2_x5.exe pid=49600\n2025-11-26T09:47:06.549-0500 [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/windows_amd64/terraform-provider-random_v3.7.2_x5.exe\n2025-11-26T09:47:06.567-0500 [INFO]  provider.terraform-provider-random_v3.7.2_x5.exe: configuring server automatic mTLS: timestamp=2025-11-26T09:47:06.567-0500\n2025-11-26T09:47:06.584-0500 [DEBUG] provider: using plugin: version=5\n2025-11-26T09:47:06.585-0500 [DEBUG] provider.terraform-provider-random_v3.7.2_x5.exe: plugin address: address=127.0.0.1:10000 network=tcp timestamp=2025-11-26T09:47:06.584-0500\n2025-11-26T09:47:06.602-0500 [DEBUG] No provider meta schema returned\n2025-11-26T09:47:06.603-0500 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\" \n2025-11-26T09:47:06.610-0500 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/windows_amd64/terraform-provider-random_v3.7.2_x5.exe id=49600\n2025-11-26T09:47:06.610-0500 [DEBUG] provider: plugin exited\n2025-11-26T09:47:06.610-0500 [DEBUG] Building and walking validate graph\n2025-11-26T09:47:06.611-0500 [DEBUG] ProviderTransformer: \"random_integer.test\" (*terraform.NodeValidatableResource) needs provider[\"registry.terraform.io/hashicorp/random\"]\n2025-11-26T09:47:06.612-0500 [DEBUG] ReferenceTransformer: \"check.check_int (expand)\" references: [random_integer.test]\n2025-11-26T09:47:06.612-0500 [DEBUG] ReferenceTransformer: \"provider[\\\"registry.terraform.io/hashicorp/random\\\"]\" references: []\n2025-11-26T09:47:06.612-0500 [DEBUG] ReferenceTransformer: \"random_integer.test\" references: []\n2025-11-26T09:47:06.612-0500 [DEBUG] Starting graph walk: walkValidate\n2025-11-26T09:47:06.613-0500 [DEBUG] created provider logger: level=debug\n2025-11-26T09:47:06.614-0500 [INFO]  provider: configuring client automatic mTLS\n2025-11-26T09:47:06.626-0500 [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/windows_amd64/terraform-provider-random_v3.7.2_x5.exe args=[\".terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/windows_amd64/terraform-provider-random_v3.7.2_x5.exe\"]     \n2025-11-26T09:47:06.629-0500 [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/windows_amd64/terraform-provider-random_v3.7.2_x5.exe pid=21796\n2025-11-26T09:47:06.629-0500 [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/windows_amd64/terraform-provider-random_v3.7.2_x5.exe\n2025-11-26T09:47:06.650-0500 [INFO]  provider.terraform-provider-random_v3.7.2_x5.exe: configuring server automatic mTLS: timestamp=2025-11-26T09:47:06.650-0500\n2025-11-26T09:47:06.677-0500 [DEBUG] provider: using plugin: version=5\n2025-11-26T09:47:06.677-0500 [DEBUG] provider.terraform-provider-random_v3.7.2_x5.exe: plugin address: address=127.0.0.1:10000 network=tcp timestamp=2025-11-26T09:47:06.677-0500\n2025-11-26T09:47:06.706-0500 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2025-11-26T09:47:06.714-0500 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/windows_amd64/terraform-provider-random_v3.7.2_x5.exe id=21796\n2025-11-26T09:47:06.715-0500 [DEBUG] provider: plugin exited\n2025-11-26T09:47:06.715-0500 [DEBUG] TestFileRunner: starting plan for plan.tftest.hcl/check_fail\n2025-11-26T09:47:06.715-0500 [DEBUG] Building and walking plan graph for NormalMode\n2025-11-26T09:47:06.715-0500 [DEBUG] ProviderTransformer: \"random_integer.test (expand)\" (*terraform.nodeExpandPlannableResource) needs provider[\"registry.terraform.io/hashicorp/random\"]\n2025-11-26T09:47:06.716-0500 [DEBUG] ReferenceTransformer: \"check.check_int (expand)\" references: [random_integer.test (expand)]\n2025-11-26T09:47:06.716-0500 [DEBUG] ReferenceTransformer: \"check.check_int (report)\" references: []\n2025-11-26T09:47:06.716-0500 [DEBUG] ReferenceTransformer: \"provider[\\\"registry.terraform.io/hashicorp/random\\\"]\" references: []\n2025-11-26T09:47:06.716-0500 [DEBUG] ReferenceTransformer: \"random_integer.test (expand)\" references: []\n2025-11-26T09:47:06.716-0500 [DEBUG] Starting graph walk: walkPlan\n2025-11-26T09:47:06.717-0500 [DEBUG] created provider logger: level=debug\n2025-11-26T09:47:06.717-0500 [INFO]  provider: configuring client automatic mTLS\n2025-11-26T09:47:06.730-0500 [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/windows_amd64/terraform-provider-random_v3.7.2_x5.exe args=[\".terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/windows_amd64/terraform-provider-random_v3.7.2_x5.exe\"]     \n2025-11-26T09:47:06.736-0500 [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/windows_amd64/terraform-provider-random_v3.7.2_x5.exe pid=22684\n2025-11-26T09:47:06.736-0500 [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/windows_amd64/terraform-provider-random_v3.7.2_x5.exe\n2025-11-26T09:47:06.749-0500 [INFO]  provider.terraform-provider-random_v3.7.2_x5.exe: configuring server automatic mTLS: timestamp=2025-11-26T09:47:06.748-0500\n2025-11-26T09:47:06.781-0500 [DEBUG] provider.terraform-provider-random_v3.7.2_x5.exe: plugin address: address=127.0.0.1:10000 network=tcp timestamp=2025-11-26T09:47:06.780-0500\n2025-11-26T09:47:06.781-0500 [DEBUG] provider: using plugin: version=5\n2025-11-26T09:47:06.803-0500 [DEBUG] Resource instance state not found for node \"random_integer.test\", instance random_integer.test\n2025-11-26T09:47:06.804-0500 [DEBUG] ReferenceTransformer: \"random_integer.test\" references: []\n2025-11-26T09:47:06.804-0500 [DEBUG] refresh: random_integer.test: no state, so not refreshing\n2025-11-26T09:47:06.810-0500 [DEBUG] provider.terraform-provider-random_v3.7.2_x5.exe: Marking Computed attributes with null configuration values as unknown (known after apply) in the plan to prevent potential Terraform errors: tf_rpc=PlanResourceChange @module=sdk.framework tf_req_id=b4d193de-97d4-524e-5868-5d441b76c359 @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server_planresourcechange.go:229 tf_provider_addr=registry.terraform.io/hashicorp/random tf_resource_type=random_integer timestamp=2025-11-26T09:47:06.810-0500\n2025-11-26T09:47:06.810-0500 [DEBUG] provider.terraform-provider-random_v3.7.2_x5.exe: marking computed attribute that is null in the config as unknown: tf_attribute_path=\"AttributeName(\\\"result\\\")\" tf_req_id=b4d193de-97d4-524e-5868-5d441b76c359 tf_resource_type=random_integer @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server_planresourcechange.go:480 @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/random tf_rpc=PlanResourceChange timestamp=2025-11-26T09:47:06.810-0500\n2025-11-26T09:47:06.810-0500 [DEBUG] provider.terraform-provider-random_v3.7.2_x5.exe: marking computed attribute that is null in the config as unknown: @module=sdk.framework tf_rpc=PlanResourceChange @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server_planresourcechange.go:480 tf_attribute_path=\"AttributeName(\\\"id\\\")\" tf_provider_addr=registry.terraform.io/hashicorp/random tf_req_id=b4d193de-97d4-524e-5868-5d441b76c359 tf_resource_type=random_integer timestamp=2025-11-26T09:47:06.810-0500\n2025-11-26T09:47:06.814-0500 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\" \n2025-11-26T09:47:06.818-0500 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/windows_amd64/terraform-provider-random_v3.7.2_x5.exe id=22684\n2025-11-26T09:47:06.818-0500 [DEBUG] provider: plugin exited\n2025-11-26T09:47:06.819-0500 [DEBUG] building apply graph to check for errors\n2025-11-26T09:47:06.819-0500 [DEBUG] Resource state not found for node \"random_integer.test\", instance random_integer.test\n2025-11-26T09:47:06.819-0500 [DEBUG] ProviderTransformer: \"random_integer.test (expand)\" (*terraform.nodeExpandApplyableResource) needs provider[\"registry.terraform.io/hashicorp/random\"]\n2025-11-26T09:47:06.819-0500 [DEBUG] ProviderTransformer: \"random_integer.test\" (*terraform.NodeApplyableResourceInstance) needs provider[\"registry.terraform.io/hashicorp/random\"]\n2025-11-26T09:47:06.819-0500 [DEBUG] ReferenceTransformer: \"random_integer.test (expand)\" references: []\n2025-11-26T09:47:06.819-0500 [DEBUG] ReferenceTransformer: \"random_integer.test\" references: []\n2025-11-26T09:47:06.820-0500 [DEBUG] ReferenceTransformer: \"check.check_int (expand)\" references: [random_integer.test (expand) random_integer.test random_integer.test]\n2025-11-26T09:47:06.820-0500 [DEBUG] ReferenceTransformer: \"provider[\\\"registry.terraform.io/hashicorp/random\\\"]\" references: []\n2025-11-26T09:47:06.820-0500 [DEBUG] TestFileRunner: completed plan for plan.tftest.hcl/check_fail\n  run \"check_fail\"... fail\n\u2577\n\u2502 Error: Check block assertion known after apply\n\u2502\n\u2502   on main.tf line 17, in check \"check_int\":\n\u2502   17:     condition = random_integer.test.result >= 10\n\u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502     \u2502 random_integer.test.result is a number\n\u2502\n\u2502 The condition could not be evaluated at this time, a result will be known when this plan is applied.\n\u2575\nplan.tftest.hcl... tearing down\nplan.tftest.hcl... fail\n\nFailure! 0 passed, 1 failed.\n```\n\n\n### Expected Behavior\n\nTerraform test should surface check block warnings as warnings and continue the test. The run containing warnings should pass.\n\n### Actual Behavior\n\nTerraform test halts the run and reports an error.\n\n### Steps to Reproduce\n\n1. `terraform init`\n2. `terraform test`\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "As a workaround you can use the `expect_failures` argument, but I don't think check block warnings should be considered failures.\n\n---\n\nHi @ned1313,\n\nAccording to [the documentation](https://developer.hashicorp.com/terraform/language/tests#expecting-failures), `check` block failures are expected to be treated as test failures by design. \n\n> By default, if any [validation](https://developer.hashicorp.com/terraform/language/validate), including check block assertions, fails during the execution of a Terraform test file then the overall command reports the test as a failure.\n\nWe can keep this as an enhancement request, but it would help to have a better description of the use case for expecting checks to fail during a test where `expect_failures` isn't an adequate solution.\n\nThanks!\n\n---\n\nI had not seen that portion of the documentation. Thanks for pointing it out! I closed the issue.",
      "labels": [
        "enhancement",
        "waiting-response",
        "terraform test"
      ],
      "created_at": "2025-11-26T14:49:49Z",
      "closed_at": "2025-11-26T23:55:44Z",
      "url": "https://github.com/hashicorp/terraform/issues/37943",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37911,
      "title": "Not all messages are in JSON format when running `terraform init -json`",
      "problem": "### Terraform Version\n\n```shell\nTerraform 1.15.0-dev\n```\n\n### Terraform Configuration Files\n\n```terraform\nterraform {\n  required_providers {\n    aws = {\n      source = \"hashicorp/aws\"\n    }\n  }\n  backend \"local\" {}\n}\n```\n\n\n### Debug Output\n\nN/A\n\n### Expected Behavior\n\nWhen running `terraform init -json` using the config above in an empty working directory, all of the command's output should be in JSON format.\n\n### Actual Behavior\n\nOne of the messages logged to the terminal isn't in JSON format:\n\n```\n{\"@level\":\"info\",\"@message\":\"Terraform 1.15.0-dev\",\"@module\":\"terraform.ui\",\"@timestamp\":\"2025-11-17T17:17:58.540604Z\",\"terraform\":\"1.15.0-dev\",\"type\":\"version\",\"ui\":\"1.2\"}\n{\"@level\":\"info\",\"@message\":\"Initializing provider plugins found in the configuration...\",\"@module\":\"terraform.ui\",\"@timestamp\":\"2025-11-17T17:18:04.314Z\",\"message_code\":\"initializing_provider_plugin_from_config_message\",\"type\":\"init_output\"}\n{\"@level\":\"info\",\"@message\":\"hashicorp/aws: Finding latest version...\",\"@module\":\"terraform.ui\",\"@timestamp\":\"2025-11-17T17:18:04.314594Z\",\"type\":\"log\"}\n{\"@level\":\"info\",\"@message\":\"Installing provider version: hashicorp/aws v6.21.0...\",\"@module\":\"terraform.ui\",\"@timestamp\":\"2025-11-17T17:18:04.784659Z\",\"type\":\"log\"}\n{\"@level\":\"info\",\"@message\":\"Installed provider version: hashicorp/aws v6.21.0 (signed by HashiCorp)\",\"@module\":\"terraform.ui\",\"@timestamp\":\"2025-11-17T17:18:26.345919Z\",\"type\":\"log\"}\n{\"@level\":\"info\",\"@message\":\"Initializing the backend...\",\"@module\":\"terraform.ui\",\"@timestamp\":\"2025-11-17T17:18:52.256Z\",\"message_code\":\"initializing_backend_message\",\"type\":\"init_output\"}\n\nSuccessfully configured the backend \"local\"! Terraform will automatically\nuse this backend unless the backend configuration changes.\n{\"@level\":\"info\",\"@message\":\"Terraform has created a lock file .terraform.lock.hcl to record the provider\\nselections it made above. Include this file in your version control repository\\nso that Terraform can guarantee to make the same selections by default when\\nyou run \\\"terraform init\\\" in the future.\",\"@module\":\"terraform.ui\",\"@timestamp\":\"2025-11-17T17:19:06.698Z\",\"message_code\":\"lock_info\",\"type\":\"init_output\"}\n{\"@level\":\"info\",\"@message\":\"Terraform has been successfully initialized!\",\"@module\":\"terraform.ui\",\"@timestamp\":\"2025-11-17T17:19:09.915Z\",\"message_code\":\"output_init_success_message\",\"type\":\"init_output\"}\n{\"@level\":\"info\",\"@message\":\"You may now begin working with Terraform. Try running \\\"terraform plan\\\" to see\\nany changes that are required for your infrastructure. All Terraform commands\\nshould now work.\\n\\nIf you ever set or change modules or backend configuration for Terraform,\\nrerun this command to reinitialize your working directory. If you forget, other\\ncommands will detect it and remind you to do so if necessary.\",\"@module\":\"terraform.ui\",\"@timestamp\":\"2025-11-17T17:19:10.553Z\",\"message_code\":\"output_init_success_cli_message\",\"type\":\"init_output\"}\n```\n\n>Successfully configured the backend \"local\"! Terraform will automatically\nuse this backend unless the backend configuration changes.\n\n### Steps to Reproduce\n\n1. `terraform init -json`\n\n### Additional Context\n\nThe non-JSON message originates from:\n\nhttps://github.com/hashicorp/terraform/blob/1dd8e60f158cb2aec3efd62408bbe81f2d765fd6/internal/command/meta_backend.go#L1355-L1357\n\nI think that all parts of `init`-related code that use the `Ui` abstraction are unable to output logs in JSON format, as the `View` abstraction is needed for that.\n\nThis means running init in other situations (e.g. migrating when unsetting `backend` from the config) would have the same issue with JSON output.\n\n### References\n\nSee also:\n* https://github.com/hashicorp/terraform/issues/37439\n\n### Generative AI / LLM assisted development?\n\nN/A",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-11-17T17:27:07Z",
      "closed_at": "2025-11-25T17:47:39Z",
      "url": "https://github.com/hashicorp/terraform/issues/37911",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37803,
      "title": "Include link to Terraform repo in error messages about internal Terraform bugs",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.3\n```\n\n### Use Cases\n\nWhen a `Resource has no configuration` error is returned by Terraform, the error message should point the user to the Terraform issue tracker\n\n### Attempted Solutions\n\nN/A\n\n### Proposal\n\nWhen a `Resource has no configuration` error is returned by Terraform, the error message includes `This is a bug in Terraform; please report it!`, the message should also include a link to the repo's issue tracker so that users will report the error to the correct project. They may instead open an issue in the provider issue tracker, e.g. https://github.com/hashicorp/terraform-provider-aws/issues/44744\n\n### References\n\n_No response_",
      "solution": "Hello! I've looked into this issue and would like to submit a PR to address it. I wanted to get some clarity before I start.\n\nWhile investigating, I noticed there are many variations of the \"This is a bug in Terraform\" wording across the codebase. For example: \n\n- \"This is a bug in Terraform; please report it!\"\n- \"This is a bug in Terraform and should be reported\"\n- \"This is a bug in Terraform - please report it\"\n\nI had a few questions before proceeding: \n\n1.) Should I focus only on the `Resource has no configuration` error as mentioned in this issue for now, or would you be open to a more comprehensive update that adds the issue-tracker link to all similar internal error messages?\n\n2.) If doing a broader update is acceptable, should I also standardize the wording? For example using `This is a bug in Terraform; please report it at  https://github.com/hashicorp/terraform/issues`\n\nI\u2019m happy to start with this specific error first and follow up with a separate PR or issue for broader message standardization if preferred. Thanks!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "new"
      ],
      "created_at": "2025-10-23T16:16:57Z",
      "closed_at": "2025-11-25T18:22:59Z",
      "url": "https://github.com/hashicorp/terraform/issues/37803",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37930,
      "title": "`lifecycle.action_trigger` executes actions before resource creation/update is completed",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.14.0\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/local v2.6.1\n```\n\n### Terraform Configuration Files\n\n```terraform\nresource \"local_file\" \"foo\" {\n  content  = \"foo!bar\"\n  filename = \"/tmp/foo.bar\"\n\n  lifecycle {\n    action_trigger {\n      events  = [after_create, after_update]\n      actions = [action.local_command.bar]\n    }\n  }\n}\n\naction \"local_command\" \"bar\" {\n  config {\n    command   = \"cat\"\n    arguments = [\"/tmp/foo.bar\"]\n  }\n}\n```\n\n### Debug Output\n\nhttps://gist.github.com/jeremmfr/87c348af5c77d22e5e10c8133d99e821\n\n### Expected Behavior\n\nWhen using `lifecycle.action_trigger` with `after_create` or `after_update` events, the triggered action should execute **after** the resource has been fully created/updated and its side effects (like file creation) are completed.\n\nIn the example above, the `local_command` action should run after the file `/tmp/foo.bar` has been successfully written to disk, allowing the `cat` command to read its contents.\n\n### Actual Behavior\n\nThe action is triggered before the resource creation is completed. The `local_command` action fails because the file `/tmp/foo.bar` does not exist yet when the action attempts to read it.\n\nThis suggests that `after_create` and `after_update` events are firing before the resource's side effects are finalized, despite the \"after_\" prefix implying completion.\n\n### Steps to Reproduce\n\n1. Create a Terraform configuration with the above code\n2. `terraform init`\n3. `terraform apply`\n4. Observe that the action fails with an error indicating the file does not exist\n\n### Additional Context\n\nThis timing issue affects the reliability of `action_trigger` when actions depend on the actual completion of resource operations, not just the API call completion.\n\n### References\n\nNone\n\n### Generative AI / LLM assisted development?\n\nNo",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-11-21T11:03:51Z",
      "closed_at": "2025-11-24T19:49:58Z",
      "url": "https://github.com/hashicorp/terraform/issues/37930",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37928,
      "title": "ReadOnly Property cannot update real time",
      "problem": "### Terraform Version\n\n```shell\nall\n```\n\n### Terraform Configuration Files\n\nresource \"volcenginecc_mongodb_allowlist\" \"tf2\" {\n\n  allow_list_name = \"tf2_allowlist_test\"\n  allow_list_type = \"IPv4\"\n  project_name = \"default\"\n  allow_list_desc = \"\"\n  allow_list_category = \"Default\"\n  allow_list = [\n    \"0.0.0.0/0\",\n    \"127.0.0.1\",\n    \"192.168.1.0/24\",\n    \"192.168.1.0/25\",\n    \"1.1.1.2\",\n    \"1.1.1.3\",\n    \"1.1.1.4\",\n    \"1.1.1.5\",\n    \"1.1.1.6\",\n    \"1.1.1.7\"\n  ]\n}\nupdate allow_list\n\n### Debug Output\n\nnothing\n\n### Expected Behavior\n\nupdate allow_list_ip_num to lastest value\n\n### Actual Behavior\n\n{\n  \"version\": 4,\n  \"terraform_version\": \"1.12.1\",\n  \"serial\": 17,\n  \"lineage\": \"ebefe02e-df35-21f1-7967-6b3468f78efa\",\n  \"outputs\": {},\n  \"resources\": [\n    {\n      \"mode\": \"managed\",\n      \"type\": \"volcenginecc_mongodb_allowlist\",\n      \"name\": \"tf2\",\n      \"provider\": \"provider[\\\"registry.terraform.io/volcengine/volcenginecc\\\"]\",\n      \"instances\": [\n        {\n          \"schema_version\": 1,\n          \"attributes\": {\n            \"allow_list\": [\n              \"0.0.0.0/0\",\n              \"1.1.1.2\",\n              \"1.1.1.3\",\n              \"1.1.1.4\",\n              \"1.1.1.5\",\n              \"1.1.1.6\",\n              \"1.1.1.7\",\n              \"127.0.0.1\",\n              \"192.168.1.0/24\",\n              \"192.168.1.0/25\"\n            ],\n            \"allow_list_category\": \"Default\",\n            \"allow_list_desc\": \"\",\n            \"allow_list_id\": \"acl-c972e7b4ce4941a1a8d58b8e57b283e5\",\n            **\"allow_list_ip_num\": 10,**\n            \"allow_list_name\": \"tf2_allowlist_test\",\n            \"allow_list_type\": \"IPv4\",\n            \"associated_instance_num\": 0,\n            \"associated_instances\": null,\n            \"id\": \"acl-c972e7b4ce4941a1a8d58b8e57b283e5\",\n            \"project_name\": \"default\"\n          },\n          \"sensitive_attributes\": [],\n          \"identity_schema_version\": 0\n        }\n      ]\n    }\n  ],\n  \"check_results\": null\n}\n\n\n### Steps to Reproduce\n\nterraform apply \n\n### Additional Context\n\nI have a resource schema that defines two attributes: allow_list and allow_list_ip_num.\nAmong them, allow_list_ip_num is a read-only field.\n\nThe expected behavior is:\n\nWhen I add or remove an IP in allow_list, the backend service returns the updated value of allow_list_ip_num (the actual number of IPs in the allow list).\n\nTerraform should detect this change from the Read API and refresh the state accordingly, without requiring any manual updates to allow_list_ip_num.\n\nHowever, the actual behavior is:\n\nAfter I add an IP into allow_list, the backend API correctly returns the new allow_list_ip_num value.\n\nTerraform state does not update this read-only field automatically.\n\nIf I try to manually change allow_list_ip_num to match the latest value, Terraform fails with the following error:\n\n`produced an unexpected new value: .allow_list_ip_num: was\ncty.NumberIntVal(9), but now cty.NumberIntVal(10).\n`\nThis looks like Terraform is treating the read-only field as if it should not change, even though the provider\u2019s Read/Refresh logic returns the new value from the backend.\n\nCould you please help confirm whether this is a bug in how read-only attributes are handled, or if there is a recommended pattern for modeling this kind of \u201ccomputed count\u201d field so that it can be updated correctly in state when the underlying list changes?\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-11-21T03:33:55Z",
      "closed_at": "2025-11-21T14:14:10Z",
      "url": "https://github.com/hashicorp/terraform/issues/37928",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37932,
      "title": "Azure application gateway fails deploy if PFX certificate encoded in base64 size is over 16K",
      "problem": "### Terraform Version\n\n```shell\n\u2502 1.14.0\n```\n\n### Terraform Configuration Files\n\nReading content from key vault (storing PFX certificate as b64 string in secrets, and password of cert as well):\n```**terraform**\ndata \"azurerm_key_vault_secret\" \"cert-pw\" {\n    key_vault_id = var.key-vault-id\n    name = \"appgw-cert-password\"\n}\n\ndata \"azurerm_key_vault_secret\" \"cert-b64\" {\n    key_vault_id = var.key-vault-id\n    name = \"appgw-cert-secured\"\n}\n\nmodule \"appgw-public-ip\" {\n    source = \"../../../modules/Azure/azure-public-ip\"\n    location = var.location\n    resourcegroup-name = var.resourcegroup-name\n    sku = \"Standard\"\n    name = \"${local.appgw-name}-pip\"\n}\n\nmodule \"user-assigned-identity\" {\n  source = \"../../../modules/Azure/azure-user-assigned-identity\"\n  location = var.location\n  resource-group = var.resourcegroup-name\n  name = \"uid-${local.appgw-name}\"\n}\n\nmodule \"uid-kv-permission\" {\n    depends_on = [ module.user-assigned-identity ]\n    source = \"../../../modules/Azure/azure-role-assignment\"\n    principal-id = module.user-assigned-identity.principal-id\n    role-name = \"Key Vault Certificate User\"\n    scope = var.key-vault-id\n}\n\nmodule \"uid-kv-permission-secret\" {\n    depends_on = [ module.user-assigned-identity ]\n    source = \"../../../modules/Azure/azure-role-assignment\"\n    principal-id = module.user-assigned-identity.principal-id\n    role-name = \"Key Vault Secrets User\"\n    scope = var.key-vault-id\n}\n\nresource \"azurerm_application_gateway\" \"appgw\" {\n    name = local.appgw-name\n    location = var.location\n    identity {\n        type = \"UserAssigned\"\n      identity_ids = [ module.user-assigned-identity.object-id ]\n    }\n    resource_group_name = var.resourcegroup-name\n  sku {\n    capacity = 1\n    name = \"Standard_v2\"\n    tier = \"Standard_v2\"\n  }\n  http_listener {\n    host_name = \"<mydomain>\"\n    name = \"https-listener\"\n    protocol = \"Https\"\n    require_sni = true\n    ssl_certificate_name = \"https-certificate\"\n    frontend_port_name = \"https\"\n    frontend_ip_configuration_name = \"public\"\n  }\n\n  ssl_certificate {\n    data = data.azurerm_key_vault_secret.cert-b64.value\n    password = data.azurerm_key_vault_secret.cert-pw.value\n    name = \"https-certificate\"\n  }\n\n  backend_address_pool {\n    name = \"pool-${var.backend-app.name}\"\n    fqdns = [ var.backend-app.url ]\n  }\n\n  backend_address_pool {\n    name = \"pool-${var.frontend-app.name}\"\n    fqdns = [ var.frontend-app.url ]\n  }\n\n  backend_http_settings {\n     name = \"https-${var.frontend-app.name}\"\n     pick_host_name_from_backend_address = true\n    protocol = \"Https\"\n    port = 443\n    path = \"/\"\n    cookie_based_affinity = \"Disabled\"\n  }\n\n  backend_http_settings {\n     name = \"https-${var.backend-app.name}-api\"\n     pick_host_name_from_backend_address = true\n    protocol = \"Https\"\n    port = 443\n    path = \"/api\"\n    cookie_based_affinity = \"Disabled\"\n  }\n\n    backend_http_settings {\n     name = \"https-${var.backend-app.name}-socketio\"\n     pick_host_name_from_backend_address = true\n    protocol = \"Https\"\n    port = 443\n    path = \"/socket.io\"\n    cookie_based_affinity = \"Disabled\"\n  }\n  frontend_port {\n    name = \"https\"\n    port = 443\n  }\n\n  gateway_ip_configuration {\n    name = \"default\"\n    subnet_id = var.subnet-id\n  }\n\n  request_routing_rule {\n    name = \"https-rule\"\n    rule_type = \"PathBasedRouting\"\n    http_listener_name = \"https-listener\"\n    priority = 100\n    url_path_map_name = \"default-map\"\n  }\n\n  url_path_map {\n    name = \"default-map\"\n    default_backend_address_pool_name = \"pool-${var.frontend-app.name}\"\n    default_backend_http_settings_name = \"https-${var.frontend-app.name}\"\n    path_rule {\n      backend_address_pool_name = \"pool-${var.backend-app.name}\"\n      backend_http_settings_name = \"https-${var.backend-app.name}-api\"\n      name = \"api-backend-rule\"\n      paths = [\"/api/*\"]\n    }\n\n    path_rule {\n      backend_address_pool_name = \"pool-${var.backend-app.name}\"\n      backend_http_settings_name = \"https-${var.backend-app.name}-socketio\"\n      name = \"socketio-backend-rule\"\n      paths = [\"/socketio/*\"]\n    }\n\n  }\n\n  frontend_ip_configuration {\n    name = \"public\"\n    public_ip_address_id = module.appgw-public-ip.public-ip-id\n  }\n}\n```\n\n\n\n\n### Debug Output\n\n```\n**During Azure application gateway ssl certificate installation fails continously with error: \nApplication Gateway Name: \"<name>\"): performing CreateOrUpdate: unexpected status 400 (400 Bad Request) with error: ApplicationGatewaySslCertificateDataTooBig: Data too big for certificate /subscriptions/<subscription_id>/resourceGroups/<rg_name>/providers/Microsoft.Network/applicationGateways/<name>/sslCertificates/<cert_name>. Max data length supported is 16384.**\n```\n\nValidated size of base64 content, and it is around 8K. \n\n\n### Expected Behavior\n\nIt should apply with 8K certificate. It also should not have size limit for certificates. If a certificate chain is long, its size can be higher. Why this part has size limit at all?\n\n### Actual Behavior\n\nDropping error message.\n```\n**During Azure application gateway ssl certificate installation fails continously with error: \nApplication Gateway Name: \"<name>\"): performing CreateOrUpdate: unexpected status 400 (400 Bad Request) with error: ApplicationGatewaySslCertificateDataTooBig: Data too big for certificate /subscriptions/<subscription_id>/resourceGroups/<rg_name>/providers/Microsoft.Network/applicationGateways/<name>/sslCertificates/<cert_name>. Max data length supported is 16384.**\n```\n\n### Steps to Reproduce\n\n1. put a pfx certificate and its password into key vault as a secret (in base64 encoded)\n2. during deployment read these values as data\n3. giving these values to the resource module or to resource \n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-11-21T15:39:19Z",
      "closed_at": "2025-11-21T17:30:13Z",
      "url": "https://github.com/hashicorp/terraform/issues/37932",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37834,
      "title": "`terraform show -json <planfile>` crashed when plan contains `ephemeral` block",
      "problem": "### Terraform Version\n\n```shell\nv1.13.4\n```\n\n### Terraform Configuration Files\n\nAny plan file contains `ephemeral` resource\n\n### Debug Output\n\nI have plan file that creates ephemeral resources and when I executed `terraform show -json planfile`, it crashed with the following error message:\n\n```text\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\nTerraform crashed! This is always indicative of a bug within Terraform.\nPlease report the crash with Terraform[1] so that we can fix this.\n\nWhen reporting bugs, please include your terraform version, the stack trace\nshown below, and any additional information which may help replicate the issue.\n\n[1]: https://github.com/hashicorp/terraform/issues\n\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\npanic: unsupported resource mode 69\ngoroutine 1 [running]:\nruntime/debug.Stack()\n        runtime/debug/stack.go:26 +0x5e\ngithub.com/hashicorp/terraform/internal/logging.PanicHandler()\n        github.com/hashicorp/terraform/internal/logging/panic.go:84 +0x16a\npanic({0x34fe320?, 0xc001e3b400?})\n        runtime/panic.go:792 +0x132\ngithub.com/hashicorp/terraform/internal/command/jsonchecks.makeStaticObjectAddr({0x44a0468, 0xc0005d5440})\n        github.com/hashicorp/terraform/internal/command/jsonchecks/objects.go:33 +0x925\ngithub.com/hashicorp/terraform/internal/command/jsonchecks.MarshalCheckStates(0xc000724218)\n        github.com/hashicorp/terraform/internal/command/jsonchecks/checks.go:51 +0x267\ngithub.com/hashicorp/terraform/internal/command/jsonplan.Marshal(0xc0008856c0, 0xc0007e64e0, 0xc0008f06c0, 0xc000b0dbd0)\n        github.com/hashicorp/terraform/internal/command/jsonplan/plan.go:317 +0x45f\ngithub.com/hashicorp/terraform/internal/command/views.(*ShowJSON).Display(0xc000724020, 0x0?, 0x0?, 0xc002045988?, 0x0?, 0x1800000000000000?)\n        github.com/hashicorp/terraform/internal/command/views/show.go:143 +0xfa\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).Run(0xc000582700, {0xc000070160, 0x2, 0x2})\n        github.com/hashicorp/terraform/internal/command/show.go:86 +0x543\ngithub.com/hashicorp/cli.(*CLI).Run(0xc0005d2280)\n        github.com/hashicorp/cli@v1.1.7/cli.go:265 +0x4de\nmain.realMain()\n        github.com/hashicorp/terraform/main.go:339 +0x1deb\nmain.main()\n        github.com/hashicorp/terraform/main.go:64 +0x13\n```\n\nI have checked the [source code](https://github.com/hashicorp/terraform/blob/b221cc00957adcd9642b2fd8cf285670405ca53b/internal/command/jsonchecks/objects.go#L26-L34):\n\n```go\nret[\"kind\"] = \"resource\"\n\t\tswitch addr.Resource.Mode {\n\t\tcase addrs.ManagedResourceMode:\n\t\t\tret[\"mode\"] = \"managed\"\n\t\tcase addrs.DataResourceMode:\n\t\t\tret[\"mode\"] = \"data\"\n\t\tdefault:\n\t\t\tpanic(fmt.Sprintf(\"unsupported resource mode %#v\", addr.Resource.Mode))\n\t\t}\n```\n\nLooks like we need add logic for `ephemeral` block?\n\n### Expected Behavior\n\nNo panic\n\n### Actual Behavior\n\nPanic, crashed\n\n### Steps to Reproduce\n\n`terraform plan -out=file` to create a plan with `ephemeral` in your TF config, then `terraform show -json <plan>`\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Thanks for filing the issue @lonegunmanb!\n\nI'm assuming that given this error, you have a `precondition` or `postcondition` within an `ephemeral` block?\n\n---\n\nThanks @jbardin for the reply, that's affirmative.\n\nI've tried to remove `precondition` and it worked.\n\nPlease feel free to close this one, or maybe you'd like to keep it open until a pr fixed the panic? Both work for me, and again, thank you so much for the help! Have a nice day!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "cli"
      ],
      "created_at": "2025-10-29T04:07:32Z",
      "closed_at": "2025-11-19T08:51:11Z",
      "url": "https://github.com/hashicorp/terraform/issues/37834",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37906,
      "title": "Linting errors caused by `golang.org/x/tools/cmd/stringer` when used with custom types that have underlying types that can't have values <0",
      "problem": "In PR https://github.com/hashicorp/terraform/pull/37901 I experienced some unexpected linting errors:\n\n```\n==> Checking that code complies with static analysis requirements...\nError: internal/backend/backendrun/operationtype_string.go:23:5: no value of type uint is less than 0 (SA4003)\nError: internal/terraform/walkoperation_string.go:27:5: no value of type byte is less than 0 (SA4003)\nmake: *** [Makefile:28: staticcheck] Error 1\nError: Process completed with exit code 2.\n```\n\n```\n==> Checking that code complies with static analysis requirements...\nError: internal/terraform/walkoperation_string.go:27:5: no value of type byte is less than 0 (SA4003)\n```\n\nThese errors originate from code that's generated from custom types using go generate and `golang.org/x/tools/cmd/stringer`. That tool is used to implement `String` methods on those types in a separate generated file. That generated code triggers the linter error, which limits our ability to address it.\n\nThe affected types are:\n* `backendrun.OperationType`: type OperationType uint\n*  `dag.walkType` : type walkType uint64\n*  `schema.getSource` : type getSource byte\n*  `terraform.walkOperation` : type walkOperation byte \n\nI've suppressed the linting errors in https://github.com/hashicorp/terraform/pull/37901 by disabling `SA4003` in the our global `staticcheck.conf` file:\n\nhttps://github.com/hashicorp/terraform/blob/6ea9ed4c3d953d954dd9274329cab8ef4139943c/staticcheck.conf#L6\n\n\n**To close this issue:**\n\nIt would be useful to identify if any of these types could be changed to have unsigned integers as the underlying type. Or, we can decide to keep the suppression of `SA4003` long term. It's be useful to make that decision explicitly instead of a short-term solution sticking around longer than planned.",
      "solution": "Automation on that issue raised this issue from 2016: https://github.com/golang/go/issues/15346\n\nFrom that issue:\n> Generated code does not need to follow style guidelines \n> Don't run golint on generated code\n\nSo the resolution to this issue is that we'll continue to ignore SA4003 in the project, and in future we might want to make that ignoring more specific to generated code. However we would need to do that with `staticcheck.conf` files put in nested directories, as we cannot put code comments in the generated code to help ignore specific lines etc.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [],
      "created_at": "2025-11-17T11:04:29Z",
      "closed_at": "2025-11-18T11:39:46Z",
      "url": "https://github.com/hashicorp/terraform/issues/37906",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37841,
      "title": "\"terraform providers lock\" does not lock providers required by tests",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.3\non darwin_arm64\n```\n\n### Terraform Configuration Files\n\n`versions.tf`\n```terraform\nterraform {\n  required_providers {\n    dns = {\n      source  = \"hashicorp/dns\"\n      version = \"~> 3.4\"\n    }\n  }\n}\n```\n\n`tests/versions.tf`\n```terraform\nterraform {\n  required_providers {\n    vault = {\n      source  = \"hashicorp/vault\"\n      version = \"~> 5.3\"\n    }\n  }\n}\n```\n\n`tests/test.tftest.hcl`\n```terraform\nrun \"test\" {\n  module {\n    source = \"./tests\"\n  }\n}\n```\n\n### Debug Output\n\nN/A\n\n### Expected Behavior\n\nChecksums for both `hashicorp/dns` (required by the root Terraform module) and `hashicorp/vault` (required by the `tests` Terraform module, which itself is required by `tests/test.tftest.hcl`) should be recorded in `.terraform.lock.hcl`, so that `terraform init -lockfile=readonly` can install the locked provider versions required by both `terraform plan` and `terraform test` commands\n\n### Actual Behavior\n\nOnly the checksum for `hashicorp/dns` is recorded in `.terraform.lock.hcl`, causing `terraform init -lockfile=readonly` to fail when it tries to add `hashicorp/vault` to `.terraform.lock.hcl`, since `terraform init` respects the providers required by modules in `tests/test.tftest.hcl`, but `terraform providers lock` does not\n\n### Steps to Reproduce\n\n1. `terraform providers lock`\n2. `terraform init -lockfile=readonly`\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "The bigger problem with that `-lockfile=readonly` situation happens as soon as you run some other command (e.g. `terraform test`) after `terraform init -lockfile=readonly` succeeds.\n\nThe installation will succeed with that warning because the installer can use the `zh:` checksums to verify the previously-unseen package. But every other command relies on `h1:` checksums to verify the extracted packages in `.terraform/providers`, so those commands can't work unless there's a `h1:` package for the current platform, and `-lockfile=readonly` prevents `terraform init` from adding the extra `h1:` checksum that those later commands would rely on.\n\nSo `-lockfile=readonly` is only useful today if you've used `terraform providers lock` to make sure you have `h1:` checksums for at least the platform where you'll be using `-lockfile=readonly`. And because of this bug, even _that_ won't work when there's a testing-only dependency.\n\nRemoving `-lockfile=readonly` from the preparation to run the tests is the only way to make this work today, I think. If this bug were fixed then the `terraform providers lock` workaround would work, at least.\n\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "confirmed",
        "new",
        "terraform test"
      ],
      "created_at": "2025-10-29T23:09:54Z",
      "closed_at": "2025-11-17T07:33:26Z",
      "url": "https://github.com/hashicorp/terraform/issues/37841",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37902,
      "title": "A method to taint resources non-imperatively",
      "problem": "### Terraform Version\n\n```shell\nN/A\n```\n\n### Use Cases\n\nI have a use-case where I need to occasionally taint a resource so that it gets recreated. To give a little bit of detail, we create some azure postgres flexible servers with HA enabled and configured terraform as an admin with the `azurerm_postgresql_flexible_server_active_directory_administrator` resource so that terraform can login to the server with the `cyrilgdn/postgresql` provider using an entra token instead of a password. This works well until the DB server fails over to the standby server. The standby, for whatever reason, doesn't have the administrators defined, so we had to taint the resource in terraform state in order to have the resource created again on the standby.\n\n### Attempted Solutions\n\nI tried to setup something to detect when the zone changes and recreate the ad administrator resources, but it is a bit brittle, and if it's pushed to try to recreate the resources in question when no failover has occurred, then the delete API just hangs indefinitely (seemingly due to ownership of objects, but that is debatable), ultimately resulting in a terraform timeout. So the answer to this that seems most obvious to me to both avoid needing to run imperative commands, and avoid this timeout, is to simply put a boolean flag in the lifecycle block that simply tells terraform to recreate the resource.\n\nAlternatively, I need to write `removed {}` blocks when a server fails over, then run terraform apply to remove those resources from state, then remove those `removed {}` blocks and run another terraform apply to recreate those resources.\n\n### Proposal\n\nIt would be very useful to us if we have something like a boolean `lifecycle.tainted` meta argument that we can set to true or false in the code for the resource to let terraform know to mark the resource tainted and recreate it when we need to, without having to use the imperative `terraform taint` command.\n\n### References\n\nhashicorp/terraform-provider-azurerm#24736 details the failure to destroy the `azurerm_postgresql_flexible_server_active_directory_administrator` resources.",
      "solution": "Ah, I think I see what the problem is then. The resource has already changed remotely, but you want to somehow detect that change. I'm still not sure how the data source fixes it, since I would expect that to be updated as well, but it could be leveraging an inconsistency in the providers implementation, or depending on the structure of the config to hide the update to the data source until apply.\n\nIf you want to detect a change to the `.zone` attribute between the last apply and the next plan when that value may change outside of Terraform, it would be more reliable to store that value directly. Referencing the resource's `.zone` value into a `terraform_data` resource would retain the last known value, and any change would then show up as a change the configuration which would be referenceable from `replace_triggered_by`.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "waiting-response",
        "new"
      ],
      "created_at": "2025-11-15T13:28:46Z",
      "closed_at": "2025-11-17T16:16:52Z",
      "url": "https://github.com/hashicorp/terraform/issues/37902",
      "comments_count": 10
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37678,
      "title": "Consul Backend is not working with latest version of Consul (1.21.5)",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.3\non linux_amd64\n```\n\n### Terraform Configuration Files\n\n```terraform\nterraform {\n  backend \"consul\" {\n    address = \"192.168.1.30:8500\"\n    scheme  = \"http\"\n    path    = \"terraform/state\"\n  }\n}\n```\n\n\n### Debug Output\n\n```\nterraform init\n2025-09-25T21:40:45.235-0400 [INFO]  Terraform version: 1.13.3\n2025-09-25T21:40:45.235-0400 [DEBUG] using github.com/hashicorp/go-tfe v1.74.1\n2025-09-25T21:40:45.235-0400 [DEBUG] using github.com/hashicorp/hcl/v2 v2.24.0\n2025-09-25T21:40:45.235-0400 [DEBUG] using github.com/hashicorp/terraform-svchost v0.1.1\n2025-09-25T21:40:45.235-0400 [DEBUG] using github.com/zclconf/go-cty v1.16.3\n2025-09-25T21:40:45.235-0400 [INFO]  Go runtime version: go1.24.5\n2025-09-25T21:40:45.235-0400 [INFO]  CLI args: []string{\"terraform\", \"init\"}\n2025-09-25T21:40:45.235-0400 [TRACE] Stdout is a terminal of width 156\n2025-09-25T21:40:45.235-0400 [TRACE] Stderr is a terminal of width 156\n2025-09-25T21:40:45.235-0400 [TRACE] Stdin is a terminal\n2025-09-25T21:40:45.235-0400 [DEBUG] Attempting to open CLI config file: /home/user/.terraformrc\n2025-09-25T21:40:45.235-0400 [DEBUG] File doesn't exist, but doesn't need to. Ignoring.\n2025-09-25T21:40:45.235-0400 [DEBUG] ignoring non-existing provider search directory terraform.d/plugins\n2025-09-25T21:40:45.235-0400 [DEBUG] ignoring non-existing provider search directory /home/user/.terraform.d/plugins\n2025-09-25T21:40:45.235-0400 [DEBUG] ignoring non-existing provider search directory /home/user/.local/share/terraform/plugins\n2025-09-25T21:40:45.235-0400 [DEBUG] ignoring non-existing provider search directory /home/user/.local/share/flatpak/exports/share/terraform/plugins\n2025-09-25T21:40:45.235-0400 [DEBUG] ignoring non-existing provider search directory /var/lib/flatpak/exports/share/terraform/plugins\n2025-09-25T21:40:45.235-0400 [DEBUG] ignoring non-existing provider search directory /usr/local/share/terraform/plugins\n2025-09-25T21:40:45.235-0400 [DEBUG] ignoring non-existing provider search directory /usr/share/terraform/plugins\n2025-09-25T21:40:45.235-0400 [INFO]  CLI command args: []string{\"init\"}\nInitializing the backend...\n2025-09-25T21:40:45.236-0400 [TRACE] Meta.Backend: built configuration for \"consul\" backend with hash value 1439040377\n2025-09-25T21:40:45.236-0400 [TRACE] Meta.Backend: backend has not previously been initialized in this working directory\n2025-09-25T21:40:45.236-0400 [TRACE] Meta.Backend: moving from default local state only to \"consul\" backend\n2025-09-25T21:40:45.236-0400 [DEBUG] checking for provisioner in \".\"\n2025-09-25T21:40:45.241-0400 [DEBUG] checking for provisioner in \"/usr/bin\"\n2025-09-25T21:40:45.241-0400 [TRACE] backend/local: state manager for workspace \"default\" will:\n - read initial snapshot from terraform.tfstate\n - write new snapshots to terraform.tfstate\n - create any backup at terraform.tfstate.backup\n2025-09-25T21:40:45.241-0400 [TRACE] statemgr.Filesystem: reading initial snapshot from terraform.tfstate\n2025-09-25T21:40:45.241-0400 [TRACE] statemgr.Filesystem: snapshot file has nil snapshot, but that's okay\n2025-09-25T21:40:45.241-0400 [TRACE] statemgr.Filesystem: read nil snapshot\n2025-09-25T21:40:45.241-0400 [TRACE] Meta.Backend: ignoring local \"default\" workspace because its state is empty\n\u2577\n\u2502 Error: Failed to get existing workspaces: Unexpected response code: 500 (invalid key name, keys should respect the \"^[a-zA-Z0-9,_./\\\\-?&=]+$\" format)\n```\n\nThe error from the Consul logs:\n```\n2025-09-26T01:40:45.248800+00:00 pi01 consul[1212181]: 2025-09-26T01:40:45.247Z [ERROR] agent.http: Request error: method=GET url=\"/v1/kv/terraform/state-env:?keys=&separator=%2F\" from=10.50.2.12:57896 error=\"invalid key name, keys should respect the \\\"^[a-zA-Z0-9,_./\\\\-?&=]+$\\\" format\"\n```\n\n\n### Expected Behavior\n\nA successful init when using Consul `v1.21.5`, the same way as it is working on `v1.21.4`\n\n### Actual Behavior\n\nThe init is failing with \n```\nError: Failed to get existing workspaces: Unexpected response code: 500 (invalid key name, keys should respect the \"^[a-zA-Z0-9,_./\\\\-?&=]+$\" format)\n```\n\nIt work well on Consul v1.21.4\n\nIt's unclear if this is a temporary bug in Consul that will be fixed, or a new, permanent feature. The pull request (https://github.com/hashicorp/consul/pull/22682) calls this a fix, which implies that others will now have to adjust their configurations. Given that both are HashiCorp products, a seamless integration should be a priority.\n\n### Steps to Reproduce\n\n1. Install/Upgrade Consul version 1.21.5\n2. Configure the Consul Backend\n3. Run `terraform init`\n\n### Additional Context\n\n_No response_\n\n### References\n\n\nhttps://github.com/hashicorp/consul/pull/22682\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Thank you @dduzgun-security. For now, I've simply reverted to the previous version of Consul. This isn't critical for me since it's just my local environment, a so-called Home Lab.\n\nThe frustration began when I decided to experiment with a \"local\" remote state and discovered the officially supported Terraform + Consul solution. Naturally, I installed the latest and greatest versions, and it didn't work. I initially suspected user error and spent time digging and troubleshooting until I realized it was not my problem (but a compatibility issue).\n\nSince this is a very fresh problem, even AI couldn't offer a solution. I decided to open an issue mainly for visibility and to potentially help others. I'm unsure how popular the Terraform + Consul combination is, but if the existence of this open issue helps even one person save some time, that's already a win.\n\n---\n\nFYI - [Consul v1.22.0 was released](https://github.com/hashicorp/consul/releases/tag/v1.22.0) some time ago, and this specific issue has been fixed. Probably, this issue might be closed.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "upstream",
        "backend/consul",
        "new"
      ],
      "created_at": "2025-09-26T02:03:29Z",
      "closed_at": "2025-11-17T18:07:48Z",
      "url": "https://github.com/hashicorp/terraform/issues/37678",
      "comments_count": 8
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37897,
      "title": "Add support for custom type in output object",
      "problem": "### Terraform Version\n\n```shell\nv1.13.4\n```\n\n### Use Cases\n\nI want to create a module to manage variables automatically depending on the workspace.\n\nFor this, I create a module, and set the variables as locals:\n```\nlocals {\n    test = {\n      region        = \"eu-central-1\"\n      environment   = \"test\"\n    }\n}\n```\n\nand then \n``\u00b4\nlocals {\n  environments = {\n    \"test\" : local.test\n    \"int\" : local.int\n    \"prod\" : local.prod\n  }\n}\n\nvariable \"environment\" {\n  description = \"The environment which to fetch the configuration for.\"\n  type        = string\n}\n\noutput \"env\" {\n  value = local.environments[var.environment]\n}\n```\n\nIn the caller, I want to use:\n\nmodule.vars.env.region\n\n### Attempted Solutions\n\nI tried to define the output type, but doesn't work.\nI'm using this solution, because I don't find other option to avoid specifying the correct tfvars file in the command line. I like to reduce human error so reducing the arguments to pass to terraform\n\n### Proposal\n\nOutput field can be type defined, at least for guidance in the caller.\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "new"
      ],
      "created_at": "2025-11-14T10:20:27Z",
      "closed_at": "2025-11-14T14:15:33Z",
      "url": "https://github.com/hashicorp/terraform/issues/37897",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 27459,
      "title": "`init` fails for development overrides",
      "problem": "### Terraform Version\r\n\r\n```\r\n$ terraform version\r\nTerraform v0.14.4\r\n```\r\n\r\n### Description\r\n\r\nWith the following `~/.terraformrc`:\r\n\r\n```\r\nprovider_installation {\r\n   dev_overrides {\r\n     \"hashicorp/azurerm\" = \"/Users/tharvey/code/bin\"\r\n   }\r\n\r\n   # For all other providers, install them directly from their origin provider\r\n   # registries as normal. If you omit this, Terraform will _only_ use\r\n   # the dev_overrides block, and so no other providers will be available.\r\n   direct {}\r\n }\r\n\r\n```\r\n\r\nAnd a new directory containing the following `main.tf`:\r\n\r\n```\r\nterraform {\r\n  required_providers {\r\n    azurerm = {\r\n      source  = \"hashicorp/azurerm\"\r\n    }\r\n  }\r\n}\r\n\r\nprovider \"azurerm\" {\r\n  features {}\r\n}\r\n\r\nresource \"azurerm_resource_group\" \"test\" {\r\n  name = \"tom-dev\"\r\n  location = \"west europe\"\r\n}\r\n```\r\n\r\nThen `terraform init` should pick up the local override, however it instead pulls this from the registry:\r\n\r\n```\r\n$ ls -la\r\ntotal 8\r\ndrwxr-xr-x  3 tharvey  staff   96 11 Jan 09:30 .\r\ndrwxr-xr-x  8 tharvey  staff  256 11 Jan 09:17 ..\r\n-rw-r--r--  1 tharvey  staff  229 11 Jan 09:30 main.tf\r\n\r\n$ terraform init\r\n\r\nInitializing the backend...\r\n\r\nInitializing provider plugins...\r\n- Finding latest version of hashicorp/azurerm...\r\n- Installing hashicorp/azurerm v2.42.0...\r\n- Installed hashicorp/azurerm v2.42.0 (signed by HashiCorp)\r\n\r\nTerraform has created a lock file .terraform.lock.hcl to record the provider\r\nselections it made above. Include this file in your version control repository\r\nso that Terraform can guarantee to make the same selections by default when\r\nyou run \"terraform init\" in the future.\r\n\r\n\r\nWarning: Provider development overrides are in effect\r\n\r\nThe following provider development overrides are set in the CLI configuration:\r\n - hashicorp/azurerm in /Users/tharvey/code/bin\r\n\r\nThe behavior may therefore not match any released version of the provider and\r\napplying changes may cause the state to become incompatible with published\r\nreleases.\r\n\r\nTerraform has been successfully initialized!\r\n\r\nYou may now begin working with Terraform. Try running \"terraform plan\" to see\r\nany changes that are required for your infrastructure. All Terraform commands\r\nshould now work.\r\n\r\nIf you ever set or change modules or backend configuration for Terraform,\r\nrerun this command to reinitialize your working directory. If you forget, other\r\ncommands will detect it and remind you to do so if necessary\r\n```\r\n\r\nHowever this actually installs the latest version from the registry, currently v2.42.0:\r\n\r\n```\r\n$ tree -la\r\n.\r\n\u251c\u2500\u2500 .terraform\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 providers\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 registry.terraform.io\r\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 hashicorp\r\n\u2502\u00a0\u00a0             \u2514\u2500\u2500 azurerm\r\n\u2502\u00a0\u00a0                 \u2514\u2500\u2500 2.42.0\r\n\u2502\u00a0\u00a0                     \u2514\u2500\u2500 darwin_amd64\r\n\u2502\u00a0\u00a0                         \u2514\u2500\u2500 terraform-provider-azurerm_v2.42.0_x5\r\n\u251c\u2500\u2500 .terraform.lock.hcl\r\n\u2514\u2500\u2500 main.tf\r\n\r\n7 directories, 3 files\r\n```\r\n\r\n```\r\n$ cat .terraform.lock.hcl\r\n# This file is maintained automatically by \"terraform init\".\r\n# Manual edits may be lost in future updates.\r\n\r\nprovider \"registry.terraform.io/hashicorp/azurerm\" {\r\n  version = \"2.42.0\"\r\n  hashes = [\r\n    \"h1:oxyi21Gz35Cup/JPqPaGtxunuqMuJHHYMBzBEieMhbw=\",\r\n    \"zh:5b6d6b9d53efb09d1bff83fff019107ffaf2a79a68c9f59b9541098503c9d7a8\",\r\n    \"zh:87886113155f25a9875e5b0812568953bf6a523b2c604ae0860054b464d1e2fe\",\r\n    \"zh:9022504ad36b9ec3132cf8a74ae150583a3798f4aea39efd323db52fe180cdbb\",\r\n    \"zh:98b06bababc7dfc888e8723f563f3da8bc87ee9e0e2a6fe681a157b54e1eeb01\",\r\n    \"zh:b58b6e959ce7f5d37545e9abe2375adab474845e37d6b192dd9f94ca213bc461\",\r\n    \"zh:c36fd2e03bf83b6e36a59712d1e57234194455ff761ea01e62af959d08fb51b4\",\r\n    \"zh:c3ac50af9682c9719f3953ade2bd545cdc02e3d23741b805dc4b891916df0d73\",\r\n    \"zh:c84e0c84ae17a8d2322a6a4d3a9e48077247683591b113cf1dd14cef7e64e1d8\",\r\n    \"zh:f328085cb6f6ec5b6b38476b219f9caca8c02c86b0013e5377cd100a8e9169e5\",\r\n    \"zh:f33cd91ad1a173ded18fe2ccf5648d4f40bcfab893c1b5b80df7a3123f7b8297\",\r\n  ]\r\n}\r\n```\r\n\r\nRemoving the `.terraform` and `.terraform.lock.hcl` files, it's possible to run `terraform plan|apply|destroy` just fine, using the local/development provider however:\r\n\r\n```\r\n$ terraform plan\r\n\r\nAn execution plan has been generated and is shown below.\r\nResource actions are indicated with the following symbols:\r\n + create\r\n\r\nTerraform will perform the following actions:\r\n\r\n # azurerm_resource_group.test will be created\r\n + resource \"azurerm_resource_group\" \"test\" {\r\n     + id       = (known after apply)\r\n     + location = \"westeurope\"\r\n     + name     = \"tom-dev\"\r\n   }\r\n\r\nPlan: 1 to add, 0 to change, 0 to destroy.\r\n\r\n------------------------------------------------------------------------\r\n\r\nNote: You didn't specify an \"-out\" parameter to save this plan, so Terraform\r\ncan't guarantee that exactly these actions will be performed if\r\n\"terraform apply\" is subsequently run.\r\n```\r\n\r\n```\r\n$ terraform apply\r\n\r\nWarning: Provider development overrides are in effect\r\n\r\nThe following provider development overrides are set in the CLI configuration:\r\n- hashicorp/azurerm in /Users/tharvey/code/bin\r\n\r\nThe behavior may therefore not match any released version of the provider and\r\napplying changes may cause the state to become incompatible with published\r\nreleases.\r\n\r\n\r\nAn execution plan has been generated and is shown below.\r\nResource actions are indicated with the following symbols:\r\n + create\r\n\r\nTerraform will perform the following actions:\r\n\r\n # azurerm_resource_group.test will be created\r\n + resource \"azurerm_resource_group\" \"test\" {\r\n     + id       = (known after apply)\r\n     + location = \"westeurope\"\r\n     + name     = \"tom-dev\"\r\n   }\r\n\r\nPlan: 1 to add, 0 to change, 0 to destroy.\r\n\r\nDo you want to perform these actions?\r\n Terraform will perform the actions described above.\r\n Only 'yes' will be accepted to approve.\r\n\r\n Enter a value: yes\r\n\r\nazurerm_resource_group.test: Creating...\r\nazurerm_resource_group.test: Creation complete after 2s [id=/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/tom-dev]\r\n\r\nApply complete! Resources: 1 added, 0 changed, 0 destroyed.\r\n```\r\n\r\n```\r\n$ terraform destroy\r\n\r\nWarning: Provider development overrides are in effect\r\n\r\nThe following provider development overrides are set in the CLI configuration:\r\n - hashicorp/azurerm in /Users/tharvey/code/bin\r\n\r\nThe behavior may therefore not match any released version of the provider and\r\napplying changes may cause the state to become incompatible with published\r\nreleases.\r\n\r\n\r\nAn execution plan has been generated and is shown below.\r\nResource actions are indicated with the following symbols:\r\n  - destroy\r\n\r\nTerraform will perform the following actions:\r\n\r\n  # azurerm_resource_group.test will be destroyed\r\n  - resource \"azurerm_resource_group\" \"test\" {\r\n      - id       = \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/tom-dev\" -> null\r\n      - location = \"westeurope\" -> null\r\n      - name     = \"tom-dev\" -> null\r\n    }\r\n\r\nPlan: 0 to add, 0 to change, 1 to destroy.\r\n\r\nDo you really want to destroy all resources?\r\n  Terraform will destroy all your managed infrastructure, as shown above.\r\n  There is no undo. Only 'yes' will be accepted to confirm.\r\n\r\n  Enter a value: yes\r\n\r\nazurerm_resource_group.test: Destroying... [id=/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/tom-dev]\r\nazurerm_resource_group.test: Still destroying... [id=/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/tom-dev, 10s elapsed]\r\nazurerm_resource_group.test: Still destroying... [id=/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/tom-dev, 20s elapsed]\r\nazurerm_resource_group.test: Still destroying... [id=/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/tom-dev, 30s elapsed]\r\nazurerm_resource_group.test: Still destroying... [id=/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/tom-dev, 40s elapsed]\r\nazurerm_resource_group.test: Destruction complete after 47s\r\n\r\nDestroy complete! Resources: 1 destroyed.\r\n```\r\n\r\n---\r\n\r\nIt's worth noting that if using a provider not available in the registry, such as an alias in this case to intentionally ignore it, `terraform init` fails instead. For example, updating the `~/.terraformrc` to:\r\n\r\n```\r\nprovider_installation {\r\n   dev_overrides {\r\n     \"tombuildsstuff/azurerm\" = \"/Users/tharvey/code/bin\"\r\n   }\r\n\r\n   # For all other providers, install them directly from their origin provider\r\n   # registries as normal. If you omit this, Terraform will _only_ use\r\n   # the dev_overrides block, and so no other providers will be available.\r\n   direct {}\r\n }\r\n\r\n```\r\n\r\nand using the following `main.tf`:\r\n\r\n```\r\nterraform {\r\n  required_providers {\r\n    azurerm = {\r\n      source  = \"tombuildsstuff/azurerm\"\r\n    }\r\n  }\r\n}\r\n\r\nprovider \"azurerm\" {\r\n  features {}\r\n}\r\n\r\nresource \"azurerm_resource_group\" \"test\" {\r\n  name = \"tom-dev\"\r\n  location = \"west europe\"\r\n}\r\n```\r\n\r\nReturns a failure when using `terraform init`:\r\n\r\n```\r\n$ terraform init\r\n\r\nInitializing the backend...\r\n\r\nInitializing provider plugins...\r\n- Finding latest version of tombuildsstuff/azurerm...\r\n\r\nWarning: Provider development overrides are in effect\r\n\r\nThe following provider development overrides are set in the CLI configuration:\r\n - tombuildsstuff/azurerm in /Users/tharvey/code/bin\r\n\r\nThe behavior may therefore not match any released version of the provider and\r\napplying changes may cause the state to become incompatible with published\r\nreleases.\r\n\r\n\r\nError: Failed to query available provider packages\r\n\r\nCould not retrieve the list of available versions for provider\r\ntombuildsstuff/azurerm: provider registry registry.terraform.io does not have\r\na provider named registry.terraform.io/tombuildsstuff/azurerm\r\n\r\nIf you have just upgraded directly from Terraform v0.12 to Terraform v0.14\r\nthen please upgrade to Terraform v0.13 first and follow the upgrade guide for\r\nthat release, which might help you address this problem.\r\n```\r\n\r\nBut again a `terraform plan` (etc) work fine:\r\n\r\n```\r\n$ terraform plan\r\n\r\nAn execution plan has been generated and is shown below.\r\nResource actions are indicated with the following symbols:\r\n + create\r\n\r\nTerraform will perform the following actions:\r\n\r\n # azurerm_resource_group.test will be created\r\n + resource \"azurerm_resource_group\" \"test\" {\r\n     + id       = (known after apply)\r\n     + location = \"westeurope\"\r\n     + name     = \"tom-dev\"\r\n   }\r\n\r\nPlan: 1 to add, 0 to change, 0 to destroy.\r\n\r\n------------------------------------------------------------------------\r\n\r\nNote: You didn't specify an \"-out\" parameter to save this plan, so Terraform\r\ncan't guarantee that exactly these actions will be performed if\r\n\"terraform apply\" is subsequently run.\r\n```\r\n\r\nAs such it appears this failure is specific to `init`.\r\n\r\n### References\r\n\r\n- #27358\r\n- #27409 - although this appears to be the inverse\r\n",
      "solution": "Indeed, once you are using `dev_overrides` for one provider you will typically need to use it for all of them, or at least tolerate `terraform init` failing (it should still install the providers that _are_ accessible, before returning the error) and proceed to run `terraform plan` or `terraform apply` anyway.\r\n\r\n---\r\n\r\nI think the main requirement for a full solution to this problem is ensuring that running `terraform init` with `dev_overrides` set can't produce a `.terraform.lock.hcl` file that would then lead to a failure running _without_ `dev_overrides` set.\r\n\r\nIn particular, that means it would not be correct to record a checksum of the override directory in the lock file, because that checksum would typically not be reproducible by anyone running `terraform init` normally, without any overrides.\r\n\r\nCurrently we meet this requirement by trying to install the upstream provider _anyway_ and recording the lock file entries that result from it, even though that provider won't actually be used at runtime with the dev override in effect. It's possible that we could meet it a different way by omitting the overridden providers from the lock file altogether; I think if we did that we'd need to generate a loud warning that Terraform has produced an _incomplete_ lock file, because that would subvert the typical `terraform init` guarantee that if you save the lock file then you will always get exactly the same providers on subsequent runs. Without a lock file entry for a particular provider, a subsequent run of `terraform init` would see it as an entirely new provider, and thus there would be no verification that the package matches a previously-recorded checksum.\r\n\r\n\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "cli"
      ],
      "created_at": "2021-01-11T08:49:12Z",
      "closed_at": "2025-11-12T08:23:18Z",
      "url": "https://github.com/hashicorp/terraform/issues/27459",
      "comments_count": 11
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37593,
      "title": "Flaky test: TestTest_Parallel",
      "problem": "This test is flaky and should be skipped until it's resolved.\n\nExample failures on main:\n* https://github.com/hashicorp/terraform/actions/runs/17638545883/job/50119936068\n* https://github.com/hashicorp/terraform/actions/runs/17550274698/job/49840894934\n\n```\n--- FAIL: TestTest_Parallel (0.47s)\n    test_test.go:1321: test_d appears after test_c in the log output\nFAIL\n```",
      "solution": "Hi, I tried to reproduce this error locally to understand the issue better. Printing out the actual output helped a bit here:\n\n```.go\n    // Use t.Logf(\"%d: %s\", i, line) to print out the line number and its content\n    test_test.go:1312: 44: parallel.tftest.hcl... in progress\n    test_test.go:1312: 45:   run \"test_5\"... pass\n    test_test.go:1312: 46:   run \"setup\"... pass\n    test_test.go:1312: 47:   run \"test_1\"... pass\n    test_test.go:1312: 48:   run \"test_15\"... pass\n    test_test.go:1312: 49:   run \"test_a\"... pass\n    test_test.go:1312: 50:   run \"test_9\"... pass\n    test_test.go:1312: 51:   run \"test_25\"... pass\n    test_test.go:1312: 52:   run \"test_2\"... pass\n    test_test.go:1312: 53:   run \"test_6\"... pass\n    test_test.go:1312: 54:   run \"test_b\"... pass\n    test_test.go:1312: 55:   run \"test_10\"... pass\n    test_test.go:1312: 56:   run \"test_16\"... pass\n    test_test.go:1312: 57:   run \"test_c\"... pass\n    test_test.go:1312: 58:   run \"test_d\"... pass\n    test_test.go:1312: 59:   run \"test_12\"... pass\n    test_test.go:1312: 60:   run \"test_26\"... pass\n    test_test.go:1312: 61:   run \"test_11\"... pass\n    test_test.go:1312: 62:   run \"test_3\"... pass\n    test_test.go:1312: 63:   run \"test_20\"... pass\n    test_test.go:1312: 64:   run \"test_19\"... pass\n    test_test.go:1312: 65:   run \"test_22\"... pass\n    test_test.go:1312: 66:   run \"test_4\"... pass\n    test_test.go:1312: 67:   run \"test_21\"... pass\n    test_test.go:1312: 68:   run \"test_30\"... pass\n    test_test.go:1312: 69:   run \"test_7\"... pass\n    test_test.go:1312: 70:   run \"test_29\"... pass\n    test_test.go:1312: 71:   run \"test_8\"... pass\n    test_test.go:1312: 72:   run \"test_13\"... pass\n    test_test.go:1312: 73:   run \"test_14\"... pass\n    test_test.go:1312: 74:   run \"test_17\"... pass\n    test_test.go:1312: 75:   run \"test_18\"... pass\n    test_test.go:1312: 76:   run \"test_23\"... pass\n    test_test.go:1312: 77:   run \"test_24\"... pass\n    test_test.go:1312: 78:   run \"test_27\"... pass\n    test_test.go:1312: 79:   run \"test_28\"... pass\n    test_test.go:1312: 80: parallel.tftest.hcl... tearing down\n    test_test.go:1312: 81: parallel.tftest.hcl... pass\n    test_test.go:1312: 82: \n    test_test.go:1312: 83: Success! 40 passed, 0 failed.\n    test_test.go:1312: 84: \n    test_test.go:1328: test_d appears after test_c in the log output\n```\n\nIIUC, when running the DAG in parallel, valid vertices can be picked up in different orders (see [ `walkVertex`](https://github.com/hashicorp/terraform/blob/main/internal/dag/walk.go#L332) and [`waitDeps`](https://github.com/hashicorp/terraform/blob/main/internal/dag/walk.go#L419)). We can guarantee the dependency order for `test_a`, `test_b`, `test_c`, but we cannot guarantee the order between `test_d` and `test_c`?\n\n---\n\nHi @rMaxiQp,\n\nFor the option 2 here, I think even if we run the test multiple times, there is a non-zero chance that `test_a` runs every time before `test_d`. In this case, if a future regression causes `test_d` to depend on `test_a`, the go test would not detect the problem.\n\nFor option 1,\nWe can use a resource attribute `create_wait_seconds` to mimic a delayed creation, and then accept that value as a variable input from the run, so that only the`test_a` run makes a delayed creation. `test_d` should have been run while the other chain is being delayed.\n\ne.g\n\n// main.tf\n```terraform\nvariable \"delay\" {\n  default = 0\n}\n\nresource \"test_resource\" \"foo\" {\n  create_wait_seconds = var.delay\n  value = var.input\n}\n```\n\n// parallel.tftest.hcl\n```terraform\nrun \"test_a\" {\n  variables {\n    input = run.setup.value\n    delay = 5\n  }\n\n...rest\n}\n```\n\nThis would force `test_a` to spend at least 5 seconds during the resource creation.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "tests"
      ],
      "created_at": "2025-09-11T09:42:01Z",
      "closed_at": "2025-11-11T12:47:27Z",
      "url": "https://github.com/hashicorp/terraform/issues/37593",
      "comments_count": 6
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37887,
      "title": "Terraform 1.6.0 crashes during validate with \u201cvalue is marked, so must be unmarked first\u201d when conditional references resource with count = 0",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.6.0\non linux_amd64\nprovider registry.terraform.io/hashicorp/aws v6.20.0\n```\n\n### Terraform Configuration Files\n\nterraform {\n  required_version = \">= 1.6.0\"\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \">= 6.0.0\"\n    }\n  }\n}\n\nprovider \"aws\" {\n  region = \"us-east-1\"\n}\n\nvariable \"use_default_bus\" {\n  type    = bool\n  default = true\n}\n\n# When true, data exists and resource count = 0\ndata \"aws_cloudwatch_event_bus\" \"default\" {\n  count = var.use_default_bus ? 1 : 0\n  name  = \"default\"\n}\n\n# When true, this resource does not exist (count = 0)\nresource \"aws_cloudwatch_event_bus\" \"this\" {\n  count = var.use_default_bus ? 0 : 1\n  name  = \"example-bus\"\n}\n\nlocals {\n  # Conditional references a possibly-nonexistent resource index on the else branch.\n  # On Terraform 1.6.0 this can crash validate with cty marks error.\n  event_bus_arn = var.use_default_bus\n    ? data.aws_cloudwatch_event_bus.default[0].arn\n    : aws_cloudwatch_event_bus.this[0].arn\n}\n\noutput \"event_bus_arn\" {\n  value = local.event_bus_arn\n}\n\n### Debug Output\n\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\nvalue is marked, so must be unmarked first\n\ngithub.com/zclconf/go-cty/cty.Value.assertUnmarked(...)\ngithub.com/zclconf/go-cty/cty.Value.AsString(...)\ngithub.com/zclconf/go-cty/cty.Value.Range(...)\ngithub.com/hashicorp/hcl/v2/hclsyntax.(*ConditionalExpr).Value(...)\ngithub.com/hashicorp/terraform/internal/terraform.(*NodeValidatableResource).validateResource(...)\n\n\n### Expected Behavior\n\nterraform validate should succeed or return a normal diagnostic; it should not crash.\n\n### Actual Behavior\n\nterraform validate crashes with:\n\u201cvalue is marked, so must be unmarked first\u201d\nStack trace shows hclsyntax.(*ConditionalExpr).Value and cty marks.\n\n### Steps to Reproduce\n\nSave the configuration above as main.tf.\nRun:\nterraform init -input=false -upgrade\nterraform validate\nCrash reproduces consistently on Terraform 1.6.0.\n\n### Additional Context\n\nEnvironment: CI runner (Ubuntu), Terraform 1.6.0, aws provider v6.20.0.\nThe crash appears tied to a conditional expression that selects between a data source and a resource whose count = 0, referencing aws_cloudwatch_event_bus.this[0].arn on the else branch. Although conditionals should short-circuit, evaluating branch metadata seems to propagate cty marks and triggers the panic.\n\n### References\n\nN/A (could not find an existing issue specifically for this exact crash; it resembles prior cty marks/conditional evaluation bugs)\n\n### Generative AI / LLM assisted development?\n\nCursor -  ChatGPT-5",
      "solution": "Hi @mediocrates97,\n\nYou should not be using an unpatched version of Terraform, the latest release of v1.6 was 1.6.6, and should contain a fix for this issue. Since v1.6 is no longer supported, if that does not remedy the issue, please verify the issue exists in a current release and file a new issue with the complete stack trace and configuration.\n\nThanks!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-11-10T18:05:03Z",
      "closed_at": "2025-11-10T20:35:59Z",
      "url": "https://github.com/hashicorp/terraform/issues/37887",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37406,
      "title": "Wrong detailed exit code when using the refresh only option",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.12.2\n```\n\n### Terraform Configuration Files\n\n```\nresource \"aws_ebs_volume\" \"example\" {\n  availability_zone = \"us-east-1c\"\n  size              = 40\n\n  tags = {\n    Name = \"Pipeline PoC\"\n  }\n}\n\nterraform {\n  backend \"s3\" {\n    bucket = \"...\"\n    key    = \"pipeline-poc\"\n    region = \"us-east-1\"\n    profile = \"...\"\n  }\n}\n\nprovider \"aws\" {\n region = \"us-east-1\"\n profile = \"...\"\n}\n```\n\n\n### Debug Output\n\n```\naws_ebs_volume.example: Refreshing state... [id=vol-09f9d4c4286366762]\n2025-08-06T12:31:48.838+0200 [TRACE] GRPCProvider: ReadResource\n2025-08-06T12:31:48.838+0200 [TRACE] GRPCProvider: GetProviderSchema\n2025-08-06T12:31:48.838+0200 [TRACE] GRPCProvider: returning cached schema: EXTRA_VALUE_AT_END=registry.terraform.io/hashicorp/aws\n2025-08-06T12:31:48.838+0200 [TRACE] provider.terraform-provider-aws_v6.7.0_x5: Received request: tf_req_id=97d5f9b5-c9c6-671f-7d45-8d711154bd33 tf_resource_type=aws_ebs_volume tf_rpc=ReadResource @caller=github.com/hashicorp/terraform-plugin-go@v0.28.0/tfprotov5/tf5server/server.go:847 @module=sdk.proto tf_proto_version=5.9 tf_provider_addr=registry.terraform.io/hashicorp/aws timestamp=\"2025-08-06T12:31:48.838+0200\"\n2025-08-06T12:31:48.838+0200 [TRACE] provider.terraform-provider-aws_v6.7.0_x5: Announced client capabilities: @caller=github.com/hashicorp/terraform-plugin-go@v0.28.0/tfprotov5/internal/tf5serverlogging/client_capabilities.go:66 @module=sdk.proto tf_client_capability_deferral_allowed=false tf_resource_type=aws_ebs_volume tf_proto_version=5.9 tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=97d5f9b5-c9c6-671f-7d45-8d711154bd33 tf_rpc=ReadResource timestamp=\"2025-08-06T12:31:48.838+0200\"\n2025-08-06T12:31:48.838+0200 [TRACE] provider.terraform-provider-aws_v6.7.0_x5: Sending request downstream: tf_proto_version=5.9 tf_req_id=97d5f9b5-c9c6-671f-7d45-8d711154bd33 tf_resource_type=aws_ebs_volume tf_rpc=ReadResource @module=sdk.proto @caller=github.com/hashicorp/terraform-plugin-go@v0.28.0/tfprotov5/internal/tf5serverlogging/downstream_request.go:22 tf_provider_addr=registry.terraform.io/hashicorp/aws timestamp=\"2025-08-06T12:31:48.838+0200\"\n2025-08-06T12:31:48.838+0200 [TRACE] provider.terraform-provider-aws_v6.7.0_x5: calling downstream server: @caller=github.com/hashicorp/terraform-plugin-mux@v0.20.0/internal/logging/mux.go:19 @module=sdk.mux tf_mux_provider=\"*schema.GRPCProviderServer\" tf_rpc=ReadResource timestamp=\"2025-08-06T12:31:48.838+0200\"\n2025-08-06T12:31:48.839+0200 [TRACE] provider.terraform-provider-aws_v6.7.0_x5: Calling downstream: tf_mux_provider=\"*schema.GRPCProviderServer\" tf_req_id=97d5f9b5-c9c6-671f-7d45-8d711154bd33 tf_rpc=ReadResource @module=sdk.helper_schema tf_resource_type=aws_ebs_volume @caller=github.com/hashicorp/terraform-plugin-sdk/v2@v2.37.0/helper/schema/resource.go:1161 tf_provider_addr=registry.terraform.io/hashicorp/aws timestamp=\"2025-08-06T12:31:48.838+0200\"\n2025-08-06T12:31:48.840+0200 [DEBUG] provider.terraform-provider-aws_v6.7.0_x5: HTTP Request Sent: http.method=POST tf_aws.sdk=aws-sdk-go-v2 @module=aws http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=ASIA************VXGS/20250806/us-east-1/ec2/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=*****\" http.url=https://ec2.us-east-1.amazonaws.com/ http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.11.0 (+https://www.terraform.io) terraform-provider-aws/6.7.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.37.1 ua/2.1 os/macos lang/go#1.24.5 md/GOOS#darwin md/GOARCH#arm64 api/ec2#1.238.0 m/C,t,u\" tf_aws.signing_region=\"\" @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.65/logging/tf_logger.go:45 http.request.header.content_type=application/x-www-form-urlencoded http.request.header.x_amz_security_token=\"*****\" http.request.header.amz_sdk_invocation_id=fd94f909-a733-478e-a732-6dc0e05103aa http.request.header.amz_sdk_request=\"attempt=1; max=25\" net.peer.name=ec2.us-east-1.amazonaws.com tf_mux_provider=\"*schema.GRPCProviderServer\" tf_rpc=ReadResource aws.region=us-east-1 http.request_content_length=74 tf_req_id=97d5f9b5-c9c6-671f-7d45-8d711154bd33 tf_resource_type=aws_ebs_volume rpc.system=aws-api http.request.header.x_amz_date=20250806T103148Z rpc.service=EC2 tf_provider_addr=registry.terraform.io/hashicorp/aws rpc.method=DescribeVolumes\n  http.request.body=\n  | Action=DescribeVolumes&Version=2016-11-15&VolumeId.1=vol-09f9d4c4286366762\n   timestamp=\"2025-08-06T12:31:48.839+0200\"\n2025-08-06T12:31:49.376+0200 [DEBUG] provider.terraform-provider-aws_v6.7.0_x5: HTTP Response Received: aws.region=us-east-1 http.status_code=200 tf_resource_type=aws_ebs_volume http.response.header.x_amzn_requestid=8e87ad5b-b987-4102-89cb-bc8ad3a9b098 rpc.method=DescribeVolumes rpc.service=EC2 @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.65/logging/tf_logger.go:45 @module=aws http.duration=535\n  http.response.body=\n  | <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n  | <DescribeVolumesResponse xmlns=\"http://ec2.amazonaws.com/doc/2016-11-15/\">\n  |     <requestId>8e87ad5b-b987-4102-89cb-bc8ad3a9b098</requestId>\n  |     <volumeSet>\n  |         <item>\n  |             <volumeId>vol-09f9d4c4286366762</volumeId>\n  |             <size>40</size>\n  |             <snapshotId/>\n  |             <availabilityZone>us-east-1c</availabilityZone>\n  |             <availabilityZoneId>use1-az6</availabilityZoneId>\n  |             <status>available</status>\n  |             <createTime>2025-08-06T09:40:38.882Z</createTime>\n  |             <attachmentSet/>\n  |             <tagSet>\n  |                 <item>\n  |                     <key>Name</key>\n  |                     <value>Pipeline PoC</value>\n  |                 </item>\n  |             </tagSet>\n  |             <volumeType>gp2</volumeType>\n  |             <iops>120</iops>\n  |             <encrypted>true</encrypted>\n  |             <kmsKeyId>arn:aws:kms:us-east-1:4:key/5af3d267-9517-4ad7-a265-749f2f302bdf</kmsKeyId>\n  |             <multiAttachEnabled>false</multiAttachEnabled>\n  |             <operator>\n  |                 <managed>false</managed>\n  |             </operator>\n  |             <volumeArn>arn:aws:ec2:us-east-1:XXX:volume/vol-09f9d4c4286366762</volumeArn>\n  |             <ownerId>XX</ownerId>\n  |         </item>\n  |     </volumeSet>\n  | </DescribeVolumesResponse>\n   tf_aws.sdk=aws-sdk-go-v2 tf_provider_addr=registry.terraform.io/hashicorp/aws tf_aws.signing_region=\"\" tf_req_id=97d5f9b5-c9c6-671f-7d45-8d711154bd33 http.response.header.cache_control=\"no-cache, no-store\" http.response.header.strict_transport_security=\"max-age=31536000; includeSubDomains\" http.response_content_length=1312 tf_rpc=ReadResource http.response.header.content_type=text/xml;charset=UTF-8 http.response.header.date=\"Wed, 06 Aug 2025 10:31:49 GMT\" http.response.header.server=AmazonEC2 rpc.system=aws-api tf_mux_provider=\"*schema.GRPCProviderServer\" timestamp=\"2025-08-06T12:31:49.375+0200\"\n2025-08-06T12:31:49.379+0200 [TRACE] provider.terraform-provider-aws_v6.7.0_x5: Called downstream: @caller=github.com/hashicorp/terraform-plugin-sdk/v2@v2.37.0/helper/schema/resource.go:1163 @module=sdk.helper_schema tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=97d5f9b5-c9c6-671f-7d45-8d711154bd33 tf_resource_type=aws_ebs_volume tf_rpc=ReadResource tf_mux_provider=\"*schema.GRPCProviderServer\" timestamp=\"2025-08-06T12:31:49.376+0200\"\n2025-08-06T12:31:49.379+0200 [TRACE] provider.terraform-provider-aws_v6.7.0_x5: Received downstream response: @module=sdk.proto diagnostic_error_count=0 diagnostic_warning_count=0 tf_provider_addr=registry.terraform.io/hashicorp/aws @caller=github.com/hashicorp/terraform-plugin-go@v0.28.0/tfprotov5/internal/tf5serverlogging/downstream_request.go:42 tf_proto_version=5.9 tf_req_duration_ms=538 tf_req_id=97d5f9b5-c9c6-671f-7d45-8d711154bd33 tf_resource_type=aws_ebs_volume tf_rpc=ReadResource timestamp=\"2025-08-06T12:31:49.377+0200\"\n2025-08-06T12:31:49.379+0200 [TRACE] provider.terraform-provider-aws_v6.7.0_x5: Served request: tf_resource_type=aws_ebs_volume tf_rpc=ReadResource @caller=github.com/hashicorp/terraform-plugin-go@v0.28.0/tfprotov5/tf5server/server.go:878 @module=sdk.proto tf_proto_version=5.9 tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=97d5f9b5-c9c6-671f-7d45-8d711154bd33 timestamp=\"2025-08-06T12:31:49.377+0200\"\n2025-08-06T12:31:49.380+0200 [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/hashicorp/aws\" is in the global cache\n2025-08-06T12:31:49.380+0200 [TRACE] NodeAbstractResouceInstance.writeResourceInstanceState to refreshState for aws_ebs_volume.example\n2025-08-06T12:31:49.380+0200 [TRACE] NodeAbstractResouceInstance.writeResourceInstanceState: writing state object for aws_ebs_volume.example\n2025-08-06T12:31:49.380+0200 [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/hashicorp/aws\" is in the global cache\n2025-08-06T12:31:49.380+0200 [TRACE] NodeAbstractResouceInstance.writeResourceInstanceState to workingState for aws_ebs_volume.example\n2025-08-06T12:31:49.380+0200 [TRACE] NodeAbstractResouceInstance.writeResourceInstanceState: writing state object for aws_ebs_volume.example\n2025-08-06T12:31:49.380+0200 [TRACE] vertex \"aws_ebs_volume.example\": visit complete\n2025-08-06T12:31:49.381+0200 [TRACE] vertex \"root\": starting visit (terraform.graphNodeRoot)\n2025-08-06T12:31:49.381+0200 [TRACE] vertex \"root\": does not belong to any module instance\n2025-08-06T12:31:49.381+0200 [TRACE] vertex \"root\": visit complete\n2025-08-06T12:31:49.381+0200 [TRACE] vertex \"aws_ebs_volume.example (expand)\": dynamic subgraph completed successfully\n2025-08-06T12:31:49.381+0200 [TRACE] vertex \"aws_ebs_volume.example (expand)\": visit complete\n2025-08-06T12:31:49.381+0200 [TRACE] vertex \"provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\": starting visit (*terraform.graphNodeCloseProvider)\n2025-08-06T12:31:49.381+0200 [TRACE] vertex \"provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\": does not belong to any module instance\n2025-08-06T12:31:49.381+0200 [TRACE] GRPCProvider: Close\n2025-08-06T12:31:49.382+0200 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2025-08-06T12:31:49.392+0200 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.7.0/darwin_arm64/terraform-provider-aws_v6.7.0_x5 id=89637\n2025-08-06T12:31:49.392+0200 [DEBUG] provider: plugin exited\n2025-08-06T12:31:49.392+0200 [TRACE] vertex \"provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\": visit complete\n2025-08-06T12:31:49.393+0200 [TRACE] vertex \"root\": starting visit (*terraform.nodeCloseModule)\n2025-08-06T12:31:49.393+0200 [TRACE] vertex \"root\": does not belong to any module instance\n2025-08-06T12:31:49.393+0200 [TRACE] vertex \"root\": visit complete\n2025-08-06T12:31:49.393+0200 [TRACE] LoadSchemas: retrieving schema for provider type \"registry.terraform.io/hashicorp/aws\"\n2025-08-06T12:31:49.393+0200 [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/hashicorp/aws\" is in the global cache\n2025-08-06T12:31:49.393+0200 [TRACE] LoadSchemas: retrieving schema for provider type \"registry.terraform.io/hashicorp/aws\"\n2025-08-06T12:31:49.393+0200 [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/hashicorp/aws\" is in the global cache\n2025-08-06T12:31:49.393+0200 [TRACE] LoadSchemas: retrieving schema for provider type \"registry.terraform.io/hashicorp/aws\"\n2025-08-06T12:31:49.393+0200 [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/hashicorp/aws\" is in the global cache\n2025-08-06T12:31:49.393+0200 [TRACE] Plan is complete\n2025-08-06T12:31:49.393+0200 [TRACE] Plan is applyable\n2025-08-06T12:31:49.393+0200 [TRACE] LoadSchemas: retrieving schema for provider type \"registry.terraform.io/hashicorp/aws\"\n2025-08-06T12:31:49.393+0200 [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/hashicorp/aws\" is in the global cache\n2025-08-06T12:31:49.393+0200 [DEBUG] no planned changes, skipping apply graph check\n2025-08-06T12:31:49.393+0200 [INFO]  backend/local: plan operation completed\n2025-08-06T12:31:49.393+0200 [TRACE] LoadSchemas: retrieving schema for provider type \"registry.terraform.io/hashicorp/aws\"\n2025-08-06T12:31:49.393+0200 [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/hashicorp/aws\" is in the global cache\n\nNo changes. Your infrastructure still matches the configuration.\n\nTerraform has checked that the real remote objects still match the result of your most recent changes, and found no differences.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nNote: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run \"terraform apply\" now.\n\nfboussarsar@ ebs-example % echo $?\n2\n```\n\n\n### Expected Behavior\n\nUsing this in a pipeline to detect drift. In AWS CodeBuild (and other similar pipelines), the step fails and exits if a command returns a non-zero code. This is the desired behaviour because we can rely on the return code to fail the \"detect drift\" step, and alert based on it.\n\n\nIn older versions (I have tried with 1.9), this returned code 0 when no changes are detected, so the command succeeds\n\n -detailed-exitcode         Return detailed exit codes when the command exits.\n                             This will change the meaning of exit codes to:\n                             0 - Succeeded, diff is empty (no changes)\n                             1 - Errored\n                             2 - Succeeded, there is a diff\n\n\nOutput from the older version, both with the refresh-only option and without\n\n```\nfboussarsar@ ebs-example % terraform -version                                \nTerraform v1.9.0\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v6.7.0\n\nYour version of Terraform is out of date! The latest version\nis 1.12.2. You can update by downloading from https://www.terraform.io/downloads.html\nfboussarsar@ ebs-example % \nfboussarsar@ ebs-example % \nfboussarsar@ ebs-example % terraform  plan --refresh-only -detailed-exitcode \naws_ebs_volume.example: Refreshing state... [id=vol-0XXXX]\n\nNo changes. Your infrastructure still matches the configuration.\n\nTerraform has checked that the real remote objects still match the result of your most recent changes, and found no differences.\nfboussarsar@ ebs-example % echo $?                                           \n0\nfboussarsar@ ebs-example % terraform  plan  -detailed-exitcode  \naws_ebs_volume.example: Refreshing state... [id=vol-09f9d4c4286366762]\n\nNo changes. Your infrastructure matches the configuration.\n\nTerraform has compared your real infrastructure against your configuration and found no differences, so no changes are needed.\nfboussarsar@ ebs-example % echo $? \n0     \n```\n\n\n### Actual Behavior\n\nUsing the \"refresh-only\" option changes the return code:\n\n```\nterraform  plan --refresh-only -detailed-exitcode  \naws_ebs_volume.example: Refreshing state... [id=vol-09f9d4c4286366762]\n\nNo changes. Your infrastructure still matches the configuration.\n\nTerraform has checked that the real remote objects still match the result of your most recent changes, and found no differences.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nNote: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run \"terraform apply\" now.\n\n\nfboussarsar@ ebs-example % echo $?                                           \n2\nfboussarsar@ ebs-example % \nfboussarsar@ ebs-example % \nfboussarsar@ ebs-example % terraform  plan  -detailed-exitcode  \naws_ebs_volume.example: Refreshing state... [id=vol-09f9d4c4286366762]\n\nNo changes. Your infrastructure matches the configuration.\n\nTerraform has compared your real infrastructure against your configuration and found no differences, so no changes are needed.\n\nfboussarsar@ ebs-example % echo $?                             \n0\n```\n\n### Steps to Reproduce\n\n`terraform  plan  -detailed-exitcode  `\n`terraform  plan --refresh-only -detailed-exitcode  `\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hi @boussarsar,\n\nThanks for filing the issue! It seems this is a case of some very old comparisons still using `reflect.DeepEqual` which were never updated. Fixing `ManagedResourcesEqual` should clear up the inconsistencies here.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "core",
        "confirmed"
      ],
      "created_at": "2025-08-06T10:54:10Z",
      "closed_at": "2025-11-10T20:38:43Z",
      "url": "https://github.com/hashicorp/terraform/issues/37406",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37805,
      "title": "Allow the use of ephemeral values in the output for test modules",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.1\non linux_amd64\n```\n\n### Use Cases\n\n1. Create a subdirectory testing/setup with:\n```\nephemeral \"vault_kv_secret_v2\" \"proxmox_creds\" {\n  mount = \"infra-secrets\"\n  name  = \"testing/proxmox/creds\"\n}\n\nlocals {\n  proxmox_creds = ephemeral.vault_kv_secret_v2.proxmox_creds.data\n}\n\noutput \"creds\" {\n  description = \"Sensitive information obtained from Vault\"\n  ephemeral   = true\n  sensitive   = true\n\n  value = {\n    proxmox = {\n      username = local.proxmox_creds.username\n      password = local.proxmox_creds.password\n    }\n  }\n}\n```\n\n2. Reference it from a .tftest.hcl file:\n```\nrun \"setup\" {\n  module {\n    source = \"./testing/setup\"\n  }\n}\n```\n3. Run:\n```\nterraform test\n```\n\nAnd you will see errors related to the fact that terraform does not allow the use of ephemeral values in the output of root modules. \n```\n$ > terraform test\ntests/main.tftest.hcl... in progress\n  run \"setup\"... fail\n\u2577\n\u2502 Error: Ephemeral output not allowed\n\u2502 \n\u2502   on testing/setup/outputs.tf line 20:\n\u2502   20: output \"creds\" {\n\u2502 \n\u2502 Ephemeral outputs are not allowed in context of a root module\n\u2575\n  run \"apply\"... skip\n  run \"verify\"... skip\n\n$ > terraform validate\n\u2577\n\u2502 Error: Ephemeral output not allowed\n\u2502 \n\u2502   on testing/setup/outputs.tf line 20:\n\u2502   20: output \"creds\" {\n\u2502 \n\u2502 Ephemeral outputs are not allowed in context of a root module\n\u2575\n```\nI think this is not entirely correct, although it is not critical, given that corresponding data sources are deprecated.\n\n```\n> $ terraform validate\n\u2577\n\u2502 Warning: Deprecated Resource\n\u2502 \n\u2502   with data.vault_kv_secret_v2.proxmox_creds,\n\u2502   on testing/setup/main.tf line 1, in data \"vault_kv_secret_v2\" \"proxmox_creds\":\n\u2502    1: data \"vault_kv_secret_v2\" \"proxmox_creds\" {\n\u2502 \n\u2502 Deprecated. Please use new Ephemeral KVV2 Secret resource `vault_kv_secret_v2` instead\n\u2575\nSuccess! The configuration is valid, but there were some validation warnings as shown above.\n```\n\n### Attempted Solutions\n\nI didn't find it. I had to use data sources instead of ephemeral data.\n\n### Proposal\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "Thanks for this feature request! If you are viewing this issue and would like to indicate your interest, please use the \ud83d\udc4d reaction on the issue description to upvote this issue. We also welcome additional use case descriptions. Thanks again!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "new",
        "terraform test"
      ],
      "created_at": "2025-10-23T22:28:11Z",
      "closed_at": "2025-10-28T08:29:45Z",
      "url": "https://github.com/hashicorp/terraform/issues/37805",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37882,
      "title": "deletion_protection_enabled=true does not really turns the DynamoDB table's Deletion protection on",
      "problem": "### Terraform Version\n\n```shell\nWe have several 'aws_dynamodb_table' resources with the deletion_protection_enabled=true flag, which were deployed without any deletion protection.\n\nThe deletion protection only works by pressing the 'turn on' manually, or with the AWS CLI command\n\naws dynamodb update-table \\\n  --region <region> \\\n  --table-name <table_name> \\\n  --deletion-protection-enabled --no-cli-pager\n```\n\n### Terraform Configuration Files\n\nrequired_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"6.4.0\"\n    }\n}\n\n\n\n### Debug Output\n\n```\n...debug output, or link to a gist...\n```\n\n\n### Expected Behavior\n\n.\n\n### Actual Behavior\n\n.\n\n### Steps to Reproduce\n\nterraform init\nterraform apply\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-11-06T17:29:32Z",
      "closed_at": "2025-11-06T18:08:14Z",
      "url": "https://github.com/hashicorp/terraform/issues/37882",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37792,
      "title": "Terraform >= v1.13.0 `apply` errors with `\"filebase64\" failed: function returned an inconsistent result` when reading file with temp credentials that differ between plan and apply",
      "problem": "### Terraform Version\n\n```shell\nExperienced first in v1.13.3 and again when downgrading to v1.13.0\n```\n\n### Terraform Configuration Files\n\n```terraform\n# _config.tf\n\nprovider \"vault\" {\n  # ... other config ...\n  auth_login {\n    parameters = {\n      # ... other config ...\n      tfe-credentials-file = filebase64(\"${path.cwd}/../../../.terraformrc\")\n    }\n  }\n}\n```\n\n```terraform\n# main.tf\n\nmodule \"creds\" {\n  source = \"../modules/creds\"\n  # ... other config ...\n}\n```\n```terraform\n# modules/creds/main.tf\n\n# ... other config ...\n\nresource \"vault_kv_secret_v2\" \"password\" {\n # ... other config ...\n}\n```\n\nVault is configured with this plugin: https://github.com/gitrgoliveira/vault-plugin-auth-tfe\n\n### Debug Output\n\nApologies not in debug mode but here is an amended stdout during `terraform apply`\n\n```\n\u2502 Error: Error in function call\n\u2502 \n\u2502   on _config.tf line 43, in provider \"vault\":\n\u2502   43:       tfe-credentials-file = filebase64(\"${path.cwd}/../../../.terraformrc\")\n\u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502     \u2502 while calling filebase64(path)\n\u2502     \u2502 path.cwd is \"<path to terraform files on agent>\"\n\u2502 \n\u2502 Call to function \"filebase64\" failed: function returned an inconsistent\n\u2502 result.\n```\n\n### Expected Behavior\n\n`terraform apply` should continue past the provider setup, creating the new Vault resources as expected e.g.\n\n```\nTerraform v1.13.3\non linux_amd64\nInitializing plugins and modules...\nmodule.creds[0].vault_kv_secret_v2.password: Creating...\nmodule.creds[0].vault_kv_secret_v2.password: Creation complete after 0s [id=example/secret/data/password]\n\nApply complete! Resources: 1 added, 0 changed, 0 destroyed.\n```\n\n### Actual Behavior\n\n```\n\u2502 Error: Error in function call\n\u2502 \n\u2502   on _config.tf line 43, in provider \"vault\":\n\u2502   43:       tfe-credentials-file = filebase64(\"${path.cwd}/../../../.terraformrc\")\n\u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502     \u2502 while calling filebase64(path)\n\u2502     \u2502 path.cwd is \"<path to terraform files on agent>\"\n\u2502 \n\u2502 Call to function \"filebase64\" failed: function returned an inconsistent\n\u2502 result.\n```\n\n### Steps to Reproduce\n\n1. `terraform init` \n2. `terraform apply`\n\n### Additional Context\n\n* Terraform running in `Agent` mode in TFC/HCP Terraform.\n* Workspace was upgraded from v1.5.7 -> 1.13.3 initially and then unexpected behavior occurred later when config was added to create `vault` provider resources\n* The error received from the provider only occurs at `apply` , not on `plan`.\n* We downgraded to v1.12.2 and no longer received the error.\n\n\n### References\n\nPotentially related: https://github.com/hashicorp/terraform/pull/37001, associated to https://github.com/hashicorp/terraform/issues/36184\n\nVault Plugin: https://github.com/gitrgoliveira/vault-plugin-auth-tfe, of note:\n\n> TFE/TFC generates a different token during plan and the apply stages\n\n\n\n\n### Generative AI / LLM assisted development?\n\nN/A",
      "solution": "Got the same error.\n```\n  \u2502 Error: Error in function call\n  \u2502 \n  \u2502   on provider_vault.tf line 8, in provider \"vault\":\n  \u2502    8:       jwt  = file(\"/var/run/secrets/kubernetes.io/serviceaccount/token\")\n  \u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  \u2502     \u2502 while calling file(path)\n  \u2502 \n  \u2502 Call to function \"file\" failed: function returned an inconsistent result.\n  \u2575\n```\n\nDowngrading to 0.12.2 fixed the issue\n\n---\n\nHi,\n\nThe `file*` functions implicitly include any of their arguments as part of the configuration. Terraform configuration is not allowed to change between plan and apply, but because the `file*` function arguments are not included in the config snapshot, this left them as a loophole to introduce what are essentially unmarked ephemeral values.\n\nIt seems a number of configurations made use of this loophole to introduce short-lived credentials into the configuration. Before ephemeral values existed, this would normally have been done outside of Terraform via combinations of environment variables and well-known system file paths, which is the default method used by many providers to obtain credentials.\n\nWe may need to add an exception here to workaround the constraint in a controlled manner. It might be possible to setup a special evaluation context from a provider configuration to bypass the check. It would actually be fairly easy to create ephemeral versions of all the `file*` functions, with only the naming of such functions being the awkward part ;) That might be an interesting long-term solution, but in the meantime we can look into some way to work around checks for providers.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug"
      ],
      "created_at": "2025-10-20T21:41:46Z",
      "closed_at": "2025-11-04T18:30:45Z",
      "url": "https://github.com/hashicorp/terraform/issues/37792",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37857,
      "title": "Write-only attributes not accessible via `self.` in provisioner block",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.4\non linux_amd64\n```\n\n### Terraform Configuration Files\n\n```terraform\nresource \"camo_data\" \"test\" {\n  input_wo = \"write-only-foo\"\n\n  provisioner \"local-exec\" {\n    environment = {\n      WRITE_ONLY_ENV = self.input_wo\n    }\n  # This is always empty!\n    command = \"echo \\\"WO: $WRITE_ONLY_ENV.\\\"\"\n  }\n}\n```\n\n### Debug Output\n\nI think these are the relevant bits during the apply:\n```\n2025-11-01T16:03:14.548+0800 [DEBUG] provider.terraform-provider-camo: Nullifying write-only attribute in the newState: @caller=/home/jkbach/go/pkg/mod/github.com/hashicorp/terraform-plugin-framework@v1.16.1/internal/fwserver/write_only_nullification.go:61 @module=sdk.framework tf_req_id=f2ad45b9-8532-e5ed-ba50-d6bd7082de24 tf_resource_type=camo_data tf_attribute_path=\"AttributeName(\\\"input_wo\\\")\" tf_provider_addr=registry.terraform.io/meridianleap/camo tf_rpc=PlanResourceChange timestamp=\"2025-11-01T16:03:14.548+0800\"\n\n...\n\n2025-11-01T16:03:14.550+0800 [TRACE] applyProvisioners: provisioning camo_data.test with \"local-exec\"\n2025-11-01T16:03:14.550+0800 [TRACE] terraform.contextPlugins: Initializing provisioner \"local-exec\" to read its schema\n2025-11-01T16:03:14.550+0800 [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/meridianleap/camo\" is in the global cache\n2025-11-01T16:03:14.550+0800 [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/meridianleap/camo\" is in the global cache\n2025-11-01T16:03:14.550+0800 [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/meridianleap/camo\" is in the global cache\ncamo_data.test: Provisioning with 'local-exec'...\ncamo_data.test (local-exec): Executing: [\"/bin/sh\" \"-c\" \"echo \\\"WO: $WRITE_ONLY_ENV.\\\"\"]\ncamo_data.test (local-exec): WO: .\n```\n\n\n### Expected Behavior\n\nWrite-only attributes should be accessible on the `self.` object inside the provisioner block.\n\n### Actual Behavior\n\nWrite-only attributes were unset, but did not trigger any warning or error in the `plan` or `apply` output.\n\n### Steps to Reproduce\n\n1. Add a reference to a write-only attribute via `self.<attribute_name>` in a provisioner block. \n2. terraform init\n3. terraform apply\n4. Observe that the write-only attribute is unset in the provisioner. \n\nI noticed it in a provider that I'm developing ([repo link](https://github.com/meridianleap/terraform-provider-camo/tree/jkbach/write-only)), you can check out the `jkbach/write-only` branch, `go install .`, update `.terraformrc` to:\n```hcl\nprovider_installation {\n  dev_overrides {\n      \"meridianleap/camo\" = \"<Your GOBIN path>\"\n  }\n\n  direct {}\n}\n```\n\nand then `terraform apply` the following config:\n```hcl\nterraform {\n  required_providers {\n    camo = {\n      source = \"meridianleap/camo\"\n    }\n  }\n}\n\nresource \"camo_data\" \"test\" {\n  input_wo = \"sensitive-foo\"\n\n  provisioner \"local-exec\" {\n    environment = {\n      WRITE_ONLY_ENV = self.input_wo\n    }\n    command = \"echo \\\"WO: $WRITE_ONLY_ENV.\\\"\"\n  }\n}\n```\n\nand observe that the output is simply: `WO: ` instead of `WO: sensitive-foo`.\n\n### Additional Context\n\nI'm pretty sure this is a Terraform issue and not an issue with my provider. Looking at the logs, it seems like the write-only attribute is being unset before the provisioner starts executing. If this is intentional, then this ticket is actually a feature request :)\n\nI assumed it was a bug because not being able to access write-only attributes isn't mentioned in the docs[^1], and the `terraform` command doesn't complain when I try to reference `self.input_wo` from the provisioner block (unlike trying to access something like `var.foo` or `<resource_name>.<attribute>`, which create a clear error). I also don't believe it conflicts with the logic referenced in https://github.com/hashicorp/terraform/issues/23679#issuecomment-597388015 about circular dependencies in destroy provisioners.\n\nThanks!\n\n[^1]: https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/write-only-arguments\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-11-01T08:23:37Z",
      "closed_at": "2025-11-03T13:23:42Z",
      "url": "https://github.com/hashicorp/terraform/issues/37857",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37861,
      "title": "terraform import aws_vpc from non-default region fails",
      "problem": "### Terraform Version\n\n```shell\n1.13.0\n```\naws provider version\n`6.19.0`\n\n### Terraform Configuration Files\n\n```terraform\nprovider \"aws\" {\nprofile = \"sandbox\"\nregion = \"ap-southeast-2\"\n}\naws_vpc \"this\" {\nregion = \"us-west-2\"\n# other correct configs.\n}\naws_vpc \"extra\"{\nregion = \"ap-southest-2\"\n# other correct configs.\n}\n```\n\n\n### Debug Output\n\n```\n...debug output, or link to a gist...\n```\n\n\n### Expected Behavior\n\nshould be able to be imported\n\n### Actual Behavior\n\nWhile attempting to import an existing object to\n\u2502 \"aws_vpc.this\", the provider detected that no object exists\n\u2502 with the given id. Only pre-existing objects can be imported; check that the id is correct and that it is associated with\n\u2502 the provider's configured region or endpoint, or use \"terraform apply\" to create a new remote object for this resource.\n\u2575\n\n### Steps to Reproduce\nboth vpcs are existent already\nso try to import the existent vpc using its vpcid.\nterraform init\nterraform import aws_vpc.this <vpcid>\nterraform import aws_vpc.extra <vpcid>\n\n### Additional Context\n\nif i change provider region to us-west-2,import works for aws_vpc.this\n\nafter import successful, i make provider region to \"ap-southeast-2\" and do a terraform plan, things work, i think that means, the plan can properly retrieve the resource region\nbut the issue is in terraform import.\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "provider/aws",
        "new"
      ],
      "created_at": "2025-11-03T01:27:45Z",
      "closed_at": "2025-11-03T01:33:14Z",
      "url": "https://github.com/hashicorp/terraform/issues/37861",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 36401,
      "title": "Properly sign the Windows executable",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.10.4\non windows_amd64\n```\n\n### Terraform Configuration Files\n\nn/a\n\n### Debug Output\n\nn/a\n\n### Expected Behavior\n\nTerraform runs\n\n### Actual Behavior\n\n>Program `terraform.exe` failed to run: This program is blocked by group policy.\n\n### Steps to Reproduce\n\n`terraform -version`\n\n### Additional Context\n\nOur company recently switched to AppLocker, and the IT team say Terraform executable isn't signed properly.\nThey showed me the AppLocker rule for the Publisher string, everything looks good, but doesn't work.\nThey tell me it's because the other details in the file are empty:\n\n<img width=\"300\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1d97d86d-3bf1-4237-a1ac-91acc2a4b7c5\" />\n\nFor now the only thing that works is file hashes, which only work till next version. :)\n\n### References\n\nSame problem with `azurerm` and `azuread` providers\nhttps://github.com/hashicorp/terraform-provider-azurerm/issues/26369\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "No new updates, other than the teams involved know about the issue. \n\n---\n\nHi @Tbohunek, @msusicky: according to the release engineering team, the signing issue / Applocker issue was fixed by updating an intermediate certificate on our end. \n\nThe metadata issue is not fixed, however, I believe the core issue is the signing issue, which should be fixed. Please let me know if you are still experiencing this issue. Thanks!\n\n---\n\nHi @crw, thanks a lot for your response. Most of us resorted to some workarounds as it was really difficult to work otherwise, so I need to go and check with our IT team if they still observe the issue. Sorry for the delay, I'll let you know as soon as I can!",
      "labels": [
        "bug",
        "upstream",
        "new"
      ],
      "created_at": "2025-01-27T19:43:51Z",
      "closed_at": "2025-11-03T16:37:44Z",
      "url": "https://github.com/hashicorp/terraform/issues/36401",
      "comments_count": 10
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37771,
      "title": "The S3 backend does not yet recognise New Zealand region ap-southeast-6",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.14.0-beta2\non linux_amd64\nalso present in latest non-beta release\nTerraform v1.13.3\non linux_amd64\n```\n\n### Terraform Configuration Files\n\n```\nterraform {\n  required_version = \"~> 1.13\"\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~> 6.0\"\n    }\n  }\n  backend \"s3\" {\n    bucket = \"s3bucketnamethatexists\"\n    key = \"state\"\n    region = \"ap-southeast-6\"\n    use_lockfile = true\n  }\n}\n```\n\n\n### Debug Output\n\n```\n2025-10-15T13:13:29.081+1300 [INFO]  Terraform version: 1.14.0 beta2\n2025-10-15T13:13:29.081+1300 [DEBUG] using github.com/hashicorp/go-tfe v1.91.0\n2025-10-15T13:13:29.081+1300 [DEBUG] using github.com/hashicorp/hcl/v2 v2.24.0\n2025-10-15T13:13:29.081+1300 [DEBUG] using github.com/hashicorp/terraform-svchost v0.1.1\n2025-10-15T13:13:29.081+1300 [DEBUG] using github.com/zclconf/go-cty v1.16.3\n2025-10-15T13:13:29.081+1300 [INFO]  Go runtime version: go1.25.1\n2025-10-15T13:13:29.081+1300 [INFO]  CLI args: []string{\"terraform\", \"init\", \"--backend-config=backend.tf.infra-platform\", \"--reconfigure\"}\n2025-10-15T13:13:29.081+1300 [TRACE] Stdout is a terminal of width 158\n2025-10-15T13:13:29.081+1300 [TRACE] Stderr is a terminal of width 158\n2025-10-15T13:13:29.081+1300 [TRACE] Stdin is a terminal\n2025-10-15T13:13:29.081+1300 [DEBUG] Attempting to open CLI config file: /home/ec2-user/.terraformrc\n2025-10-15T13:13:29.081+1300 [DEBUG] File doesn't exist, but doesn't need to. Ignoring.\n2025-10-15T13:13:29.081+1300 [DEBUG] ignoring non-existing provider search directory terraform.d/plugins\n2025-10-15T13:13:29.082+1300 [DEBUG] ignoring non-existing provider search directory /home/ec2-user/.terraform.d/plugins\n2025-10-15T13:13:29.082+1300 [DEBUG] ignoring non-existing provider search directory /home/ec2-user/.local/share/terraform/plugins\n2025-10-15T13:13:29.082+1300 [DEBUG] ignoring non-existing provider search directory /usr/local/share/terraform/plugins\n2025-10-15T13:13:29.082+1300 [DEBUG] ignoring non-existing provider search directory /usr/share/terraform/plugins\n2025-10-15T13:13:29.082+1300 [INFO]  CLI command args: []string{\"init\", \"--backend-config=backend.tf.infra-platform\", \"--reconfigure\"}\nInitializing the backend...\n2025-10-15T13:13:29.090+1300 [TRACE] Meta.Backend: merging -backend-config=... CLI overrides into backend configuration\n2025-10-15T13:13:29.090+1300 [TRACE] Meta.Backend: built configuration for \"s3\" backend with hash value 1410938009\n2025-10-15T13:13:29.090+1300 [TRACE] Meta.Backend: backend has not previously been initialized in this working directory\n2025-10-15T13:13:29.090+1300 [TRACE] Meta.Backend: moving from default local state only to \"s3\" backend\n2025-10-15T13:13:29.091+1300 [DEBUG] checking for provisioner in \".\"\n2025-10-15T13:13:29.091+1300 [DEBUG] checking for provisioner in \"/home/ec2-user\"\n2025-10-15T13:13:29.091+1300 [TRACE] backend/local: state manager for workspace \"default\" will:\n - read initial snapshot from terraform.tfstate\n - write new snapshots to terraform.tfstate\n - create any backup at terraform.tfstate.backup\n2025-10-15T13:13:29.091+1300 [TRACE] statemgr.Filesystem: reading initial snapshot from terraform.tfstate\n2025-10-15T13:13:29.091+1300 [TRACE] statemgr.Filesystem: snapshot file has nil snapshot, but that's okay\n2025-10-15T13:13:29.091+1300 [TRACE] statemgr.Filesystem: read nil snapshot\n2025-10-15T13:13:29.091+1300 [TRACE] Meta.Backend: ignoring local \"default\" workspace because its state is empty\n\u2577\n\u2502 Error: Invalid region value\n\u2502\n\u2502   on terraform.tf line 11, in terraform:\n\u2502   11:   backend \"s3\" {\n\u2502\n\u2502 Invalid AWS Region: ap-southeast-6\n\u2575\n\n```\n\n\n### Expected Behavior\n\nTerraform should have initialised as the bucket exists in the region and terraform is run with admin credentials. This works with a bucket in another region (ap-southeast-2). \n\n```\n$ aws s3api get-bucket-location --bucket s3bucketnamethatexists\n{\n    \"LocationConstraint\": \"ap-southeast-6\"\n}\n```\n\n### Actual Behavior\n\nTerraform throws an error that it does not recognise the region\n\n```\u2577\n\u2502 Error: Invalid region value\n\u2502\n\u2502   on terraform.tf line 11, in terraform:\n\u2502   11:   backend \"s3\" {\n\u2502\n\u2502 Invalid AWS Region: ap-southeast-6\n\u2575\n```\n\n### Steps to Reproduce\n\n1. `terraform init`\n\n### Additional Context\n\nThe New Zealand region opened a month and a half ago.\n\n### References\n\nhttps://github.com/hashicorp/terraform-provider-aws/issues/44637 is the same issue raised against the AWS Provider. I think this is an S3 backend issue rather than an AWS Provider issue.\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "backend/s3",
        "new"
      ],
      "created_at": "2025-10-15T00:26:31Z",
      "closed_at": "2025-11-03T22:47:25Z",
      "url": "https://github.com/hashicorp/terraform/issues/37771",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37801,
      "title": "Errors in test are skipped vs failed since 1.13.0",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.4\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v6.17.0\n+ provider registry.terraform.io/hashicorp/http v3.5.0\n+ provider registry.terraform.io/hashicorp/local v2.5.3\n```\n\n### Terraform Configuration Files\n\na.tf\n\n```\ndata \"aws_caller_identity\" \"current\" {}\n\nresource \"aws_s3_bucket\" \"this\" {}\n```\n\na.tftest.hcl\n```\nvariables {\n   account_id = data.aws_caller_identity.current.account_id\n}\n\nrun \"test_s3_bucket_name\" {\n  command = apply\n\n  assert {\n    condition     = aws_s3_bucket.this.bucket != var.account_id\n    error_message = \"S3 Bucket name not matching account id\"\n  }\n}\n```\n\n### Debug Output\n\nProbably not relevant\n\n### Expected Behavior\n\n1.12.0 fails test:\n\n```\nterraform test -verbose -junit-xml=test.xml\na.tftest.hcl... in progress\n  run \"test_s3_bucket_name\"... fail\n\u2577\n\u2502 Error: Invalid reference\n\u2502 \n\u2502   on a.tftest.hcl line 2, in variables:\n\u2502    2:    account_id = data.aws_caller_identity.current.account_id\n\u2502 \n\u2502 You can only reference global variables within the test file variables block.\n\u2575\na.tftest.hcl... tearing down\na.tftest.hcl... fail\n\nFailure! 0 passed, 1 failed\n```\n\nGenerated junit-xml contains error as expected:\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?><testsuites>\n  <testsuite name=\"a.tftest.hcl\" tests=\"1\" skipped=\"0\" failures=\"0\" errors=\"1\">\n    <testcase name=\"test_s3_bucket_name\" classname=\"a.tftest.hcl\" time=\"1.229734\" timestamp=\"2025-10-22T14:08:07Z\">\n      <error message=\"Encountered an error\"><![CDATA[\nError: Invalid reference\n\n  on a.tftest.hcl line 2, in variables:\n   2:    account_id = data.aws_caller_identity.current.account_id\n\nYou can only reference global variables within the test file variables block.\n]]></error>\n    </testcase>\n  </testsuite>\n</testsuites\n```\n\n\n\n\n### Actual Behavior\n\n\nBut since version 1.13.0 it behaves differently. Tested on 1.13.4\n```\nterraform test -verbose -junit-xml=test.xml\na.tftest.hcl... in progress\n  run \"test_s3_bucket_name\"... skip\na.tftest.hcl... tearing down\na.tftest.hcl... fail\n\u2577\n\u2502 Error: Invalid reference\n\u2502 \n\u2502   on a.tftest.hcl line 2, in variables:\n\u2502    2:    account_id = data.aws_caller_identity.current.account_id\n\u2502 \n\u2502 You can only reference run blocks and variables from within Terraform Test files.\n\u2575\n\nFailure! 0 passed, 0 failed, 1 skipped.\n```\n\nunit xml contains no error:\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?><testsuites>\n  <testsuite name=\"a.tftest.hcl\" tests=\"1\" skipped=\"1\" failures=\"0\" errors=\"0\">\n    <testcase name=\"test_s3_bucket_name\" classname=\"a.tftest.hcl\">\n      <skipped></skipped>\n    </testcase>\n  </testsuite>\n</testsuites\n```\n\nProblem is with automated test in pipelines this can be easily missed as failure. I would expect it to behave like prior version 1.12.0 and before.\n\n### Steps to Reproduce\n\nterraform test with my provided test \"files\"\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hi @lapkritinis, thanks for filing this! The change here is to reflect that the error isn't with the specific test case but instead with the file in general - the problematic variable exists outside the scope of any test cases and so the tests are actually skipped as a result of the data they need not being available.\n\nHowever, this does seem to have been missed from the Junit output - it should still include the diagnostic in there somewhere so we will look into fixing this to make sure the exact error is surfaced somehow. \n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "confirmed",
        "new",
        "terraform test"
      ],
      "created_at": "2025-10-22T14:07:18Z",
      "closed_at": "2025-10-30T09:17:10Z",
      "url": "https://github.com/hashicorp/terraform/issues/37801",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37831,
      "title": "Incorrect plan when using `replace_triggered_by` with `-replace`",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.4\non linux_amd64\n```\n\n### Terraform Configuration Files\n\n```terraform\nvariable \"t\" {\n  type = string\n}\n\nresource \"terraform_data\" \"t\" {\n  count = 100\n  input = var.t\n}\n\nresource \"terraform_data\" \"r\" {\n  count = 100\n  input = count.index\n  lifecycle {\n    replace_triggered_by = [terraform_data.t[count.index]]\n  }\n}\n```\n\n\n### Debug Output\n\nhttps://gist.githubusercontent.com/g7r/759be7835d33f6fbc38828f61fdff4f8/raw/03ab3123308cd4ef6f50ef65863923b374e2cc94/tftrace.log\n\n### Expected Behavior\n\n```\nPlan: 100 to add, 100 to change, 100 to destroy.\n```\n\n### Actual Behavior\n\n```\nPlan: 16 to add, 97 to change, 16 to destroy.\n```\nThe numbers vary every time.\n\n### Steps to Reproduce\n\n1. `terraform init`\n2. `terraform apply -var t=a`\n3. `terraform plan -var t=b -replace 'terraform_data.r[0]' -replace 'terraform_data.r[1]' -replace 'terraform_data.r[2]'`\n\n### Additional Context\n\n`b.ForceReplace` slice obtained from command line arguments is being passed by reference to graph nodes: https://github.com/hashicorp/terraform/blob/v1.13.4/internal/terraform/graph_builder_plan.go#L308\n\nThe number of `-replace` arguments matters. If `len(b.ForceReplace) == cap(b.ForceReplace)`, the bug doesn't reproduce.\n\nIt doesn't matter which addresses to use for `-replace`. E.g. you can replace 3rd action with:\n* `terraform plan -var t=b -replace a.a -replace a.b -replace a.c`\n* `terraform plan -var t=b -replace a.a -replace a.a -replace a.a`\n\nThe same slice is being concurrently modified: https://github.com/hashicorp/terraform/blob/v1.13.4/internal/terraform/node_resource_plan_instance.go#L572\n\nI suggest making a copy of the slice at `graph_builder_plan.go`.\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hi @g7r,\n\nThanks for filing the issue!\nJuts to make sure, the expected outcome here would not be `100 to add, 100 to change, 100 to destroy`, but rather `103 to add, 97 to change, 103 to destroy`. All 100 of `terraform_data.r` will be replaced because of the changes, but 3 of `terraform_data.t` are also being replaced.\n\nWhile it is a shared slice problem here, I think we can just skip the slice modification altogether. A resource instance can only replace itself, and it can only do it once, so there's no reason to track the other addresses at that point. Carrying all the replace addresses along was just a consequence of the old implementation but not actually useful for anything.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "core",
        "confirmed"
      ],
      "created_at": "2025-10-28T18:38:11Z",
      "closed_at": "2025-10-30T19:30:33Z",
      "url": "https://github.com/hashicorp/terraform/issues/37831",
      "comments_count": 6
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37815,
      "title": "unexpected nil Key Vault Resource ID when creating azure frontdoor secret",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.3\non linux_arm64\n```\n\n### Terraform Configuration Files\n\ndata \"azurerm_key_vault\" \"hub_keyvault\" {\n  name                = \"redacted-key vault\"\n  resource_group_name = \"redacted-resource group\"\n  provider            = azurerm.hub\n}\ndata \"azurerm_key_vault_certificate\" \"poc_cert\" {\n  name         = \"redacted-cert-name\"\n  key_vault_id = data.azurerm_key_vault.hub_keyvault.id\n  provider     = azurerm.hub\n}\n\nresource \"azurerm_cdn_frontdoor_secret\" \"frontdoor_secret\" {\n  for_each                 = var.frontdoor_secret != {} ? var.frontdoor_secret : {}\n  name                     = \"${local.naming_prefix}-${each.value.name}\"\n  cdn_frontdoor_profile_id = azurerm_cdn_frontdoor_profile.frontdoor_profile.id\n  secret {\n    customer_certificate {\n      key_vault_certificate_id = data.azurerm_key_vault_certificate.poc_cert.versionless_id\n    }\n  }\n  depends_on = [azurerm_role_assignment.frontdoor_keyvault_access]\n}\n\n### Debug Output\n\nmodule.cdn_frontdoor_01.azurerm_cdn_frontdoor_secret.frontdoor_secret[\"poc_certificate\"]: Creating...\n\u2577\n\u2502 Error: expanding 'secret': unexpected nil Key Vault Resource ID retrieved from the Key Vault Base URL \"https://redacted-key vault.vault.azure.net/\"\n\u2502 \n\u2502   with module.cdn_frontdoor_01.azurerm_cdn_frontdoor_secret.frontdoor_secret[\"poc_certificate\"],\n\u2502   on modules/azure_cdn_frontdoor/main.tf line 195, in resource \"azurerm_cdn_frontdoor_secret\" \"frontdoor_secret\":\n\u2502  195: resource \"azurerm_cdn_frontdoor_secret\" \"frontdoor_secret\" {\n\n### Expected Behavior\n\nSecret should have been created\n\n### Actual Behavior\n\nSecret should have been created\n\n### Steps to Reproduce\n\nIssue occurs when running terraform apply\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-10-27T06:01:12Z",
      "closed_at": "2025-10-27T13:53:06Z",
      "url": "https://github.com/hashicorp/terraform/issues/37815",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37814,
      "title": "aws_bedrockagentcore_gateway requires authorizer_configuration for AWS_IAM",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.6.6\n```\n\n### Terraform Configuration Files\n\n```terraform\nterraform {\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~> 6.18.0\"\n    }\n  }\n}\n\n \"aws\" \">provider \"aws\" {\n  region = \"us-east-1\"\n}\n\n# IAM Role for Gateway\n\"aws_iam_role\"\">resource \"aws_iam_role\" \"gateway\" {\n  name = \"test-gateway-role\"\n\n  assume_role_policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [{\n      Effect = \"Allow\"\n      Principal = {\n        Service = \"bedrock-agentcore.amazonaws.com\"\n      }\n      Action = \"sts:AssumeRole\"\n      Condition = {\n        StringEquals = {\n          \"aws:SourceAccount\" = \"123456789012\"\n        }\n      }\n    }]\n  })\n}\n\n# Gateway with AWS_IAM authorizer\n\"aws_bedrockagentcore_gateway\"\">resource \"aws_bedrockagentcore_gateway\" \"test\" {\n  name            = \"test-gateway\"\n  authorizer_type = \"AWS_IAM\"\n  protocol_type   = \"MCP\"\n  role_arn        = aws_iam_role.gateway.arn\n\n  # According to AWS API docs, authorizer_configuration should NOT be\n  # required for AWS_IAM, but the provider marks it as required\n}\n\n```\n\n\n### Debug Output\n\nThe key error occurs during validation:\n```\nError: Invalid Block\n\n  with aws_bedrockagentcore_gateway.test,\n  on main.tf line 28, in resource \"aws_bedrockagentcore_gateway\" \"test\":\n  28: resource \"aws_bedrockagentcore_gateway\" \"test\" {\n\nBlock authorizer_configuration must have a configuration value as the\nprovider has marked it as required\n```\nWhen attempting to provide an empty authorizer_configuration {} block:\n```\nError: creating Bedrock AgentCore Gateway: Incompatible Types\n\n  with aws_bedrockagentcore_gateway.test,\n  on main.tf line 28, in resource \"aws_bedrockagentcore_gateway\" \"test\":\n  28: resource \"aws_bedrockagentcore_gateway\" \"test\" {\n\nCause: An unexpected error occurred while expanding configuration. This is\nalways an error in the provider. Please report the following to the\nprovider developer:\n\nExpanding\n\"github.com/hashicorp/terraform-provider-aws/internal/service/bedrockagentcore.authorizerConfigurationModel\"\nreturned nil.\n```\n\n### Expected Behavior\n\nWhen `authorizer_type = \"AWS_IAM\"` is specified, the `authorizer_configuration` block should be **optional** or **not allowed**.\n\nAccording to the [AWS CreateGateway API documentation](https://docs.aws.amazon.com/bedrock-agentcore-control/latest/APIReference/API_CreateGateway.html):\n\n**authorizerConfiguration** (Conditional):\n> \"If you specify `CUSTOM_JWT` as the `authorizerType`, you must provide an `authorizerConfiguration`.\"\n\nThis clearly indicates that:\n- For `CUSTOM_JWT`: `authorizerConfiguration` is **required**\n- For `AWS_IAM`: `authorizerConfiguration` is **not required**\n\n\n### Actual Behavior\n\nThe Terraform provider marks `authorizer_configuration` as **required** regardless of the `authorizer_type` value.\n\n**Scenario 1**: Without `authorizer_configuration` block\n- **Result**: Terraform validation fails\n- **Error**: \"Block authorizer_configuration must have a configuration value as the provider has marked it as required\"\n\n**Scenario 2**: With empty `authorizer_configuration {}` block\n- **Result**: Terraform apply fails\n- **Error**: \"Incompatible Types\" - expanding authorizerConfigurationModel returned nil\n\n**Scenario 3**: With `custom_jwt_authorizer` block (incorrect for AWS_IAM)\n- **Result**: Would be semantically incorrect and likely fail at AWS API level\n\n### Steps to Reproduce\n\n1. Create the Terraform configuration shown above\n2. Run `terraform init`\n3. Run `terraform validate`\n4. Observe the error: \"Block authorizer_configuration must have a configuration value as the provider has marked it as required\"\n\nAlternative reproduction:\n\n1. Add empty `authorizer_configuration {}` to the config\n2. Run `terraform apply`\n3. Observe the error: \"Incompatible Types - expanding authorizerConfigurationModel returned nil\"\n\n### Additional Context\n\nThe provider's schema definition appears to incorrectly mark `authorizer_configuration` as universally required:\n\n```bash\n$ terraform providers schema -json | jq '.provider_schemas[\"registry.terraform.io/hashicorp/aws\"].resource_schemas[\"aws_bedrockagentcore_gateway\"].block.block_types.authorizer_configuration'\n```\n\nShows that `authorizer_configuration` is a required block with only `custom_jwt_authorizer` as a sub-block option, with no conditional logic based on `authorizer_type`.\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "provider/aws",
        "new"
      ],
      "created_at": "2025-10-25T17:30:38Z",
      "closed_at": "2025-10-26T06:05:15Z",
      "url": "https://github.com/hashicorp/terraform/issues/37814",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37807,
      "title": "templatefile returns with inconsistent result as of 1.13+",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.3\non linux_amd64\n+ provider registry.terraform.io/hashicorp/local v2.5.3\n```\n\n### Terraform Configuration Files\n\n```terraform\nlocals {\n  rendered_repo_readme = templatefile(\"${path.root}/stuff.tftpl\", { foo = \"bar\" })\n}\nresource \"local_file\" \"repo_readme\" {\n  content  = local.rendered_repo_readme\n  filename = \"${path.root}/README.md\"\n}\n```\n\nAnd `stuff.tftpl`:\n```\nLast generated on ${timestamp()}.\n```\n\n### Debug Output\n\n```\n$> terraform plan -out plan\n...\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\n  + create\n\nTerraform will perform the following actions:\n\n  # local_file.repo_readme will be created\n  + resource \"local_file\" \"repo_readme\" {\n      + content              = (known after apply)\n      + content_base64sha256 = (known after apply)\n      + content_base64sha512 = (known after apply)\n      + content_md5          = (known after apply)\n      + content_sha1         = (known after apply)\n      + content_sha256       = (known after apply)\n      + content_sha512       = (known after apply)\n      + directory_permission = \"0777\"\n      + file_permission      = \"0777\"\n      + filename             = \"./README.md\"\n      + id                   = (known after apply)\n    }\n\nPlan: 1 to add, 0 to change, 0 to destroy.\n\n$> TF_LOG=trace tf apply plan\n2025-10-24T12:41:10.795Z [INFO]  Terraform version: 1.13.3\n2025-10-24T12:41:10.795Z [DEBUG] using github.com/hashicorp/go-tfe v1.74.1\n2025-10-24T12:41:10.795Z [DEBUG] using github.com/hashicorp/hcl/v2 v2.24.0\n2025-10-24T12:41:10.795Z [DEBUG] using github.com/hashicorp/terraform-svchost v0.1.1\n2025-10-24T12:41:10.795Z [DEBUG] using github.com/zclconf/go-cty v1.16.3\n2025-10-24T12:41:10.795Z [INFO]  Go runtime version: go1.24.5\n2025-10-24T12:41:10.796Z [INFO]  CLI args: []string{\"terraform\", \"apply\", \"plan\"}\n2025-10-24T12:41:10.796Z [TRACE] Stdout is a terminal of width 258\n2025-10-24T12:41:10.796Z [TRACE] Stderr is a terminal of width 258\n2025-10-24T12:41:10.796Z [TRACE] Stdin is a terminal\n2025-10-24T12:41:10.796Z [DEBUG] Attempting to open CLI config file: /home/foo/.terraformrc\n2025-10-24T12:41:10.796Z [INFO]  Loading CLI configuration from /home/foo/.terraformrc\n2025-10-24T12:41:10.796Z [DEBUG] checking for credentials in \"/home/foo/.terraform.d/plugins\"\n2025-10-24T12:41:10.796Z [DEBUG] ignoring non-existing provider search directory terraform.d/plugins\n2025-10-24T12:41:10.796Z [DEBUG] will search for provider plugins in /home/foo/.terraform.d/plugins\n2025-10-24T12:41:10.796Z [DEBUG] ignoring non-existing provider search directory /home/foo/.local/share/terraform/plugins\n2025-10-24T12:41:10.796Z [DEBUG] ignoring non-existing provider search directory /home/foo/.local/share/flatpak/exports/share/terraform/plugins\n2025-10-24T12:41:10.796Z [DEBUG] ignoring non-existing provider search directory /var/lib/flatpak/exports/share/terraform/plugins\n2025-10-24T12:41:10.796Z [DEBUG] ignoring non-existing provider search directory /usr/local/share/terraform/plugins\n2025-10-24T12:41:10.796Z [DEBUG] ignoring non-existing provider search directory /usr/share/terraform/plugins\n2025-10-24T12:41:10.796Z [INFO]  CLI command args: []string{\"apply\", \"plan\"}\n2025-10-24T12:41:10.797Z [TRACE] Meta.BackendForLocalPlan: instantiated backend of type *local.Local\n2025-10-24T12:41:10.797Z [TRACE] providercache.fillMetaCache: scanning directory .terraform/providers\n2025-10-24T12:41:10.797Z [TRACE] getproviders.SearchLocalDirectory: found registry.terraform.io/hashicorp/local v2.5.3 for linux_amd64 at .terraform/providers/registry.terraform.io/hashicorp/local/2.5.3/linux_amd64\n2025-10-24T12:41:10.797Z [TRACE] providercache.fillMetaCache: including .terraform/providers/registry.terraform.io/hashicorp/local/2.5.3/linux_amd64 as a candidate package for registry.terraform.io/hashicorp/local 2.5.3\n2025-10-24T12:41:10.812Z [DEBUG] checking for provisioner in \".\"\n2025-10-24T12:41:10.812Z [DEBUG] checking for provisioner in \"/usr/local/bin\"\n2025-10-24T12:41:10.812Z [DEBUG] checking for provisioner in \"/home/foo/.terraform.d/plugins\"\n2025-10-24T12:41:10.812Z [TRACE] Meta.BackendForPlan: backend *local.Local supports operations\n2025-10-24T12:41:10.813Z [INFO]  backend/local: starting Apply operation\n2025-10-24T12:41:10.813Z [TRACE] backend/local: requesting state manager for workspace \"default\"\n2025-10-24T12:41:10.813Z [TRACE] backend/local: state manager for workspace \"default\" will:\n - read initial snapshot from terraform.tfstate\n - write new snapshots to terraform.tfstate\n - create any backup at terraform.tfstate.backup\n2025-10-24T12:41:10.813Z [TRACE] backend/local: requesting state lock for workspace \"default\"\n2025-10-24T12:41:10.813Z [TRACE] statemgr.Filesystem: preparing to manage state snapshots at terraform.tfstate\n2025-10-24T12:41:10.813Z [TRACE] statemgr.Filesystem: existing snapshot has lineage \"d773628b-53d9-6c4b-c855-ea5267f4a531\" serial 1\n2025-10-24T12:41:10.813Z [TRACE] statemgr.Filesystem: locking terraform.tfstate using fcntl flock\n2025-10-24T12:41:10.813Z [TRACE] statemgr.Filesystem: writing lock metadata to .terraform.tfstate.lock.info\n2025-10-24T12:41:10.813Z [TRACE] backend/local: reading remote state for workspace \"default\"\n2025-10-24T12:41:10.813Z [TRACE] statemgr.Filesystem: reading latest snapshot from terraform.tfstate\n2025-10-24T12:41:10.813Z [TRACE] statemgr.Filesystem: read snapshot with lineage \"d773628b-53d9-6c4b-c855-ea5267f4a531\" serial 1\n2025-10-24T12:41:10.813Z [TRACE] backend/local: populating backendrun.LocalRun from plan file\n2025-10-24T12:41:10.813Z [TRACE] Config.VerifyDependencySelections: provider registry.terraform.io/hashicorp/local has 2.5.3 to satisfy \"\"\n2025-10-24T12:41:10.814Z [TRACE] terraform.NewContext: starting\n2025-10-24T12:41:10.814Z [TRACE] terraform.NewContext: complete\n2025-10-24T12:41:10.814Z [TRACE] LoadSchemas: retrieving schema for provider type \"registry.terraform.io/hashicorp/local\"\n2025-10-24T12:41:10.814Z [TRACE] terraform.contextPlugins: Initializing provider \"registry.terraform.io/hashicorp/local\" to read its schema\n2025-10-24T12:41:10.814Z [DEBUG] created provider logger: level=trace\n2025-10-24T12:41:10.814Z [INFO]  provider: configuring client automatic mTLS\n2025-10-24T12:41:10.824Z [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/local/2.5.3/linux_amd64/terraform-provider-local_v2.5.3_x5 args=[\".terraform/providers/registry.terraform.io/hashicorp/local/2.5.3/linux_amd64/terraform-provider-local_v2.5.3_x5\"]\n2025-10-24T12:41:10.825Z [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/local/2.5.3/linux_amd64/terraform-provider-local_v2.5.3_x5 pid=18801\n2025-10-24T12:41:10.825Z [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/local/2.5.3/linux_amd64/terraform-provider-local_v2.5.3_x5\n2025-10-24T12:41:10.828Z [INFO]  provider.terraform-provider-local_v2.5.3_x5: configuring server automatic mTLS: timestamp=2025-10-24T12:41:10.828Z\n2025-10-24T12:41:10.839Z [DEBUG] provider: using plugin: version=5\n2025-10-24T12:41:10.839Z [DEBUG] provider.terraform-provider-local_v2.5.3_x5: plugin address: address=/tmp/plugin391151188 network=unix timestamp=2025-10-24T12:41:10.839Z\n2025-10-24T12:41:10.846Z [TRACE] GRPCProvider: GetProviderSchema\n2025-10-24T12:41:10.847Z [TRACE] provider.stdio: waiting for stdio data\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Received request: @caller=github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/tf5server/server.go:522 tf_proto_version=5.8 tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 @module=sdk.proto tf_provider_addr=registry.terraform.io/hashicorp/local tf_rpc=GetProviderSchema timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Sending request downstream: tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/internal/tf5serverlogging/downstream_request.go:22 @module=sdk.proto tf_proto_version=5.8 tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Checking ProviderSchema lock: @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:389 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Calling provider defined Provider Schema: @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:400 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Called provider defined Provider Schema: @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:402 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Checking ResourceTypes lock: @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:539 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Checking ProviderTypeName lock: @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:366 @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Calling provider defined Provider Metadata: @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:377 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Called provider defined Provider Metadata: tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:379 @module=sdk.framework timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Calling provider defined Provider Resources: @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:550 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Called provider defined Provider Resources: @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:552 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Found resource type: tf_rpc=GetProviderSchema tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_resource_type=local_file @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:573 @module=sdk.framework timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Found resource type: tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_resource_type=local_sensitive_file tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:573 @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Calling provider defined Resource Schema method: @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_resource_type=local_file tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:669 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Called provider defined Resource Schema method: @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:671 @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_rpc=GetProviderSchema tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_resource_type=local_file timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Calling provider defined Resource Schema method: tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:669 @module=sdk.framework tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_resource_type=local_sensitive_file tf_provider_addr=registry.terraform.io/hashicorp/local timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Called provider defined Resource Schema method: @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:671 tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 @module=sdk.framework tf_resource_type=local_sensitive_file tf_rpc=GetProviderSchema timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Checking DataSourceTypes lock: @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:210 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Checking ProviderTypeName lock: tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:366 @module=sdk.framework timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Calling provider defined Provider DataSources: tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:221 @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Called provider defined Provider DataSources: @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:223 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Found data source type: @module=sdk.framework tf_data_source_type=local_file tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:244 tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Found data source type: tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:244 @module=sdk.framework tf_data_source_type=local_sensitive_file tf_rpc=GetProviderSchema timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Calling provider defined DataSource Schema: tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 @module=sdk.framework tf_data_source_type=local_file tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:340 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Called provider defined DataSource Schema: @module=sdk.framework tf_data_source_type=local_file tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:342 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Calling provider defined DataSource Schema: tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:340 @module=sdk.framework tf_data_source_type=local_sensitive_file tf_rpc=GetProviderSchema timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Called provider defined DataSource Schema: @module=sdk.framework tf_data_source_type=local_sensitive_file tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:342 tf_provider_addr=registry.terraform.io/hashicorp/local tf_rpc=GetProviderSchema timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Checking FunctionTypes lock: tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server_functions.go:124 @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Calling provider defined Provider Functions: tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server_functions.go:142 @module=sdk.framework timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Called provider defined Provider Functions: tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server_functions.go:144 @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Found function: @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server_functions.go:163 tf_function_name=direxists timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.847Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Calling provider defined Function Definition: tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server_functions.go:91 tf_provider_addr=registry.terraform.io/hashicorp/local tf_rpc=GetProviderSchema @module=sdk.framework tf_function_name=direxists timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.848Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Called provider defined Function Definition: tf_rpc=GetProviderSchema @module=sdk.framework tf_function_name=direxists @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server_functions.go:93 tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.848Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Checking EphemeralResourceFuncs lock: tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server_ephemeralresources.go:38 @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.848Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Checking ProviderTypeName lock: tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:366 @module=sdk.framework timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.848Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Received downstream response: diagnostic_warning_count=0 tf_proto_version=5.8 tf_req_duration_ms=0 tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 diagnostic_error_count=0 tf_provider_addr=registry.terraform.io/hashicorp/local tf_rpc=GetProviderSchema @caller=github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/internal/tf5serverlogging/downstream_request.go:42 @module=sdk.proto timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.848Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Announced server capabilities: tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_rpc=GetProviderSchema tf_server_capability_move_resource_state=true @module=sdk.proto tf_proto_version=5.8 tf_server_capability_get_provider_schema_optional=true tf_server_capability_plan_destroy=true @caller=github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/internal/tf5serverlogging/server_capabilities.go:27 timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.848Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Served request: @caller=github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/tf5server/server.go:541 @module=sdk.proto tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=a157e0f8-c1ea-2d6a-363a-30e5923764f9 tf_proto_version=5.8 tf_rpc=GetProviderSchema timestamp=2025-10-24T12:41:10.847Z\n2025-10-24T12:41:10.848Z [DEBUG] No provider meta schema returned\n2025-10-24T12:41:10.848Z [TRACE] GRPCProvider: Close\n2025-10-24T12:41:10.849Z [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2025-10-24T12:41:10.850Z [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/local/2.5.3/linux_amd64/terraform-provider-local_v2.5.3_x5 id=18801\n2025-10-24T12:41:10.850Z [DEBUG] provider: plugin exited\n2025-10-24T12:41:10.850Z [INFO]  backend/local: apply calling Apply\n2025-10-24T12:41:10.850Z [DEBUG] Building and walking apply graph for NormalMode plan\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.ConfigTransformer\n2025-10-24T12:41:10.850Z [TRACE] ConfigTransformer: Starting for path:\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.RootVariableTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.ModuleVariableTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.variableValidationTransformer\n2025-10-24T12:41:10.850Z [TRACE] variableValidationTransformer: adding validation nodes for any existing variable evaluation nodes\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.LocalTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.OutputTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.DiffTransformer\n2025-10-24T12:41:10.850Z [TRACE] DiffTransformer starting\n2025-10-24T12:41:10.850Z [TRACE] DiffTransformer: found Create change for local_file.repo_readme\n2025-10-24T12:41:10.850Z [TRACE] DiffTransformer: local_file.repo_readme will be represented by local_file.repo_readme\n2025-10-24T12:41:10.850Z [TRACE] DiffTransformer complete\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.DeferredTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.checkTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.AttachStateTransformer\n2025-10-24T12:41:10.850Z [DEBUG] Resource state not found for node \"local_file.repo_readme\", instance local_file.repo_readme\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.OrphanOutputTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.AttachResourceConfigTransformer\n2025-10-24T12:41:10.850Z [TRACE] AttachResourceConfigTransformer: attaching to \"local_file.repo_readme (expand)\" (*terraform.nodeExpandApplyableResource) config from hcl.Range{Filename:\"reproduce.tf\", Start:hcl.Pos{Line:4, Column:1, Byte:94}, End:hcl.Pos{Line:4, Column:36, Byte:129}}\n2025-10-24T12:41:10.850Z [TRACE] AttachResourceConfigTransformer: attaching provider meta configs to local_file.repo_readme (expand)\n2025-10-24T12:41:10.850Z [TRACE] AttachResourceConfigTransformer: attaching to \"local_file.repo_readme\" (*terraform.NodeApplyableResourceInstance) config from hcl.Range{Filename:\"reproduce.tf\", Start:hcl.Pos{Line:4, Column:1, Byte:94}, End:hcl.Pos{Line:4, Column:36, Byte:129}}\n2025-10-24T12:41:10.850Z [TRACE] AttachResourceConfigTransformer: attaching provider meta configs to local_file.repo_readme\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.graphTransformerMulti\n2025-10-24T12:41:10.850Z [TRACE] (graphTransformerMulti) Executing graph transform *terraform.externalProviderTransformer\n2025-10-24T12:41:10.850Z [TRACE] (graphTransformerMulti) Completed graph transform *terraform.externalProviderTransformer with new graph:\n  local.rendered_repo_readme (expand) - *terraform.nodeExpandLocal\n  local_file.repo_readme - *terraform.NodeApplyableResourceInstance\n    local_file.repo_readme (expand) - *terraform.nodeExpandApplyableResource\n  local_file.repo_readme (expand) - *terraform.nodeExpandApplyableResource\n  ------\n2025-10-24T12:41:10.850Z [TRACE] (graphTransformerMulti) Executing graph transform *terraform.ProviderConfigTransformer\n2025-10-24T12:41:10.850Z [TRACE] (graphTransformerMulti) Completed graph transform *terraform.ProviderConfigTransformer (no changes)\n2025-10-24T12:41:10.850Z [TRACE] (graphTransformerMulti) Executing graph transform *terraform.MissingProviderTransformer\n2025-10-24T12:41:10.850Z [DEBUG] adding implicit provider configuration provider[\"registry.terraform.io/hashicorp/local\"], implied first by local_file.repo_readme (expand)\n2025-10-24T12:41:10.850Z [TRACE] (graphTransformerMulti) Completed graph transform *terraform.MissingProviderTransformer with new graph:\n  local.rendered_repo_readme (expand) - *terraform.nodeExpandLocal\n  local_file.repo_readme - *terraform.NodeApplyableResourceInstance\n    local_file.repo_readme (expand) - *terraform.nodeExpandApplyableResource\n  local_file.repo_readme (expand) - *terraform.nodeExpandApplyableResource\n  provider[\"registry.terraform.io/hashicorp/local\"] - *terraform.NodeApplyableProvider\n  ------\n2025-10-24T12:41:10.850Z [TRACE] (graphTransformerMulti) Executing graph transform *terraform.ProviderTransformer\n2025-10-24T12:41:10.850Z [TRACE] ProviderTransformer: exact match for provider[\"registry.terraform.io/hashicorp/local\"] serving local_file.repo_readme (expand)\n2025-10-24T12:41:10.850Z [DEBUG] ProviderTransformer: \"local_file.repo_readme (expand)\" (*terraform.nodeExpandApplyableResource) needs provider[\"registry.terraform.io/hashicorp/local\"]\n2025-10-24T12:41:10.850Z [TRACE] ProviderTransformer: exact match for provider[\"registry.terraform.io/hashicorp/local\"] serving local_file.repo_readme\n2025-10-24T12:41:10.850Z [DEBUG] ProviderTransformer: \"local_file.repo_readme\" (*terraform.NodeApplyableResourceInstance) needs provider[\"registry.terraform.io/hashicorp/local\"]\n2025-10-24T12:41:10.850Z [TRACE] (graphTransformerMulti) Completed graph transform *terraform.ProviderTransformer with new graph:\n  local.rendered_repo_readme (expand) - *terraform.nodeExpandLocal\n  local_file.repo_readme - *terraform.NodeApplyableResourceInstance\n    local_file.repo_readme (expand) - *terraform.nodeExpandApplyableResource\n    provider[\"registry.terraform.io/hashicorp/local\"] - *terraform.NodeApplyableProvider\n  local_file.repo_readme (expand) - *terraform.nodeExpandApplyableResource\n    provider[\"registry.terraform.io/hashicorp/local\"] - *terraform.NodeApplyableProvider\n  provider[\"registry.terraform.io/hashicorp/local\"] - *terraform.NodeApplyableProvider\n  ------\n2025-10-24T12:41:10.850Z [TRACE] (graphTransformerMulti) Executing graph transform *terraform.PruneProviderTransformer\n2025-10-24T12:41:10.850Z [TRACE] (graphTransformerMulti) Completed graph transform *terraform.PruneProviderTransformer (no changes)\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.RemovedModuleTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.AttachSchemaTransformer\n2025-10-24T12:41:10.850Z [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/hashicorp/local\" is in the global cache\n2025-10-24T12:41:10.850Z [TRACE] AttachSchemaTransformer: attaching provider config schema to provider[\"registry.terraform.io/hashicorp/local\"]\n2025-10-24T12:41:10.850Z [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/hashicorp/local\" is in the global cache\n2025-10-24T12:41:10.850Z [TRACE] AttachSchemaTransformer: attaching resource schema to local_file.repo_readme (expand)\n2025-10-24T12:41:10.850Z [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/hashicorp/local\" is in the global cache\n2025-10-24T12:41:10.850Z [TRACE] AttachSchemaTransformer: attaching resource schema to local_file.repo_readme\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.ModuleExpansionTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.ExternalReferenceTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.ReferenceTransformer\n2025-10-24T12:41:10.850Z [DEBUG] ReferenceTransformer: \"local_file.repo_readme (expand)\" references: [local.rendered_repo_readme (expand)]\n2025-10-24T12:41:10.850Z [DEBUG] ReferenceTransformer: \"local.rendered_repo_readme (expand)\" references: []\n2025-10-24T12:41:10.850Z [DEBUG] ReferenceTransformer: \"local_file.repo_readme\" references: [local.rendered_repo_readme (expand)]\n2025-10-24T12:41:10.850Z [DEBUG] ReferenceTransformer: \"provider[\\\"registry.terraform.io/hashicorp/local\\\"]\" references: []\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.AttachDependenciesTransformer\n2025-10-24T12:41:10.850Z [TRACE] AttachDependenciesTransformer: local_file.repo_readme depends on []\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.checkStartTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.ForcedCBDTransformer\n2025-10-24T12:41:10.850Z [TRACE] ForcedCBDTransformer: \"local_file.repo_readme (expand)\" (*terraform.nodeExpandApplyableResource) has no CBD descendant, so skipping\n2025-10-24T12:41:10.850Z [TRACE] ForcedCBDTransformer: \"local_file.repo_readme\" (*terraform.NodeApplyableResourceInstance) has no CBD descendant, so skipping\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.DestroyEdgeTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.CBDEdgeTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.pruneUnusedNodesTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.TargetsTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.ephemeralResourceCloseTransformer\n2025-10-24T12:41:10.850Z [TRACE] Executing graph transform *terraform.CloseProviderTransformer\n2025-10-24T12:41:10.851Z [TRACE] Executing graph transform *terraform.CloseRootModuleTransformer\n2025-10-24T12:41:10.851Z [TRACE] Executing graph transform *terraform.TransitiveReductionTransformer\n2025-10-24T12:41:10.851Z [TRACE] Completed graph transform:\nlocal.rendered_repo_readme (expand) - *terraform.nodeExpandLocal\nlocal_file.repo_readme - *terraform.NodeApplyableResourceInstance\n  local_file.repo_readme (expand) - *terraform.nodeExpandApplyableResource\nlocal_file.repo_readme (expand) - *terraform.nodeExpandApplyableResource\n  local.rendered_repo_readme (expand) - *terraform.nodeExpandLocal\n  provider[\"registry.terraform.io/hashicorp/local\"] - *terraform.NodeApplyableProvider\nprovider[\"registry.terraform.io/hashicorp/local\"] - *terraform.NodeApplyableProvider\nprovider[\"registry.terraform.io/hashicorp/local\"] (close) - *terraform.graphNodeCloseProvider\n  local_file.repo_readme - *terraform.NodeApplyableResourceInstance\nroot - *terraform.nodeCloseModule\n  provider[\"registry.terraform.io/hashicorp/local\"] (close) - *terraform.graphNodeCloseProvider\n  ------\n2025-10-24T12:41:10.851Z [TRACE] LoadSchemas: retrieving schema for provider type \"registry.terraform.io/hashicorp/local\"\n2025-10-24T12:41:10.851Z [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/hashicorp/local\" is in the global cache\n2025-10-24T12:41:10.851Z [DEBUG] Starting graph walk: walkApply\n2025-10-24T12:41:10.851Z [TRACE] vertex \"provider[\\\"registry.terraform.io/hashicorp/local\\\"]\": starting visit (*terraform.NodeApplyableProvider)\n2025-10-24T12:41:10.851Z [TRACE] vertex \"provider[\\\"registry.terraform.io/hashicorp/local\\\"]\": belongs to\n2025-10-24T12:41:10.851Z [TRACE] vertex \"local.rendered_repo_readme (expand)\": starting visit (*terraform.nodeExpandLocal)\n2025-10-24T12:41:10.851Z [TRACE] vertex \"local.rendered_repo_readme (expand)\": does not belong to any module instance\n2025-10-24T12:41:10.851Z [TRACE] vertex \"local.rendered_repo_readme (expand)\": expanding dynamic subgraph\n2025-10-24T12:41:10.851Z [TRACE] Expanding local: adding local.rendered_repo_readme as *terraform.NodeLocal\n2025-10-24T12:41:10.851Z [TRACE] vertex \"local.rendered_repo_readme (expand)\": entering dynamic subgraph\n2025-10-24T12:41:10.851Z [DEBUG] created provider logger: level=trace\n2025-10-24T12:41:10.851Z [INFO]  provider: configuring client automatic mTLS\n2025-10-24T12:41:10.851Z [TRACE] vertex \"local.rendered_repo_readme\": starting visit (*terraform.NodeLocal)\n2025-10-24T12:41:10.851Z [TRACE] vertex \"local.rendered_repo_readme\": belongs to\n2025-10-24T12:41:10.851Z [ERROR] function templatefile returned an inconsistent result with args: []cty.Value{cty.StringVal(\"./stuff.tftpl\"), cty.ObjectVal(map[string]cty.Value{\"foo\":cty.StringVal(\"bar\")})}\n2025-10-24T12:41:10.851Z [ERROR] vertex \"local.rendered_repo_readme\" error: Error in function call\n2025-10-24T12:41:10.851Z [TRACE] vertex \"local.rendered_repo_readme\": visit complete, with errors\n2025-10-24T12:41:10.851Z [TRACE] dag/walk: upstream of \"root\" errored, so skipping\n2025-10-24T12:41:10.851Z [TRACE] vertex \"local.rendered_repo_readme (expand)\": dynamic subgraph encountered errors: Error in function call\n2025-10-24T12:41:10.851Z [ERROR] vertex \"local.rendered_repo_readme (expand)\" error: Error in function call\n2025-10-24T12:41:10.851Z [TRACE] vertex \"local.rendered_repo_readme (expand)\": visit complete, with errors\n2025-10-24T12:41:10.855Z [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/local/2.5.3/linux_amd64/terraform-provider-local_v2.5.3_x5 args=[\".terraform/providers/registry.terraform.io/hashicorp/local/2.5.3/linux_amd64/terraform-provider-local_v2.5.3_x5\"]\n2025-10-24T12:41:10.856Z [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/local/2.5.3/linux_amd64/terraform-provider-local_v2.5.3_x5 pid=18809\n2025-10-24T12:41:10.856Z [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/local/2.5.3/linux_amd64/terraform-provider-local_v2.5.3_x5\n2025-10-24T12:41:10.859Z [INFO]  provider.terraform-provider-local_v2.5.3_x5: configuring server automatic mTLS: timestamp=2025-10-24T12:41:10.859Z\n2025-10-24T12:41:10.869Z [DEBUG] provider: using plugin: version=5\n2025-10-24T12:41:10.869Z [DEBUG] provider.terraform-provider-local_v2.5.3_x5: plugin address: address=/tmp/plugin3844152290 network=unix timestamp=2025-10-24T12:41:10.869Z\n2025-10-24T12:41:10.877Z [TRACE] BuiltinEvalContext: Initialized \"provider[\\\"registry.terraform.io/hashicorp/local\\\"]\" provider for provider[\"registry.terraform.io/hashicorp/local\"]\n2025-10-24T12:41:10.877Z [TRACE] provider.stdio: waiting for stdio data\n2025-10-24T12:41:10.877Z [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/hashicorp/local\" is in the global cache\n2025-10-24T12:41:10.877Z [TRACE] NodeApplyableProvider: configuring provider[\"registry.terraform.io/hashicorp/local\"]\n2025-10-24T12:41:10.877Z [TRACE] buildProviderConfig for provider[\"registry.terraform.io/hashicorp/local\"]: no configuration at all\n2025-10-24T12:41:10.877Z [TRACE] GRPCProvider: GetProviderSchema\n2025-10-24T12:41:10.877Z [TRACE] GRPCProvider: returning cached schema: EXTRA_VALUE_AT_END=registry.terraform.io/hashicorp/local\n2025-10-24T12:41:10.877Z [TRACE] GRPCProvider: ValidateProviderConfig\n2025-10-24T12:41:10.877Z [TRACE] GRPCProvider: GetProviderSchema\n2025-10-24T12:41:10.877Z [TRACE] GRPCProvider: returning cached schema: EXTRA_VALUE_AT_END=registry.terraform.io/hashicorp/local\n2025-10-24T12:41:10.878Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Received request: @module=sdk.proto tf_proto_version=5.8 tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=95cd6193-dfcb-0ef5-e4ac-79470ae64bb6 tf_rpc=PrepareProviderConfig @caller=github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/tf5server/server.go:549 timestamp=2025-10-24T12:41:10.878Z\n2025-10-24T12:41:10.878Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Skipping protocol data file writing because no data directory is set. Use the TF_LOG_SDK_PROTO_DATA_DIR environment variable to enable this functionality.: @module=sdk.proto tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=95cd6193-dfcb-0ef5-e4ac-79470ae64bb6 @caller=github.com/hashicorp/terraform-plugin-go@v0.26.0/internal/logging/protocol_data.go:41 tf_proto_version=5.8 tf_rpc=PrepareProviderConfig timestamp=2025-10-24T12:41:10.878Z\n2025-10-24T12:41:10.878Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Sending request downstream: tf_proto_version=5.8 tf_provider_addr=registry.terraform.io/hashicorp/local @module=sdk.proto tf_req_id=95cd6193-dfcb-0ef5-e4ac-79470ae64bb6 tf_rpc=PrepareProviderConfig @caller=github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/internal/tf5serverlogging/downstream_request.go:22 timestamp=2025-10-24T12:41:10.878Z\n2025-10-24T12:41:10.878Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Checking ProviderSchema lock: @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=95cd6193-dfcb-0ef5-e4ac-79470ae64bb6 tf_rpc=PrepareProviderConfig @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:389 timestamp=2025-10-24T12:41:10.878Z\n2025-10-24T12:41:10.878Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Calling provider defined Provider Schema: @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:400 @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=95cd6193-dfcb-0ef5-e4ac-79470ae64bb6 tf_rpc=PrepareProviderConfig timestamp=2025-10-24T12:41:10.878Z\n2025-10-24T12:41:10.878Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Called provider defined Provider Schema: tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=95cd6193-dfcb-0ef5-e4ac-79470ae64bb6 tf_rpc=PrepareProviderConfig @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:402 @module=sdk.framework timestamp=2025-10-24T12:41:10.878Z\n2025-10-24T12:41:10.878Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Received downstream response: diagnostic_error_count=0 tf_proto_version=5.8 tf_req_duration_ms=0 @caller=github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/internal/tf5serverlogging/downstream_request.go:42 diagnostic_warning_count=0 tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=95cd6193-dfcb-0ef5-e4ac-79470ae64bb6 tf_rpc=PrepareProviderConfig @module=sdk.proto timestamp=2025-10-24T12:41:10.878Z\n2025-10-24T12:41:10.878Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Served request: tf_proto_version=5.8 tf_rpc=PrepareProviderConfig @caller=github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/tf5server/server.go:570 @module=sdk.proto tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=95cd6193-dfcb-0ef5-e4ac-79470ae64bb6 timestamp=2025-10-24T12:41:10.878Z\n2025-10-24T12:41:10.878Z [TRACE] GRPCProvider: ConfigureProvider\n2025-10-24T12:41:10.878Z [TRACE] GRPCProvider: GetProviderSchema\n2025-10-24T12:41:10.878Z [TRACE] GRPCProvider: returning cached schema: EXTRA_VALUE_AT_END=registry.terraform.io/hashicorp/local\n2025-10-24T12:41:10.879Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Received request: tf_req_id=6de9e51a-de98-acca-926d-233cf7934f9b tf_proto_version=5.8 tf_provider_addr=registry.terraform.io/hashicorp/local tf_rpc=Configure @caller=github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/tf5server/server.go:578 @module=sdk.proto timestamp=2025-10-24T12:41:10.878Z\n2025-10-24T12:41:10.879Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Announced client capabilities: @caller=github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/internal/tf5serverlogging/client_capabilities.go:38 @module=sdk.proto tf_proto_version=5.8 tf_client_capability_deferral_allowed=true tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=6de9e51a-de98-acca-926d-233cf7934f9b tf_rpc=Configure timestamp=2025-10-24T12:41:10.878Z\n2025-10-24T12:41:10.879Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Sending request downstream: tf_proto_version=5.8 tf_req_id=6de9e51a-de98-acca-926d-233cf7934f9b @caller=github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/internal/tf5serverlogging/downstream_request.go:22 @module=sdk.proto tf_provider_addr=registry.terraform.io/hashicorp/local tf_rpc=Configure timestamp=2025-10-24T12:41:10.878Z\n2025-10-24T12:41:10.879Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Checking ProviderSchema lock: tf_req_id=6de9e51a-de98-acca-926d-233cf7934f9b tf_rpc=Configure @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server.go:389 @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local timestamp=2025-10-24T12:41:10.879Z\n2025-10-24T12:41:10.879Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Calling provider defined Provider Configure: tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=6de9e51a-de98-acca-926d-233cf7934f9b tf_rpc=Configure @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server_configureprovider.go:15 @module=sdk.framework timestamp=2025-10-24T12:41:10.879Z\n2025-10-24T12:41:10.879Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Called provider defined Provider Configure: tf_req_id=6de9e51a-de98-acca-926d-233cf7934f9b tf_rpc=Configure @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server_configureprovider.go:23 @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/local timestamp=2025-10-24T12:41:10.879Z\n2025-10-24T12:41:10.879Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Received downstream response: @module=sdk.proto diagnostic_error_count=0 diagnostic_warning_count=0 tf_rpc=Configure tf_proto_version=5.8 tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_duration_ms=0 tf_req_id=6de9e51a-de98-acca-926d-233cf7934f9b @caller=github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/internal/tf5serverlogging/downstream_request.go:42 timestamp=2025-10-24T12:41:10.879Z\n2025-10-24T12:41:10.879Z [TRACE] provider.terraform-provider-local_v2.5.3_x5: Served request: tf_provider_addr=registry.terraform.io/hashicorp/local tf_req_id=6de9e51a-de98-acca-926d-233cf7934f9b tf_rpc=Configure @caller=github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/tf5server/server.go:598 @module=sdk.proto tf_proto_version=5.8 timestamp=2025-10-24T12:41:10.879Z\n2025-10-24T12:41:10.879Z [TRACE] vertex \"provider[\\\"registry.terraform.io/hashicorp/local\\\"]\": visit complete\n2025-10-24T12:41:10.879Z [TRACE] dag/walk: upstream of \"local_file.repo_readme (expand)\" errored, so skipping\n2025-10-24T12:41:10.879Z [TRACE] dag/walk: upstream of \"local_file.repo_readme\" errored, so skipping\n2025-10-24T12:41:10.879Z [TRACE] dag/walk: upstream of \"provider[\\\"registry.terraform.io/hashicorp/local\\\"] (close)\" errored, so skipping\n2025-10-24T12:41:10.879Z [TRACE] dag/walk: upstream of \"root\" errored, so skipping\n2025-10-24T12:41:10.879Z [TRACE] statemgr.Filesystem: not making a backup, because the new snapshot is identical to the old\n2025-10-24T12:41:10.879Z [TRACE] statemgr.Filesystem: no state changes since last snapshot\n2025-10-24T12:41:10.879Z [TRACE] statemgr.Filesystem: writing snapshot at terraform.tfstate\n\u2577\n\u2502 Error: Error in function call\n\u2502\n\u2502   on reproduce.tf line 2, in locals:\n\u2502    2:   rendered_repo_readme = templatefile(\"${path.root}/stuff.tftpl\", { foo = \"bar\" })\n\u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502     \u2502 while calling templatefile(path, vars)\n\u2502     \u2502 path.root is \".\"\n\u2502\n\u2502 Call to function \"templatefile\" failed: function returned an inconsistent result.\n\u2575\n2025-10-24T12:41:10.882Z [TRACE] statemgr.Filesystem: removing lock metadata file .terraform.tfstate.lock.info\n2025-10-24T12:41:10.883Z [TRACE] statemgr.Filesystem: unlocking terraform.tfstate using fcntl flock\n2025-10-24T12:41:10.883Z [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2025-10-24T12:41:10.884Z [INFO]  provider: plugin process\n```\n\n\n### Expected Behavior\n\nUp until terraform 1.12.2 included, we could generate some readmes, including a timestamp of when file was last generated.\n\n### Actual Behavior\n\nWith 1.13.3, or 1.14.0-rc1, terraform returns an error:\n```\n\u2577\n\u2502 Error: Error in function call\n\u2502\n\u2502   on reproduce.tf line 2, in locals:\n\u2502    2:   rendered_repo_readme = templatefile(\"${path.root}/stuff.tftpl\", { foo = \"bar\" })\n\u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502     \u2502 while calling templatefile(path, vars)\n\u2502     \u2502 path.root is \".\"\n\u2502\n\u2502 Call to function \"templatefile\" failed: function returned an inconsistent result.\n```\n\n### Steps to Reproduce\n\n- `terraform init`\n- `terraform apply`\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hi @faust64,\n\nThanks for filling the issue. This is as intentional change made in #37001 to avoid corrupted data and crashes during apply. All non-ephemeral data must evaluate consistently between plan and apply, and if you were to change the `stuff.tftpl` file between plan and apply you would see that it causes terraform to return a provider error because it caused the `local_file` plan to become invalid.\n\nThe `timestamp` function from within the template however it an interesting loophole, but it should not cause this use case to fail because `timestamp` will be unknown until the final apply step. I think the nesting of the function call from within a template threw off some of the expectations here, but it shouldn't be too hard to pick up the unknown case wherever it was missed.\n\n\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug"
      ],
      "created_at": "2025-10-24T12:51:10Z",
      "closed_at": "2025-10-24T14:36:34Z",
      "url": "https://github.com/hashicorp/terraform/issues/37807",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37799,
      "title": "Terraform test expect_failure doesn't work for permission errors",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.4\non darwin_arm64\n```\n\n### Terraform Configuration Files\n\n***.tftest.hcl**\n\n```terraform\nprovider \"aws\" {\n  region = \"#####\"\n  alias  = \"team_role\"\n\n  assume_role {\n    role_arn = \"arn:aws:iam::######:role/#########\"\n  }\n}\n\nrun \"scps_deny_iam_user_creation\" {\n\n  module {\n    source = \"./scp-tests/modules/iam-user\"\n  }\n\n  providers = {\n    aws = aws.team_role\n  }\n\n  expect_failures = [\n    aws_iam_user.this,\n  ]\n}\n```\n**scp-tests/modules/iam-user/main.tf**\n\n```terraform\nresource \"aws_iam_user\" \"this\" {\n  name = \"scp-test-deny\"\n}\n\nterraform {\n  required_providers {\n    aws = {\n      source = \"hashicorp/aws\"\n    }\n  }\n}\n```\n\n### Debug Output\n\n```\n  run \"scps_deny_iam_user_creation\"... fail\n\u2577\n\u2502 Error: Missing expected failure\n\u2502 \n\u2502   on ####.tftest.hcl line 40, in run \"scps_deny_iam_user_creation\":\n\u2502   40:     aws_iam_user.this,\n\u2502 \n\u2502 The checkable object, aws_iam_user.this, was expected to report an error\n\u2502 but did not.\n\u2575\n\u2577\n\u2502 Error: creating IAM User (scp-test-deny): operation error IAM: CreateUser, https response error StatusCode: 403, RequestID: #########, api error AccessDenied: User: arn:aws:sts::#########:assumed-role/##########/aws-go-sdk is not authorized to perform: iam:CreateUser on resource: arn:aws:iam::#########:user/scp-test-deny with an explicit deny in a service control policy\n\u2502 \n\u2502   with aws_iam_user.this,\n\u2502   on ############### line 1, in resource \"aws_iam_user\" \"this\":\n\u2502    1: resource \"aws_iam_user\" \"this\" {\n\u2502 \n\u2575\n```\n\n\n### Expected Behavior\n\n* `expect_failure` catches permission error as well and test is successful\n\n### Actual Behavior\n\n* Test fails with an error showing that the action is prevented by SCPs\n\n### Steps to Reproduce\n\n1. Create a role that does allow creation of AWS IAM users (or AdministratorAccess for the sake of the test) in a member account.\n2. Create an SCP that denies the creation of AWS IAM users.\n3. Run the test above which should verify that the SCP kicks in and prevents the role from creating the resource\n\n### Additional Context\n\nWhat I wanted to achieve was integration tests for my SCPs in AWS.\nA negative test would mean that as a team I try to perform an action which is restricted by SCPs. So my assumption was to use `expect_failure` which would catch the resulting error and proof that the SCP works as designed.\nHowever if it's a permission problem, the error is not being catched by `expect_failure`.\n\nIs that an expected behavior? If so, is there a chance for a feature that reflects my use case and the assumed behavior? Either in `expect_failure` or a different assertion?\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-10-22T11:55:55Z",
      "closed_at": "2025-10-23T08:06:24Z",
      "url": "https://github.com/hashicorp/terraform/issues/37799",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37802,
      "title": "Windows 11 - Terraform - Still creating loop - Root is waiting for Provider",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.4\non linux_amd64\n+ Provider registry.terraform.io/hashicorp/vault v5.3.0\n+ Provider registry.terraform.io/vmware/vsphere v2.15.0\n```\n\n### Terraform Configuration Files\n\n[variables_redacted.tf.txt](https://github.com/user-attachments/files/23060474/variables_redacted-CUI.tf.txt)\n[terraform_redacted.tfvars.txt](https://github.com/user-attachments/files/23060476/terraform_redacted-CUI.tfvars.txt)\n[main_redacted.tf.txt](https://github.com/user-attachments/files/23060475/main_redacted-CUI.tf.txt)\n\n```terraform\n...terraform config...\n```\n\n\n### Debug Output\n\n[terraform_trace_1_redacted.log](https://github.com/user-attachments/files/23057317/terraform_trace_1_redacted-CUI.log)\n\n```\n...debug output, or link to a gist...\n```\n\n\n### Expected Behavior\n\nTake windows 11 image and clone / terraform into a new VM with a new hostname.\n\n### Actual Behavior\n\nTerraforms clones the VM and it hangs on \"Still creating...\" until it times out / fails\n\nTrace loops forever at:\n[TRACE] dag/walk: vertex \"root\" is waiting for \"provider[\\\"registry.terraform.io/vmware/vsphere\\\"] (close)\"\n[TRACE] dag/walk: vertex \"provider[\\\"registry.terraform.io/vmware/vsphere\\\"] (close)\" is waiting for \"vsphere_virtual_machine.deploy_vm\"\n\n### Steps to Reproduce\n\nterraform plan\nterraform apply\n\n### Additional Context\n\n_No response_\n\n### References\n\nhttps://github.com/hashicorp/terraform/issues/23091\nhttps://github.com/vmware/terraform-provider-vsphere/issues/871\n\n### Generative AI / LLM assisted development?\n\nnone used",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "provider/vsphere",
        "new"
      ],
      "created_at": "2025-10-22T19:00:12Z",
      "closed_at": "2025-10-23T12:23:31Z",
      "url": "https://github.com/hashicorp/terraform/issues/37802",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37784,
      "title": "Nested dynamic block does not capture variables when using fixupBody",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.3\non linux_amd64\n+ provider registry.terraform.io/hashicorp/azurerm v4.48.0\n```\n\n### Terraform Configuration Files\n\n```\ngit clone https://github.com/polasekr/terraform-issue.git\nexport TF_VAR_resource_group_name=\"****\"\nexport ARM_SUBSCRIPTION_ID=\"******\"\ncd terraform-issue\nterraform init\nterraform plan\n```\n\n\n### Debug Output\n\n```\nhttps://gist.github.com/polasekr/999050b480787e8f9a9b43e0c267c3cf\n```\n\n### Expected Behavior\n\nIt should create two dynamic blocks ip_rule.\n\n\n\n### Actual Behavior\n\nAn error message:\n\n\u2577\n\u2502 Error: Unsupported attribute\n\u2502 \n\u2502   on modules/container-registry/main.tf line 18, in resource \"azurerm_container_registry\" \"this\":\n\u2502   18:       for_each = toset(var.allowed_ip_ranges)\n\u2502 \n\u2502 This object does not have an attribute named \"allowed_ip_ranges\".\n\n### Steps to Reproduce\n\n```\ngit clone https://github.com/polasekr/terraform-issue.git\nexport TF_VAR_resource_group_name=\"****\"\nexport ARM_SUBSCRIPTION_ID=\"******\"\ncd terraform-issue\nterraform init\nterraform plan\n```\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hi @polasekr, thanks for filing this. I think the source of this is an issue in the Azure provider documentation. [The documentation](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/container_registry#network_rule_set-1) states that `network_rule_set` is a block, but [the code](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/internal/services/containers/container_registry_resource.go#L167) actually marks it as an attribute.\n\nI think the following should work for you:\n\n```\n  network_rule_set = [\n    {\n      default_action = length(var.allowed_ip_ranges) > 0 ? \"Deny\" : \"Allow\"\n      ip_rule = [for allowed_ip_range in var.allowed_ip_ranges : {\n        action = \"Allow\"\n        ip_range = allowed_ip_range\n      }]\n    }\n  ]\n```\n\nYou could open an issue with the Azure provider directly to ask them to correct the documentation.\n\nI also think there is still a bug in Terraform here though, as the error message definitely doesn't correctly identify the problem. So I've renamed the issue and we can see if we can improve the error message for next time.\n\n\n---\n\nCorrection, it seems the behaviour of allowing blocks in place of attributes in this case is correct: https://github.com/hashicorp/terraform/blob/main/internal/lang/eval.go#L69-L75. \n\nThe attribute workaround I provided will still work in this case, but there does seem to be a case of the evaluation context being lost when evaluating nested blocks within a [fixupBody](https://github.com/hashicorp/terraform/blob/main/internal/lang/blocktoattr/fixup.go).\n\n---\n\nYou can also see https://github.com/hashicorp/terraform/issues/22340. The problem with `fixupBody` is that it's a hack that doesn't really give us context to generate good error messages, and IIRC trying to get more context would require some rather invasive changes because the legacy behavior is not compatible with HCL syntax. Since this was only intended to be a temporary workaround until providers can update their implementations, it was determined that the existing drawbacks are an acceptable compromise.",
      "labels": [
        "bug",
        "confirmed",
        "new"
      ],
      "created_at": "2025-10-17T22:52:50Z",
      "closed_at": "2025-10-21T09:10:40Z",
      "url": "https://github.com/hashicorp/terraform/issues/37784",
      "comments_count": 6
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37785,
      "title": "Using -invoke on Action with ref to resource causes unexpected error",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.14.0-beta3\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/external v2.3.5\n```\n\n### Terraform Configuration Files\n\n```terraform\nterraform {\n//  required_version = \"1.14.0-beta1\"\n  required_providers {\n    external = {\n      source = \"registry.terraform.io/hashicorp/external\"\n    }\n  }\n}\n\nresource \"terraform_data\" \"a\" {\n  input = \"A\"\n\n}\n\nresource \"terraform_data\" \"b\" {\n  input = \"B\"\n}\n\naction \"external\" \"a\" {\n  config {\n    program = [\"echo\", \"A!\"]\n  }\n}\n\naction \"external\" \"b\" {\n  config {\n    program = [\"echo\", \"variable = ${terraform_data.a.input}\"]\n  }\n}\n```\n\n\n### Debug Output\n\n```\n~/play/terraform-actions-examples/external/tst main   $ tfaa -invoke action.external.b                                          [v1.14.0-beta3]\n\u2577\n\u2502 Warning: Provider development overrides are in effect\n\u2502 \n\u2502 The following provider development overrides are set in the CLI configuration:\n\u2502  - hashicorp/external in /Users/sspeiche/go/bin\n\u2502 \n\u2502 The behavior may therefore not match any released version of the provider and applying changes may cause the state to become incompatible\n\u2502 with published releases.\n\u2575\n\nTerraform will perform the following actions:\n\nPlan: 0 to add, 0 to change, 0 to destroy. Actions: 1 to invoke.\n\nTerraform will invoke the following action(s):\n\n  # action.external.b will be invoked\n    action \"external\" \"b\" {\n        config {\n            program = [\n                \"echo\",\n                (known after apply),\n            ]\n        }\n    }\n\n\u2577\n\u2502 Error: Action configuration unknown during apply\n\u2502 \n\u2502 The action action.external.b was not fully known during apply.\n\u2502 \n\u2502 This is a bug in Terraform, please report it.\n\u2575\n```\n\n\n### Expected Behavior\n\nWould have expected a message to explain resource doesn't exist yet and need to run `terraform apply` first.\n\n### Actual Behavior\n\nGeneric error that told me to report this bug\n\n### Steps to Reproduce\n\n1. terraform init\n2. terraform apply -auto-approve -invoke action.external.b\n3. _Observe error_\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new",
        "actions"
      ],
      "created_at": "2025-10-20T13:44:42Z",
      "closed_at": "2025-10-21T21:13:26Z",
      "url": "https://github.com/hashicorp/terraform/issues/37785",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37786,
      "title": "terraform init takes a long time, is it related to DynamoDB outage?",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.12.1\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v5.0.1\n+ provider registry.terraform.io/hashicorp/dns v3.3.2\n+ provider registry.terraform.io/hashicorp/random v3.5.1\n```\n\n### Terraform Configuration Files\n\n```terraform\nterraform {\n  backend \"s3\" {\n    region         = \"us-east-1\"\n    dynamodb_table = \"........\"\n    encrypt        = true\n  }\n\n  required_version = \"~> 1.5\"\n\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~> 5.0.0\"\n    }\n  }\n}\n```\n\n\n### Debug Output\n\nStucks at `Downloading git::ssh://git@github.com/` \n\n\n### Expected Behavior\n\nDownloads the module in seconds\n\n### Actual Behavior\n\nStucks at `Downloading git::ssh://git@github.com/` \n\n### Steps to Reproduce\n\n1. `terraform init`\n\n### Additional Context\n\nI used a private repo as terraform source.\nNot sure if it's related to the DynamoDB outage, because our S3 backend uses DynamoDB locking\nhttps://www.cnbc.com/amp/2025/10/20/amazon-web-services-outage-takes-down-major-websites.html\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-10-20T13:57:18Z",
      "closed_at": "2025-10-20T14:30:45Z",
      "url": "https://github.com/hashicorp/terraform/issues/37786",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37622,
      "title": "Possible false detection of Cycle;",
      "problem": "### Terraform Version\n\n```shell\nv1.13.0\n```\n\n### Terraform Configuration Files\n\nToo complex to post.\n\n\n### Debug Output\n\n```\n\u2502 Error: Cycle: module.private-cloud.aws_cloudwatch_metric_alarm.rworker-cpu-utilization-high (expand), module.private-cloud.aws_launch_template.rwebapi (destroy deposed 02829a0e), module.private-cloud.aws_autoscaling_policy.rworker-up (expand), module.private-cloud.aws_autoscaling_policy.rworker-up, module.private-cloud.aws_cloudwatch_metric_alarm.rworker-cpu-utilization-low (expand), module.private-cloud.aws_autoscaling_group.rworker (expand), module.private-cloud.aws_autoscaling_group.rworker, module.private-cloud.aws_autoscaling_policy.rworker-down (expand), module.private-cloud.aws_autoscaling_policy.rworker-down, module.private-cloud.aws_cloudwatch_metric_alarm.rworker-cpu-utilization-low, module.private-cloud.aws_launch_template.rworker (destroy deposed 1705555a), module.private-cloud.aws_cloudwatch_metric_alarm.rwebapi-cpu-utilization-low (expand), module.private-cloud.aws_cloudwatch_metric_alarm.rwebapi-cpu-utilization-low, module.private-cloud.aws_cloudwatch_metric_alarm.rwebapi-cpu-utilization-high (expand), module.private-cloud.aws_cloudwatch_metric_alarm.rwebapi-cpu-utilization-high, module.private-cloud.aws_autoscaling_policy.rwebapi-down (expand), module.private-cloud.aws_autoscaling_policy.rwebapi-down, module.private-cloud.aws_autoscaling_group.rwebapi, module.private-cloud.aws_launch_template.rwebapi, module.private-cloud.aws_autoscaling_group.rwebapi (expand), module.private-cloud.aws_autoscaling_policy.rwebapi-up (expand), module.private-cloud.aws_autoscaling_policy.rwebapi-up, module.private-cloud.aws_autoscaling_group.rwebapi (destroy deposed ef176498), module.private-cloud.aws_subnet.rprivate_main[1] (destroy), module.private-cloud.aws_launch_template.rworker, module.private-cloud.aws_autoscaling_group.rworker (destroy deposed e8a33e8b), module.private-cloud.aws_subnet.rprivate_main[0] (destroy), module.private-cloud.aws_cloudwatch_metric_alarm.rworker-cpu-utilization-high\n```\n\n\n### Expected Behavior\n\nI did some resource renaming. I believe there is no any cycle I did. But got the error above. I do not expect it.\n\n### Actual Behavior\n\nWhen error happened I ran `apply` then `plan/apply` again. No error anymore without any changes to configuration files. It seems TF did false cycle detection.\n\n### Steps to Reproduce\n\nUnknown.\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hi @EugenKon,\n\nWe would need more information to try and diagnose the issue here. The cycle output names the internal structures, but doesn't account for the prior state, configuration, and changes made to the configuration. Are you saying that after the error Terraform successfully planned and applied the exact same configuration and state with no changes?\n\nThe only thing I see of note here is that there are multiple replacements of resource using `create_before_destroy` after you mentioned you did some refactoring. It unfortunately can be easy to cause problems when there are changes to be applied on top of refactoring the configuration, because metadata like `create_before_destroy` is linked to that configuration, and even when changes are intentional those changes may conflict with data stored in the deposed instances. \n\nA cycle can't really be a false positive, it either exists or it doesn't, so I would be more concerned if the exact same state and config could produce two different results with consecutive executions. If you could provide any insight into reproducing the issue, that would help significantly.\n\nThanks!\n\n---\n\n@jbardin yes, this is different and not related to the first one. ChatGPT helped me a bit with understanding where to start and once I understand the cycle I tried to follow output from TF.\nThis one was a true cycle and did not resolved automatically/magically without changes to TF like the previous one.\n\n\nexpand/close seems have special meaning I do not understand and it is not documented (at least I did not found it). \n\nI understand first 3 how values is passed, but I do not understand 3->4:\n`module.dns.local.current_lb_zone_id (expand), module.private-cloud.module.vpc-z.aws_lb_listener_rule.route_to_nomad,`\nThese to do not refer each other. \n\nThen the next one is `module.private-cloud.var.base_domain_zone_id (expand),` but from TF output there is no information how it was filled.\n\nIn our configuration we have:\n./main.tf\n```\nmodule \"private-cloud\" {\n  base_domain_zone_id = var.use_dns ? module.dns[0].hosted_zones.base : \"\"\n}\n```\n\n./module/dns/output.tf\n```\noutput \"hosted_zones\" {\n  value = {\n    base   = aws_route53_zone.base-domain.zone_id\n```\n\nThus instead of `module.private-cloud.module.vpc-z.aws_lb_listener_rule.route_to_nomad,` on step four I expect to see some info about that in output.\n\nAfter this point I lost what TF is printing. Probably it should formatted over multiple lines like a tree (resources are inside folders and subfolders) for better understanding.\n\n\n\nAnd this part of output is not related to the problem:\n```\nmodule.dns.var.lb_dns_name-z (expand), \nmodule.dns.local.current_lb_dns_name (expand), module.dns.aws_route53_record.base-domain-alb_A, module.dns.local.alb_subdomain (expand), \nmodule.dns.output.hosted_zones (expand)\n```\n\nI hope this info will help you to make TF output better, otherwise it is not helpful, at least just reporting the fact that there is a cycle somewhere. Thank you.\n\n---\n\nYeah, it's a known issue that cycle debugging is a very rough UX. The problem is that by the time we can detect the cycles, we are fully into the internal implementation details, and there's no way to really get the error output into a better state.\n\nI think we can probably help with errors like this last one, but it's a chunk of work that needs to be done. Something I've always wanted is a \"configuration graph\" for reasons like this, which only represents relationships in the raw config. That won't help the complicated situations, but I think for most cases we could at least use it as a pre-screening for simple cycles.\n\nAs far as the node names you see, you seemed to have gotten the gist of it. Th extra internal info like `(expand)` isn't relevant to users, and you can just ignore that portion, and simply match the first part of each name to config elements.",
      "labels": [
        "bug",
        "new",
        "waiting for reproduction"
      ],
      "created_at": "2025-09-16T17:44:58Z",
      "closed_at": "2025-09-23T13:02:37Z",
      "url": "https://github.com/hashicorp/terraform/issues/37622",
      "comments_count": 9
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37780,
      "title": "Terraform crash when creating a dependency on action",
      "problem": "### Terraform Version\n\n```shell\n> terraform version\nTerraform v1.14.0-beta2\non darwin_arm64\n+ provider registry.terraform.io/austinvalle/bufo v2.1.0\n>\n```\n\n### Terraform Configuration Files\n\n```terraform\nterraform {\n  required_providers {\n    bufo = {\n      source = \"austinvalle/bufo\"\n    }\n  }\n}\n\nresource \"terraform_data\" \"test\" {\n  lifecycle {\n    action_trigger {\n      events  = [after_create]\n      actions = [action.bufo_print.success]\n    }\n  }\n}\n\naction \"bufo_print\" \"success\" {\n  config {\n    # random colorized bufo\n    color = true\n  }\n}\n\nresource \"terraform_data\" \"test2\" {\n  depends_on = [action.bufo_print.success]\n  lifecycle {\n    action_trigger {\n      events  = [after_create]\n      actions = [action.bufo_print.success]\n    }\n  }\n}\n```\n\n### Debug Output\n\n```\n2025-10-16T11:03:30.425+0200 [INFO]  Terraform version: 1.14.0 beta2\n2025-10-16T11:03:30.425+0200 [DEBUG] using github.com/hashicorp/go-tfe v1.91.0\n2025-10-16T11:03:30.426+0200 [DEBUG] using github.com/hashicorp/hcl/v2 v2.24.0\n2025-10-16T11:03:30.426+0200 [DEBUG] using github.com/hashicorp/terraform-svchost v0.1.1\n2025-10-16T11:03:30.426+0200 [DEBUG] using github.com/zclconf/go-cty v1.16.3\n2025-10-16T11:03:30.426+0200 [INFO]  Go runtime version: go1.25.1\n2025-10-16T11:03:30.426+0200 [INFO]  CLI args: []string{\"terraform\", \"plan\"}\n2025-10-16T11:03:30.426+0200 [DEBUG] Attempting to open CLI config file: .fake\n2025-10-16T11:03:30.426+0200 [INFO]  Loading CLI configuration from .fake\n2025-10-16T11:03:30.426+0200 [DEBUG] Not reading CLI config directory because config location is overridden by environment variable\n2025-10-16T11:03:30.426+0200 [DEBUG] ignoring non-existing provider search directory terraform.d/plugins\n2025-10-16T11:03:30.426+0200 [DEBUG] ignoring non-existing provider search directory /Users/kklimonda/.terraform.d/plugins\n2025-10-16T11:03:30.426+0200 [DEBUG] ignoring non-existing provider search directory /Users/kklimonda/Library/Application Support/io.terraform/plugins\n2025-10-16T11:03:30.426+0200 [DEBUG] ignoring non-existing provider search directory /Library/Application Support/io.terraform/plugins\n2025-10-16T11:03:30.426+0200 [INFO]  CLI command args: []string{\"plan\"}\n2025-10-16T11:03:30.444+0200 [DEBUG] checking for provisioner in \".\"\n2025-10-16T11:03:30.444+0200 [DEBUG] checking for provisioner in \"/Users/kklimonda/.local/share/mise/installs/terraform/1.14.0-beta2\"\n2025-10-16T11:03:30.444+0200 [INFO]  backend/local: starting Plan operation\n2025-10-16T11:03:30.445+0200 [DEBUG] created provider logger: level=debug\n2025-10-16T11:03:30.445+0200 [INFO]  provider: configuring client automatic mTLS\n2025-10-16T11:03:30.452+0200 [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/austinvalle/bufo/2.1.0/darwin_arm64/terraform-provider-bufo_v2.1.0 args=[\".terraform/providers/registry.terraform.io/austinvalle/bufo/2.1.0/darwin_arm64/terraform-provider-bufo_v2.1.0\"]\n2025-10-16T11:03:30.457+0200 [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/austinvalle/bufo/2.1.0/darwin_arm64/terraform-provider-bufo_v2.1.0 pid=14549\n2025-10-16T11:03:30.457+0200 [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/austinvalle/bufo/2.1.0/darwin_arm64/terraform-provider-bufo_v2.1.0\n2025-10-16T11:03:30.471+0200 [INFO]  provider.terraform-provider-bufo_v2.1.0: configuring server automatic mTLS: timestamp=\"2025-10-16T11:03:30.471+0200\"\n2025-10-16T11:03:30.477+0200 [DEBUG] provider: using plugin: version=6\n2025-10-16T11:03:30.477+0200 [DEBUG] provider.terraform-provider-bufo_v2.1.0: plugin address: network=unix address=/var/folders/gn/ply1nqsj17b0h33xcf9gk4mr0000gp/T/plugin2971551344 timestamp=\"2025-10-16T11:03:30.477+0200\"\n2025-10-16T11:03:30.485+0200 [DEBUG] No provider meta schema returned\n2025-10-16T11:03:30.489+0200 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2025-10-16T11:03:30.489+0200 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/austinvalle/bufo/2.1.0/darwin_arm64/terraform-provider-bufo_v2.1.0 id=14549\n2025-10-16T11:03:30.489+0200 [DEBUG] provider: plugin exited\n2025-10-16T11:03:30.490+0200 [DEBUG] Building and walking validate graph\n2025-10-16T11:03:30.490+0200 [DEBUG] adding implicit provider configuration provider[\"terraform.io/builtin/terraform\"], implied first by terraform_data.test2\n2025-10-16T11:03:30.490+0200 [DEBUG] ProviderTransformer: \"action.bufo_print.success\" (*terraform.NodeValidatableAction) needs provider[\"registry.terraform.io/austinvalle/bufo\"]\n2025-10-16T11:03:30.490+0200 [DEBUG] ProviderTransformer: \"terraform_data.test2\" (*terraform.NodeValidatableResource) needs provider[\"terraform.io/builtin/terraform\"]\n2025-10-16T11:03:30.490+0200 [DEBUG] ProviderTransformer: \"terraform_data.test\" (*terraform.NodeValidatableResource) needs provider[\"terraform.io/builtin/terraform\"]\n2025-10-16T11:03:30.490+0200 [ERROR] AttachSchemaTransformer: No provider config schema available for provider[\"terraform.io/builtin/terraform\"]\n2025-10-16T11:03:30.490+0200 [DEBUG] ReferenceTransformer: \"action.bufo_print.success\" references: []\n2025-10-16T11:03:30.490+0200 [DEBUG] ReferenceTransformer: \"terraform_data.test2\" references: [action.bufo_print.success]\n2025-10-16T11:03:30.490+0200 [DEBUG] ReferenceTransformer: \"terraform_data.test\" references: []\n2025-10-16T11:03:30.490+0200 [DEBUG] ReferenceTransformer: \"provider[\\\"registry.terraform.io/austinvalle/bufo\\\"]\" references: []\n2025-10-16T11:03:30.490+0200 [DEBUG] ReferenceTransformer: \"provider[\\\"terraform.io/builtin/terraform\\\"]\" references: []\n2025-10-16T11:03:30.490+0200 [DEBUG] Starting graph walk: walkValidate\n2025-10-16T11:03:30.490+0200 [DEBUG] created provider logger: level=debug\n2025-10-16T11:03:30.490+0200 [INFO]  provider: configuring client automatic mTLS\n2025-10-16T11:03:30.493+0200 [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/austinvalle/bufo/2.1.0/darwin_arm64/terraform-provider-bufo_v2.1.0 args=[\".terraform/providers/registry.terraform.io/austinvalle/bufo/2.1.0/darwin_arm64/terraform-provider-bufo_v2.1.0\"]\n2025-10-16T11:03:30.494+0200 [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/austinvalle/bufo/2.1.0/darwin_arm64/terraform-provider-bufo_v2.1.0 pid=14550\n2025-10-16T11:03:30.494+0200 [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/austinvalle/bufo/2.1.0/darwin_arm64/terraform-provider-bufo_v2.1.0\n2025-10-16T11:03:30.503+0200 [INFO]  provider.terraform-provider-bufo_v2.1.0: configuring server automatic mTLS: timestamp=\"2025-10-16T11:03:30.503+0200\"\n2025-10-16T11:03:30.509+0200 [DEBUG] provider: using plugin: version=6\n2025-10-16T11:03:30.509+0200 [DEBUG] provider.terraform-provider-bufo_v2.1.0: plugin address: address=/var/folders/gn/ply1nqsj17b0h33xcf9gk4mr0000gp/T/plugin953872845 network=unix timestamp=\"2025-10-16T11:03:30.509+0200\"\n2025-10-16T11:03:30.515+0200 [ERROR] vertex \"terraform_data.test2\" panicked\n\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\nTerraform crashed! This is always indicative of a bug within Terraform.\nPlease report the crash with Terraform[1] so that we can fix this.\n\nWhen reporting bugs, please include your terraform version, the stack trace\nshown below, and any additional information which may help replicate the issue.\n\n[1]: https://github.com/hashicorp/terraform/issues\n\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\npanic: runtime error: invalid memory address or nil pointer dereference\ngoroutine 89 [running]:\nruntime/debug.Stack()\n\truntime/debug/stack.go:26 +0x64\ngithub.com/hashicorp/terraform/internal/logging.PanicHandler()\n\tgithub.com/hashicorp/terraform/internal/logging/panic.go:84 +0x16c\npanic({0x105e50fc0?, 0x10828fcc0?})\n\truntime/panic.go:783 +0x120\ngithub.com/hashicorp/terraform/internal/terraform.(*Graph).walk.func1.1()\n\tgithub.com/hashicorp/terraform/internal/terraform/graph.go:59 +0x30c\npanic({0x105e50fc0?, 0x10828fcc0?})\n\truntime/panic.go:783 +0x120\ngithub.com/hashicorp/terraform/internal/lang.(*Scope).EvalReference(0x1400057b900, 0x140006d5e30, {{0x1065315b8?, 0x108386540?}})\n\tgithub.com/hashicorp/terraform/internal/lang/eval.go:221 +0xd0\ngithub.com/hashicorp/terraform/internal/terraform.validateDependsOn({0x106559708, 0x14000902120}, {0x1400080bd10?, 0x140006f1570?, 0x0?})\n\tgithub.com/hashicorp/terraform/internal/terraform/node_resource_validate.go:820 +0x2ac\ngithub.com/hashicorp/terraform/internal/terraform.(*NodeValidatableResource).validateResource(0x140000b2628, {0x106559708, 0x14000902120})\n\tgithub.com/hashicorp/terraform/internal/terraform/node_resource_validate.go:319 +0x3a4\ngithub.com/hashicorp/terraform/internal/terraform.(*NodeValidatableResource).Execute(0x140000b2628, {0x106559708, 0x14000902120}, 0x40?)\n\tgithub.com/hashicorp/terraform/internal/terraform/node_resource_validate.go:58 +0x88\ngithub.com/hashicorp/terraform/internal/terraform.(*ContextGraphWalker).Execute(0x14000201600, {0x106559708, 0x14000902120}, {0x108ad8040, 0x140000b2628})\n\tgithub.com/hashicorp/terraform/internal/terraform/graph_walk_context.go:166 +0xa0\ngithub.com/hashicorp/terraform/internal/terraform.(*Graph).walk.func1({0x106432e80, 0x140000b2628})\n\tgithub.com/hashicorp/terraform/internal/terraform/graph.go:143 +0x598\ngithub.com/hashicorp/terraform/internal/dag.(*Walker).walkVertex(0x14000a15320, {0x106432e80, 0x140000b2628}, 0x140008ab000)\n\tgithub.com/hashicorp/terraform/internal/dag/walk.go:393 +0x284\ncreated by github.com/hashicorp/terraform/internal/dag.(*Walker).Update in goroutine 16\n\tgithub.com/hashicorp/terraform/internal/dag/walk.go:316 +0xae4\n```\n\n\n### Expected Behavior\n\nI'd expect terraform to either honor the dependency, or report an error if this is not supported.\n\n### Actual Behavior\n\nTerraform crashed when running `terraform plan`\n\n### Steps to Reproduce\n\n1. `terraform init`\n2. `terraform plan`\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-10-16T09:02:54Z",
      "closed_at": "2025-10-17T12:05:27Z",
      "url": "https://github.com/hashicorp/terraform/issues/37780",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37779,
      "title": "ResourceNotFound when creating that resource",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.3\non darwin_arm64\n```\n\n### Terraform Configuration Files\n\n```terraform\nresource \"azurerm_postgresql_flexible_server\" \"server\" {\n  name                = local.server_name\n  resource_group_name = var.resource_group_name\n  location            = var.azure_location\n\n  administrator_login    = var.pgsql_admin_login\n  administrator_password = random_password.dbadmin.result\n\n  version           = var.pgsql_version\n  storage_mb        = var.pgsql_storage_mb\n  create_mode       = var.pgsql_create_mode\n  sku_name          = var.pgsql_sku_name\n  auto_grow_enabled = var.pgsql_storage_auto_grow_enabled\n\n  delegated_subnet_id = var.delegated_subnet_id\n  private_dns_zone_id = var.private_dns_zone_id\n\n  geo_redundant_backup_enabled  = var.pgsql_geo_redundant_backup_enabled\n  public_network_access_enabled = local.pgsql_public_network_access_enabled\n\n  tags = var.tags\n\n  authentication {\n    password_auth_enabled         = true\n    active_directory_auth_enabled = var.active_directory_auth_enabled\n    tenant_id                     = var.active_directory_auth_enabled ? var.tenant_id : null\n  }\n\n  dynamic \"high_availability\" {\n    for_each = local.high_availability_configuration\n\n    content {\n      mode = var.pgsql_high_availability_mode\n    }\n  }\n\n  lifecycle {\n    ignore_changes = [\n      # To avoid the error `zone` and `high_availability.0.standby_availability_zone`\n      # should only be either exchanged with each other or unchanged\" when no `zone` is provided.\n      # https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/postgresql_flexible_server\n      zone,\n      high_availability.0.standby_availability_zone\n    ]\n  }\n}\n\nresource \"azurerm_postgresql_flexible_server_active_directory_administrator\" \"ad_admin\" {\n  for_each = local.active_directory_administrators\n\n  server_name         = azurerm_postgresql_flexible_server.server.name\n  resource_group_name = azurerm_postgresql_flexible_server.server.resource_group_name\n  tenant_id           = var.tenant_id\n  object_id           = each.value.object_id\n  principal_name      = each.value.principal_name\n  principal_type      = each.value.principal_type\n}\n\nresource \"azurerm_management_lock\" \"pgsql\" {\n  count = var.create_management_lock ? 1 : 0\n\n  name       = \"lock-${local.server_name}\"\n  lock_level = \"CanNotDelete\"\n  scope      = azurerm_postgresql_flexible_server.server.id\n  notes      = \"'CanNotDelete' lock applied to '${local.server_name}'.\"\n}\n```\n\n```terraform\nresource \"azurerm_resource_group\" \"primary\" {\n  name     = \"rg-${local.resource_suffix}\"\n  location = var.azure_location\n\n  tags = local.tags\n}\n\nresource \"azurerm_management_lock\" \"primary_resource_group\" {\n  count = var.create_resource_group_lock_for_primary ? 1 : 0\n\n  name       = \"lock-${azurerm_resource_group.primary.name}\"\n  lock_level = \"CanNotDelete\"\n  scope      = azurerm_resource_group.primary.id\n  notes      = \"'CanNotDelete' lock applied to '${azurerm_resource_group.primary.name}'.\"\n}\n\n\nmodule \"postgresql_flexible_server\" {\n  source = \"./modules/postgresql_flexible_server\"\n\n  for_each = var.pgsql_servers\n\n  resource_group_name = azurerm_resource_group.primary.name\n  azure_location      = var.azure_location\n  alz_location        = var.alz_location\n  workload_type       = local.workload_type\n  environment         = each.value.environment_override != null ? each.value.environment_override : var.environment\n\n  delegated_subnet_id = data.azurerm_subnet.pgsql.id\n  private_dns_zone_id = data.azurerm_private_dns_zone.flex_server.id\n\n  # kv_id = module.key_vault.id\n\n  pgsql_admin_login = each.value.administrator_login_username\n\n  pgsql_geo_redundant_backup_enabled  = each.value.geo_redundant_backup_enabled\n  pgsql_high_availability             = each.value.high_availability\n  pgsql_high_availability_mode        = each.value.high_availability_mode # ZoneRedundant is not possible in West Europe & France Central at the time of writing (03/02/2023)\n  pgsql_backup_retention_days         = each.value.backup_retention_days\n  pgsql_create_mode                   = each.value.create_mode\n  pgsql_public_network_access_enabled = each.value.public_network_access_enabled\n  pgsql_version                       = each.value.version\n  create_management_lock              = false\n\n  active_directory_auth_enabled   = each.value.active_directory_auth_enabled\n  tenant_id                       = data.azurerm_client_config.current.tenant_id\n  active_directory_administrators = each.value.active_directory_administrators\n\n  tags = local.tags\n\n  resource_name_suffix            = each.key\n  pgsql_storage_mb                = each.value.storage_mb\n  pgsql_sku_name                  = each.value.sku_name\n  pgsql_storage_auto_grow_enabled = can(each.value.storage_auto_grow_enabled) ? each.value.storage_auto_grow_enabled : false\n}\n```\n\n\n### Debug Output\n\n```\n2025-10-15T19:13:52.324+0200 [TRACE] GRPCProvider: GetProviderSchema\n2025-10-15T19:13:52.324+0200 [TRACE] GRPCProvider: returning cached schema: EXTRA_VALUE_AT_END=registry.terraform.io/hashicorp/azurerm\n2025-10-15T19:13:52.324+0200 [TRACE] provider.terraform-provider-azurerm_v4.48.0_x5: Received request: tf_req_id=7d3287c9-2c87-a2c1-8172-07180832674a tf_rpc=ApplyResourceChange @module=sdk.proto tf_proto_version=5.10 tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_resource_type=azurerm_postgresql_flexible_server @caller=github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/tf5server/server.go:931 timestamp=\"2025-10-15T19:13:52.324+0200\"\n2025-10-15T19:13:52.324+0200 [TRACE] provider.terraform-provider-azurerm_v4.48.0_x5: Sending request downstream: tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_rpc=ApplyResourceChange @caller=github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/tf5serverlogging/downstream_request.go:22 @module=sdk.proto tf_proto_version=5.10 tf_req_id=7d3287c9-2c87-a2c1-8172-07180832674a tf_resource_type=azurerm_postgresql_flexible_server timestamp=\"2025-10-15T19:13:52.324+0200\"\n2025-10-15T19:13:52.324+0200 [TRACE] provider.terraform-provider-azurerm_v4.48.0_x5: calling downstream server: @module=sdk.mux tf_mux_provider=\"*schema.GRPCProviderServer\" tf_rpc=ApplyResourceChange @caller=github.com/hashicorp/terraform-plugin-mux@v0.21.0/internal/logging/mux.go:19 timestamp=\"2025-10-15T19:13:52.324+0200\"\n2025-10-15T19:13:52.324+0200 [TRACE] provider.terraform-provider-azurerm_v4.48.0_x5: Calling downstream: @caller=github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource.go:979 @module=sdk.helper_schema tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_req_id=7d3287c9-2c87-a2c1-8172-07180832674a tf_resource_type=azurerm_postgresql_flexible_server tf_rpc=ApplyResourceChange timestamp=\"2025-10-15T19:13:52.324+0200\"\n2025-10-15T19:13:52.324+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: [DEBUG] AzureRM Request: \n2025-10-15T19:13:52.324+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: GET /subscriptions/some-id/resourceGroups/rg-bnl-we1-nonprod-service-deploy-shared-pgsql-sccplus/providers/Microsoft.DBforPostgreSQL/flexibleServers/pgsql-company-we1-nonprod-service-labs-sccplus-001?api-version=2024-08-01 HTTP/1.1\n2025-10-15T19:13:52.324+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Host: management.azure.com\n2025-10-15T19:13:52.324+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: User-Agent: HashiCorp/go-azure-sdk (Go-http-Client/1.1 servers/2024-08-01) HashiCorp Terraform/1.13.3 (+https://www.terraform.io) terraform-provider-azurerm/dev pid-222c6c49-1b0a-5959-a213-6608f9eb8820\n2025-10-15T19:13:52.324+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Content-Type: application/json; charset=utf-8\n2025-10-15T19:13:52.324+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Accept-Encoding: gzip\n2025-10-15T19:13:52.324+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5\n2025-10-15T19:13:52.324+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5\n2025-10-15T19:13:52.324+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: [DEBUG] GET https://management.azure.com/subscriptions//resourceGroups/rg-bnl-we1-nonprod-service-deploy-shared-pgsql-sccplus/providers/Microsoft.DBforPostgreSQL/flexibleServers/pgsql-company-we1-nonprod-service-labs-sccplus-001?api-version=2024-08-01\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: [DEBUG] AzureRM Response for https://management.azure.com/subscriptions//resourceGroups/rg-bnl-we1-nonprod-service-deploy-shared-pgsql-sccplus/providers/Microsoft.DBforPostgreSQL/flexibleServers/pgsql-company-we1-nonprod-service-labs-sccplus-001?api-version=2024-08-01: \n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: HTTP/2.0 404 Not Found\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Content-Length: 316\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Cache-Control: no-cache\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Content-Type: application/json; charset=utf-8\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Date: Wed, 15 Oct 2025 17:13:52 GMT\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Expires: -1\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Pragma: no-cache\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Strict-Transport-Security: max-age=31536000; includeSubDomains\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Cache: CONFIG_NOCACHE\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Content-Type-Options: nosniff\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Ms-Correlation-Request-Id: ae53c7ed-0a0a-4294-9853-0286397e7d44\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Ms-Failure-Cause: gateway\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Ms-Request-Id: ae53c7ed-0a0a-4294-9853-0286397e7d44\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Ms-Routing-Request-Id: WESTEUROPE:20251015T171353Z:ae53c7ed-0a0a-4294-9853-0286397e7d44\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Msedge-Ref: Ref A: AB9548FF03334C898E0B573CD70F52B8 Ref B: CH1AA2020603049 Ref C: 2025-10-15T17:13:53Z\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: {\"error\":{\"code\":\"ResourceNotFound\",\"message\":\"The Resource 'Microsoft.DBforPostgreSQL/flexibleServers/pgsql-company-we1-nonprod-service-labs-sccplus-001' under resource group 'rg-bnl-we1-nonprod-service-deploy-shared-pgsql-sccplus' was not found. For more details please go to https://aka.ms/ARMResourceNotFoundFix\"}}\n2025-10-15T19:13:53.200+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: [DEBUG]: Default 'storage_tier' Set -> \"P4\"\n2025-10-15T19:13:53.202+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: [DEBUG] AzureRM Request: \n2025-10-15T19:13:53.202+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: PUT /subscriptions/some-id/resourceGroups/rg-bnl-we1-nonprod-service-deploy-shared-pgsql-sccplus/providers/Microsoft.DBforPostgreSQL/flexibleServers/pgsql-company-we1-nonprod-service-labs-sccplus-001?api-version=2024-08-01 HTTP/1.1\n2025-10-15T19:13:53.202+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Host: management.azure.com\n2025-10-15T19:13:53.202+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: User-Agent: HashiCorp/go-azure-sdk (Go-http-Client/1.1 servers/2024-08-01) HashiCorp Terraform/1.13.3 (+https://www.terraform.io) terraform-provider-azurerm/dev pid-222c6c49-1b0a-5959-a213-6608f9eb8820\n2025-10-15T19:13:53.202+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Content-Length: 1291\n2025-10-15T19:13:53.202+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Content-Type: application/json; charset=utf-8\n2025-10-15T19:13:53.202+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Accept-Encoding: gzip\n2025-10-15T19:13:53.202+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5\n2025-10-15T19:13:53.202+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: {\"identity\":{\"type\":\"None\",\"userAssignedIdentities\":null},\"location\":\"westeurope\",\"properties\":{\"administratorLogin\":\"dbadmin\",\"administratorLoginPassword\":\"f3NWwCNaQUZCU4sBjhU9G74m5fbn06uW\",\"authConfig\":{\"activeDirectoryAuth\":\"Enabled\",\"passwordAuth\":\"Enabled\",\"tenantId\":\"6e06e42d-6925-47c6-b9e7-9581c7ca302a\"},\"backup\":{\"geoRedundantBackup\":\"Disabled\"},\"createMode\":\"Update\",\"highAvailability\":{\"mode\":\"Disabled\"},\"network\":{\"delegatedSubnetResourceId\":\"/subscriptions/some-id/resourceGroups/rg-d-we1-company-default-primary-networking/providers/Microsoft.Network/virtualNetworks/vnet-d-we1-company-default-primary/subnets/sub-d-we1-enterprise-44-81-46-192-28\",\"privateDnsZoneArmResourceId\":\"/subscriptions/some-id/resourceGroups/rg-bnl-global-nonprod-shared-resources/providers/Microsoft.Network/privateDnsZones/flex.nonprod.postgres.database.azure.com\",\"publicNetworkAccess\":\"Disabled\"},\"storage\":{\"autoGrow\":\"Disabled\",\"storageSizeGB\":32,\"tier\":\"P4\"},\"version\":\"16\"},\"sku\":{\"name\":\"Standard_B2s\",\"tier\":\"Burstable\"},\"tags\":{\"alz_location\":\"we1\",\"app.service\":\"AS_Postgress_SQL_Cloud_Database_BNL_T\",\"business_unit\":\"labs\",\"created_with\":\"terraform\",\"deployment_mode\":\"automation\",\"environment\":\"nonprod\",\"workload_type\":\"service\"}}\n2025-10-15T19:13:53.202+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: [DEBUG] PUT https://management.azure.com/subscriptions//resourceGroups/rg-bnl-we1-nonprod-service-deploy-shared-pgsql-sccplus/providers/Microsoft.DBforPostgreSQL/flexibleServers/pgsql-company-we1-nonprod-service-labs-sccplus-001?api-version=2024-08-01\n2025-10-15T19:13:53.739+0200 [TRACE] dag/walk: vertex \"module.postgresql_flexible_server.output.server_name (expand)\" is waiting for \"module.postgresql_flexible_server[\\\"labs-sccplus-001\\\"].azurerm_postgresql_flexible_server.server\"\n2025-10-15T19:13:53.739+0200 [TRACE] dag/walk: vertex \"module.postgresql_flexible_server.azurerm_postgresql_flexible_server_active_directory_administrator.ad_admin (expand)\" is waiting for \"module.postgresql_flexible_server[\\\"labs-sccplus-001\\\"].azurerm_postgresql_flexible_server.server\"\n2025-10-15T19:13:53.739+0200 [TRACE] dag/walk: vertex \"module.postgresql_flexible_server (close)\" is waiting for \"module.postgresql_flexible_server.azurerm_management_lock.pgsql (expand)\"\n2025-10-15T19:13:53.739+0200 [TRACE] dag/walk: vertex \"root\" is waiting for \"provider[\\\"registry.terraform.io/hashicorp/azurerm\\\"] (close)\"\n2025-10-15T19:13:53.739+0200 [TRACE] dag/walk: vertex \"module.postgresql_flexible_server.output.server_fqdn (expand)\" is waiting for \"module.postgresql_flexible_server[\\\"labs-sccplus-001\\\"].azurerm_postgresql_flexible_server.server\"\n2025-10-15T19:13:53.739+0200 [TRACE] dag/walk: vertex \"module.postgresql_flexible_server[\\\"labs-sccplus-001\\\"].azurerm_postgresql_flexible_server_active_directory_administrator.ad_admin[\\\"73ba5a92-37cd-458f-a17f-d3784f4db77f\\\"]\" is waiting for \"module.postgresql_flexible_server.azurerm_postgresql_flexible_server_active_directory_administrator.ad_admin (expand)\"\n2025-10-15T19:13:53.739+0200 [TRACE] dag/walk: vertex \"module.postgresql_flexible_server.azurerm_management_lock.pgsql (expand)\" is waiting for \"module.postgresql_flexible_server[\\\"labs-sccplus-001\\\"].azurerm_postgresql_flexible_server.server\"\n2025-10-15T19:13:53.739+0200 [TRACE] dag/walk: vertex \"module.postgresql_flexible_server.output.server_id (expand)\" is waiting for \"module.postgresql_flexible_server[\\\"labs-sccplus-001\\\"].azurerm_postgresql_flexible_server.server\"\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: [DEBUG] AzureRM Response for https://management.azure.com/subscriptions//resourceGroups/rg-bnl-we1-nonprod-service-deploy-shared-pgsql-sccplus/providers/Microsoft.DBforPostgreSQL/flexibleServers/pgsql-company-we1-nonprod-service-labs-sccplus-001?api-version=2024-08-01: \n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: HTTP/2.0 404 Not Found\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Content-Length: 200\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Cache-Control: no-cache\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Content-Type: application/json; charset=utf-8\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Date: Wed, 15 Oct 2025 17:13:53 GMT\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Expires: -1\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Pragma: no-cache\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: Strict-Transport-Security: max-age=31536000; includeSubDomains\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Cache: CONFIG_NOCACHE\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Content-Type-Options: nosniff\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Ms-Correlation-Request-Id: 1ba10015-f24c-4e94-ac9f-b01a08ac547a\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Ms-Operation-Identifier: tenantId=6e06e42d-6925-47c6-b9e7-9581c7ca302a,objectId=43ffb199-78a3-4fed-bce5-a82b8e2cda7f/westeurope/8c23b5ce-ed90-4995-8d0f-4810c00f009d\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Ms-Ratelimit-Remaining-Subscription-Global-Writes: 2999\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Ms-Ratelimit-Remaining-Subscription-Writes: 199\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Ms-Request-Id: b6f21f60-3392-4732-ba55-959c3b82c154\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Ms-Routing-Request-Id: WESTEUROPE:20251015T171354Z:1ba10015-f24c-4e94-ac9f-b01a08ac547a\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: X-Msedge-Ref: Ref A: 14540C50CE3046B19D4FCDF9DF175961 Ref B: CH1AA2020603033 Ref C: 2025-10-15T17:13:53Z\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5\n2025-10-15T19:13:54.507+0200 [DEBUG] provider.terraform-provider-azurerm_v4.48.0_x5: {\"error\":{\"code\":\"ResourceNotFound\",\"message\":\"The requested resource of type 'Microsoft.DBforPostgreSQL/flexibleServers' with name 'pgsql-company-we1-nonprod-service-labs-sccplus-001' was not found.\"}}\n2025-10-15T19:13:54.507+0200 [TRACE] provider.terraform-provider-azurerm_v4.48.0_x5: Called downstream: @caller=github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource.go:981 @module=sdk.helper_schema tf_mux_provider=\"*schema.GRPCProviderServer\" tf_rpc=ApplyResourceChange tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_req_id=7d3287c9-2c87-a2c1-8172-07180832674a tf_resource_type=azurerm_postgresql_flexible_server timestamp=\"2025-10-15T19:13:54.507+0200\"\n2025-10-15T19:13:54.507+0200 [TRACE] provider.terraform-provider-azurerm_v4.48.0_x5: Received downstream response: tf_rpc=ApplyResourceChange @caller=github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/tf5serverlogging/downstream_request.go:61 @module=sdk.proto diagnostic_warning_count=0 tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_req_duration_ms=2183 diagnostic_error_count=1 tf_proto_version=5.10 tf_req_id=7d3287c9-2c87-a2c1-8172-07180832674a tf_resource_type=azurerm_postgresql_flexible_server timestamp=\"2025-10-15T19:13:54.507+0200\"\n2025-10-15T19:13:54.507+0200 [ERROR] provider.terraform-provider-azurerm_v4.48.0_x5: Response contains error diagnostic: tf_rpc=ApplyResourceChange diagnostic_detail=\"\"\n  diagnostic_summary=\n  | creating Flexible Server (Subscription: \"some-id\"\n  | Resource Group Name: \"rg-bnl-we1-nonprod-service-deploy-shared-pgsql-sccplus\"\n  | Flexible Server Name: \"pgsql-company-we1-nonprod-service-labs-sccplus-001\"): performing Create: unexpected status 404 (404 Not Found) with error: ResourceNotFound: The requested resource of type 'Microsoft.DBforPostgreSQL/flexibleServers' with name 'pgsql-company-we1-nonprod-service-labs-sccplus-001' was not found.\n   tf_proto_version=5.10 tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_req_id=7d3287c9-2c87-a2c1-8172-07180832674a @caller=github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/diag/diagnostics.go:58 @module=sdk.proto diagnostic_severity=ERROR tf_resource_type=azurerm_postgresql_flexible_server timestamp=\"2025-10-15T19:13:54.507+0200\"\n2025-10-15T19:13:54.507+0200 [TRACE] provider.terraform-provider-azurerm_v4.48.0_x5: Served request: tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_req_id=7d3287c9-2c87-a2c1-8172-07180832674a tf_resource_type=azurerm_postgresql_flexible_server tf_rpc=ApplyResourceChange @caller=github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/tf5server/server.go:957 @module=sdk.proto tf_proto_version=5.10 timestamp=\"2025-10-15T19:13:54.507+0200\"\n2025-10-15T19:13:54.508+0200 [TRACE] maybeTainted: module.postgresql_flexible_server[\"labs-sccplus-001\"].azurerm_postgresql_flexible_server.server encountered an error during creation, so it is now marked as tainted\n2025-10-15T19:13:54.508+0200 [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/hashicorp/azurerm\" is in the global cache\n2025-10-15T19:13:54.508+0200 [TRACE] NodeAbstractResouceInstance.writeResourceInstanceState to workingState for module.postgresql_flexible_server[\"labs-sccplus-001\"].azurerm_postgresql_flexible_server.server\n2025-10-15T19:13:54.508+0200 [TRACE] NodeAbstractResouceInstance.writeResourceInstanceState: removing state object for module.postgresql_flexible_server[\"labs-sccplus-001\"].azurerm_postgresql_flexible_server.server\n2025-10-15T19:13:54.508+0200 [TRACE] evalApplyProvisioners: module.postgresql_flexible_server[\"labs-sccplus-001\"].azurerm_postgresql_flexible_server.server is tainted, so skipping provisioning\n2025-10-15T19:13:54.508+0200 [TRACE] maybeTainted: module.postgresql_flexible_server[\"labs-sccplus-001\"].azurerm_postgresql_flexible_server.server was already tainted, so nothing to do\n2025-10-15T19:13:54.508+0200 [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/hashicorp/azurerm\" is in the global cache\n2025-10-15T19:13:54.508+0200 [TRACE] NodeAbstractResouceInstance.writeResourceInstanceState to workingState for module.postgresql_flexible_server[\"labs-sccplus-001\"].azurerm_postgresql_flexible_server.server\n2025-10-15T19:13:54.508+0200 [TRACE] NodeAbstractResouceInstance.writeResourceInstanceState: removing state object for module.postgresql_flexible_server[\"labs-sccplus-001\"].azurerm_postgresql_flexible_server.server\n2025-10-15T19:13:54.508+0200 [DEBUG] State storage *remote.State declined to persist a state snapshot\n2025-10-15T19:13:54.508+0200 [ERROR] vertex \"module.postgresql_flexible_server[\\\"labs-sccplus-001\\\"].azurerm_postgresql_flexible_server.server\" error: creating Flexible Server (Subscription: \"some-id\"\nResource Group Name: \"rg-bnl-we1-nonprod-service-deploy-shared-pgsql-sccplus\"\nFlexible Server Name: \"pgsql-company-we1-nonprod-service-labs-sccplus-001\"): performing Create: unexpected status 404 (404 Not Found) with error: ResourceNotFound: The requested resource of type 'Microsoft.DBforPostgreSQL/flexibleServers' with name 'pgsql-company-we1-nonprod-service-labs-sccplus-001' was not found.\n2025-10-15T19:13:54.509+0200 [TRACE] vertex \"module.postgresql_flexible_server[\\\"labs-sccplus-001\\\"].azurerm_postgresql_flexible_server.server\": visit complete, with errors\n2025-10-15T19:13:54.509+0200 [TRACE] dag/walk: upstream of \"module.postgresql_flexible_server.azurerm_management_lock.pgsql (expand)\" errored, so skipping\n2025-10-15T19:13:54.509+0200 [TRACE] dag/walk: upstream of \"module.postgresql_flexible_server.output.server_name (expand)\" errored, so skipping\n2025-10-15T19:13:54.509+0200 [TRACE] dag/walk: upstream of \"module.postgresql_flexible_server.output.server_id (expand)\" errored, so skipping\n2025-10-15T19:13:54.509+0200 [TRACE] dag/walk: upstream of \"module.postgresql_flexible_server.azurerm_postgresql_flexible_server_active_directory_administrator.ad_admin (expand)\" errored, so skipping\n2025-10-15T19:13:54.509+0200 [TRACE] dag/walk: upstream of \"module.postgresql_flexible_server.output.server_fqdn (expand)\" errored, so skipping\n2025-10-15T19:13:54.509+0200 [TRACE] dag/walk: upstream of \"module.postgresql_flexible_server[\\\"labs-sccplus-001\\\"].azurerm_postgresql_flexible_server_active_directory_administrator.ad_admin[\\\"73ba5a92-37cd-458f-a17f-d3784f4db77f\\\"]\" errored, so skipping\n2025-10-15T19:13:54.509+0200 [TRACE] dag/walk: upstream of \"module.postgresql_flexible_server (close)\" errored, so skipping\n2025-10-15T19:13:54.509+0200 [TRACE] dag/walk: upstream of \"provider[\\\"registry.terraform.io/hashicorp/azurerm\\\"] (close)\" errored, so skipping\n2025-10-15T19:13:54.509+0200 [TRACE] dag/walk: upstream of \"root\" errored, so skipping\n2025-10-15T19:13:54.509+0200 [TRACE] terraform.contextPlugins: Schema for provider \"registry.terraform.io/hashicorp/azurerm\" is in the global cache\n2025-10-15T19:13:54.509+0200 [DEBUG] states/remote: state read serial is: 3; serial is: 3\n2025-10-15T19:13:54.509+0200 [DEBUG] states/remote: state read lineage is: d9627449-b93a-05ae-5ba9-1ff22b0843e6; lineage is: d9627449-b93a-05ae-5ba9-1ff22b0843e6\n2025-10-15T19:13:54.511+0200 [DEBUG] HEAD https://satfstatenonprod19519.blob.core.windows.net/tfstate/bnl-azure-labs-deploy-shared-pgsql-sccplus/env:labs-sccplus-nonprod\n2025-10-15T19:13:54.746+0200 [DEBUG] PUT https://satfstatenonprod19519.blob.core.windows.net/tfstate/bnl-azure-labs-deploy-shared-pgsql-sccplus/env:labs-sccplus-nonprod\n2025-10-15T19:13:54.956+0200 [DEBUG] HEAD https://satfstatenonprod19519.blob.core.windows.net/tfstate/bnl-azure-labs-deploy-shared-pgsql-sccplus/env:labs-sccplus-nonprod\n2025-10-15T19:13:55.145+0200 [DEBUG] HEAD https://satfstatenonprod19519.blob.core.windows.net/tfstate/bnl-azure-labs-deploy-shared-pgsql-sccplus/env:labs-sccplus-nonprod\n2025-10-15T19:13:55.339+0200 [DEBUG] PUT https://satfstatenonprod19519.blob.core.windows.net/tfstate/bnl-azure-labs-deploy-shared-pgsql-sccplus/env:labs-sccplus-nonprod?comp=metadata\n2025-10-15T19:13:55.543+0200 [DEBUG] PUT https://satfstatenonprod19519.blob.core.windows.net/tfstate/bnl-azure-labs-deploy-shared-pgsql-sccplus/env:labs-sccplus-nonprod?comp=lease\n2025-10-15T19:13:55.759+0200 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2025-10-15T19:13:55.775+0200 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/azurerm/4.48.0/darwin_arm64/terraform-provider-azurerm_v4.48.0_x5 id=55177\n2025-10-15T19:13:55.775+0200 [DEBUG] provider: plugin exited\n```\n\n### Expected Behavior\n\nThe code should create the PosgreSQL Flexible server\n\n### Actual Behavior\n\nIt fails with the error\n\n```\n2025-10-15T19:13:54.507+0200 [ERROR] provider.terraform-provider-azurerm_v4.48.0_x5: Response contains error diagnostic: tf_rpc=ApplyResourceChange diagnostic_detail=\"\"\n  diagnostic_summary=\n  | creating Flexible Server (Subscription: \"some-id\"\n  | Resource Group Name: \"rg-bnl-we1-nonprod-service-deploy-shared-pgsql-sccplus\"\n  | Flexible Server Name: \"pgsql-company-we1-nonprod-service-labs-sccplus-001\"): performing Create: unexpected status 404 (404 Not Found) with error: ResourceNotFound: The requested resource of type 'Microsoft.DBforPostgreSQL/flexibleServers' with name 'pgsql-company-we1-nonprod-service-labs-sccplus-001' was not found.\n   tf_proto_version=5.10 tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_req_id=7d3287c9-2c87-a2c1-8172-07180832674a @caller=github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/diag/diagnostics.go:58 @module=sdk.proto diagnostic_severity=ERROR tf_resource_type=azurerm_postgresql_flexible_server timestamp=\"2025-10-15T19:13:54.507+0200\"\n```\n\n### Steps to Reproduce\n\nterraform init\nterraform apply\n\n### Additional Context\n\nThis is part of a larger code base that I've been using for 5 years to create PostgreSQL servers in Azure. Over time, there has been changes, but it's the same code base.\n\nToday I was trying to create a PostgreSQL in a new subscription and I'm getting an error. For troubleshooting, I've successfully created a PostgreSQL via the Azure portal; I've checked if the namespace is registered (yes, it was registered), the user logged in the Azure portal and in the terminal is the same; that user is able to create other resources (such as key vaults, resource groups, storage accounts, etc).\nI've also created a smaller project that only creates the PostgreSQL server, to remove any potential conflicts.\n\n> NOTE: I've added partially the debug information because I'm getting a `500` error from GitHub when I'm trying to create or update a gist.\n\n<img width=\"705\" height=\"655\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/2e319ff5-ba36-44b8-b1e0-a4ab83073291\" />\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "provider/azurerm",
        "new"
      ],
      "created_at": "2025-10-15T17:33:42Z",
      "closed_at": "2025-10-15T18:12:13Z",
      "url": "https://github.com/hashicorp/terraform/issues/37779",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37764,
      "title": "Server error code ",
      "problem": "[![CLA assistant check](https://cla.hashicorp.com/pull/badge/not_signed)](https://cla.hashicorp.com/hashicorp/consul?pullRequest=22925)\r\n\r\n\r\nThank you for your submission! We require that all contributors sign our Contributor License Agreement (\"CLA\") before we can accept the contribution. [Read and sign the agreement](https://cla.hashicorp.com/hashicorp/consul?pullRequest=22925)\r\n\r\n[Learn more about why HashiCorp requires a CLA and what the CLA includes](https://www.hashicorp.com/cla)\r\n\r\n<sub>Have you signed the CLA already but the status is still pending? [Recheck it](https://cla.hashicorp.com/check/hashicorp/consul?pullRequest=22925).</sub>\r\n\r\n_Originally posted by @hashicorp-cla-app[bot] in https://github.com/hashicorp/consul/issues/22925#issuecomment-3395602552_Hi [insert supervisor\u2019s name],\r\n\r\nI\u2019d like to attend API Summit Live 2025, October 14-15 in New York City. At API Summit, I am guaranteed to learn a ton, spending two whole days with Kong experts and networking with other customers. Past attendees and speakers include companies like Goldman Sachs, IKEA, Siemens, Uber, GSK, and much more. I can bring learnings back to help our company:\r\n\r\n* Roll out AI and LLM projects with built-in security, reliability, and compliance guardrails.\r\n* Simplify management of traffic across multiple services and multiple clouds.\r\n* Secure, govern, discover, and observe event streams in your API platform.\r\n\r\nThe estimated cost to attend the conference will be:\r\n\r\nRegistration fee: $495\r\nDomestic airfare estimate: $500\r\nHotel (3 nights at average NYC rate): $250 per night / $750 + taxes and fees\r\nTotal: $1,745\r\n\r\nAfter API Summit, I\u2019ll plan to assemble a report summarizing what I learned and how we can implement it at our company.\r\n\r\nThank you for your consideration and I look forward to your reply!\r\n\r\n[Insert your name]\r\nhttps://kong-0b1ca02de5usi40s4.kongcloud.dev<?php\r\n\r\n$client = new http\\Client;\r\n$request = new http\\Client\\Request;\r\n\r\n$request->setRequestUrl('https://api.leaseweb.com/publicCloud/v1/regions');\r\n$request->setRequestMethod('GET');\r\n$request->setQuery(new http\\QueryString([\r\n  'limit' => '20',\r\n  'offset' => '10'\r\n]));\r\n\r\n$request->setHeaders([\r\n  'X-LSW-Auth' => 'REPLACE_KEY_VALUE'\r\n]);\r\n\r\n$client->enqueue($request)->send();\r\n$response = $client->getResponse();\r\n\r\necho $response->getBody();\r\n            ",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [],
      "created_at": "2025-10-13T01:33:41Z",
      "closed_at": "2025-10-13T13:49:02Z",
      "url": "https://github.com/hashicorp/terraform/issues/37764",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37748,
      "title": "terraform 1.13.3 TERRAFORM CRASH",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.3\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v6.15.0\n+ provider registry.terraform.io/hashicorp/random v3.7.2\n```\n\n### Terraform Configuration Files\n\n```terraform\n...terraform config...\n```\n\n\n### Debug Output\n\n```\nRun terraform show -json ./downloaded-tfplan/tfplan > tfplan.json\n  terraform show -json ./downloaded-tfplan/tfplan > tfplan.json\n  shell: /usr/bin/bash -e {0}\n  env:\n    TERRAFORM_CLI_PATH: /home/runner/work/_temp/3813ca63-0ba4-4188-aece-cf4286b59396\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\nTerraform crashed! This is always indicative of a bug within Terraform.\nPlease report the crash with Terraform[1] so that we can fix this.\nWhen reporting bugs, please include your terraform version, the stack trace\nshown below, and any additional information which may help replicate the issue.\n[1]: https://github.com/hashicorp/terraform/issues\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\npanic: runtime error: invalid memory address or nil pointer dereference\ngoroutine 1 [running]:\nruntime/debug.Stack()\n\truntime/debug/stack.go:26 +0x5e\ngithub.com/hashicorp/terraform/internal/logging.PanicHandler()\n\tgithub.com/hashicorp/terraform/internal/logging/panic.go:84 +0x16a\npanic({0x36a0fa0?, 0x6308e10?})\n\truntime/panic.go:792 +0x132\ngithub.com/hashicorp/terraform/internal/cloud.(*Cloud).AppName(...)\n\tgithub.com/hashicorp/terraform/internal/cloud/backend.go:440\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).getDataFromCloudPlan(0x7ffcd175fd1a?, 0xc000914db0, 0x0)\n\tgithub.com/hashicorp/terraform/internal/command/show.go:288 +0x155\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).getPlanFromPath(0xc000133880, {0x7ffcd175fd1a?, 0xc0002e7008?})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:273 +0x75\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).showFromPath(0x2?, {0x7ffcd175fd1a, 0x1a})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:189 +0x32\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).show(0xc000133880, {0x7ffcd175fd1a?, 0x2?})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:132 +0x1a7\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).Run(0xc000133880, {0xc00012e0e0, 0x2, 0x2})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:78 +0x3e5\ngithub.com/hashicorp/cli.(*CLI).Run(0xc0008cef00)\n\tgithub.com/hashicorp/cli@v1.1.7/cli.go:265 +0x4de\nmain.realMain()\n\tgithub.com/hashicorp/terraform/main.go:339 +0x1deb\nmain.main()\n\tgithub.com/hashicorp/terraform/main.go:64 +0x13\n```\n\n\n### Expected Behavior\n\ngenerate tfplan.json\n\n### Actual Behavior\n\n```\nRun terraform show -json ./downloaded-tfplan/tfplan > tfplan.json\n  terraform show -json ./downloaded-tfplan/tfplan > tfplan.json\n  shell: /usr/bin/bash -e {0}\n  env:\n    TERRAFORM_CLI_PATH: /home/runner/work/_temp/3813ca63-0ba4-4188-aece-cf4286b59396\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\nTerraform crashed! This is always indicative of a bug within Terraform.\nPlease report the crash with Terraform[1] so that we can fix this.\nWhen reporting bugs, please include your terraform version, the stack trace\nshown below, and any additional information which may help replicate the issue.\n[1]: https://github.com/hashicorp/terraform/issues\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\npanic: runtime error: invalid memory address or nil pointer dereference\ngoroutine 1 [running]:\nruntime/debug.Stack()\n\truntime/debug/stack.go:26 +0x5e\ngithub.com/hashicorp/terraform/internal/logging.PanicHandler()\n\tgithub.com/hashicorp/terraform/internal/logging/panic.go:84 +0x16a\npanic({0x36a0fa0?, 0x6308e10?})\n\truntime/panic.go:792 +0x132\ngithub.com/hashicorp/terraform/internal/cloud.(*Cloud).AppName(...)\n\tgithub.com/hashicorp/terraform/internal/cloud/backend.go:440\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).getDataFromCloudPlan(0x7ffcd175fd1a?, 0xc000914db0, 0x0)\n\tgithub.com/hashicorp/terraform/internal/command/show.go:288 +0x155\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).getPlanFromPath(0xc000133880, {0x7ffcd175fd1a?, 0xc0002e7008?})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:273 +0x75\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).showFromPath(0x2?, {0x7ffcd175fd1a, 0x1a})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:189 +0x32\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).show(0xc000133880, {0x7ffcd175fd1a?, 0x2?})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:132 +0x1a7\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).Run(0xc000133880, {0xc00012e0e0, 0x2, 0x2})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:78 +0x3e5\ngithub.com/hashicorp/cli.(*CLI).Run(0xc0008cef00)\n\tgithub.com/hashicorp/cli@v1.1.7/cli.go:265 +0x4de\nmain.realMain()\n\tgithub.com/hashicorp/terraform/main.go:339 +0x1deb\nmain.main()\n\tgithub.com/hashicorp/terraform/main.go:64 +0x13\n```\n\n### Steps to Reproduce\n\ntf-summarize:\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/main'\n    needs: [tf-plan]\n\n    steps:\n      - name: Download tfplan\n        uses: actions/download-artifact@v5\n        with:\n          name: tfplan\n          path: ./downloaded-tfplan\n\n      - uses: hashicorp/setup-terraform@v3\n        with:\n          terraform_version: 1.13.3\n          cli_config_credentials_token: ${{ secrets.TF_API_TOKEN }}\n\n      - name: Terraform init\n        id: init\n        run: terraform init -input=false -backend=false\n\n      - name: Terraform show\n        id: show\n        run: |\n          terraform show -json ./downloaded-tfplan/tfplan > tfplan.json\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "> Thanks for the report! I was able to reproduce the bug and fix the crash.\n> \n> Instead of crashing Terraform will now show a diagnostic (this has been the behavior before the crash):\n> \n> ```\n> \u276f terraform show -json tfplan\n> \u2577\n> \u2502 Error: Couldn't show cloud plan\n> \u2502\n> \u2502 Plan read error: can't show a saved cloud plan unless the current root module is connected to HCP Terraform\n> \u2575\n> Unable to parse input: \"Unexpected EOF\"\n> ```\n> \n> I assume this is still not what you are trying to achieve in your CI pipeline?\n\nHi:\n\nmy full github actions:\n\n```\nname: \"Terraform Plan and Apply\"\n\non:\n  workflow_dispatch:\n\njobs:\n  # This job validates the Terraform configuration files. ============================================================\n  tf-validate:\n    runs-on: ubuntu-latest\n    if: github.event_name == 'workflow_dispatch'\n    steps:\n      - uses: actions/checkout@v5\n\n      - uses: hashicorp/setup-terraform@v3\n        with:\n          terraform_version: 1.13\n          cli_config_credentials_token: ${{ secrets.TF_API_TOKEN }}\n\n      - name: Terraform init\n        id: init\n        run: terraform init -input=false\n\n      - name: Terraform validate\n        id: validate\n        run: terraform validate\n  \n  # This job checks the formatting of the Terraform configuration files. =================================================\n  tf-fmt:\n    runs-on: ubuntu-latest\n    if: github.event_name == 'workflow_dispatch'\n    steps:\n      - uses: actions/checkout@v5\n\n      - uses: hashicorp/setup-terraform@v3\n        with:\n          terraform_version: 1.13\n\n      - name: Terraform fmt\n        id: fmt\n        run: terraform fmt -check -recursive\n\n  tf-plan:\n    runs-on: ubuntu-latest\n    if: github.event_name == 'workflow_dispatch'\n    needs: tf-validate\n\n    outputs:\n      tfplanExitCode: S{{ steps.tf-plan.outputs.exitcode }}\n\n    steps:\n      - uses: actions/checkout@v5\n\n      - uses: hashicorp/setup-terraform@v3\n        with:\n          terraform_version: 1.13\n          cli_config_credentials_token: ${{ secrets.TF_API_TOKEN }}\n\n      - name: Configure variable file\n        run: |\n          cat << EOF > ./.auto.tfvars\n          ${{ secrets.VAR_TFVARS }}\n          EOF\n\n      - name: Terraform init\n        id: init\n        run: terraform init -input=false\n\n      - name: Terraform plan \n        id: only_plan\n        if: github.ref != 'refs/heads/main'\n        run: |\n          terraform plan \\\n          -out=tfplan \\\n          -input=false\n\n      - name: Terraform plan with tfplan output\n        id: plan\n        if: github.ref == 'refs/heads/main'\n        run: |\n          export exitcode=0\n          terraform plan \\\n          -detailed-exitcode \\\n          -out=tfplan \\\n          -input=false || export exitcode=$?\n\n          echo \"exitcode=$exitcode\" >> $GITHUB_OUTPUT\n\n          if [ $exitcode -eq 1 ]; then\n            echo \"Plan failed\"\n            exit 1\n          else\n            echo \"Plan succeeded\"\n            exit 0\n          fi\n\n      - name: Upload tfplan\n        if: github.ref == 'refs/heads/main'\n        uses: actions/upload-artifact@v4\n        with:\n          name: tfplan\n          path: tfplan\n  \n  tf-summarize:\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/main'\n    needs: [tf-plan]\n\n    steps:\n      - name: Download tfplan\n        uses: actions/download-artifact@v5\n        with:\n          name: tfplan\n          path: ./downloaded-tfplan\n\n      - uses: hashicorp/setup-terraform@v3\n        with:\n          terraform_version: 1.13.3\n          cli_config_credentials_token: ${{ secrets.TF_API_TOKEN }}\n\n      - name: Terraform init\n        id: init\n        run: terraform init -input=false -backend=false\n\n      - name: Copy plan\n        id: show\n        run: |\n          terraform show -json ./downloaded-tfplan/tfplan > tfplan.json\n\n      - name: Install Docker\n        uses: docker/setup-buildx-action@v3\n\n      - name: Visualize Terraform plan\n        id: visualize\n        run: |\n          echo \"\"\n          echo \"############################\"\n          echo \"###  TREE FORMAT - PLAN  ###\"\n          echo \"############################\"\n          echo \"\"\n          docker run -v $PWD:/workspace -w /workspace ghcr.io/dineshba/tf-summarize -tree tfplan.json\n\n          # summary in separate tree format\n          echo \"\"\n          echo \"###############################\"\n          echo \"###  TREE S FORMAT - PLAN   ###\"\n          echo \"###############################\"\n          echo \"\"\n          docker run -v $PWD:/workspace -w /workspace ghcr.io/dineshba/tf-summarize -separate-tree tfplan.json\n  \n  tf-apply:\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/main'\n    needs: [tf-plan]\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: hashicorp/setup-terraform@v3\n        with:\n          terraform_version: 1.13\n          cli_config_credentials_token: ${{ secrets.TF_API_TOKEN }}\n\n      - name: Terraform init\n        id: init\n        run: terraform init -input=false\n\n      - name: Download tfplan\n        uses: actions/download-artifact@v5\n        with:\n          name: tfplan\n          path: ./downloaded-tfplan\n\n      - name: Terraform apply\n        id: apply\n        run: |\n          terraform apply ./downloaded-tfplan/tfplan\n\n  tf-output:\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/main'\n    needs: [tf-apply]\n\n    steps:\n      - uses: actions/checkout@v5\n\n      - uses: hashicorp/setup-terraform@v3\n        with:\n          terraform_version: 1.13\n          cli_config_credentials_token: ${{ secrets.TF_API_TOKEN }}\n\n      - name: Terraform init\n        id: init\n        run: terraform init -input=false\n\n      - name: Terraform output\n        id: output\n        run: terraform output\n\n  discord_error_message:\n    runs-on: ubuntu-latest\n    needs: [tf-validate, tf-fmt, tf-plan, tf-apply, tf-output]\n    if: ${{ always() && contains(needs.*.result, 'failure') }}\n    steps:\n      - name: Identify failed job\n        id: identify_failed_job\n        run: |\n          failed_jobs=()\n          if [ \"${{ needs.tf-validate.result }}\" == \"failure\" ]; then\n            failed_jobs+=(\"tf-validate\")\n          fi\n          if [ \"${{ needs.tf-fmt.result }}\" == \"failure\" ]; then\n            failed_jobs+=(\"tf-fmt\")\n          fi\n          if [ \"${{ needs.tf-plan.result }}\" == \"failure\" ]; then\n            failed_jobs+=(\"tf-plan\")\n          fi\n          if [ \"${{ needs.tf-apply.result }}\" == \"failure\" ]; then\n            failed_jobs+=(\"tf-apply\")\n          fi\n          if [ \"${{ needs.tf-output.result }}\" == \"failure\" ]; then\n            failed_jobs+=(\"tf-output\")\n          fi\n          echo \"failed_jobs=${failed_jobs[@]}\" >> $GITHUB_ENV\n\n      - name: Send Discord notification\n        uses: tsickert/discord-webhook@v5.3.0\n        with:\n          webhook-url: ${{ secrets.WEBHOOK_URL_DISCORD }}\n          content: |\n            **PROBLEM:** There was a problem with the Terraform workflow:\n            - **Repository:** ${{ github.repository }}\n            - **Branch:** ${{ github.ref }}\n            - **Action:** ${{ github.event_name }}\n            - **Workflow:** ${{ github.workflow }}\n            - **Failed Jobs:** ${{ env.failed_jobs }}\n            - **Run ID:** ${{ github.run_id }}\n            - **Run Number:** ${{ github.run_number }}\n            - **Commit:** ${{ github.sha }}\n```\n\nand i get error to do this:\n\n```\nRun terraform show -json ./downloaded-tfplan/tfplan > tfplan.json\n  terraform show -json ./downloaded-tfplan/tfplan > tfplan.json\n  shell: /usr/bin/bash -e {0}\n  env:\n    TERRAFORM_CLI_PATH: /home/runner/work/_temp/3813ca63-0ba4-4188-aece-cf4286b59396\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\nTerraform crashed! This is always indicative of a bug within Terraform.\nPlease report the crash with Terraform[1] so that we can fix this.\nWhen reporting bugs, please include your terraform version, the stack trace\nshown below, and any additional information which may help replicate the issue.\n[1]: https://github.com/hashicorp/terraform/issues\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\npanic: runtime error: invalid memory address or nil pointer dereference\ngoroutine 1 [running]:\nruntime/debug.Stack()\n\truntime/debug/stack.go:26 +0x5e\ngithub.com/hashicorp/terraform/internal/logging.PanicHandler()\n\tgithub.com/hashicorp/terraform/internal/logging/panic.go:84 +0x16a\npanic({0x36a0fa0?, 0x6308e10?})\n\truntime/panic.go:792 +0x132\ngithub.com/hashicorp/terraform/internal/cloud.(*Cloud).AppName(...)\n\tgithub.com/hashicorp/terraform/internal/cloud/backend.go:440\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).getDataFromCloudPlan(0x7ffcd175fd1a?, 0xc000914db0, 0x0)\n\tgithub.com/hashicorp/terraform/internal/command/show.go:288 +0x155\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).getPlanFromPath(0xc000133880, {0x7ffcd175fd1a?, 0xc0002e7008?})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:273 +0x75\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).showFromPath(0x2?, {0x7ffcd175fd1a, 0x1a})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:189 +0x32\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).show(0xc000133880, {0x7ffcd175fd1a?, 0x2?})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:132 +0x1a7\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).Run(0xc000133880, {0xc00012e0e0, 0x2, 0x2})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:78 +0x3e5\ngithub.com/hashicorp/cli.(*CLI).Run(0xc0008cef00)\n\tgithub.com/hashicorp/cli@v1.1.7/cli.go:265 +0x4de\nmain.realMain()\n\tgithub.com/hashicorp/terraform/main.go:339 +0x1deb\nmain.main()\n\tgithub.com/hashicorp/terraform/main.go:64 +0x13\n```\n\nYes - my case is to generate tfplan.jseon and use them in conteiner\n\n---\n\n> I see that you are setting the `cli_config_credentials_token` for the `hashicorp/setup-terraform` action. I therefore assume that you are running your Terraform operations in HCP Terraform.\n> \n> In that case, the `terraform plan -out=tfplan` command will produce a cloud plan (file). In order to view this file, you need a cloud backend. However, in your `tf-summarize` step, you are passing `-backend=false` to `terraform init` which disables the HCP Terraform initialization, so Terraform can't show the plan.\n\nif I use `terraform init`\n\ni have same crash\n\n```\n tf-summarize:\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/main'\n    needs: [tf-plan]\n\n    steps:\n      - name: Download tfplan\n        uses: actions/download-artifact@v5\n        with:\n          name: tfplan\n          path: ./downloaded-tfplan\n\n      - uses: hashicorp/setup-terraform@v3\n        with:\n          terraform_version: 1.13.3\n          cli_config_credentials_token: ${{ secrets.TF_API_TOKEN }}\n\n      - name: Terraform init\n        id: init\n        run: terraform init -input=false\n\n      - name: Convert to JSON\n        id: show\n        run: |\n          terraform show -json ./downloaded-tfplan/tfplan > tfplan.json\n\n      - name: Install Docker\n        uses: docker/setup-buildx-action@v3\n\n      - name: Visualize Terraform plan\n        id: visualize\n        run: |\n          echo \"\"\n          echo \"############################\"\n          echo \"###  TREE FORMAT - PLAN  ###\"\n          echo \"############################\"\n          echo \"\"\n          docker run -v $PWD:/workspace -w /workspace ghcr.io/dineshba/tf-summarize -tree tfplan.json\n\n          # summary in separate tree format\n          echo \"\"\n          echo \"###############################\"\n          echo \"###  TREE S FORMAT - PLAN   ###\"\n          echo \"###############################\"\n          echo \"\"\n          docker run -v $PWD:/workspace -w /workspace ghcr.io/dineshba/tf-summarize -separate-tree tfplan.json\n```\n\n\nRun terraform show -json ./downloaded-tfplan/tfplan > tfplan.json\n  terraform show -json ./downloaded-tfplan/tfplan > tfplan.json\n  shell: /usr/bin/bash -e {0}\n  env:\n    TERRAFORM_CLI_PATH: /home/runner/work/_temp/ab424558-abb9-4fd1-ab7e-8d0ef89748dd\n  \n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\nTerraform crashed! This is always indicative of a bug within Terraform.\nPlease report the crash with Terraform[1] so that we can fix this.\nWhen reporting bugs, please include your terraform version, the stack trace\nshown below, and any additional information which may help replicate the issue.\n[1]: https://github.com/hashicorp/terraform/issues\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\npanic: runtime error: invalid memory address or nil pointer dereference\ngoroutine 1 [running]:\nruntime/debug.Stack()\n\truntime/debug/stack.go:26 +0x5e\ngithub.com/hashicorp/terraform/internal/logging.PanicHandler()\n\tgithub.com/hashicorp/terraform/internal/logging/panic.go:84 +0x16a\npanic({0x36a0fa0?, 0x6308e10?})\n\truntime/panic.go:792 +0x132\ngithub.com/hashicorp/terraform/internal/cloud.(*Cloud).AppName(...)\n\tgithub.com/hashicorp/terraform/internal/cloud/backend.go:440\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).getDataFromCloudPlan(0x7ffecbbf8d1a?, 0xc00063db90, 0x0)\n\tgithub.com/hashicorp/terraform/internal/command/show.go:288 +0x155\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).getPlanFromPath(0xc00064a1c0, {0x7ffecbbf8d1a?, 0xc000760008?})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:273 +0x75\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).showFromPath(0x2?, {0x7ffecbbf8d1a, 0x1a})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:189 +0x32\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).show(0xc00064a1c0, {0x7ffecbbf8d1a?, 0x2?})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:132 +0x1a7\ngithub.com/hashicorp/terraform/internal/command.(*ShowCommand).Run(0xc00064a1c0, {0xc000070120, 0x2, 0x2})\n\tgithub.com/hashicorp/terraform/internal/command/show.go:78 +0x3e5\ngithub.com/hashicorp/cli.(*CLI).Run(0xc00064c280)\n\tgithub.com/hashicorp/cli@v1.1.7/cli.go:265 +0x4de\nmain.realMain()\n\tgithub.com/hashicorp/terraform/main.go:339 +0x1deb\nmain.main()\n\tgithub.com/hashicorp/terraform/main.go:64 +0x13\nError: Process completed with exit code 1.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "crash",
        "confirmed",
        "new"
      ],
      "created_at": "2025-10-09T09:19:05Z",
      "closed_at": "2025-10-10T08:51:01Z",
      "url": "https://github.com/hashicorp/terraform/issues/37748",
      "comments_count": 6
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37754,
      "title": "Terraform Test outputs variable referenced without definition deprecation warning",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.3\non darwin_arm64\n```\n\n### Terraform Configuration Files\n\nmodule/main.tf:\n```terraform\nvariable \"value\" {\n  type = bool\n}\n\noutput \"value\" {\n  value = var.value\n}\n```\n\nmodule/tests/basic.tftest.hcl:\n```terraform\nrun \"test1\" {\n  assert {\n    condition = output.value == true\n    error_message = \"exptected value to be true\"\n  }\n}\n\nrun \"test2\" {\n  variables {\n    value = !var.value\n  }\n\n  assert {\n    condition = output.value == false\n    error_message = \"expected value to be false\"\n  }\n}\n```\n\nmodule/tests/tests.auto.tfvars:\n```ini\nvalue = true\n```\n\n### Debug Output\n\n```\n...debug output, or link to a gist...\n```\n\n\n### Expected Behavior\n\n```shell\ntests/basic.tftest.hcl... in progress\n  run \"test1\"... pass\n  run \"test2\"... pass\ntests/basic.tftest.hcl... tearing down\ntests/basic.tftest.hcl... pass\n\nSuccess! 2 passed, 0 failed.\n```\n\n### Actual Behavior\n\n```shell\ntests/basic.tftest.hcl... in progress\n  run \"test1\"... pass\n  run \"test2\"... pass\n\u2577\n\u2502 Warning: Variable referenced without definition\n\u2502 \n\u2502   on tests/basic.tftest.hcl line 10, in run \"test2\":\n\u2502   10:     value = !var.value\n\u2502 \n\u2502 Variable \"value\" was referenced without providing a definition. Referencing undefined variables within Terraform Test files is deprecated, please add a `variable` block into the relevant test file to provide a definition for the\n\u2502 variable. This will become required in future versions of Terraform.\n\u2575\n\ntests/basic.tftest.hcl... tearing down\ntests/basic.tftest.hcl... pass\n\nSuccess! 2 passed, 0 failed.\n```\n\n### Steps to Reproduce\n\n1. `terraform init`\n2. `terraform test`\n\n### Additional Context\n\nI'm assuming it should be possible to provide the initial value for a variable using either a `*.tfvars` file or as an environmental variable and later override this value in a run a block.\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-10-10T07:06:11Z",
      "closed_at": "2025-10-10T09:02:01Z",
      "url": "https://github.com/hashicorp/terraform/issues/37754",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37753,
      "title": "Infer resource moves automatically?",
      "problem": "### Terraform Version\n\n```shell\n1.12.2\n```\n\n### Use Cases\n\nWhen refactoring Terraform code, for example when introducing `foreach` blocks, one can sometimes generate plans which have create/delete pairs that exist only because the Terraform id has changed. \n\nFor example, that might look like this:\n\n```\n\n  # aws_organizations_policy_attachment.allowlist will be destroyed\n  # (because aws_organizations_policy_attachment.allowlist is not in configuration)\n  - resource \"aws_organizations_policy_attachment\" \"blah_foo\" {\n      - id        = \"ou-iciu-foo:blah:p-foo\" -> null\n      - policy_id = \"p-blah\" -> null\n      - target_id = \"ou-iciu-foo\" -> null\n    }\n\n  # aws_organizations_policy_attachment.allowlist[\"ou-iciu-foo\"] will be created\n  + resource \"aws_organizations_policy_attachment\" \"service_allowlist_foo\" {\n      + id        = (known after apply)\n      + policy_id = \"p-blah\"\n      + target_id = \"ou-iciu-foo\"\n    }\n```\n\n(This is a minimal example; the actual plan might of course be very large.)\n\n### Attempted Solutions\n\nThere are some existing workarounds:\n* Add a `moved` block, although you have to manually specify the right IDs, and I see there are some other bugs like https://github.com/hashicorp/terraform/issues/35785 about limitations there \n* Do imperative state surgery\n\n### Proposal\n\nI see there's quite a few issues about this general area but I think this suggestion is new \u2013 apologies if not.\n\nIt seems to me that Terraform, looking at the plan, can see that a resource is being deleted and an identical resource is being created and it could simplify this to be just a rename.\n\nIn this example, zero changes are needed at the AWS API level, Terraform just needs to record a new binding between the AWS ARN and the Terraform-side id. \n\nThink of this as similar to how git infers renames from create/delete of files. \n\nThis would have some UX benefits:\n* The plan would be smaller and easier to review for correctness\n* For many cases, users would not need to learn about and correctly write `move` blocks, keeping their source smaller\n\nMaking fewer mutating operations has technical benefits too:\n* In this case, the application failed because Terraform tried to create the new policy attachment before deleting the old one, which was rejected by AWS because it creates a duplicate\n* Making fewer changes means the application passes through fewer intermediate states, which may cause unexpected and unwanted behavior: for example by having neither policy attached. These intermediate steps are undesirable even if brief but especially if the apply operation fails or is interrupted.\n* The apply operation can simply be faster if it eliminates unnecessary blocking API calls\n\nImplementing this approach may require adding a concept of resources being identical and reusable. I don't know enough about the Terraform internals for this. Resources that have internal state like VMs or databases wouldn't be applicable, but the great majority of resources in the tree I work on seem to be \"value objects\": if they have exactly the same attributes then it's the same object. An IAM policy attachment is a good example of where you never care about its unique identity, and probably that would also be true for the policies themselves.\n\nFollowing the example of git one can imagine it also inferring \"rename and then change\" operations but that seems more complex and could be left for later. \n\nThanks for considering it!\n\n### References\n\n_No response_",
      "solution": "Hi @mbp-stripe,\n\nTerraform cannot infer the move automatically, because there is no universally identifying information in the configuration aside from the resource name+index which Terraform uses to map the configured instance to the stored state. The unique identity for any resource is computed by the provider, and only guaranteed to be present in the resource state. Since the to and from targets in the plan will never be identical because the `to` side will have no computed values, and Terraform would have to guess based on some heuristics, then you have decide what is \"close enough\", how does one override an incorrect guess, and how does one know ahead of time when to configure such an override (since the end goal is to be completely and deterministically configuration driven in this respect). \n\nOn top of the problem with not being able to identify resources based on configuration, there is also the problem that refactoring is done before we can start evaluation of the configuration, meaning that we may not even know what the values are in the target config to guess whether something may be moved to that location. Without a reference between the to and from targets, Terraform would need to generate a complete plan to determine what candidates there might be for moving, attempt to make the moves, then go back and generate the entire plan again, and repeat until all move candidates have successfully been rejected or accepted. Different uses of the same module may not even end up with the same configuration for the resource either, meaning in some cases an implied move would succeed for one user, and fail for another, in which case a `moved` block is always required anyway in order to reliably share the module.\n\nThese cases again could be partially solved by Terraform making some more educated guesses, but because there is no way to definitively identify automatic moves, it always leaves the possibility of incorrect guesses, and the user has to resort to making the changes via trial and error rather than explicitly defining the change they want in the configuration.\n\nThese are some of the reasons we have opted to always use an explicit `moved` declaration for refactoring operations.\n\nThanks!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "new"
      ],
      "created_at": "2025-10-09T21:13:06Z",
      "closed_at": "2025-10-10T13:00:16Z",
      "url": "https://github.com/hashicorp/terraform/issues/37753",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37745,
      "title": "-generate-config-out produces invalid HCL for optional list with MinItems constraint",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.3\non linux_amd64\n```\n\n### Terraform Configuration Files\n\n`terraform.tf`\n```terraform\nterraform {\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~> 5.92\"\n    }\n  }\n\n  required_version = \">= 1.2\"\n}\n```\n\n`main.tf`\n```terraform\nprovider \"aws\" {\n  region = \"us-east-1\"\n}\n\nimport {\n  to = aws_db_instance.aws_rds_postgres\n  id = \"aws-rds-postgres\"\n}\n```\n\n### Debug Output\n\n\n[Gist link](https://gist.github.com/ejohnso49/97aee71d5c6dd263800e63ab0a6c0040)\n\n\n### Expected Behavior\n\n- Config is generated without error\n- Config for a non-Active Directory enabled RDS has a value `domain_dns_ips = null`\n\n### Actual Behavior\n\n- Config generated with an error\n- Config contains `domain_dns_ips = []` which produces a validation error due to this attribute have a MinItems constraint of 2 despite the attribute being optional\n\n### Steps to Reproduce\n\n1. `terraform init`\n2. `terraform plan -generate-config-output=generated.tf`\n\n### Additional Context\n\nI think that this issue should be filed in this repo as this is related to how the config output is generated rather than something specific to the AWS provider. I have attempted to fix this bug but have gotten stuck so do not have an immediate fix. I believe the root cause is that the attribute `domain_dns_ips` is an optional list with a MinItems constraint of 2. The provider is producing an attribute value of `nil` correctly when there is no list. When the output generates, `domain_dns_ips = []`. This however then fails on validation as an empty list does not meet the MinItems constraint.\n\nI believe the correct behavior would be to generate `domain_dns_ips = null` in this case.\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-10-08T15:29:57Z",
      "closed_at": "2025-10-08T19:42:22Z",
      "url": "https://github.com/hashicorp/terraform/issues/37745",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37699,
      "title": "Should we set `require_unimplemented_servers=true` when generating gRPC-related code?",
      "problem": "Following https://github.com/hashicorp/terraform/pull/37685, when we compile Go gRPC code from our .proto files we use the `require_unimplemented_servers=false` option:\n\nhttps://github.com/hashicorp/terraform/blob/ffbb62b369fc8ea5ab21f49681a5767b6c26b429/tools/protobuf-compile/protobuf-compile.go#L54\n\nThis option is described in the documentation here: [protoc-gen-go-grpc: Future-proofing services](https://pkg.go.dev/google.golang.org/grpc/cmd/protoc-gen-go-grpc#readme-future-proofing-services).\n\n\nSetting `require_unimplemented_servers=false`  is not recommended, but we are currently using it as it matches how our code was generated prior to #37685 \n\nHowever unimplemented server structs are currently being embedding in hashicorp/terraform despite it not being enforced:\n* [Use of packages.UnimplementedPackagesServer](https://github.com/hashicorp/terraform/blob/ffbb62b369fc8ea5ab21f49681a5767b6c26b429/internal/rpcapi/packages.go#L42)\n* [Use of dependencies.UnimplementedDependenciesServer](https://github.com/hashicorp/terraform/blob/ffbb62b369fc8ea5ab21f49681a5767b6c26b429/internal/rpcapi/dependencies.go#L39)\n* [Use of stacks.UnimplementedStacksServer](https://github.com/hashicorp/terraform/blob/ffbb62b369fc8ea5ab21f49681a5767b6c26b429/internal/rpcapi/stacks.go#L42C2-L42C34)\n\nSimilarly, hashicorp/terraform-plugin-go embeds unimplemented server structs: [tfplugin5.UnimplementedProviderServer](https://github.com/hashicorp/terraform-plugin-go/blob/b7f96d52083afbb22d5b76f09d7b312759aee499/tfprotov5/tf5server/server.go#L413), [tfplugin6.UnimplementedProviderServer](https://github.com/hashicorp/terraform-plugin-go/blob/b7f96d52083afbb22d5b76f09d7b312759aee499/tfprotov6/tf6server/server.go#L413)\n\n\n**So maybe this shows we should set `require_unimplemented_servers=true` and make it consistent in this codebase?**\n\n\nReferences:\n* https://github.com/grpc/grpc-go/issues/3674\n* https://stackoverflow.com/questions/65079032/grpc-with-mustembedunimplemented-method",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [],
      "created_at": "2025-09-30T11:33:59Z",
      "closed_at": "2025-10-09T10:18:15Z",
      "url": "https://github.com/hashicorp/terraform/issues/37699",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37710,
      "title": "Terraform crash when using bloc moved from mongodbatlas_cluster to mongodbatlas_advanced_cluster",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.12.0\non linux_amd64\n+ provider registry.terraform.io/hashicorp/random v3.7.2\n+ provider registry.terraform.io/mastercard/restapi v2.0.1\n+ provider registry.terraform.io/mongodb/mongodbatlas v2.0.1\n\nYour version of Terraform is out of date! The latest version\nis 1.13.3. You can update by downloading from https://developer.hashicorp.com/terraform/install\n```\n\n### Terraform Configuration Files\n\n```terraform\nterraform {\n  required_providers {\n    mongodbatlas = {\n      source  = \"mongodb/mongodbatlas\"\n      version = \"~> 2.0.0\"\n    }\n  }\n  required_version = \">= 1.12\"\n}\nmoved {\n  from = mongodbatlas_cluster.cluster\n  to   = mongodbatlas_advanced_cluster.cluster\n}\nresource \"mongodbatlas_advanced_cluster\" \"cluster\" {\n  project_id             = var.project_id\n  name                   = var.cluster_name\n  mongo_db_major_version = var.mongo_db_major_version\n  cluster_type           = var.cluster_type\n\n  backup_enabled = var.cloud_backup\n\n  termination_protection_enabled = var.termination_protection_enabled\n\n  replication_specs = [{\n    num_shards    = var.num_shards\n    region_configs = [{\n      region_name   = var.provider_region_name\n      provider_name = var.provider_name\n    \n\n      priority      = var.priority\n    \n      electable_specs = {\n        instance_size = var.provider_instance_size_name\n        node_count    = var.electable_nodes\n      }\n    \n      read_only_specs = var.read_only_nodes > 0 ? {\n        instance_size = var.provider_instance_size_name\n        node_count    = var.read_only_nodes\n      } : null\n    \n      analytics_specs = var.analytics_nodes > 0 ? {\n        instance_size = var.provider_instance_size_name\n        node_count    = var.analytics_nodes\n      } : null\n    \n      auto_scaling = {\n        disk_gb_enabled            = var.auto_scaling_disk_gb_enabled\n        compute_enabled            = var.auto_scaling_compute_enabled\n        compute_scale_down_enabled = var.auto_scaling_compute_enabled ? var.auto_scaling_compute_scale_down_enabled : null\n        compute_min_instance_size  = var.auto_scaling_compute_enabled ? var.provider_auto_scaling_compute_min_instance_size : null\n        compute_max_instance_size  = var.auto_scaling_compute_enabled ? var.provider_auto_scaling_compute_max_instance_size : null\n      }\n    }]\n  }]\n\n  bi_connector_config = {\n    enabled         = var.bi_connector_enabled\n    read_preference = var.bi_connector_read_preference\n  }\n\n\n  advanced_configuration = {\n    javascript_enabled                   = var.javascript_enabled\n    minimum_enabled_tls_protocol         = \"TLS1_2\"\n    sample_size_bi_connector             = var.bi_connector_enabled ? var.sample_size_bi_connector : null\n    sample_refresh_interval_bi_connector = var.bi_connector_enabled ? var.sample_refresh_interval_bi_connector : null\n  }\n\n\n  labels = local.tags \n\n\n  pinned_fcv = var.pinned_upgrade_enabled ? {\n    expiration_date = var.pinned_fcv_expiration_date\n  } : null\n}\n\n...terraform config...\n```\n\n\n### Debug Output\n\n```\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\nTerraform crashed! This is always indicative of a bug within Terraform.\nPlease report the crash with Terraform[1] so that we can fix this.\n\nWhen reporting bugs, please include your terraform version, the stack trace\nshown below, and any additional information which may help replicate the issue.\n\n[1]: https://github.com/hashicorp/terraform/issues\n\n!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\npanic: interface conversion: interface {} is float64, not string\ngoroutine 51 [running]:\nruntime/debug.Stack()\n        runtime/debug/stack.go:26 +0x5e\ngithub.com/hashicorp/terraform/internal/logging.PanicHandler()\n        github.com/hashicorp/terraform/internal/logging/panic.go:84 +0x16a\npanic({0x33926a0?, 0xc001605da0?})\n        runtime/panic.go:792 +0x132\ngithub.com/hashicorp/terraform/internal/command/jsonformat/structured/attribute_path.(*PathMatcher).GetChildWithKey(0xc0008ef9e0, {0xc000d57cb0, 0xb})\n        github.com/hashicorp/terraform/internal/command/jsonformat/structured/attribute_path/matcher.go:154 +0x2ec\ngithub.com/hashicorp/terraform/internal/command/jsonformat/structured.ChangeMap.GetChild({0x0, 0xc0013edf50, 0x0, 0x0, 0xc0016043c0, {0x4067d48, 0xc0008ef9c0}, {0x4067d48, 0xc0008ef9e0}, 0x1}, ...)\n        github.com/hashicorp/terraform/internal/command/jsonformat/structured/map.go:76 +0x39b\ngithub.com/hashicorp/terraform/internal/command/jsonformat/differ.processObject[...]({0x0, 0x0, {0x0, 0x0}, {0x3410f20, 0xc0013edf50}, {0x0, 0x0}, {0x0, 0x0}, ...}, ...)\n        github.com/hashicorp/terraform/internal/command/jsonformat/differ/object.go:62 +0x1dc\ngithub.com/hashicorp/terraform/internal/command/jsonformat/differ.computeAttributeDiffAsNestedObject({0x0, 0x0, {0x0, 0x0}, {0x3410f20, 0xc0013edf50}, {0x0, 0x0}, {0x0, 0x0}, ...}, ...)\n        github.com/hashicorp/terraform/internal/command/jsonformat/differ/object.go:36 +0x296\ngithub.com/hashicorp/terraform/internal/command/jsonformat/differ.computeDiffForNestedAttribute({0x0, 0x0, {0x0, 0x0}, {0x3410f20, 0xc0013edf50}, {0x0, 0x0}, {0x0, 0x0}, ...}, ...)\n        github.com/hashicorp/terraform/internal/command/jsonformat/differ/attribute.go:38 +0x205\ngithub.com/hashicorp/terraform/internal/command/jsonformat/differ.ComputeDiffForAttribute({0x0, 0x0, {0x0, 0x0}, {0x3410f20, 0xc0013edf50}, {0x0, 0x0}, {0x0, 0x0}, ...}, ...)\n        github.com/hashicorp/terraform/internal/command/jsonformat/differ/attribute.go:21 +0x45\ngithub.com/hashicorp/terraform/internal/command/jsonformat/differ.ComputeDiffForBlock({0x0, 0x0, {0x3410f20, 0xc0013ede00}, {0x3410f20, 0xc0013edec0}, {0x3410f20, 0xc001604210}, {0x3410f20, 0xc0016042a0}, ...}, ...)\n        github.com/hashicorp/terraform/internal/command/jsonformat/differ/block.go:49 +0x468\ngithub.com/hashicorp/terraform/internal/command/jsonformat.precomputeDiffs({{0x392d926, 0x3}, 0xc000828b10, {0xc0001d1508, 0x11, 0x20}, {0xc000cc1608, 0x5, 0x8}, {0xc00067cb08, ...}, ...}, ...)\n        github.com/hashicorp/terraform/internal/command/jsonformat/diff.go:52 +0x345\ngithub.com/hashicorp/terraform/internal/command/jsonformat.Plan.renderHuman({{0x392d926, 0x3}, 0xc000828b10, {0xc0001d1508, 0x11, 0x20}, {0xc000cc1608, 0x5, 0x8}, {0xc00067cb08, ...}, ...}, ...)\n        github.com/hashicorp/terraform/internal/command/jsonformat/plan.go:60 +0x85\ngithub.com/hashicorp/terraform/internal/command/jsonformat.Renderer.RenderHumanPlan({0xc000876d50?, 0xc0003316b0?, 0x89?}, {{0x392d926, 0x3}, 0xc000828b10, {0xc0001d1508, 0x11, 0x20}, {0xc000cc1608, ...}, ...}, ...)\n        github.com/hashicorp/terraform/internal/command/jsonformat/renderer.go:122 +0x1cf\ngithub.com/hashicorp/terraform/internal/command/views.(*OperationHuman).Plan(0xc0007bba50, 0xc000ea31e0, 0xc001d9c900)\n        github.com/hashicorp/terraform/internal/command/views/operation.go:130 +0x2fc\ngithub.com/hashicorp/terraform/internal/backend/local.(*Local).opPlan(0xc000b22a00, {0x4066690, 0xc0005fb810}, {0x4066690, 0xc0005fb860}, 0xc0001d8f00, 0xc000bc4640)\n        github.com/hashicorp/terraform/internal/backend/local/backend_plan.go:204 +0xe35\ngithub.com/hashicorp/terraform/internal/backend/local.(*Local).Operation.func1()\n        github.com/hashicorp/terraform/internal/backend/local/backend.go:339 +0xb8\ncreated by github.com/hashicorp/terraform/internal/backend/local.(*Local).Operation in goroutine 1\n        github.com/hashicorp/terraform/internal/backend/local/backend.go:332 +0x3fa\n```\n\n\n### Expected Behavior\n\nexecute the bloc move  seccessfully \n\n### Actual Behavior\n\nterraform crash and dont migrate the old ressource to the new one .\n\n### Steps to Reproduce\n\nterraform plan --var-file=variables.tfvars\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hi @zenzedoon,\n\nThis looks like it could be a duplicate of #37271. Can you verify that you still have the problem with a current release of Terraform?\n\n---\n\nHi @zenzedoon, do you have anywhere else in your configuration a `try` or a `can` function call that might now contain an invalid reference to the old `mongodbatlas_cluster` cluster that would need to be updated? Invalid references embedded in `try` and `can` function calls were the source of the crashes seen in the issue James linked.\n\n---\n\nHi @gbmcarlos, does this happen on the latest version of Terraform as well, or only on 1.12? Thanks!\n\nGiven @zenzedoon confirmed this was fixed for them on Terraform 1.13, I'm going to close the issue. If anyone reports this happening with Terraform 1.13 I'll reopen it. ",
      "labels": [
        "bug",
        "new",
        "duplicate"
      ],
      "created_at": "2025-10-01T14:54:40Z",
      "closed_at": "2025-10-08T14:44:09Z",
      "url": "https://github.com/hashicorp/terraform/issues/37710",
      "comments_count": 6
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37730,
      "title": "Re-running the destroy operation is causing issues with the count variable, which depends on the data block result.",
      "problem": "### Terraform Version\n\n```shell\nterraform -version\nTerraform v1.4.2\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v6.15.0\n+ provider registry.terraform.io/hashicorp/http v3.5.0\n```\n\n### Terraform Configuration Files\n\n##Module code\n```terraform\nvariable \"message\" {\n  type = string\n}\n\noutput \"message\" {\n  value = var.message\n}\n\n```\n##Test code \n\n```\nlocals {\n# Parsing config HTTP response body\n  raw_config   = jsondecode(data.http.config.response_body)\n  config       = local.raw_config.config\n  #deployment_check = length(try(local.config.is_primary == true ? { primary = true } : {})) > 0 ? 1 : 0 -- this is used to try with for fro_each and also it not worked skip it\n  deployment_check = local.config.is_primary ? 1 : 0\n}\n# Secret that stores api key path\ndata \"aws_secretsmanager_secret\" \"api_key\" {\n  name = \"abc/service/market/\n}\n\n# Retrieve the actual API key value from Secrets Manager\ndata \"aws_secretsmanager_secret_version\" \"api_key\" {\n  secret_id = data.aws_secretsmanager_secret.api_key.id\n}\n\n# Fetch  DynamoDB configurations\ndata \"http\" \"config\" {\n  url = \"https://localhost:8080/api/v1/service\"\n\n  request_headers = {\n    X-API-Key = jsondecode(data.aws_secretsmanager_secret_version.api_key.secret_string)[\"terraform\"][\"key\"]\n    Accept    = \"application/json\"\n  }\n}\n\n# DDB module\nmodule \"test_message\" {\n  depends_on = [data.http.config]\n  count = local.deployment_check\n  #count =  try(jsondecode(data.http.config.response_body).config.is_primary ? 1 : 0, 0)\n  source   = \"./modules/test_message\"\n  message  = \"DDB modules running\"\n}\n\noutput \"test\" {\n    value = module.test_message[*].message\n}\n```\n\n\n### Debug Output\n\n##terraform plan\n```\ndata.aws_secretsmanager_secret.api_key: Reading...\ndata.aws_secretsmanager_secret.api_key: Read complete after 1s [id=xxxxxxx]\ndata.aws_secretsmanager_secret_version.api_key: Reading...\ndata.aws_secretsmanager_secret_version.api_key: Read complete after 0s [id=xxxx]\ndata.http.config: Reading...\ndata.http.config: Read complete after 0s [id=abc]\n\nChanges to Outputs:\n  + test = [\n      + \"DDB modules running\",\n    ]\n\nYou can apply this plan to save these new output values to the Terraform state, without changing any real infrastructure.\n```\n##terraform apply\n```\ndata.aws_secretsmanager_secret.api_key: Reading...\ndata.aws_secretsmanager_secret.api_key: Read complete after 1s [id=xxxx]\ndata.aws_secretsmanager_secret_version.api_key: Reading...\ndata.aws_secretsmanager_secret_version.api_key: Read complete after 0s [id=xxxx]\ndata.http.config: Reading...\ndata.http.config: Read complete after 0s [id=abc]\n\nChanges to Outputs:\n  + test = [\n      + \"DDB modules running\",\n    ]\n\nYou can apply this plan to save these new output values to the Terraform state, without changing any real infrastructure.\n\nDo you want to perform these actions?\n  Terraform will perform the actions described above.\n  Only 'yes' will be accepted to approve.\n\n  Enter a value: yes\n\n\\\nApply complete! Resources: 0 added, 0 changed, 0 destroyed.\n\nOutputs:\n\ntest = [\n  \"DDB modules running\",\n]\n```\n##terraform destroy\n```\ndata.aws_secretsmanager_secret.api_key: Reading...\ndata.aws_secretsmanager_secret.api_key: Read complete after 1s [id=xxxx]\ndata.aws_secretsmanager_secret_version.api_key: Reading...\ndata.aws_secretsmanager_secret_version.api_key: Read complete after 0s [id=xxxxx]\ndata.http.config: Reading...\ndata.http.config: Read complete after 1s [id=abc]\n\nChanges to Outputs:\n  - test = [\n      - \"DDB modules running\",\n    ] -> null\n\nYou can apply this plan to save these new output values to the Terraform state, without changing any real infrastructure.\n\nDo you really want to destroy all resources?\n  Terraform will destroy all your managed infrastructure, as shown above.\n  There is no undo. Only 'yes' will be accepted to confirm.\n\n  Enter a value: yes\n\n```\n##terraform destroy\n```\n\u2577\n\u2502 Error: Invalid count argument\n\u2502 \n\u2502   on test.tf line 31, in module \"test_message\":\n\u2502   31:   count = local.deployment_check\n\u2502 \n\u2502 The \"count\" value depends on resource attributes that cannot be determined until apply, so Terraform cannot predict how many instances will be created. To work around this, use the -target argument to first apply only the resources that\n\u2502 the count depends on.\n```\n\n### Expected Behavior\n\nIf I re-run the Terraform destroy, it should not complain about the count value \u2014 it should honor the try block. I added the try block because the dependent HTTP data block gets destroyed, so I wrapped the count in a try statement.\n\n### Actual Behavior\n\nEven with or without the try wrapper around count, it\u2019s still throwing an error while reapplying destroy. It should use the try block and default to 0 if it\u2019s unable to find the HTTP response\n\n```\n The \"count\" value depends on resource attributes that cannot be determined until apply, so Terraform cannot predict how many instances will be created. To work around this, use the -target argument to first apply only the resources that\n\u2502 the count depends on.\n```\n\n### Steps to Reproduce\n\n1. `terraform init`\n2. `terraform apply`\n3. `terraform destroy`\n4. `terraform destroy`\n\n### Additional Context\n\nWhy do I need to run destroy again and again? Some people might have this doubt, so I just want to clarify. All my CI/CD pipelines run on GitHub workflows, and as you all know, the recent runners have been quite unreliable, often causing failures after some jobs are completed. Because of this, I end up re-running the failed jobs, and they go through the destroy steps again. These re-runs are failing due to the count issue, and they aren\u2019t moving to the next environment because of the fail-safe condition we set up to prevent higher environments from running when lower ones fail.\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hi @sravankurra,\n\nThanks for filing the issue. There have been a lot of bug fixes since v1.4. Current versions of Terraform should be able to avoid this issue around partial destroys which lead to outputs like in your configuration.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-10-07T07:09:23Z",
      "closed_at": "2025-10-07T12:55:09Z",
      "url": "https://github.com/hashicorp/terraform/issues/37730",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37657,
      "title": "ephemeralasnull function incorrectly flags entire object as ephemeral when using filtering for expressions with a map containing an ephemeral value",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.1\non windows_amd64\n```\n\n### Terraform Configuration Files\n\n```terraform\nlocals {\n  obj = {\n    asd = var.ephemeral_var\n    foo = \"bar\"\n    nnn = null\n  }\n  test = {\n    for key, value in local.obj :\n    key => value if value != null\n  }\n}\n\nvariable \"ephemeral_var\" {\n  type      = string\n  ephemeral = true\n}\n```\n\n\n### Debug Output\n\nProbably not relevant\n\n\n### Expected Behavior\n\nWhen I run `ephemeralasnull(local.test)` in the terraform console I should get \n```terraform\n{\n  \"asd\" = tostring(null)\n  \"foo\" = \"bar\"\n}\n```\n\n### Actual Behavior\n\nWhen I run `ephemeralasnull(local.test)` in the terraform console I get \n```terraform\nnull /* object */\n```\n\n### Steps to Reproduce\n\n1. `terraform init`\n2. `terraform console  -var=ephemeral_var=asd-val`\n3. `ephemeralasnull(local.obj)`\n4. `ephemeralasnull(local.test)`\n    This one should have returned `{ \"asd\" = tostring(null), \"foo\" = \"bar\" }` but instead returns `null /* object */`\n\n### Additional Context\n\nWorkaround for this specific case (when checking for not null):\n```terraform\nlocals {\n  obj = {\n    asd = var.ephemeral_var\n    foo = \"bar\"\n    nnn = null\n  }\n  test = [\n    for key, value in local.obj :\n    key if try(ephemeralasnull(md5(jsonencode(value) == \"null\" ? null : jsonencode(value))), \"var was null\") != \"var was null\"\n  ]\n}\n\nvariable \"ephemeral_var\" {\n  type      = string\n  ephemeral = true\n}\n```\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hi @adelinn,\n\nThanks for filing the issue. In your first example, `ephemeralasnull` can't do anything more specific, because `local.test` is already completely ephemeral. When you call the function, there is no way for it to know _why_ the object has been marked as ephemeral, only that it has, hence it must replace the entire value with `null`.\n\nThis has to do with how evaluation works, the result of the for expression is derived from the values within `local.obj`, and since those values have influence over the final result, the result also inherits any marks from those values. It's not actually easy to directly see right now in the console with no way to access ephemeral values, but walking through the steps you can map out what would happen if we allowed this. The final structure of the `test` object would be different based on the contents of the ephemeral value.\n\nIf `ephemeral_var` is not null, you have\n```\n{\n  \"asd\" = \"ephemeral_var\"\n  \"foo\" = \"bar\"\n}\n```\n\nwhile if it is null, you end up with \n```\n{\n  \"foo\" = \"bar\"\n}\n```\n\nBecause ephemeral values are by definition unstable and can evaluate to different things each time, this change in value is not allowed unless the entire result is also ephemeral.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-09-23T14:26:14Z",
      "closed_at": "2025-09-24T14:13:04Z",
      "url": "https://github.com/hashicorp/terraform/issues/37657",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37649,
      "title": "Enhance test quality for internal/states package",
      "problem": "### Terraform Version\n\n```shell\nv1.13.3\n```\n\n### Use Cases\n\nI am a researcher working on software testing, in particular [mutation testing](https://en.wikipedia.org/wiki/Mutation_testing), which evaluates the effectiveness of tests. While Terraform's test suite is comprehensive and of high quality, my experiments uncovered a few situations where simple mutations in the `internal/states` package were not detected by existing tests in that package. I believe these insights can be of value for you. Following the contribution guidelines, I will first describe the problem here and then my suggested solution. I also plan to open a PR with suggested improvements on the tests.\n\nA few important cases in `state.go`, `resource.go`, and `sync.go` are not fully tested. This means that subtle defects in these areas (e.g., incorrect handling of `nil` values, or synchronization issues)  could go unnoticed. The end goal is to further strengthen the robustness of Terraform's test suite.\n\nConcretely, my analysis revealed three situations where mutants survive because the test suite does not check certain cases:\n1. state.go (`ProviderAddrs`):\n```\nfunc (s *State) ProviderAddrs() []addrs.AbsProviderConfig {\n    if s != nil {  // mutated from \"if s == nil\"\n        return nil\n    }\n    ...\n}\n```\nThe test suite does not check the case of a non-`nil` state, which allows a mutation of the `nil` check to go undetected. I believe the tests in `state_test.go`  do not execute this function at all.\n\n2. resource.go (`HasCurrent`):\n```\nfunc (i *ResourceInstance) HasCurrent() bool {\n    return true && i.Current != nil  // mutated from \"i != nil && i.Current != nil\"\n}\n```\nThe test suite does not check the case of a `nil` receiver, which allows the mutation to go undetected.\n\n3. sync.go (`Unlock`)\n```\nfunc (s *SyncState) Unlock() {\n    _ = s.lock.Unlock  // mutated from \"s.lock.Unlock()\"\n}\n```\nThe test suite does not check that Unlock actually invokes the underlying mutex unlock, which allows replacing the call with a no-op mutation to go undetected.\n\n### Attempted Solutions\n\nIn each of the three cases described above, the mutated code compiles successfully, and all existing test in `internal/states` still pass. I suggest strengthening the test suite in `internal/states` with minimal additions that specifically cover these cases. \n1. state.go (`ProviderAddrs`): Add a test that exercises `ProviderAddrs` on three scenarios (1) a `nil` state, (2) an empty state, and (3) a populated state. \n\n```\nfunc TestState_ProviderAddrs(t *testing.T) {\n\t// 1) nil state\n\tvar nilState *State\n\tif got := nilState.ProviderAddrs(); got != nil {\n\t\tt.Fatalf(\"nil state: expected nil, got %#v\", got)\n\t}\n\n\t// 2) empty state\n\tempty := NewState()\n\tif got := empty.ProviderAddrs(); got != nil {\n\t\tt.Fatalf(\"empty state: expected nil, got %#v\", got)\n\t}\n\n\t// 3) populated state\n\ts := NewState()\n\n\trootAWS := addrs.AbsProviderConfig{\n\t\tModule:   addrs.RootModule,\n\t\tProvider: addrs.NewDefaultProvider(\"aws\"),\n\t}\n\trootGoogle := addrs.AbsProviderConfig{\n\t\tModule:   addrs.RootModule,\n\t\tProvider: addrs.NewDefaultProvider(\"google\"),\n\t}\n\tchildAWS := addrs.AbsProviderConfig{\n\t\tModule:   addrs.RootModule.Child(\"child\"),\n\t\tProvider: addrs.NewDefaultProvider(\"aws\"),\n\t}\n\n\trm := s.RootModule()\n\trm.SetResourceInstanceCurrent(\n\t\taddrs.Resource{Mode: addrs.ManagedResourceMode, Type: \"test_thing\", Name: \"foo\"}.Instance(addrs.NoKey),\n\t\t&ResourceInstanceObjectSrc{Status: ObjectReady, SchemaVersion: 1, AttrsJSON: []byte(`{}`)},\n\t\trootAWS,\n\t)\n\n\trm.SetResourceInstanceCurrent(\n\t\taddrs.Resource{Mode: addrs.ManagedResourceMode, Type: \"test_thing\", Name: \"bar\"}.Instance(addrs.NoKey),\n\t\t&ResourceInstanceObjectSrc{Status: ObjectReady, SchemaVersion: 1, AttrsJSON: []byte(`{}`)},\n\t\trootAWS,\n\t)\n\n\trm.SetResourceInstanceCurrent(\n\t\taddrs.Resource{Mode: addrs.ManagedResourceMode, Type: \"test_thing\", Name: \"baz\"}.Instance(addrs.NoKey),\n\t\t&ResourceInstanceObjectSrc{Status: ObjectReady, SchemaVersion: 1, AttrsJSON: []byte(`{}`)},\n\t\trootGoogle,\n\t)\n\n\tchildMI := addrs.RootModuleInstance.Child(\"child\", addrs.NoKey)\n\tcm := s.EnsureModule(childMI)\n\tcm.SetResourceInstanceCurrent(\n\t\taddrs.Resource{Mode: addrs.ManagedResourceMode, Type: \"test_thing\", Name: \"child\"}.Instance(addrs.NoKey),\n\t\t&ResourceInstanceObjectSrc{Status: ObjectReady, SchemaVersion: 1, AttrsJSON: []byte(`{}`)},\n\t\tchildAWS,\n\t)\n\n\tgot := s.ProviderAddrs()\n\texpected := []addrs.AbsProviderConfig{childAWS, rootAWS, rootGoogle}\n\n\tif !reflect.DeepEqual(got, expected) {\n\t\tt.Fatalf(\"unexpected provider addrs\\nexpected: %#v\\ngot: %#v\", expected, got)\n\t}\n}\n```\n2. resource.go (`HasCurrent`):\nImprove the existing test `TestResourceInstanceDeposeCurrentObject` with a new `t.Run` case for the `nil` receiver.\n\n```\nfunc TestResourceInstanceDeposeCurrentObject(t *testing.T) {\n  // add code below\n    t.Run(\"nil receiver HasCurrent\", func(t *testing.T) {\n        // small helper to catch panics\n        callHasCurrent := func(ri *ResourceInstance) (ret bool, panicked bool) {\n            defer func() {\n                if r := recover(); r != nil {\n                    panicked = true\n                }\n            }()\n            return ri.HasCurrent(), false\n        }\n\n        var nilRI *ResourceInstance\n        got, panicked := callHasCurrent(nilRI)\n        if panicked {\n            t.Fatalf(\"HasCurrent(nil) panicked; want no panic and false\")\n        }\n        if got {\n            t.Fatalf(\"HasCurrent(nil) = true; want false\")\n        }\n    })\n        // existing test continues unchanged\n\tobj := &ResourceInstanceObjectSrc{\n\t\t// Empty for the sake of this test, because we're just going to\n\t\t// compare by pointer below anyway.\n\t}\n```\n3. sync.go (`Unlock`):\nImprove the `TestStateHasResourceInstanceObjects` by asserting that the lock is released.\n```\nfunc TestStateHasResourceInstanceObjects(t *testing.T) {\n   // existing code unchanged ...\n\t\"one empty resource husk in root module\": {\n\t\t\tfunc(ss *SyncState) {\n\t\t\t\t// Current Terraform doesn't actually create resource husks\n\t\t\t\t// as part of its everyday work, so this is a \"should never\n\t\t\t\t// happen\" case but we'll test to make sure we're robust to\n\t\t\t\t// it anyway, because this was a historical bug blocking\n\t\t\t\t// \"terraform workspace delete\" and similar.\n\t\t\t\tss.SetResourceInstanceCurrent(\n\t\t\t\t\tmustAbsResourceAddr(\"test.foo\").Instance(addrs.NoKey),\n\t\t\t\t\t&ResourceInstanceObjectSrc{\n\t\t\t\t\t\tAttrsJSON: []byte(`{}`),\n\t\t\t\t\t\tStatus:    ObjectTainted,\n\t\t\t\t\t},\n\t\t\t\t\tproviderConfig,\n\t\t\t\t)\n\t\t\t\ts := ss.Lock()\n\t\t\t\tdelete(s.Modules[\"\"].Resources[\"test.foo\"].Instances, addrs.NoKey)\n\t\t\t\tss.Unlock()\n                                // add code below to cover the case\n\t\t\t\tdone := make(chan struct{})\n\t\t\t\tgo func() {\n\t\t\t\t\tss.Lock()\n\t\t\t\t\tss.Unlock()\n\t\t\t\t\tclose(done)\n\t\t\t\t}()\n\t\t\t\tselect {\n\t\t\t\tcase <-done:\n\t\t\t\t\t// OK: lock was released\n\t\t\t\tcase <-time.After(500 * time.Millisecond):\n\t\t\t\t\tt.Fatalf(\"Unlock did not release SyncState lock (timed out acquiring lock again)\")\n\t\t\t\t}\n           // existing test case continues ...\n\t\t\t},\n\t\t\tfalse,\n\t\t},\n```\n\n### Proposal\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "Thanks for this feature request! If you are viewing this issue and would like to indicate your interest, please use the \ud83d\udc4d reaction on the issue description to upvote this issue. We also welcome additional use case descriptions. Thanks again!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "new"
      ],
      "created_at": "2025-09-20T12:49:29Z",
      "closed_at": "2025-10-02T07:04:04Z",
      "url": "https://github.com/hashicorp/terraform/issues/37649",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37689,
      "title": "terraform apply CLI Action output missing \"Actions: n invoked\"",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.14.0-beta2\non darwin_arm64\n+ provider registry.terraform.io/austinvalle/bufo v2.0.0\n```\n\n### Terraform Configuration Files\n\n```terraform\nterraform {\n  required_providers {\n    bufo = {\n      source = \"austinvalle/bufo\"\n    }\n  }\n}\n\nresource \"terraform_data\" \"test\" {\n  lifecycle {\n    action_trigger {\n      events  = [after_create]\n      actions = [action.bufo_print.success]\n    }\n  }\n}\n\naction \"bufo_print\" \"success\" {\n  config {\n    # random colorized bufo\n    color = true\n  }\n}\n```\n\n\n### Debug Output\n\n```\nApply complete! Resources: 1 added, 0 changed, 0 destroyed.\n```\n\n\n### Expected Behavior\n\nI would expect the apply output for Actions to summarize the # of actions invoked during the apply, like:\n\n`Apply complete! Resources: 1 added, 0 changed, 0 destroyed.  Actions: 1 invoked.`\n\nHere's what the plan output is for the same config, which has the Actions info:\n\n`Plan: 1 to add, 0 to change, 0 to destroy. Actions: 1 to invoke.`\n\nIt is important to have the final line summarizing the apply to include the actions invoked.\n\n### Actual Behavior\n\nNumber of actions invoked is not shown\n\n### Steps to Reproduce\n\n1. `terraform init`\n2. `terraform apply`\n3. Observe results\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hello,\n\nI have resolved the bug, and created a PR \nhttps://github.com/hashicorp/terraform/pull/37692\n\nPlease review the changes.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-09-26T18:04:17Z",
      "closed_at": "2025-10-02T14:00:07Z",
      "url": "https://github.com/hashicorp/terraform/issues/37689",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37719,
      "title": "Stacks: configuration upload fails on use of speculative option",
      "problem": "### Terraform Version\n\n```shell\ntf --version\nTerraform v1.14.0-beta2\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v5.100.0\n+ provider registry.terraform.io/hashicorp/random v3.7.2\n```\n\n### Terraform Configuration Files\n\nThe command can be run using any Stacks configuration which has a Stack created in HCP Terraform.\n\n### Debug Output\n\n```\nTF_LOG=TRACE tf stacks configuration list -stack-id st-31HY1439bDRVawex -speculative true\n2025-10-02T10:06:57.533-0400 [INFO]  Terraform version: 1.14.0 beta2\n2025-10-02T10:06:57.533-0400 [DEBUG] using github.com/hashicorp/go-tfe v1.91.0\n2025-10-02T10:06:57.533-0400 [DEBUG] using github.com/hashicorp/hcl/v2 v2.24.0\n2025-10-02T10:06:57.533-0400 [DEBUG] using github.com/hashicorp/terraform-svchost v0.1.1\n2025-10-02T10:06:57.533-0400 [DEBUG] using github.com/zclconf/go-cty v1.16.3\n2025-10-02T10:06:57.533-0400 [INFO]  Go runtime version: go1.25.1\n2025-10-02T10:06:57.533-0400 [INFO]  CLI args: []string{\"/opt/homebrew/Cellar/tfenv/3.0.0/versions/1.14.0-beta2/terraform\", \"stacks\", \"configuration\", \"list\", \"-stack-id\", \"st-31HY1439bDRVawex\", \"-speculative\", \"true\"}\n2025-10-02T10:06:57.534-0400 [TRACE] Stdout is a terminal of width 115\n2025-10-02T10:06:57.534-0400 [TRACE] Stderr is a terminal of width 115\n2025-10-02T10:06:57.534-0400 [TRACE] Stdin is a terminal\n2025-10-02T10:06:57.534-0400 [DEBUG] Attempting to open CLI config file: /Users/manuchn/.terraformrc\n2025-10-02T10:06:57.534-0400 [DEBUG] File doesn't exist, but doesn't need to. Ignoring.\n2025-10-02T10:06:57.534-0400 [INFO]  Loading CLI configuration from /Users/manuchn/.terraform.d/credentials.tfrc.json\n2025-10-02T10:06:57.534-0400 [DEBUG] checking for credentials in \"/Users/manuchn/.terraform.d/plugins\"\n2025-10-02T10:06:57.535-0400 [DEBUG] ignoring non-existing provider search directory terraform.d/plugins           2025-10-02T10:06:57.535-0400 [DEBUG] will search for provider plugins in /Users/manuchn/.terraform.d/plugins\n2025-10-02T10:06:57.535-0400 [DEBUG] ignoring non-existing provider search directory /Users/manuchn/Library/Application Support/io.terraform/plugins\n2025-10-02T10:06:57.535-0400 [DEBUG] ignoring non-existing provider search directory /Library/Application Support/io.terraform/plugins\n2025-10-02T10:06:57.535-0400 [INFO]  CLI command args: []string{\"stacks\", \"configuration\", \"list\", \"-stack-id\", \"st-31HY1439bDRVawex\", \"-speculative\", \"true\"}\n2025-10-02T10:06:57.535-0400 [TRACE] stacksplugin hostname not set, falling back to \"app.terraform.io\"             2025-10-02T10:06:57.535-0400 [DEBUG] Service discovery for app.terraform.io at https://app.terraform.io/.well-known/terraform.json\n2025-10-02T10:06:57.745-0400 [TRACE] No stacksplugin cache path store at '.terraform/.stackspluginpath`, using default '/Users/manuchn/.terraform.d/stacksplugin'\n2025-10-02T10:06:57.745-0400 [TRACE] stacksplugin cache directory found at \"/Users/manuchn/.terraform.d/stacksplugin\"\n2025-10-02T10:06:57.747-0400 [TRACE] stacksplugin manifest cache found for host \"app.terraform.io\"\n2025-10-02T10:06:57.747-0400 [DEBUG] performing request: method=GET url=https://app.terraform.io/stacksplugin.v1/manifest.json\n2025-10-02T10:06:57.747-0400 [TRACE] HTTP client GET request to https://app.terraform.io/stacksplugin.v1/manifest.json\n2025-10-02T10:06:58.006-0400 [TRACE] wrote stacksplugin manifest cache to \"/Users/manuchn/.terraform.d/stacksplugin/app.terraform.io/manifest.json\"\n2025-10-02T10:06:58.006-0400 [TRACE] checking for stacksplugin archive for darwin_arm64. Supported architectures: [darwin_amd64 darwin_arm64 freebsd_386 freebsd_amd64 freebsd_amd linux_386 linux_amd64 linux_arm linux_arm64 netbsd_386 netbsd_amd64 netbsd_arm openbsd_386 openbsd_amd64 openbsd_arm solaris_amd64 windows_386 windows_amd64]\n2025-10-02T10:06:58.007-0400 [TRACE] plugin \"1.1.0\" binary located at \"/Users/manuchn/.terraform.d/stacksplugin/bin/darwin_arm64/tfstacks\" (resolved from cache)\n2025-10-02T10:06:58.007-0400 [DEBUG] created stacks logger: level=trace\n2025-10-02T10:06:58.008-0400 [DEBUG] stacks: starting plugin: path=/Users/manuchn/.terraform.d/stacksplugin/bin/darwin_arm64/tfstacks args=[\"/Users/manuchn/.terraform.d/stacksplugin/bin/darwin_arm64/tfstacks\"]\n2025-10-02T10:06:58.011-0400 [DEBUG] stacks: plugin started: path=/Users/manuchn/.terraform.d/stacksplugin/bin/darwin_arm64/tfstacks pid=87663\n2025-10-02T10:06:58.011-0400 [DEBUG] stacks: waiting for RPC address: plugin=/Users/manuchn/.terraform.d/stacksplugin/bin/darwin_arm64/tfstacks\n2025-10-02T10:06:58.025-0400 [DEBUG] stacks: using plugin: version=1\n2025-10-02T10:06:58.025-0400 [DEBUG] stacks.tfstacks: plugin address: address=/var/folders/xb/b1nrh4n54pv07flx5flrf1l40000gq/T/plugin3232583562 network=unix timestamp=2025-10-02T10:06:58.024-0400\n2025-10-02T10:06:58.026-0400 [TRACE] stacks.stdio: waiting for stdio data\n2025-10-02T10:06:58.028-0400 [TRACE] stacks.tfstacks: Plugin Execute with args [configuration list -stack-id st-31HY1439bDRVawex -speculative true]: timestamp=2025-10-02T10:06:58.028-0400\n2025-10-02T10:06:58.334-0400 [TRACE] stacks.tfstacks: sending command response to stderr: \"invalid arguments: flag provided but not defined: -speculative\\n\": timestamp=2025-10-02T10:06:58.334-0400\n2025-10-02T10:06:58.334-0400 [TRACE] stacks.tfstacks: sending command response to stderr: \"\\n\": timestamp=2025-10-02T10:06:58.334-0400\n2025-10-02T10:06:58.334-0400 [TRACE] stacks.tfstacks: Plugin Execute sending ExitCode 1: timestamp=2025-10-02T10:06:58.334-0400\n2025-10-02T10:06:58.334-0400 [INFO]  stacks.tfstacks: Context cancelled, initiating graceful shutdown: timestamp=2025-10-02T10:06:58.334-0400\ninvalid arguments: flag provided but not defined: -speculative\n\n2025-10-02T10:06:58.335-0400 [TRACE] received exit code: 1\n2025-10-02T10:06:58.337-0400 [DEBUG] stacks.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2025-10-02T10:06:58.340-0400 [INFO]  stacks: plugin process exited: plugin=/Users/manuchn/.terraform.d/stacksplugin/bin/darwin_arm64/tfstacks id=87663\n2025-10-02T10:06:58.340-0400 [DEBUG] stacks: plugin exited\n\n\n```\n\n\n### Expected Behavior\n\nThe configuration should be uploaded with no deployments triggered based on the documentation.\n\n### Actual Behavior\n\nThe command fails on all the below permutations\n\n```\n```\n\u276f tf stacks configuration list -stack-id st-31HY1439bDRVawex -speculative=true\ninvalid arguments: flag provided but not defined: -speculative\n\n\n\u276f tf stacks configuration list -stack-id st-31HY1439bDRVawex -speculative true\ninvalid arguments: flag provided but not defined: -speculative\n\n\u276f tf stacks configuration list -stack-id st-31HY1439bDRVawex -speculative\ninvalid arguments: flag provided but not defined: -speculative\n```\n\n\n```\n\n### Steps to Reproduce\n\n1. Create a stack in HCP Terraform using `terraform stacks create ...`\n2. Upload the configuration from a directory with the necessary files after initializing the stack. You can use https://github.com/quixoticmonk/hashiconf-stack as a sample stack.\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-10-02T14:09:12Z",
      "closed_at": "2025-10-02T14:49:53Z",
      "url": "https://github.com/hashicorp/terraform/issues/37719",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37720,
      "title": "Terraform v1.13.3 \"The true and false result expressions must have consistent types\". Object variable",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.3\non windows_amd64\n+ provider registry.terraform.io/hashicorp/google v6.49.2\n```\n\n### Terraform Configuration Files\n\nThe check on for_each is need when there is no entries on yaml file. The problem is that this check produces the error ahead when I have two cloud runs with different specs.\n\n```terraform\n\nlocals {\n  runjob = yamldecode(file(\"./yaml/runjob.yaml\"))\n}\n\nmodule \"runjob\" {\nsource                = \"git::https://github.com/danilomnds/terraform-gcp-cloud-run-job?ref=v1.1.0\"\n  # check \n  for_each              = (local.runjob.runjob) == null ? {} : local.runjob.runjob\n  name                  = lookup(each.value, \"name\", null) == null ? each.key : lookup(each.value, \"name\", null)\n  template              = each.value.template\n  location              = each.value.location\n  labels                = each.value.labels\n  annotations           = lookup(each.value, \"annotations\", null)\n  client                = lookup(each.value, \"client\", null)\n  client_version        = lookup(each.value, \"client_version\", null)\n  launch_stage          = lookup(each.value, \"launch_stage\", null)\n  binary_authorization  = lookup(each.value, \"binary_authorization\", null)\n  start_execution_token = lookup(each.value, \"start_execution_token\", null)\n  run_execution_token   = lookup(each.value, \"run_execution_token\", null)\n  project               = var.project\n  members               = lookup(each.value, \"run_execution_token\", [])\n  scheduler_jobs_admin  = lookup(each.value, \"scheduler_jobs_admin\", false)\n  deletion_protection   = lookup(each.value, \"deletion_protection\", null)  \n}\noutput \"runjob\" {\n  value = { for name, id in module.runjob : name => id.id }\n}\n...terraform config...\n```\n\nTrying to create two cloud runs. One does integrate with a VPC while the other one no. \n\n```yaml\nrunjob:\n  runjob-bigdata-dev-1:\n    name: \"runjob-bigdata-dev-1\"\n    location: \"us-east1\"\n    template: \n      template: \n        containers: \n          name: \"democontainer\"\n          image: \"us-docker.pkg.dev/cloudrun/container/job:latest\"\n          resources:\n            limits:\n              cpu: 1000m\n              memory: \"1Gi\"\n          vpc_access:\n            network_interfaces:\n              network: \"tim-cloud-hdev\"\n              subnetwork: \"us-east1\"\n    labels: \n      system: \"your system\"\n  runjob-bigdata-dev-2:\n    name: \"runjob-bigdata-dev-2\"\n    location: \"us-east1\"\n    template: \n      template: \n        containers: \n          name: \"democontainer\"\n          image: \"us-docker.pkg.dev/cloudrun/container/job:latest\"\n          resources:\n            limits:\n              cpu: 1000m\n              memory: \"1Gi\"          \n    labels: \n      system: \"your system\"\n```\n\n### Debug Output\n\n```\n2025-10-02T12:38:03.396-0300 [TRACE] dag/walk: upstream of \"module.runjob.output.id (expand)\" errored, so skipping\n2025-10-02T12:38:03.396-0300 [TRACE] dag/walk: upstream of \"module.runjob.google_project_iam_member.CustomCloudRunDeveloper\" errored, so skipping\n2025-10-02T12:38:03.396-0300 [TRACE] dag/walk: upstream of \"module.runjob.google_project_iam_member.CloudSchedulerAdmin\" errored, so skipping\n2025-10-02T12:38:03.396-0300 [TRACE] dag/walk: upstream of \"provider[\\\"registry.terraform.io/hashicorp/google\\\"] (close)\" errored, so skipping\n2025-10-02T12:38:03.396-0300 [TRACE] dag/walk: upstream of \"module.runjob (close)\" errored, so skipping\n2025-10-02T12:38:03.396-0300 [TRACE] dag/walk: upstream of \"output.runjob (expand)\" errored, so skipping\n2025-10-02T12:38:03.396-0300 [TRACE] dag/walk: upstream of \"root\" errored, so skipping\nReleasing state lock. This may take a few moments...\n\u2577\n\u2502 Error: Inconsistent conditional result types\n\u2502\n\u2502   on runjob.tf line 7, in module \"runjob\":\n\u2502    7:   for_each              = (local.runjob.runjob) == null ? {} : local.runjob.runjob\n\u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502     \u2502 local.runjob.runjob is object with 2 attributes\n\u2502\n\u2502 The true and false result expressions must have consistent types. The 'false' value includes object attribute \"runjob-bigdata-dev-1\", which is absent in the 'true' value.\n\u2575\n2025-10-02T12:38:04.182-0300 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2025-10-02T12:38:04.192-0300 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/google/6.49.2/windows_amd64/terraform-provider-google_v6.49.2_x5.exe id=31192\n2025-10-02T12:38:04.192-0300 [DEBUG] provider: plugin exited\n\n[terraform.log](https://github.com/user-attachments/files/22663276/terraform.log)\n\n```\n\n\n### Expected Behavior\n\nI want to check whether the runjob.yaml file is empty. If it's empty, the system should either:\n- Do nothing, if no resources were previously created.\n- Delete the last remaining resource, if this is the final cleanup step.\n\nif yaml is like this\n\n```yaml\nrunjob:\n```\n\nOn terraform \"do nothing\"\n\n```terraform\nfor_each              = (local.runjob.runjob) == null ? {} : local.runjob.runjob\n```\n\nIf yaml is like this\n\n```yaml\nrunjob:\n   runjob-bigdata-dev-1:\n    name: \"runjob-bigdata-dev-1\"\n    runjob-bigdata-dev-2:\n    name: \"runjob-bigdata-dev-2\"\n```\n\nOn terraform \"go ahead\" on resource creation/deletion/update\n\n```terraform\nfor_each              = (local.runjob.runjob) == null ? {} : local.runjob.runjob\n```\n\n### Actual Behavior\n\n```PS\nPS C:\\Users\\F8082011\\OneDrive - TIM\\TIM\\Cloud\\Azure\\Azure Devops\\gcp-fasttrack-bigdata\\environments\\fqa\\runjob> terraform plan       \n\u2577\n\u2502 Error: Inconsistent conditional result types\n\u2502\n\u2502   on runjob.tf line 7, in module \"runjob\":\n\u2502    7:   for_each              = (local.runjob.runjob) == null ? {} : local.runjob.runjob\n\u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502     \u2502 local.runjob.runjob is object with 2 attributes\n\u2502\n\u2502 The true and false result expressions must have consistent types. The 'false' value includes object attribute \"runjob-bigdata-dev-1\", which is absent in the 'true' value.\n```\n\n### Steps to Reproduce\n\n1. terraform init\n2. terraform apply\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-10-02T15:52:22Z",
      "closed_at": "2025-10-02T17:09:57Z",
      "url": "https://github.com/hashicorp/terraform/issues/37720",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37712,
      "title": "Unable to run Terraform apply command using generated Terraform Query output file",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.14.0-beta2\n```\n\n### Terraform Configuration Files\n\n```terraform\nterraform {\n  required_version = \">=1.14.0\"\n\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"=6.14.1\"\n    }\n  }\n}\n```\n\n\n### Debug Output\n\n[terraform-debug.log](https://github.com/user-attachments/files/22645091/terraform-debug.log)\n\n### Expected Behavior\n\nAfter generating a config output containing unmanaged AWS EC2 instances using the ```terraform query -generate-config-out=\"generated.tf\"``` command, one should be able to seamlessly use the ```terraform apply``` command to import those resources into state (as referenced in the [documentation](https://developer.hashicorp.com/terraform/language/v1.14.x/import/bulk)).\n\n### Actual Behavior\n\nThe following error messages are received after running a ```terraform apply``` with the resources retrieved from the ```terraform query``` command:\n\n```terraform\nError: Conflicting configuration arguments\n\u2502 \n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 5, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502    5: resource \"aws_instance\" \"unmanaged_0\" {\n\u2502 \n\u2502 \"primary_network_interface\": conflicts with associate_public_ip_address\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502 \n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 8, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502    8:   arn                                  = \"arn:aws:ec2:us-east-1:008971679752:instance/i-045ff1be5987fe244\"\n\u2502 \n\u2502 Can't configure a value for \"arn\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Invalid or unknown key\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 19, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   19:   id                                   = \"i-045ff1be5987fe244\"\n\u2502\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 21, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   21:   instance_lifecycle                   = \"\"\n\u2502\n\u2502 Can't configure a value for \"instance_lifecycle\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 22, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   22:   instance_state                       = \"running\"\n\u2502\n\u2502 Can't configure a value for \"instance_state\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Conflicting configuration arguments\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 24, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   24:   ipv6_address_count                   = 0\n\u2502\n\u2502 \"ipv6_address_count\": conflicts with ipv6_addresses\n\u2575\n\u2577\n\u2502 Error: Conflicting configuration arguments\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 25, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   25:   ipv6_addresses                       = []\n\u2502\n\u2502 \"ipv6_addresses\": conflicts with ipv6_address_count\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 28, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   28:   outpost_arn                          = \"\"\n\u2502\n\u2502 Can't configure a value for \"outpost_arn\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 29, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   29:   password_data                        = \"\"\n\u2502\n\u2502 Can't configure a value for \"password_data\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Conflicting configuration arguments\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 30, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   30:   placement_group                      = \"\"\n\u2502\n\u2502 \"placement_group\": conflicts with placement_group_id\n\u2575\n\u2577\n\u2502 Error: Conflicting configuration arguments\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 31, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   31:   placement_group_id                   = \"\"\n\u2502\n\u2502 \"placement_group_id\": conflicts with placement_group\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 33, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   33:   primary_network_interface_id         = \"eni-010b5e8457d1f4a7d\"\n\u2502\n\u2502 Can't configure a value for \"primary_network_interface_id\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 34, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   34:   private_dns                          = \"ip-172-31-24-116.ec2.internal\"\n\u2502\n\u2502 Can't configure a value for \"private_dns\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 36, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   36:   public_dns                           = \"ec2-98-81-220-39.compute-1.amazonaws.com\"\n\u2502\n\u2502 Can't configure a value for \"public_dns\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 37, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   37:   public_ip                            = \"98.81.220.39\"\n\u2502\n\u2502 Can't configure a value for \"public_ip\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 42, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   42:   spot_instance_request_id             = \"\"\n\u2502\n\u2502 Can't configure a value for \"spot_instance_request_id\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: expected amd_sev_snp to be one of [\"enabled\" \"disabled\"], got \n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 61, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   61:     amd_sev_snp      = \"\"\n\u2502\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 92, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   92:     device_name           = \"/dev/xvda\"\n\u2502\n\u2502 Can't configure a value for \"root_block_device.0.device_name\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_0,\n\u2502   on generated.tf line 99, in resource \"aws_instance\" \"unmanaged_0\":\n\u2502   99:     volume_id             = \"vol-020ccf4da80153897\"\n\u2502\n\u2502 Can't configure a value for \"root_block_device.0.volume_id\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Conflicting configuration arguments\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 121, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  121: resource \"aws_instance\" \"unmanaged_1\" {\n\u2502\n\u2502 \"primary_network_interface\": conflicts with associate_public_ip_address\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 124, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  124:   arn                                  = \"arn:aws:ec2:us-east-1:008971679752:instance/i-00a7d7f5d63a75c18\"\n\u2502\n\u2502 Can't configure a value for \"arn\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Invalid or unknown key\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 135, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  135:   id                                   = \"i-00a7d7f5d63a75c18\"\n\u2502\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 137, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  137:   instance_lifecycle                   = \"\"\n\u2502\n\u2502 Can't configure a value for \"instance_lifecycle\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 138, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  138:   instance_state                       = \"running\"\n\u2502\n\u2502 Can't configure a value for \"instance_state\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Conflicting configuration arguments\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 140, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  140:   ipv6_address_count                   = 0\n\u2502\n\u2502 \"ipv6_address_count\": conflicts with ipv6_addresses\n\u2575\n\u2577\n\u2502 Error: Conflicting configuration arguments\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 141, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  141:   ipv6_addresses                       = []\n\u2502\n\u2502 \"ipv6_addresses\": conflicts with ipv6_address_count\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 144, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  144:   outpost_arn                          = \"\"\n\u2502\n\u2502 Can't configure a value for \"outpost_arn\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 145, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  145:   password_data                        = \"\"\n\u2502\n\u2502 Can't configure a value for \"password_data\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Conflicting configuration arguments\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 146, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  146:   placement_group                      = \"\"\n\u2502\n\u2502 \"placement_group\": conflicts with placement_group_id\n\u2575\n\u2577\n\u2502 Error: Conflicting configuration arguments\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 147, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  147:   placement_group_id                   = \"\"\n\u2502\n\u2502 \"placement_group_id\": conflicts with placement_group\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 149, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  149:   primary_network_interface_id         = \"eni-08a0064b9979e6432\"\n\u2502\n\u2502 Can't configure a value for \"primary_network_interface_id\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 150, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  150:   private_dns                          = \"ip-172-31-18-31.ec2.internal\"\n\u2502\n\u2502 Can't configure a value for \"private_dns\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 152, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  152:   public_dns                           = \"ec2-34-228-168-227.compute-1.amazonaws.com\"\n\u2502\n\u2502 Can't configure a value for \"public_dns\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 153, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  153:   public_ip                            = \"34.228.168.227\"\n\u2502\n\u2502 Can't configure a value for \"public_ip\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 158, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  158:   spot_instance_request_id             = \"\"\n\u2502\n\u2502 Can't configure a value for \"spot_instance_request_id\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: expected amd_sev_snp to be one of [\"enabled\" \"disabled\"], got \n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 177, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  177:     amd_sev_snp      = \"\"\n\u2502\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 208, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  208:     device_name           = \"/dev/xvda\"\n\u2502\n\u2502 Can't configure a value for \"root_block_device.0.device_name\": its value will be decided automatically based on the result of applying this configuration.\n\u2575\n\u2577\n\u2502 Error: Value for unconfigurable attribute\n\u2502\n\u2502   with aws_instance.unmanaged_1,\n\u2502   on generated.tf line 215, in resource \"aws_instance\" \"unmanaged_1\":\n\u2502  215:     volume_id             = \"vol-027a49e2bd34cdedf\"\n\u2502\n\u2502 Can't configure a value for \"root_block_device.0.volume_id\": its value will be decided automatically based on the result of applying this configuration.\n```\n\n### Steps to Reproduce\n\n1. Create one or more EC2 instances within AWS that are not managed by Terraform / present within the state file.\n2. Create a search.tfquery.hcl to look for unmanaged AWS instances:\n      ``` \n      list \"aws_instance\" \"unmanaged\" {\n        provider = aws\n      \n        config {\n          region = \"us-east-1\"\n      \n          filter {\n            name   = \"tag:ManagedBy\"\n            values = [\"unmanaged\"]\n          }\n      \n          filter {\n            name   = \"instance-state-name\"\n            values = [\"running\"]\n          }\n        }\n      }\n      ``` \n3. Run the ```terraform query -generate-config-out=\"./generated.tf``` command in order to generate the required Terraform code to import the unmanged resources.\n4. Run a ```terraform apply``` command.\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug"
      ],
      "created_at": "2025-10-01T17:00:20Z",
      "closed_at": "2025-10-01T20:45:05Z",
      "url": "https://github.com/hashicorp/terraform/issues/37712",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37684,
      "title": "Issue While | Building VMs using same IP (again) removing previous | TFE | module \"gce_instance\"",
      "problem": "### Terraform Version\n\n```shell\n1.7.4\n```\n\n### Terraform Configuration Files\n\nmodule \"gce_instance_app\" {\n  source  = \"tfe.example.com/org/compute/google\"\n  version = \"0.1.16\"\n  name                       = \"app\"\n  project_id                 = \"example-project-id\"\n  zone                       = \"us-central1-a\"\n  boot_disk_size             = 75\n  machine_type               = \"n2-standard-8\"\n  boot_disk_type             = \"pd-standard\"\n  service_account_email      = \"EMAIL\"\n  additional_service_scopes  = []\n  # min_cpu_platform           = var.min_cpu_platform\n  subnetwork                 = \"projects/example-project-id/regions/us-central1/subnetworks/example-subnet\"\n  static_ip                  = \"192.168.16.254\"\n  vpc                        = \"example-vpc\"\n  image_id                   = \"custom-image-id\"\n  google_kms_key_ring        = \"example-key-ring\"\n  google_kms_crypto_key      = \"example-crypto-key\"\n  key_ring_location          = \"us-central1\"\n  additional_network_tags    = []\n  network_tags               = [\"allow-health-check\",\"allow-i-health-check\",\"custom-tag-1\",\"custom-tag-2\"]\n  startup_script             = templatefile(\"./init-platform-playwright.sh\", { user = \"some\", testEnabled = \"true\" })\n  # labels\n  app_name                   = \"example-app\"\n  app_env                    = \"dev\"\n  provisioner_repo           = \"example-repo\"\n}\n\n\n### Debug Output\n\nFE coming , If we procure the same VM again with the IP .It will start procuring , the but the things we run in startup_script: . There is residual things on the VM. In the application if we need to install podman - It will install in the first time, However in the next run with changes it fails and not runs successfully. Something is residual and not working properly.\n\n\n### Expected Behavior\n\nExpected Behavior:\nFirst Provisioning (Fresh VM):\nThe startup_script runs on a clean VM.\nAll required packages (e.g., podman) are installed.\nApplication setup completes without errors.\nSuccess messages are logged (e.g., Podman installed successfully., Startup script completed successfully.).\nSubsequent Runs (Same VM, Script Re-run):\nThe script checks if packages like podman are already installed and skips reinstallation if present.\nAny temporary or residual files from previous runs are cleaned up at the start.\nThe script is idempotent: running it multiple times does not cause failures or duplicate installations.\nSuccess messages are logged again, indicating a clean, successful run.\nOn Failure:\nIf any step fails, the script logs a clear error message and exits with a non-zero status.\nThe provisioning process reports the failure, allowing for troubleshooting.\n\n### Actual Behavior\n\nThis issue is common when reusing VMs: residual files, packages, or state from previous runs can cause idempotency problems in your startup_script. \n\nTo resolve it make your script and ensure clean, repeatable runs, But ideally it shouldn't be the case:\n1. Make your script idempotent:\nCheck if podman is already installed before installing.\nClean up or reset any files, configs, or state that may interfere with re-runs.\n2. Log success/failure clearly:\nOutput clear success messages at the end.\nExit with a non-zero code on failure.\n\n### Steps to Reproduce\n\nterraform init\nterraform apply \n#!/bin/bash\nset -e\n\necho \"Starting startup script...\"\n\n# Idempotent podman install\nif ! command -v podman &> /dev/null; then\n  echo \"Podman not found, installing...\"\n  # Example for RHEL/CentOS\n  sudo yum -y install podman\n  echo \"Podman installed successfully.\"\nelse\n  echo \"Podman already installed, skipping.\"\nfi\n\n# Clean up residual files (example)\nrm -rf /tmp/my-app-tmp || true\n\n# Your app setup here...\n\necho \"Startup script completed successfully.\"\nexit 0\n\non the config provided with the same IP \n for the setting provided.\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "question",
        "provider/google",
        "new"
      ],
      "created_at": "2025-09-26T11:23:30Z",
      "closed_at": "2025-09-26T13:28:15Z",
      "url": "https://github.com/hashicorp/terraform/issues/37684",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37203,
      "title": "(maybe) 1.12 S3 Backend (nonAWS) Regression: skip_s3_checksum ignored?",
      "problem": "### Terraform Version\n\n```shell\n1.12.1\n```\n\n### Terraform Configuration Files\n\n```terraform\n# Configure TF remote-state\nterraform {\n  backend \"s3\" {\n    bucket = \"tf-state-terraform-myorg\"\n    key    = \"org/prod/project/.terraform.tfstate\"\n    region = \"somewhere\" # Required, but in our case ignored\n    #access_key = ENV_AWS_ACCESS_KEY_ID # set in env, not via tf\n    #secret_key = ENV_AWS_SECRET_ACCESS_KEY # set in env, not via tf\n    skip_credentials_validation = true\n    skip_region_validation      = true\n    skip_requesting_account_id  = true\n    skip_metadata_api_check     = true\n    skip_s3_checksum            = true\n    endpoints = {\n      s3 = \"https://internal-s3.prod.m/\" # our custom internal S3\n    }\n    use_path_style = true\n  }\n}\n```\nToday we migrated a project from using a consul backend to an s3 backend. \n\nAfter running `terraform-init -migrate-state`, I immediately see issues with checksums showing up in the state even though the option to skip checksums is enabled.\n\n````\n$ terraform init\nInitializing the backend...\n\u2577\n\u2502 Error: Error refreshing state: 2 problems:\n\u2502\n\u2502 - Unsupported state file format: The state file could not be parsed as JSON: syntax error at byte offset 9.\n\u2502 - Unsupported state file format: The state file does not have a \"version\" attribute, which is required to identify the format version.\n\n````\nSure enough, if I manually pull the state file, I can see things like this in the middle of my nice JSON state:\n````json\n5000\n{\n    \"version\": 4,\n...\n          },\n     \n0\nx-amz-checksum-crc32:jcuQew==\n\n1d37ef\n     \"sensitive_attributes\": [],\n   ...\n} \n````\n\nI know this was an issue in earlier TF versions, but we successfully set up a project in terraform 1.8 using the S3 provider. This is the first project on TF 1.12 to get moved to S3 from consul. \n\nI considered moving the 1.12 project to 1.8, but that seems like a lot of work, and I'm more posting this out of curiosity to see if anyone else has had this issue come up.\n\nAlso, I even tried fixing the state manually after migration (cleaning out checksum stuff) and uploading a cleaned state copy. This gets the project in a state to plan and apply successfully, but after apply, the state will be broken again.  \n\n### Debug Output\n\n```\n...debug output, or link to a gist...\n```\n\n\n### Expected Behavior\n\nState file should have been created in S3 without any checksums.\n\n### Actual Behavior\n\nChecksums are present in the statefile uploaded to S3 bucket.\n\n### Steps to Reproduce\n\n1. Add config for S3 backend\n2. Run `terraform init -migrate-state`\n3. Run `terraform init`\n\n\n### Additional Context\n\nThis is not utilizing AWS' S3 implementation, rather a S3 variant solution, but the same bucket works with terraform 1.8.\n\n### References\n\n* https://developer.hashicorp.com/terraform/language/backend/s3#skip_s3_checksum\n* Maybe? https://github.com/hashicorp/terraform/issues/34053\n\n### Generative AI / LLM assisted development?\n\nN/A",
      "solution": "I'm having the same issue, any update or workaround on this?\n\n---\n\nAs workaround, i downgraded terraform version from 1.12 to 1.10 and is working well\n\n---\n\nHello, the checksum issue is due to a breaking change in AWS involving client-side cyclic redundancy checks, agree with @gpietrus-akamai the workaround is to set checksums to `when_required` instead of `when_supported` in the aws client configuration. I encountered the same issue when upgrading to boto3 https://github.com/boto/boto3/issues/4392\n\nhttps://aws.amazon.com/blogs/aws/introducing-default-data-integrity-protections-for-new-objects-in-amazon-s3/",
      "labels": [
        "bug",
        "backend/s3",
        "new"
      ],
      "created_at": "2025-06-03T22:34:19Z",
      "closed_at": "2025-09-23T17:44:48Z",
      "url": "https://github.com/hashicorp/terraform/issues/37203",
      "comments_count": 10
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37432,
      "title": "S3 backend does checksum validations even if `skip_s3_checksum` is set to `true`",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.12.2\non darwin_arm64\n```\n\n### Terraform Configuration Files\n\n```terraform\nterraform {\n  required_providers {\n    # OMITTED\n  }\n\n  backend \"s3\" {\n    bucket = \"test\"\n    key    = \"s3_backend.tfstate\"\n    skip_requesting_account_id = true\n    skip_credentials_validation = true\n    skip_metadata_api_check = true\n    skip_region_validation = true\n    skip_s3_checksum = true\n    use_path_style = true\n    region = \"europe-1\"\n    endpoints = {\n        s3 = \"OMITTED\"\n        iam = \"OMITTED\"\n        sts = \"OMITTED\"\n    }\n    access_key = \"OMITTED\"\n    secret_key = \"OMITTED\"\n  }\n}\n```\n\n\n### Debug Output\n\n```\n\u2577\n\u2502 Error: Failed to save state\n\u2502 \n\u2502 Error saving state: failed to upload state: operation error S3: PutObject, https response error StatusCode: 400,\n\u2502 RequestID: 647e0207:19690c004ac:1455ba:313a, HostID: 1bcb8c63283b604944d404c7f8821545c943cd2624adb874cf8f13e53c4c3165, api\n\u2502 error XAmzContentSHA256Mismatch: The Content-SHA256 you specified did not match what we received\n\u2575\n```\n\n\n### Expected Behavior\n\nContent checksums are not validated when `skip_s3_checksum` is set to `true`.\n\n### Actual Behavior\n\n`PutObject` call fails with `XAmzContentSHA256Mismatch` error.\n\n### Steps to Reproduce\n\nTry to store state in a non-aws S3 service without disabling `request_checksum_calculation` and `response_checksum_validation` options in AWS config.\n\n### Additional Context\n\nStoring the state works if `request_checksum_calculation` and `response_checksum_validation` options are set to `when_required` with environment variables:\n\n```sh\nexport AWS_REQUEST_CHECKSUM_CALCULATION=when_required\nexport AWS_RESPONSE_CHECKSUM_VALIDATION=when_required\n```\n\n### References\n\nSee AWS announcement on default integrity checks: https://github.com/aws/aws-sdk-go-v2/discussions/2960\n\n### Generative AI / LLM assisted development?\n\nNo",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "backend/s3",
        "new"
      ],
      "created_at": "2025-08-12T22:39:43Z",
      "closed_at": "2025-09-23T17:46:44Z",
      "url": "https://github.com/hashicorp/terraform/issues/37432",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37648,
      "title": "The state can not be persisted in custom S3 endpoint. The Content-SHA256 you specified did not match what we received",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.3\non linux_amd64\n+ provider registry.terraform.io/mypurecloud/genesyscloud v1.51.0\n```\n\n### Terraform Configuration Files\n\n```terraform\n backend \"s3\" {\n    key    = \"state-name\"\n    bucket = \"terraform-states\"\n    endpoints = {\n      s3  = \"https://custom_s3.server.com\"\n      sts = \"https://custom_s3.server.com\"\n\n    }\n    region                                   = \"eu-de\"\n    skip_region_validation          = true\n    skip_credentials_validation   = true\n    skip_requesting_account_id  = true\n    skip_metadata_api_check      = true\n    skip_s3_checksum                  = true\n\n  }\n```\n\n### Debug Output\n\n```\n2025-09-20T10:56:01.536+0200 [INFO]  Terraform version: 1.13.3\n2025-09-20T10:56:01.537+0200 [DEBUG] using github.com/hashicorp/go-tfe v1.74.1\n2025-09-20T10:56:01.537+0200 [DEBUG] using github.com/hashicorp/hcl/v2 v2.24.0\n2025-09-20T10:56:01.537+0200 [DEBUG] using github.com/hashicorp/terraform-svchost v0.1.1\n2025-09-20T10:56:01.538+0200 [DEBUG] using github.com/zclconf/go-cty v1.16.3\n2025-09-20T10:56:01.538+0200 [INFO]  Go runtime version: go1.24.5\n2025-09-20T10:56:01.538+0200 [INFO]  CLI args: []string{\"terraform\", \"state\", \"push\", \"errored.tfstate\"}\n2025-09-20T10:56:01.538+0200 [TRACE] Stdout is a terminal of width 164\n2025-09-20T10:56:01.538+0200 [TRACE] Stderr is a terminal of width 164\n2025-09-20T10:56:01.538+0200 [TRACE] Stdin is a terminal\n2025-09-20T10:56:01.539+0200 [DEBUG] Attempting to open CLI config file: /home/.terraformrc\n2025-09-20T10:56:01.539+0200 [DEBUG] File doesn't exist, but doesn't need to. Ignoring.\n2025-09-20T10:56:01.540+0200 [DEBUG] ignoring non-existing provider search directory terraform.d/plugins\n2025-09-20T10:56:01.540+0200 [DEBUG] ignoring non-existing provider search directory /home/.terraform.d/plugins\n2025-09-20T10:56:01.540+0200 [DEBUG] ignoring non-existing provider search directory /home/.local/share/terraform/plugins\n2025-09-20T10:56:01.540+0200 [DEBUG] ignoring non-existing provider search directory /usr/local/share/terraform/plugins\n2025-09-20T10:56:01.540+0200 [DEBUG] ignoring non-existing provider search directory /usr/share/terraform/plugins\n2025-09-20T10:56:01.540+0200 [DEBUG] ignoring non-existing provider search directory /var/lib/snapd/desktop/terraform/plugins\n2025-09-20T10:56:01.542+0200 [INFO]  CLI command args: []string{\"state\", \"push\", \"errored.tfstate\"}\n2025-09-20T10:56:01.676+0200 [TRACE] Meta.Backend: BackendOpts.Config not set, so using settings loaded from settings.tf:8,3-15\n2025-09-20T10:56:01.676+0200 [TRACE] Meta.Backend: built configuration for \"s3\" backend with hash value 2607543200\n2025-09-20T10:56:01.680+0200 [TRACE] Meta.Backend: working directory was previously initialized for \"s3\" backend\n2025-09-20T10:56:01.681+0200 [TRACE] Meta.Backend: using already-initialized, unchanged \"s3\" backend configuration\n2025-09-20T10:56:01.681+0200 [TRACE] backend-s3.aws-base: Resolving AWS configuration: tf_backend.operation=Configure tf_backend.req_id=2384ff8a-c177-f177-f02b-0c5e291d08ed tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name\n2025-09-20T10:56:01.681+0200 [DEBUG] backend-s3.aws-base: Resolving credentials provider: tf_backend.operation=Configure tf_backend.req_id=2384ff8a-c177-f177-f02b-0c5e291d08ed tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name\n2025-09-20T10:56:01.681+0200 [TRACE] backend-s3.aws-base: Building default HTTP client: tf_backend.operation=Configure tf_backend.req_id=2384ff8a-c177-f177-f02b-0c5e291d08ed tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name\n2025-09-20T10:56:01.682+0200 [DEBUG] backend-s3.aws-base: Loading configuration: tf_backend.operation=Configure tf_backend.req_id=2384ff8a-c177-f177-f02b-0c5e291d08ed tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name\n2025-09-20T10:56:01.682+0200 [DEBUG] backend-s3.aws-base: Retrieving credentials: tf_backend.operation=Configure tf_backend.req_id=2384ff8a-c177-f177-f02b-0c5e291d08ed tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name\n2025-09-20T10:56:01.682+0200 [INFO]  backend-s3.aws-base: Retrieved credentials: tf_backend.operation=Configure tf_backend.req_id=2384ff8a-c177-f177-f02b-0c5e291d08ed tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name tf_aws.credentials_source=EnvConfigCredentials\n2025-09-20T10:56:01.682+0200 [TRACE] backend-s3.aws-base: Building default HTTP client: tf_backend.operation=Configure tf_backend.req_id=2384ff8a-c177-f177-f02b-0c5e291d08ed tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name\n2025-09-20T10:56:01.683+0200 [DEBUG] backend-s3.aws-base: Loading configuration: tf_backend.operation=Configure tf_backend.req_id=2384ff8a-c177-f177-f02b-0c5e291d08ed tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name\n2025-09-20T10:56:01.683+0200 [TRACE] Meta.Backend: instantiated backend of type *s3.Backend\n2025-09-20T10:56:01.688+0200 [TRACE] providercache.fillMetaCache: scanning directory .terraform/providers\n2025-09-20T10:56:01.740+0200 [TRACE] getproviders.SearchLocalDirectory: found registry.terraform.io/mypurecloud/genesyscloud v1.51.0 for linux_amd64 at .terraform/providers/registry.terraform.io/mypurecloud/genesyscloud/1.51.0/linux_amd64\n2025-09-20T10:56:01.793+0200 [TRACE] providercache.fillMetaCache: including .terraform/providers/registry.terraform.io/mypurecloud/genesyscloud/1.51.0/linux_amd64 as a candidate package for registry.terraform.io/mypurecloud/genesyscloud 1.51.0\n2025-09-20T10:56:02.198+0200 [DEBUG] checking for provisioner in \".\"\n2025-09-20T10:56:02.206+0200 [DEBUG] checking for provisioner in \"/usr/bin\"\n2025-09-20T10:56:02.208+0200 [TRACE] Meta.Backend: backend *s3.Backend does not support operations, so wrapping it in a local backend\n2025-09-20T10:56:02.211+0200 [DEBUG] backend-s3: HTTP Request Sent: aws.region=eu-de aws.s3.bucket=terraform-states rpc.method=ListObjectsV2 rpc.service=S3 rpc.system=aws-api tf_aws.custom_endpoint=true tf_aws.sdk=aws-sdk-go-v2 tf_backend.operation=Workspaces tf_backend.req_id=a6d5c99d-85d1-a37c-7f74-5f6704d8ba7a tf_backend.s3.bucket=terraform-states tf_backend.workspace-prefix=env:/ net.peer.name=terraform-states.custom_s3.server.com http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.13.3 (+https://www.terraform.io) aws-sdk-go-v2/1.36.0 ua/2.1 os/linux lang/go#1.24.5 md/GOOS#linux md/GOARCH#amd64 api/s3#1.75.2 m/C\" http.request.header.amz_sdk_invocation_id=26923320-8079-416f-8eb4-b629c9dac087 http.request.header.x_amz_content_sha256=e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 http.request.body=\"\" http.method=GET http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=d5094117fa03f04c4a065715fe30a4dd-cim.storage/20250920/eu-de/s3/aws4_request, SignedHeaders=accept-encoding;amz-sdk-invocation-id;amz-sdk-request;host;x-amz-content-sha256;x-amz-date, Signature=*****\" http.request.header.accept_encoding=identity http.request.header.amz_sdk_request=\"attempt=1; max=5\" http.request.header.x_amz_date=20250920T085602Z http.url=\"https://terraform-states.custom_s3.server.com/?list-type=2&max-keys=1000&prefix=env%3A%2F\"\n2025-09-20T10:56:02.555+0200 [DEBUG] backend-s3: HTTP Response Received: aws.region=eu-de aws.s3.bucket=terraform-states rpc.method=ListObjectsV2 rpc.service=S3 rpc.system=aws-api tf_aws.custom_endpoint=true tf_aws.sdk=aws-sdk-go-v2 tf_backend.operation=Workspaces tf_backend.req_id=a6d5c99d-85d1-a37c-7f74-5f6704d8ba7a tf_backend.s3.bucket=terraform-states tf_backend.workspace-prefix=env:/ http.status_code=200 http.response_content_length=332 http.response.header.date=\"Sat, 20 Sep 2025 08:56:02 GMT\" http.response.header.x_emc_retention_period=0 http.response.header.content_type=application/xml http.response.header.x_amz_request_id=8abebcbb:1981cebf62f:112b5c:41b7 http.response.header.x_amz_id_2=360bfb2e2c12e8198e73cb8709d10af6fbbb21b02a7aebc78f921210f8bdb7af\n  http.response.body=\n  | <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ListBucketResult xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\"><Name>terraform-states</Name><Prefix>env:/</Prefix><KeyCount>0</KeyCount><MaxKeys>1000</MaxKeys><IsTruncated>false</IsTruncated><ServerSideEncryptionEnabled>false</ServerSideEncryptionEnabled></ListBucketResult>\n   http.duration=343\n2025-09-20T10:56:02.556+0200 [INFO]  backend-s3: Downloading remote state: tf_backend.operation=Get tf_backend.req_id=10271ac7-e208-aa49-72e7-a135c1918eb5 tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name\n2025-09-20T10:56:02.557+0200 [DEBUG] backend-s3: HTTP Request Sent: aws.region=eu-de aws.s3.bucket=terraform-states aws.s3.key=state-file-name rpc.method=HeadObject rpc.service=S3 rpc.system=aws-api tf_aws.custom_endpoint=true tf_aws.sdk=aws-sdk-go-v2 tf_backend.operation=Get tf_backend.req_id=10271ac7-e208-aa49-72e7-a135c1918eb5 tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name net.peer.name=terraform-states.custom_s3.server.com http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.13.3 (+https://www.terraform.io) aws-sdk-go-v2/1.36.0 ua/2.1 os/linux lang/go#1.24.5 md/GOOS#linux md/GOARCH#amd64 api/s3#1.75.2\" http.request.header.amz_sdk_request=\"attempt=1; max=5\" http.request.header.x_amz_content_sha256=e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 http.request.header.amz_sdk_invocation_id=4b6fc905-471f-463e-bfd1-1e2548786c48 http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=d5094117fa03f04c4a065715fe30a4dd-cim.storage/20250920/eu-de/s3/aws4_request, SignedHeaders=accept-encoding;amz-sdk-invocation-id;amz-sdk-request;host;x-amz-content-sha256;x-amz-date, Signature=*****\" http.request.header.x_amz_date=20250920T085602Z http.request.header.accept_encoding=identity http.request.body=\"\" http.method=HEAD http.url=https://terraform-states.custom_s3.server.com/state-file-name\n2025-09-20T10:56:02.626+0200 [DEBUG] backend-s3: HTTP Response Received: aws.region=eu-de aws.s3.bucket=terraform-states aws.s3.key=state-file-name rpc.method=HeadObject rpc.service=S3 rpc.system=aws-api tf_aws.custom_endpoint=true tf_aws.sdk=aws-sdk-go-v2 tf_backend.operation=Get tf_backend.req_id=10271ac7-e208-aa49-72e7-a135c1918eb5 tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name http.duration=68 http.response_content_length=305196 http.response.header.x_emc_mtime=1748852109425 http.response.header.content_type=application/json http.response.header.date=\"Sat, 20 Sep 2025 08:56:02 GMT\" http.response.header.x_amz_request_id=8abebc54:198183edc60:10f216:6076 http.response.header.last_modified=\"Mon, 02 Jun 2025 08:15:09 GMT\" http.status_code=200 http.response.header.x_amz_id_2=929c3c355e96e938744782a8b828458ef9219bce593d21be1f8b21ef78d18869 http.response.header.etag=\"\\\"18f8f1a668c834f364b87c19d883f67a\\\"\" http.response.body=\"\"\n2025-09-20T10:56:02.628+0200 [DEBUG] backend-s3: HTTP Request Sent: aws.region=eu-de aws.s3.bucket=terraform-states aws.s3.key=state-file-name rpc.method=GetObject rpc.service=S3 rpc.system=aws-api tf_aws.custom_endpoint=true tf_aws.sdk=aws-sdk-go-v2 tf_backend.operation=Get tf_backend.req_id=10271ac7-e208-aa49-72e7-a135c1918eb5 tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name http.request.header.x_amz_content_sha256=e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 http.request.header.accept_encoding=identity http.request.body=\"\" http.method=GET http.url=https://terraform-states.custom_s3.server.com/state-file-name?x-id=GetObject http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.13.3 (+https://www.terraform.io) aws-sdk-go-v2/1.36.0 ua/2.1 os/linux lang/go#1.24.5 md/GOOS#linux md/GOARCH#amd64 api/s3#1.75.2 ft/s3-transfer m/G,b\" http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=d5094117fa03f04c4a065715fe30a4dd-cim.storage/20250920/eu-de/s3/aws4_request, SignedHeaders=accept-encoding;amz-sdk-invocation-id;amz-sdk-request;host;range;x-amz-checksum-mode;x-amz-content-sha256;x-amz-date, Signature=*****\" http.request.header.x_amz_date=20250920T085602Z http.request.header.x_amz_checksum_mode=ENABLED http.request.header.amz_sdk_invocation_id=5c781bb6-77e9-4157-b5de-0d2b4e505e05 http.request.header.range=bytes=0-5242879 net.peer.name=terraform-states.custom_s3.server.com http.request.header.amz_sdk_request=\"attempt=1; max=5\"\n2025-09-20T10:56:02.726+0200 [DEBUG] backend-s3: HTTP Response Received: aws.region=eu-de aws.s3.bucket=terraform-states aws.s3.key=state-file-name rpc.method=GetObject rpc.service=S3 rpc.system=aws-api tf_aws.custom_endpoint=true tf_aws.sdk=aws-sdk-go-v2 tf_backend.operation=Get tf_backend.req_id=10271ac7-e208-aa49-72e7-a135c1918eb5 tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name http.duration=96 http.status_code=206 http.response_content_length=305196 http.response.header.x_emc_mtime=1748852109425 http.response.header.etag=\"\\\"18f8f1a668c834f364b87c19d883f67a\\\"\" http.response.header.last_modified=\"Mon, 02 Jun 2025 08:15:09 GMT\" http.response.header.content_type=application/json http.response.header.x_amz_request_id=8abebc4c:198183027fb:10f978:7134 http.response.header.accept_ranges=bytes http.response.header.date=\"Sat, 20 Sep 2025 08:56:02 GMT\" http.response.header.x_amz_id_2=929c3c355e96e938744782a8b828458ef9219bce593d21be1f8b21ef78d18869 http.response.header.content_range=\"bytes 0-305195/305196\" http.response.body=\"[Redacted: 298.0 KB (305,196 bytes), Type: application/json]\"\n2025-09-20T10:56:02.726+0200 [WARN]  backend-s3: Response has no supported checksum. Not validating response payload.: aws.region=eu-de aws.s3.bucket=terraform-states aws.s3.key=state-file-name rpc.method=GetObject rpc.service=S3 rpc.system=aws-api tf_aws.sdk=aws-sdk-go-v2 tf_backend.operation=Get tf_backend.req_id=10271ac7-e208-aa49-72e7-a135c1918eb5 tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name\n2025-09-20T10:56:02.923+0200 [DEBUG] states/remote: state read serial is: 23; serial is: 24\n2025-09-20T10:56:02.924+0200 [DEBUG] states/remote: state read lineage is: bfe049f9-3de7-ae4d-29f3-db3e3608aca8; lineage is: bfe049f9-3de7-ae4d-29f3-db3e3608aca8\n2025-09-20T10:56:02.934+0200 [INFO]  backend-s3: Uploading remote state: tf_backend.operation=Put tf_backend.req_id=34c945f2-1169-224a-b98a-7b8c5937dad1 tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name\n2025-09-20T10:56:02.935+0200 [DEBUG] backend-s3: HTTP Request Sent: aws.region=eu-de aws.s3.bucket=terraform-states aws.s3.key=state-file-name rpc.method=PutObject rpc.service=S3 rpc.system=aws-api tf_aws.custom_endpoint=true tf_aws.sdk=aws-sdk-go-v2 tf_backend.operation=Put tf_backend.req_id=34c945f2-1169-224a-b98a-7b8c5937dad1 tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name http.method=PUT http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.13.3 (+https://www.terraform.io) aws-sdk-go-v2/1.36.0 ua/2.1 os/linux lang/go#1.24.5 md/GOOS#linux md/GOARCH#amd64 api/s3#1.75.2 ft/s3-transfer m/G,Z\" http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=d5094117fa03f04c4a065715fe30a4dd-cim.storage/20250920/eu-de/s3/aws4_request, SignedHeaders=accept-encoding;amz-sdk-invocation-id;amz-sdk-request;content-encoding;content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-decoded-content-length;x-amz-trailer, Signature=*****\" http.request.header.accept_encoding=identity http.request.header.amz_sdk_request=\"attempt=1; max=5\" http.request.header.x_amz_date=20250920T085602Z http.url=https://terraform-states.custom_s3.server.com/state-file-name?x-id=PutObject net.peer.name=terraform-states.custom_s3.server.com http.request.header.content_type=application/json http.request.header.x_amz_trailer=x-amz-checksum-crc32 http.request.header.x_amz_decoded_content_length=345409 http.request.header.x_amz_content_sha256=STREAMING-UNSIGNED-PAYLOAD-TRAILER http.request_content_length=345454 http.request.header.amz_sdk_invocation_id=ccd6a247-7d27-42c4-9f54-9a7146b2d53b http.request.header.content_encoding=aws-chunked http.request.body=\"[Redacted: 337.4 KB (345,454 bytes), Type: application/json]\"\n2025-09-20T10:56:03.209+0200 [DEBUG] backend-s3: HTTP Response Received: aws.region=eu-de aws.s3.bucket=terraform-states aws.s3.key=state-file-name rpc.method=PutObject rpc.service=S3 rpc.system=aws-api tf_aws.custom_endpoint=true tf_aws.sdk=aws-sdk-go-v2 tf_backend.operation=Put tf_backend.req_id=34c945f2-1169-224a-b98a-7b8c5937dad1 tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name http.status_code=400 http.response.header.content_type=application/xml http.response.header.date=\"Sat, 20 Sep 2025 08:56:02 GMT\" http.response.header.x_amz_request_id=8abebc22:19817f1aca1:1134d0:d4f http.response.header.x_amz_id_2=929c3c355e96e938744782a8b828458ef9219bce593d21be1f8b21ef78d18869\n  http.response.body=\n  | <Error><Code>XAmzContentSHA256Mismatch</Code><Message>The Content-SHA256 you specified did not match what we received</Message><Resource>terraform-states/state-file-name</Resource><RequestId>8abebc22:19817f1aca1:1134d0:d4f</RequestId></Error>\n   http.duration=274\n2025-09-20T10:56:03.210+0200 [DEBUG] backend-s3: request failed with unretryable error https response error StatusCode: 400, RequestID: 8abebc22:19817f1aca1:1134d0:d4f, HostID: 929c3c355e96e938744782a8b828458ef9219bce593d21be1f8b21ef78d18869, api error XAmzContentSHA256Mismatch: The Content-SHA256 you specified did not match what we received: aws.region=eu-de aws.s3.bucket=terraform-states aws.s3.key=state-file-name rpc.method=PutObject rpc.service=S3 rpc.system=aws-api tf_aws.sdk=aws-sdk-go-v2 tf_backend.operation=Put tf_backend.req_id=34c945f2-1169-224a-b98a-7b8c5937dad1 tf_backend.s3.bucket=terraform-states tf_backend.s3.path=state-file-name\n\n```\n\n\n### Expected Behavior\n\nThe state should be persisted in the S3 backend with custom endpoint\n\n### Actual Behavior\n\nFailed to persist state: failed to upload state: operation error S3: PutObject, https response error StatusCode: 400, RequestID: 8abebc0c:1981842885f:10d434:1d1a, HostID: 929c3c355e96e938744782a8b828458ef9219bce593d21be1f8b21ef78d18869, api error XAmzContentSHA256Mismatch: The Content-SHA256 you specified did not match what we received\n\n### Steps to Reproduce\n\n1. terraform apply\n\n### Additional Context\n\n\nI have not used the project for a while - I think the last time I was able to successfuly persist state in the S3, was in sometime in June 2025. This week I tried to execute the project one more time and the first thing which I have noticed that it for some reason told me that backend has been changed and I need to run \"terraform init -reconfigure\", although I did not make any changes into the backend. After some investigation I have found that in august 2025 I have accidently upgraded from 1.9.8 to 1.12.2 and indeed when I have rolled back to 1.9.8 S3 backend works again. I tried to upgrade to the latest version of terraform which is  1.13.3, but it did not help\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "Hey @muaddib91 \ud83d\udc4b Thank you for taking the time to raise this! It looks like this is another example of what was reported with #36704. I wrote a bit of a breakdown in my [comment on that issue](https://github.com/hashicorp/terraform/issues/36704#issuecomment-2734567647), and others have reported that setting the following environment variables resolves the issue on other AWS-compatible services.\n\n```shell\nAWS_REQUEST_CHECKSUM_CALCULATION=when_required\nAWS_RESPONSE_CHECKSUM_VALIDATION=when_required\n```\n\nSince it looks like this is the same issue, I'm going to close this issue so that we can keep all of the conversation going in one place. If you run into any future issues, please do let us know!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "backend/s3",
        "new"
      ],
      "created_at": "2025-09-20T09:33:09Z",
      "closed_at": "2025-09-23T17:49:38Z",
      "url": "https://github.com/hashicorp/terraform/issues/37648",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37627,
      "title": "validate should warn about unknown keys",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.13.1\non linux_amd64\n\nYour version of Terraform is out of date! The latest version\nis 1.13.2. You can update by downloading from https://developer.hashicorp.com/terraform/install\n```\n\n### Use Cases\n\nI have a variable that defines the keys my root module object can contain. \nBy mistake, I define in the tfvars a key that isn't there.\n\nExample: \n\nterraform.tfvars:\n```terraform\nconfig = {\n  node_count = 2\n}\n```\n\nvariables.tf:\n```terraform\nvariable \"config\" {\n  type = object({\n    count = optional(number, 6)\n  })\n}\n```\n\nAt the root level, this would rarely be intended. \n\nSo `terraform validate --strict` should at least flag it as a potential issue. \n\nFor submodules, it is less likely a typo but still, this type of typo is nasty to chase and so there should be a way of checking for it.\n\n### Attempted Solutions\n\nUse Claude Code to find what was wrong. It did not spot that the root module var map had a key that did not match the type specification. \n\n### Proposal\n\nAdd these options to the `validate` command: \n\n- `--strict`: warn when extra keys given in tfvars vars\n- `--strict-submodule`: warn when extra keys are given to a submodule\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "new"
      ],
      "created_at": "2025-09-17T02:05:09Z",
      "closed_at": "2025-09-17T11:48:45Z",
      "url": "https://github.com/hashicorp/terraform/issues/37627",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37513,
      "title": "terraform plan treats some strings as numbers in scientific notation and expands them",
      "problem": "### Terraform Version\n\n```shell\n> terraform --version                   \nTerraform v1.7.0\n```\n\n### Terraform Configuration Files\n\nmain.tf\n```\n\nlocals {\n  projects = yamldecode(file(\"middleware/${terraform.workspace}.yml\"))\n  path     = \"../../prometheus-config\"\n}\n\nmodule \"solomon\" {\n  source       = \"./modules/solomon\"\n  for_each     = local.projects\n  project_id   = each.key\n  project_name = each.value.name\n  data         = each.value.solomon\n}      \n```\n\n./modules/solomon/main.tf\n\n```\n// expression alerts\nresource \"ycp_monitoring_expression_alert\" \"alert\" {\n  project_id      = local.project_id\n  for_each        = var.data.expression_alerts\n  alert_id        = each.key\n  name            = each.value.name\n  description     = each.value.description\n  group_by_labels = each.value.group_by_labels\n  window_duration = each.value.window_duration\n  delay_duration  = each.value.delay_duration\n  annotations     = each.value.annotations\n  no_metrics_policy = each.value.no_metrics_policy\n  no_points_policy = each.value.no_points_policy\n  channels {\n    id                    = each.value.channel_id\n    notify_about_statuses = local.notify_about_statuses\n  }\n  program = each.value.program\n}\n\n```\n\nmiddleware/default.yml:\n\n```\n...\npaas:\n  id: paas\n  solomon:\n    expression_alerts:\n      19759491708e7585:\n        annotations:\n          service: '{{labels.host}}'\n          tags: mdbdu7vpgic2t4lie4gh,paas,vertis-shiva-prod\n          text: |-\n            [vertis-shiva-prod] [PostgreSQL] Disk IO usage {{expression.usage_percent_str}} at {{labels.host}}\n            [Cluster](https://yc.yandex-team.ru/resource-link/{{templateParameter.cluster}}?service=managed-postgresql)\n            [Doc](https://wiki.yandex-team.ru/mdb/spa-alerts/postgresql/)\n        channel_id: juggler\n        delay_duration: 60000ms\n        description: ''\n        double_thresholds:\n        - name: alarmThreshold\n          value: '90.0'\n        - name: warnThreshold\n          value: '80.0'\n        integer_parameters: []\n        integer_thresholds: []\n        name: pg-io-usage_mdbdu7vpgic2t4lie4gh\n        service_provider: managed-postgresql\n        template_id: managed-postgresql-io-usage\n        template_version_tag: '25'\n        text_parameters:\n        - name: cluster\n          value: mdbdu7vpgic2t4lie4gh\n        window_duration: 300000ms\n```\n\n### Debug Output\n\n```\n[2025-08-27 16:57:35]   # module.solomon[\"paas\"].ycp_monitoring_alert_from_template.templated_alert[\"197594917080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\"] will be created\n[2025-08-27 16:57:35]   + resource \"ycp_monitoring_alert_from_template\" \"templated_alert\" {\n[2025-08-27 16:57:35]       + alert_batching_policy  = \"ALERT_BATCHING_UNSPECIFIED\"\n[2025-08-27 16:57:35]       + alert_id               = \"197594917080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\"\n[2025-08-27 16:57:35]       + annotations            = {\n[2025-08-27 16:57:35]           + \"service\" = \"{{labels.host}}\"\n[2025-08-27 16:57:35]           + \"tags\"    = \"mdbdu7vpgic2t4lie4gh,paas,vertis-shiva-prod\"\n[2025-08-27 16:57:35]           + \"text\"    = <<-EOT\n[2025-08-27 16:57:35]                 [vertis-shiva-prod] [PostgreSQL] Disk IO usage {{expression.usage_percent_str}} at {{labels.host}}\n[2025-08-27 16:57:35]                 [Cluster](https://yc.yandex-team.ru/resource-link/{{templateParameter.cluster}}?service=managed-postgresql)\n[2025-08-27 16:57:35]                 [Doc](https://wiki.yandex-team.ru/mdb/spa-alerts/postgresql/)\n[2025-08-27 16:57:35]             EOT\n[2025-08-27 16:57:35]         }\n[2025-08-27 16:57:35]       + delay_duration         = \"60000ms\"\n[2025-08-27 16:57:35]       + description            = (known after apply)\n[2025-08-27 16:57:35]       + id                     = (known after apply)\n[2025-08-27 16:57:35]       + managed_by             = \"terraform\"\n[2025-08-27 16:57:35]       + name                   = \"pg-io-usage_mdbdu7vpgic2t4lie4gh\"\n[2025-08-27 16:57:35]       + owner_service_provider = \"managed-postgresql\"\n[2025-08-27 16:57:35]       + project_id             = \"paas\"\n[2025-08-27 16:57:35]       + status                 = \"ACTIVE\"\n[2025-08-27 16:57:35]       + template_id            = \"managed-postgresql-io-usage\"\n[2025-08-27 16:57:35]       + template_version_tag   = (known after apply)\n[2025-08-27 16:57:35]       + window_duration        = \"300000ms\"\n[2025-08-27 16:57:35] \n[2025-08-27 16:57:35]       + channels {\n[2025-08-27 16:57:35]           + id                     = \"juggler\"\n[2025-08-27 16:57:35]           + notify_about_statuses  = [\n[2025-08-27 16:57:35]               + \"ALARM\",\n[2025-08-27 16:57:35]               + \"OK\",\n[2025-08-27 16:57:35]               + \"WARN\",\n[2025-08-27 16:57:35]             ]\n[2025-08-27 16:57:35]           + repeat_period_duration = \"0s\"\n[2025-08-27 16:57:35]         }\n[2025-08-27 16:57:35] \n[2025-08-27 16:57:35]       + double_thresholds {\n[2025-08-27 16:57:35]           + name  = \"alarmThreshold\"\n[2025-08-27 16:57:35]           + value = 90\n[2025-08-27 16:57:35]         }\n[2025-08-27 16:57:35]       + double_thresholds {\n[2025-08-27 16:57:35]           + name  = \"warnThreshold\"\n[2025-08-27 16:57:35]           + value = 80\n[2025-08-27 16:57:35]         }\n[2025-08-27 16:57:35] \n[2025-08-27 16:57:35]       + text_parameters {\n[2025-08-27 16:57:35]           + name  = \"cluster\"\n[2025-08-27 16:57:35]           + value = \"mdbdu7vpgic2t4lie4gh\"\n[2025-08-27 16:57:35]         }\n[2025-08-27 16:57:35]     }\n```\n\n### Expected Behavior\n\nan alert id 19759491708e7585 is treated like a string, not a number with a huge exponent \n\n### Actual Behavior\n\nterraform plan prepares to create an alert 19759491708e7585 but the id get's exploded into 19759491708 and lots of zeroes, which leads to a failure, because the id is too long:\n\n```\n[2025-08-27 16:58:20] Error: {\"code\":400,\"type\":\"INVALID_REQUEST\",\"message\":\"ru.yandex.solomon.alert.api.validators.ValidationException: Invalid alert: FailedValidationResult{validationResultSeverity=CRITICAL, field=ID, detailedMessage=alert id must have length fewer than 64 characters: 197594917080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000, code=TEMPLATE_ID_LENGTH_TOO_LONG, parameters={}}\"}\n```\n\n### Steps to Reproduce\n\n1. create a resource from yaml file with a key matching number in sci entific notation, such as 19759491708e7585\n2. run terraform plan\n3. observe that id turning into a number in regular notation with lots of zeroes \n\n### Additional Context\n\nI've found a similar issue already fixed in the older version of terraform: https://github.com/hashicorp/terraform/issues/22639\n\nBut that one was about cli vars\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "upstream",
        "new"
      ],
      "created_at": "2025-08-28T12:38:20Z",
      "closed_at": "2025-08-28T13:55:13Z",
      "url": "https://github.com/hashicorp/terraform/issues/37513",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37609,
      "title": "Flaky test: TestUiHookEphemeralOp_progress",
      "problem": "This test is flaky and should be skipped until it's resolved.\n\nA previously proposed solution for this flaky test is to use [Go 1.24's testing/synctest package](https://tip.golang.org/doc/go1.24#testing-synctest) to make the code under test more deterministic.\n\nExample failures:\n* https://github.com/hashicorp/terraform/actions/runs/17725534145/job/50365999678\n\n```\n--- FAIL: TestJSONHook_EphemeralOp_progress (2.01s)\n    hook_json_test.go:516: unexpected number of messages. got 3, want 4\n    hook_json_test.go:516: unexpected output on line 2:\n          map[string]any{\n          \t\"@level\": string(\"info\"),\n          \t\"@message\": strings.Join({\n          \t\t\"test_instance.boop: \",\n        - \t\t\"Still opening... [2s elapsed]\",\n        + \t\t\"Opening complete after 2s\",\n          \t}, \"\"),\n          \t\"@module\": string(\"terraform.ui\"),\n          \t\"hook\":    map[string]any{\"action\": string(\"open\"), \"elapsed_seconds\": float64(2), \"resource\": map[string]any{\"addr\": string(\"test_instance.boop\"), \"implied_provider\": string(\"test\"), \"module\": string(\"\"), \"resource\": string(\"test_instance.boop\"), ...}},\n        - \t\"type\":    string(\"ephemeral_op_progress\"),\n        + \t\"type\":    string(\"ephemeral_op_complete\"),\n          }\nFAIL\n```",
      "solution": "This is already resolved in https://github.com/hashicorp/terraform/pull/37451 but any backports to old release branches will still experience this issue. Merges to main and use of the 1.14 release branch onwards will be ok.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "tests"
      ],
      "created_at": "2025-09-15T09:13:01Z",
      "closed_at": "2025-09-15T10:01:53Z",
      "url": "https://github.com/hashicorp/terraform/issues/37609",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37598,
      "title": "mock_provider not being reflected in module with \"source\"",
      "problem": "### Terraform Version\n\n```shell\nTerraform v1.8.0\non linux_amd64\n\nAlso tried it on:\n\nTerraform v1.13.2\non linux_amd64\n```\n\n### Terraform Configuration Files\n\nhttps://github.com/zapatoshoe-google/terraform-bug\n\n### Debug Output\n\nNone\n\n### Expected Behavior\n\nI expect for the test to pass as is written\n\n### Actual Behavior\n\nWe get an error:\n```\ntest.tftest.hcl... in progress\n  run \"generates_outputs_with_apply\"... fail\n\u2577\n\u2502 Error: Error creating Network: googleapi: Error 404: The resource 'projects/project' was not found, notFound\n\u2502 \n\u2502   with module.vpc_network.module.vpc.google_compute_network.network,\n\u2502   on .terraform/modules/vpc_network/modules/vpc/main.tf line 20, in resource \"google_compute_network\" \"network\":\n\u2502   20: resource \"google_compute_network\" \"network\" {\n\u2502 \n\u2575\ntest.tftest.hcl... tearing down\ntest.tftest.hcl... fail\n\nFailure! 0 passed, 1 failed.\n```\n\n### Steps to Reproduce\n\n```\nterraform init\nterraform test\n```\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "new"
      ],
      "created_at": "2025-09-11T18:07:17Z",
      "closed_at": "2025-09-12T07:09:19Z",
      "url": "https://github.com/hashicorp/terraform/issues/37598",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform",
      "issue_number": 37563,
      "title": "Sensitive values exposed in logs when 'Ignoring variable when applying a saved plan'",
      "problem": "### Terraform Version\n\n```shell\n1.11.0\n```\n\n### Terraform Configuration Files\n\n\n.\n\n### Debug Output\n\n\n.\n\n### Expected Behavior\n\nWarning: Ignoring variable when applying a saved plan\nThe variable <var name> cannot be overriden when applying a saved plan\nfile, because a saved plan includes the variable values that were set when\nit was created. <some different wording which doesn't show the values>. To declare an ephemeral variable which is not saved in the plan file, use ephemeral = true.\n\n### Actual Behavior\n\nWarning: Ignoring variable when applying a saved plan\nThe variable <var name> cannot be overriden when applying a saved plan\nfile, because a saved plan includes the variable values that were set when\nit was created. The saved plan specifies \u201c<old sensitive value>\u201d as the value whereas during apply the value \u201c<new sensitive value>\u201c was set by an environment variable. To declare an ephemeral variable which is not saved in the plan file, use ephemeral = true.\n\n### Steps to Reproduce\n\n1. Terraform plan with sensitive environment values\n2. Terraform apply the stored plan with different values for those sensitive environment values\n\n### Additional Context\n\n_No response_\n\n### References\n\n_No response_\n\n### Generative AI / LLM assisted development?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "confirmed",
        "new"
      ],
      "created_at": "2025-09-04T14:41:22Z",
      "closed_at": "2025-09-10T09:11:32Z",
      "url": "https://github.com/hashicorp/terraform/issues/37563",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46281,
      "title": "aws_dynamodb_table perpetual diff with warm_throughput on GSI with PAY_PER_REQUEST billing mode",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform: 1.14.4\nAWS Provider: 6.28.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* aws_dynamodb_table\n\n### Expected Behavior\n\nAfter upgrading from AWS provider v5.83.1 to v6.28.0, running terraform plan should show no changes for an existing DynamoDB table with a Global Secondary Index using PAY_PER_REQUEST billing mode.\n\n### Actual Behavior\n\nTerraform shows a perpetual diff on the global_secondary_index block, repeatedly attempting to remove and re-add the same GSI with identical configuration, including the warm_throughput attribute. The warm_throughput values oscillate between being present and absent in the plan, creating an infinite cycle.\n\n### Relevant Error/Panic Output\n\nNo errors - just perpetual diff showing:\n```\n- global_secondary_index {\n    - hash_key           = \"path\"\n    - name              = \"revalidate\"\n    - non_key_attributes = []\n    - projection_type   = \"ALL\"\n    - range_key         = \"revalidatedAt\"\n    - read_capacity     = 0\n    - write_capacity    = 0\n    \n    - warm_throughput {\n        - read_units_per_second  = 12000\n        - write_units_per_second = 37240\n      }\n  }\n\n+ global_secondary_index {\n    + hash_key           = \"path\"\n    + name              = \"revalidate\"\n    + non_key_attributes = []\n    + projection_type   = \"ALL\"\n    + range_key         = \"revalidatedAt\"\n    + read_capacity     = 0\n    + write_capacity    = 0\n    \n    + warm_throughput {\n        + read_units_per_second  = 12000\n        + write_units_per_second = 27866  # Note: value changes between applies\n      }\n  }\n\n```\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nresource \"aws_dynamodb_table\" \"isr\" {\n  name = \"example-isr-tag-mapping\"\n\n  billing_mode   = \"PAY_PER_REQUEST\"\n\n  hash_key  = \"tag\"\n  range_key = \"path\"\n\n  attribute {\n    name = \"tag\"\n    type = \"S\"\n  }\n\n  attribute {\n    name = \"path\"\n    type = \"S\"\n  }\n\n  attribute {\n    name = \"revalidatedAt\"\n    type = \"N\"\n  }\n\n  global_secondary_index {\n    name            = \"revalidate\"\n    hash_key        = \"path\"\n    range_key       = \"revalidatedAt\"\n    projection_type = \"ALL\"\n    read_capacity   = 0\n    write_capacity  = 0\n  }\n}\n\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Have an existing DynamoDB table with a GSI in PAY_PER_REQUEST billing mode (created with provider v5.x)\n2. Upgrade AWS provider from v5.83.1 to v6.28.0\n3. Run terraform plan\n4. Observe perpetual diff on global_secondary_index block\n5. Run terraform apply\n6. Run terraform plan again - diff still shows\n\n### Debug Logging\n\nNot applicable - no errors, just perpetual diffs in plan output.\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n- This issue appeared immediately after upgrading from AWS provider v5.83.1 to v6.28.0\n- The table was created before the warm_throughput feature was added to the provider\n- The warm_throughput values change between applies (e.g., 37240 \u2192 27866), suggesting AWS is auto-adjusting these values based on usage patterns\n- The Terraform configuration does NOT include any warm_throughput block\n- Adding explicit read_capacity = 0 and write_capacity = 0 to the GSI block does not resolve the issue\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/dynamodb"
      ],
      "created_at": "2026-02-03T10:51:08Z",
      "closed_at": "2026-02-06T09:22:36Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46281",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46346,
      "title": "[aws_ecs_cluster_capacity_providers]: perpetual drift when also using managed instance capacity provider",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.3\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v6.31.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_ecs_cluster_capacity_providers`\n\n### Expected Behavior\n\nSubsequent `terraform plan` / `terraform apply` show no changes after successful apply\n\n### Actual Behavior\n\n`plan`/`apply` try to remove the managed instance capacity provider from the list of capacity providers\n\n### Relevant Error/Panic Output\n\n```\n  # aws_ecs_cluster_capacity_providers.this will be updated in-place\n  ~ resource \"aws_ecs_cluster_capacity_providers\" \"this\" {\n      ~ capacity_providers = [\n          - \"managed\",\n            # (2 unchanged elements hidden)\n        ]\n        id                 = \"kimotest\"\n        # (2 unchanged attributes hidden)\n\n        # (1 unchanged block hidden)\n    }\n```\n\n### Sample Terraform Configuration\n\n```hcl\nresource \"aws_ecs_cluster\" \"this\" {\n  name = \"kimotest\"\n}\n\nresource \"aws_ecs_cluster_capacity_providers\" \"this\" {\n  cluster_name = aws_ecs_cluster.this.name\n\n  capacity_providers = [\n    \"FARGATE\",\n    \"FARGATE_SPOT\",\n  ]\n\n  default_capacity_provider_strategy {\n    capacity_provider = \"FARGATE_SPOT\"\n  }\n}\n\nresource \"aws_ecs_capacity_provider\" \"managed\" {\n  cluster = aws_ecs_cluster.this.name\n  name    = \"managed\"\n\n  managed_instances_provider {\n    infrastructure_role_arn = \"arn:aws:iam::[REDACTED]:role/ecsInfrastructureRole\"\n\n    instance_launch_template {\n      ec2_instance_profile_arn = \"arn:aws:iam::[REDACTED]:instance-profile/ecsInstanceRole\"\n\n      network_configuration {\n        security_groups = [\"sg-[REDACTED]\"]\n        subnets         = [\"subnet-[REDACTED]\"]\n      }\n    }\n  }\n}\n```\n\n### Steps to Reproduce\n\n1. Apply configuration\n2. Plan/apply configuration\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\nA change is detected whether the managed instance capacity provider is managed via terraform or created manually in the console\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/ecs"
      ],
      "created_at": "2026-02-05T19:35:04Z",
      "closed_at": "2026-02-05T19:43:28Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46346",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 30982,
      "title": "[Bug]: aws_ecrpublic_authorization_token breaks if region us-gov-east-1 GovCloud",
      "problem": "### Terraform Core Version\r\n\r\n1.3.6\r\n\r\n### AWS Provider Version\r\n\r\n4.63.0\r\n\r\n### Affected Resource(s)\r\n\r\naws_ecrpublic_authorization_token\r\n\r\n### Expected Behavior\r\n\r\nThe data source should cause a call to api.ecr-public.us-east-1.amazonaws.com as \"ECR-public actions are only supported in the us-east-1 region\" \r\n\r\nUtilized separate provider for \"aws_ecrpublic_authorization_token\" but still fails \r\n\r\n### Actual Behavior\r\n\r\nData source triggers a STS operation which fails at retrieving the security key for us-east-1\r\n\r\n### Relevant Error/Panic Output Snippet\r\n\r\n```shell\r\n\u2502 Error: configuring Terraform AWS Provider: validating provider credentials: retrieving caller identity from STS: operation error STS: GetCallerIdentity, https response error StatusCode: 403, RequestID: 694712a3-ceb4-410a-b936-318e0fa4f1a9, api error InvalidClientTokenId: The security token included in the request is invalid.\r\n\u2502\r\n\u2502   with provider[\"registry.terraform.io/hashicorp/aws\"].virginia,\r\n\u2502   on providers.tf line 30, in provider \"aws\":\r\n\u2502   30: provider \"aws\" {\r\n```\r\n\r\n\r\n### Terraform Configuration Files\r\n\r\n```terraform\r\nprovider \"aws\" {\r\n  region = \"us-east-1\"\r\n  alias = \"virginia\"\r\n}\r\n\r\ndata \"aws_ecrpublic_authorization_token\" \"token\" {\r\n  provider = aws.virginia\r\n}\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\nConfigure the aws provider (by ~/.aws/config or explicitly in terraform) to use region us-east-1 in the data source \r\n\r\n### Debug Output\r\n\r\n_No response_\r\n\r\n### Panic Output\r\n\r\n_No response_\r\n\r\n### Important Factoids\r\n\r\n_No response_\r\n\r\n### References\r\n\r\n_No response_\r\n\r\n### Would you like to implement a fix?\r\n\r\nNone",
      "solution": "Hi all,\r\n\r\nAny movement on this? We are unable to pull images from public ECR registry in when deploying EKS cluster to gov cloud. Is there any workaround for this in the meantime?\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "stale",
        "partition/aws-us-gov",
        "service/ecrpublic",
        "authentication"
      ],
      "created_at": "2023-04-26T06:11:40Z",
      "closed_at": "2026-01-05T17:46:40Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/30982",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 24467,
      "title": "aws_route53_record shows changes made outside of terraform even though there are no changes",
      "problem": "<!---\r\nPlease note the following potential times when an issue might be in Terraform core:\r\n\r\n* [Configuration Language](https://www.terraform.io/docs/configuration/index.html) or resource ordering issues\r\n* [State](https://www.terraform.io/docs/state/index.html) and [State Backend](https://www.terraform.io/docs/backends/index.html) issues\r\n* [Provisioner](https://www.terraform.io/docs/provisioners/index.html) issues\r\n* [Registry](https://registry.terraform.io/) issues\r\n* Spans resources across multiple providers\r\n\r\nIf you are running into one of these scenarios, we recommend opening an issue in the [Terraform core repository](https://github.com/hashicorp/terraform/) instead.\r\n--->\r\n\r\n<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Terraform CLI and Terraform AWS Provider Version\r\n\r\nterraform - v1.1.6\r\naws - v3.75.1\r\n\r\n<!--- Please run `terraform -v` to show the Terraform core version and provider version(s). If you are not running the latest version of Terraform or the provider, please upgrade because your issue may have already been fixed. [Terraform documentation on provider versioning](https://www.terraform.io/docs/configuration/providers.html#provider-versions). --->\r\n\r\n### Affected Resource(s)\r\n\r\n<!--- Please list the affected resources and data sources. --->\r\n\r\n* aws_route53_record\r\n\r\n### Terraform Configuration Files\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nThis is the route53 record configuration which is already created and has the configurations in state file. But after a successfull terraform apply I'm still getting some changes are made outside of terraform.\r\n\r\n```hcl\r\nresource \"aws_route53_record\" \"example\" {\r\n  zone_id = \"ZONEID\" #correct zone id\r\n  name    = \"QZIRP.example.com\" #record name with uppercase\r\n  type    = \"A\"\r\n  ttl     = \"300\"\r\n  records = [\"IP\"]\r\n}\r\n```\r\nThis is the output of changes made outside of terraform. But can't see anything getting added(+) or removed(-).\r\n```hcl\r\n~ resource \"aws_route53_record\" \"example\" {\r\n     id = \"ZONEID_qzirp.example.com\"\r\n     name    = \"qzirp.example.com\"\r\n     #6 unchanged attributes hidden\r\n  }\r\n```\r\nWill having the names in uppercase could be a cause to this issue? Do we have any other solution for this?\r\n\r\n### Steps to Reproduce\r\n\r\n<!--- Please list the steps required to reproduce the issue. --->\r\n\r\n1. `terraform init`\r\n2. `terraform plan`\r\n3. `terraform apply`\r\n",
      "solution": "As a workaround for this bug, you can use ignore_changes lifecycle on zone_id:\r\n\r\n```\r\ndata \"aws_route53_zone\" \"my_zone\" {\r\n  name         = var.domain\r\n  private_zone = true\r\n}\r\n\r\nresource \"aws_route53_record\" \"my_record\" {\r\n  zone_id = data.aws_route53_zone.my_zone.id\r\n  name    = \"${var.vm_name}.${var.domain}\"\r\n  type    = \"A\"\r\n  ttl     = 300\r\n  records = [var.ipv4_address]\r\n\r\n  lifecycle {\r\n    ignore_changes = [\r\n      zone_id\r\n    ]\r\n  }\r\n}\r\n```\n\n---\n\n> As a workaround for this bug, you can use ignore_changes lifecycle on zone_id:\r\n> \r\n> ```\r\n> data \"aws_route53_zone\" \"my_zone\" {\r\n>   name         = var.domain\r\n>   private_zone = true\r\n> }\r\n> \r\n> resource \"aws_route53_record\" \"my_record\" {\r\n>   zone_id = data.aws_route53_zone.my_zone.id\r\n>   name    = \"${var.vm_name}.${var.domain}\"\r\n>   type    = \"A\"\r\n>   ttl     = 300\r\n>   records = [var.ipv4_address]\r\n> \r\n>   lifecycle {\r\n>     ignore_changes = [\r\n>       zone_id\r\n>     ]\r\n>   }\r\n> }\r\n> ```\r\n\r\nI have same issue but I'm using Route53 module, modifying the module by including the suggested workaround fixes the issue but of course that isn't good because I shouldn't modify the module I get from terraform registry, and also I'm not sure if that will cause some other issues.\r\n I'm insterested for a fix to.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/route53",
        "stale"
      ],
      "created_at": "2022-04-29T14:21:51Z",
      "closed_at": "2026-01-05T17:46:53Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/24467",
      "comments_count": 7
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 23377,
      "title": "Ressource api_gateway_method_response allows arbitrary value in argument status_code",
      "problem": "\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n\r\n\r\n### Terraform CLI and Terraform AWS Provider Version\r\n\r\nTerraform v0.12.6\r\nterraform-provider-aws_v3.37.0_x5\r\n\r\n### Affected Resource(s)\r\n\r\n* aws_api_gateway_method_response\r\n\r\n### Terraform Configuration Files\r\n\r\nPlease include all Terraform configurations required to reproduce the bug. Bug reports without a functional reproduction may be closed without investigation.\r\n\r\n### Steps to Reproduce\r\n\r\nCreate a minimal api gatway [deployment](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/api_gateway_method_response)\r\n\r\n```hcl\r\nresource \"aws_api_gateway_method_response\" \"response_200\" {\r\n  rest_api_id = aws_api_gateway_rest_api.MyDemoAPI.id\r\n  resource_id = aws_api_gateway_resource.MyDemoResource.id\r\n  http_method = aws_api_gateway_method.MyDemoMethod.http_method\r\n  status_code = \"**foobar**\"\r\n}\r\n```\r\n\r\n1. `terraform apply`\r\n\r\nDeployment is successful, however trying to correct the status_code to something correct, e.g. status_code=\"200\",\r\nwill lead to a broken deployment which can only be fixed, by manually fixing the status_code field inside the state file. \r\n\r\nFrom my understanding the function ResourceMethodResponse [here](https://github.com/hashicorp/terraform-provider-aws/blob/main/internal/service/apigateway/method_response.go#L20) should check if the status_code is really a valid one.\r\n\r\nPlease let me know, if any further info is required. ",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/apigateway",
        "stale"
      ],
      "created_at": "2022-02-25T11:28:56Z",
      "closed_at": "2026-01-05T17:46:55Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/23377",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46270,
      "title": "aws_iam_role_policy_attachment does not get recreated when a role is recreated",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.13.3\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v6.30.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_iam_role_policy_attachment`\n* `aws_iam_role`\n\n### Expected Behavior\n\nIf a role is recreated without it's name changing, policy attachments should also be recreated.\n\n### Actual Behavior\n\nIf I taint an aws iam role, the role is recreated with the same name. The policy attachments are unchanged in terraform (since the name is the same, and that's how they reference role), which means the role now has no policy attachments until a subsequent terraform apply.\n\n### Relevant Error/Panic Output\n\n```console\n\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\ndata \"aws_iam_policy_document\" \"assume_role\" {\n  statement {\n    effect = \"Allow\"\n\n    principals {\n      type        = \"Service\"\n      identifiers = [\"ec2.amazonaws.com\"]\n    }\n\n    actions = [\"sts:AssumeRole\"]\n  }\n}\n\nresource \"aws_iam_role\" \"role\" {\n  name               = \"test-role\"\n  assume_role_policy = data.aws_iam_policy_document.assume_role.json\n}\n\nresource \"aws_iam_role_policy_attachment\" \"test-attach\" {\n  role       = aws_iam_role.role.name\n  policy_arn = \"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore\"\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Apply the configuration\n2. Run `terraform taint aws_iam_role.role` \n3. Run `terraform apply` (policy_attachments will not show in plan, role is recreated without attached policies)\n```hcl\nTerraform will perform the following actions:\n\n  # aws_iam_role.role is tainted, so must be replaced\n-/+ resource \"aws_iam_role\" \"role\" {\n      ~ arn                   = \"arn:aws:iam::618283574790:role/test-role\" -> (known after apply)\n      ~ create_date           = \"2026-02-03T03:06:04Z\" -> (known after apply)\n      ~ id                    = \"test-role\" -> (known after apply)\n      ~ managed_policy_arns   = [\n          - \"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore\",\n        ] -> (known after apply)\n        name                  = \"test-role\"\n      + name_prefix           = (known after apply)\n      - tags                  = {} -> null\n      ~ tags_all              = {} -> (known after apply)\n      ~ unique_id             = \"AROAY75ESUYDMWPF3IJK2\" -> (known after apply)\n        # (6 unchanged attributes hidden)\n\n      ~ inline_policy (known after apply)\n    }\n\nPlan: 1 to add, 0 to change, 1 to destroy.\n```\n4. Run `terraform apply` again (plan will show creation of policy_attachments\n```hcl\nTerraform will perform the following actions:\n\n  # aws_iam_role_policy_attachment.test-attach will be created\n  + resource \"aws_iam_role_policy_attachment\" \"test-attach\" {\n      + id         = (known after apply)\n      + policy_arn = \"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore\"\n      + role       = \"test-role\"\n    }\n\nPlan: 1 to add, 0 to change, 0 to destroy.\n```\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\nFrom what I can see the reason is because the policy attachments rely purely on the name of the role rather than anything else.\nThis is an edge case, guess it's unlikely that many people will be affected since roles rarely require recreation.\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\nHey @philnichol \ud83d\udc4b\ud83c\udffb Thank you for taking the time to raise this!\n\n> From what I can see the reason is because the policy attachments rely purely on the name of the role rather than anything else.\n\nYour assessment here is correct. Since the name of the role is known and unchanging, Terraform has no way of determining that the `aws_iam_role_policy_attachment` resource should be replaced due to a replacement of the `aws_iam_role` (this isn't something that the AWS Provider has any control over; it's controlled entirely at the Terraform Core level).\n\nThat said, this is the type of scenario that Terraform's [`replace_triggered_by`](https://developer.hashicorp.com/terraform/language/meta-arguments/lifecycle#replace_triggered_by) meta-argument functionality is intended to address. Updating your configuration to include this lifecycle meta-argument will resolve the issue. For example, updating your sample configuration as follows:\n\n```terraform\ndata \"aws_iam_policy_document\" \"assume_role\" {\n  statement {\n    effect = \"Allow\"\n\n    principals {\n      type        = \"Service\"\n      identifiers = [\"ec2.amazonaws.com\"]\n    }\n\n    actions = [\"sts:AssumeRole\"]\n  }\n}\n\nresource \"aws_iam_role\" \"role\" {\n  name               = \"test-role\"\n  assume_role_policy = data.aws_iam_policy_document.assume_role.json\n}\n\nresource \"aws_iam_role_policy_attachment\" \"test-attach\" {\n  role       = aws_iam_role.role.name\n  policy_arn = \"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore\"\n\n  lifecycle {\n    replace_triggered_by = [\n      aws_iam_role.role.id\n    ]\n  }\n}\n```\n\nSince the `aws_iam_role` resource's ID will change when it's recreated, specifying its `id` in the `replace_triggered_by` will cause the `aws_iam_role_policy_attachment` to be recreated in the same apply.\n\nSince there's no further action for the AWS Provider team to take to resolve this, I'm going to close this issue. If you run into any other unexpected behavior, please do let us know!\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/iam"
      ],
      "created_at": "2026-02-03T03:10:16Z",
      "closed_at": "2026-02-04T21:54:58Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46270",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46271,
      "title": "Support for AWS SageMaker Unified Studio",
      "problem": "### Description\n\nWe are using SageMaker AI now for doing data processing using pyspark and iceberg but there are some configuration issues and it seems that is fixed in Unified Studio. \n\nwe would like to create SageMaker Unified Studio using terraform as it is easy to managed\n\n### Affected Resource(s) or Data Source(s)\n\n_No response_\n\n### Potential Terraform Configuration\n\n```hcl\n\n```\n\n\n### References\n\n_No response_\n\n### Would you like to implement the enhancement?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "enhancement",
        "upstream",
        "needs-triage",
        "new-service"
      ],
      "created_at": "2026-02-03T05:43:06Z",
      "closed_at": "2026-02-04T21:35:02Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46271",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46285,
      "title": "aws_dynamodb_table fails validation with 'all indexes must match a defined attribute. Unmatched indexes: [\"\"]' error",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.12.2\non darwin_arm64\n```\n\n### Affected Resource(s) or Data Source(s)\n\n- `aws_dynamodb_table`\n\n### Expected Behavior\n\nTerraform plan should succeed\n\n### Actual Behavior\n\nAfter upgrading `aws` provider from from v6.28.0 to v6.30.0, `terraform plan` fails and throws valdiation error\n\n\n### Relevant Error/Panic Output\n\n```console\n\u2502 Error: all indexes must match a defined attribute. Unmatched indexes: [\"\"]\n\u2502 \n\u2502   with module.dynamodb-something.aws_dynamodb_table.default[0],\n\u2502   on ../../modules/dynamodb-autoscaling/main.tf line 20, in resource \"aws_dynamodb_table\" \"default\":\n\u2502   20: resource \"aws_dynamodb_table\" \"default\" {\n\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nresource \"aws_dynamodb_table\" \"default\" {\n  count = 1\n  name             = \"something\"\n  hash_key         = \"tags\"\n  range_key        = \"test_date\"\n  stream_enabled   = false\n  stream_view_type = null\n  billing_mode     = \"PROVISIONED\"\n  read_capacity    = 20\n  write_capacity   = 20\n\n  deletion_protection_enabled = true\n\n  server_side_encryption {\n    enabled = true\n  }\n\n  point_in_time_recovery {\n    enabled = true\n  }\n\n  lifecycle {\n    ignore_changes = [\n      global_secondary_index,\n      read_capacity,\n      write_capacity,\n    ]\n  }\n\n  attribute {\n    name = \"tags\"\n    type = \"S\"\n  }\n\n  attribute {\n    name = \"test_date\"\n    type = \"N\"\n  }\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. run terraform plan\n\n### Debug Logging\n\n_No response_\n\n### GenAI / LLM Assisted Development\n\n_No response_\n\n### Important Facts and References\n\nLikely this was caused by ether https://github.com/hashicorp/terraform-provider-aws/pull/46195 or https://github.com/hashicorp/terraform-provider-aws/pull/45357\n\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/dynamodb"
      ],
      "created_at": "2026-02-03T13:29:24Z",
      "closed_at": "2026-02-04T20:33:31Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46285",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46307,
      "title": "ECR lifecycle policy document has a wrong atribute",
      "problem": "### Documentation Link(s)\n\nhttps://registry.terraform.io/providers/hashicorp/aws/6.30.0/docs/data-sources/ecr_lifecycle_policy_document#targetStorageClass-2\n\n\n### Description\n\nThe provider docs in version 6.30.0 has a error in the child attribute of action: targetStorageClass. \nhttps://github.com/hashicorp/terraform-provider-aws/blob/v6.30.0/website/docs/d/ecr_lifecycle_policy_document.html.markdown?plain=1#L47 \n\nHowever, in main the attritube is changed to the right one: https://github.com/hashicorp/terraform-provider-aws/blob/main/website/docs/d/ecr_lifecycle_policy_document.html.markdown?plain=1#L47\n\nCould you promote that docs changes to a new release? \n\n### References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.\n\n---\n\nHi @michaelparedes7 \ud83d\udc4b ,\n\nthanks for taking the time to raise the issue.\n\nYou are right, there is an issue with the [`targetStorageClass`](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/ecr_lifecycle_policy_document#targetStorageClass-2) attribute of the resource.  The documentation has been fixed two days ago by merging [this PR](https://github.com/hashicorp/terraform-provider-aws/pull/46244).\n\nWith the next release, the updated documentation will be published.",
      "labels": [
        "documentation"
      ],
      "created_at": "2026-02-03T23:36:57Z",
      "closed_at": "2026-02-04T18:52:54Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46307",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 39546,
      "title": "[Bug]: setting auth_token_update_strategy to DELETE while adding user_group_ids causes an error",
      "problem": "### Terraform Core Version\r\n\r\n1.5.7\r\n\r\n### AWS Provider Version\r\n\r\n5.69.0\r\n\r\n### Affected Resource(s)\r\n\r\naws_elasticache_replication_group\r\n\r\n### Expected Behavior\r\n\r\nBy setting the auth_token_update_strategy argument to `DELETE` and adding new `user_group_ids`, we should be able to migrate from Redis OSS AUTH to RBAC authentication successfully. https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/Clusters.RBAC.html#Migrate-From-RBAC-to-Auth\r\n\r\nThe terraform plan looks like:\r\n```tf\r\n  # module.redis.aws_elasticache_replication_group.redis[0] will be updated in-place\r\n  ~ resource \"aws_elasticache_replication_group\" \"redis\" {\r\n      - auth_token                 = (sensitive value)\r\n      ~ auth_token_update_strategy = \"ROTATE\" -> \"DELETE\"\r\n        id                         = \"redis\"\r\n      ~ user_group_ids             = [\r\n          + \"user-group-id\",\r\n        ]\r\n        # (34 unchanged attributes hidden)\r\n    }\r\n```\r\n\r\n### Actual Behavior\r\n\r\nWe receive the following error when calling the ModifyReplicationGroup API:\r\n```Error: modifying ElastiCache Replication Group (**): operation error ElastiCache: ModifyReplicationGroup, https response error StatusCode: 400, RequestID: **, InvalidParameterCombination: User group can't be associated with auth token enabled. Pass AuthStrategy delete to proceed```\r\n\r\n### Relevant Error/Panic Output Snippet\r\n\r\n```shell\r\nN/A\r\n```\r\n\r\n\r\n### Terraform Configuration Files\r\n```tf\r\nresource \"aws_elasticache_replication_group\" \"redis\" {\r\n  replication_group_id = \"redis\"\r\n  description          = \"description\"\r\n  engine               = \"redis\"\r\n  auth_token                  = null\r\n  user_group_ids              = [\"user-group-id\"]\r\n  auth_token_update_strategy  = \"DELETE\"\r\n  at_rest_encryption_enabled  = true\r\n  transit_encryption_enabled  = true\r\n}\r\n```\r\n### Steps to Reproduce\r\n\r\n1. Create an elasticache replication group with auth_token set\r\n\r\n```tf\r\nresource \"aws_elasticache_replication_group\" \"redis\" {\r\n  replication_group_id = \"redis\"\r\n  description          = \"description\"\r\n  engine               = \"redis\"\r\n  auth_token                  = \"password12345679\"\r\n  user_group_ids              = null\r\n  at_rest_encryption_enabled  = true\r\n  transit_encryption_enabled  = true\r\n}\r\n```\r\n\r\n2. Update the elasticache replication group to use RBAC:\r\n```tf\r\nresource \"aws_elasticache_replication_group\" \"redis\" {\r\n  replication_group_id = \"redis\"\r\n  description          = \"description\"\r\n  engine               = \"redis\"\r\n  auth_token                  = null\r\n  user_group_ids              = [\"user-group-id\"]\r\n  auth_token_update_strategy  = \"DELETE\"\r\n  at_rest_encryption_enabled  = true\r\n  transit_encryption_enabled  = true\r\n}\r\n```\r\n\r\n\r\n### Debug Output\r\n\r\n_No response_\r\n\r\n### Panic Output\r\n\r\n_No response_\r\n\r\n### Important Factoids\r\n\r\n_No response_\r\n\r\n### References\r\n\r\n_No response_\r\n\r\n### Would you like to implement a fix?\r\n\r\nNone",
      "solution": "i think the problem is that the provider is trying to split the `user_group_ids` modification and the `auth_token_update_strategy` modification into two separate API requests. But they need to be part of the same request.\r\n\r\nhttps://github.com/hashicorp/terraform-provider-aws/blob/fd646d21878210ee8be09515307896861a01ab06/internal/service/elasticache/replication_group.go#L965\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/elasticache"
      ],
      "created_at": "2024-09-30T23:07:22Z",
      "closed_at": "2026-02-02T15:36:26Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/39546",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 41527,
      "title": "[New Data Source]: aws_account_regions to list opt-in regions and their status in accounts",
      "problem": "### Description\n\nTo list all regions and their opt-in status for either the current account, or if given an account id and run against an Organizations account, it will list all the regions for a specific member account. \n\nCLI uses `aws account list-regions` and `aws account list-regions --account-id xxxx`\n\n\n\n\n### Requested Resource(s) and/or Data Source(s)\n\naws_account_regions\n\n### Potential Terraform Configuration\n\n```terraform\ndata \"aws_account_regions\" \"example\" {\n\n  account_id = xxxx\n\n}\n```\n\n### References\n\nThis was requested in an earlier issue but this specific data source was not implemented there unfortunately. Reference - https://github.com/hashicorp/terraform-provider-aws/issues/31300\n\nAPI functionality added here - https://awsapichanges.info/archive/changes/0366a2-account.html#ListRegions\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "new-data-source",
        "good first issue",
        "service/account"
      ],
      "created_at": "2025-02-24T02:06:27Z",
      "closed_at": "2026-02-02T16:04:18Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/41527",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 41644,
      "title": "[Bug]: serverless elasticache major version upgrade recreates a new resource",
      "problem": "### Terraform Core Version\n\n1.7.5\n\n### AWS Provider Version\n\n5.76.0\n\n### Affected Resource(s)\n\naws_elasticache_serverless_cache\n\n### Expected Behavior\n\nAWS allows for upgrading the major_engine_version attribute of an existing serverless cache via the AWS console or using the Elasticache API, see: https://docs.aws.amazon.com/AmazonElastiCache/latest/dg/VersionManagement.html#VersionManagement-serverless\n\nUpdating the major engine version from \"7\" to \"8\" should not trigger a destroy + recreation of an existing resource.\n\n### Actual Behavior\n\nModifying the major engine version from \"7\" to \"8\" on a serverless cluster resource does not attempt to do an in-place version upgrade that AWS supports, instead the provider wants to destroy the cluster and create a new one, see: https://github.com/hashicorp/terraform-provider-aws/blob/403a6f831beb9b9e3dd4421d22563773832d6cc7/internal/service/elasticache/serverless_cache.go#L119\n\n### Relevant Error/Panic Output Snippet\n\n```shell\n# aws_elasticache_serverless_cache.dev-serverless-valkey must be replaced\n-/+ resource \"aws_elasticache_serverless_cache\" \"dev-serverless-valkey\" {\n      ~ full_engine_version      = \"7.2\" -> (known after apply)\n      ~ id                       = \"dev-serverless-valkey\" -> (known after apply)\n      ~ major_engine_version     = \"7\" -> \"8\" # forces replacement\n\n<several other attributes indicating that they will be known after apply>\n```\n\n### Terraform Configuration Files\n\nresource \"aws_elasticache_serverless_cache\" \"dev-serverless-valkey\" {\n  name        = \"dev-serverless-valkey\"\n  description = \"Valkey serverless cache\"\n\n  engine               = \"valkey\"\n  major_engine_version = \"8\"\n\n  subnet_ids         = [<redacted>, <redacted>, <redacted>]\n  security_group_ids = [<redacted>]\n\n  user_group_id = <redacted>\n}\n\n### Steps to Reproduce\n\n- create a aws_elasticache_serverless_cache resource with the major_engine_version attribute set to \"7\"\n- update the major_engine_version value to \"8\"\n- run a plan\n- observe that the provider wants to replace the existing serverless cache with a completely new serverless cache, rather than doing the in-place upgrade\n\n### Debug Output\n\n_No response_\n\n### Panic Output\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNone",
      "solution": "> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/elasticache"
      ],
      "created_at": "2025-03-03T23:16:19Z",
      "closed_at": "2026-02-02T15:37:05Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/41644",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 42766,
      "title": "resource/aws_elasticache_serverless_cache: user_group_id is not set to null after engine is updated to Valkey",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.11.3\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v5.98.0\n\nYour version of Terraform is out of date! The latest version\nis 1.12.1. You can update by downloading from https://www.terraform.io/downloads.html\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_elasticache_serverless_cache`\n\n### Expected Behavior\n\nIt should update the state with attribute `user_group_id` set to `null` as deduced from the [resource documentation](https://registry.terraform.io/providers/-/aws/5.98.0/docs/resources/elasticache_serverless_cache#user_group_id-3).\n\n### Actual Behavior\n\nAWS API errors out.\n\n### Relevant Error/Panic Output\n\n```console\n\u2502 Error: updating ElastiCache Serverless Cache (cache1-serverless)\n\u2502\n\u2502   with module.elasticache_serverless[\"cache1\"].aws_elasticache_serverless_cache.elasticache,\n\u2502   on .terraform/modules/elasticache_serverless/aws-elasticache-serverless/main.tf line 17, in resource \"aws_elasticache_serverless_cache\" \"elasticache\":\n\u2502   17: resource \"aws_elasticache_serverless_cache\" \"elasticache\" {\n\u2502\n\u2502 operation error ElastiCache: ModifyServerlessCache, https response error StatusCode: 400, RequestID: 9c9c8b2c-d71b-4717-b62a-68cfa4b18aa9, InvalidParameterCombination: No\n\u2502 modifications were requested\n```\n\n\n### Sample Terraform Configuration\n\n<details>\n<summary>Click to expand configuration</summary>\n\n```hcl\n# module.elasticache_serverless[\"cache1\"].aws_elasticache_serverless_cache.elasticache will be updated in-place\n~ resource \"aws_elasticache_serverless_cache\" \"elasticache\" {\n    ~ full_engine_version      = \"7.2\" -> (known after apply)\n      id                       = \"cache1-serverless\"\n      name                     = \"cache1-serverless\"\n      tags                     = {\n          \"Name\"        = \"cache1-serverless\"\n      }\n    - user_group_id            = \"cache1-serverless\" -> null\n      # (13 unchanged attributes hidden)\n\n      # (1 unchanged block hidden)\n  }\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Have serverless cache running Redis 7 associated to its own user group having engine Redis\n2. Modify serverless cache in the AWS Console to use Valkey 7 as engine\n3. Modify user group to use engine Valkey\n4. Run Terraform apply\n\n### Debug Logging\n\n<details>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\nAssigning user groups is supported for valkey: https://docs.aws.amazon.com/AmazonElastiCache/latest/APIReference/API_CreateServerlessCache.html\n\n```\nUserGroupId\n\n    The identifier of the UserGroup to be associated with the serverless cache. Available for Valkey and Redis OSS only. Default is NULL.\n\n    Type: String\n\n    Required: No\n\n```\n\nSo I don't think the issue is that the value isn't set to null, the issue is that something in the implementation doesn't match the AWS API.\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/elasticache"
      ],
      "created_at": "2025-05-26T10:03:01Z",
      "closed_at": "2026-02-02T15:38:59Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/42766",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 43884,
      "title": "aws_elasticache_replication_group should remove existing nodes on downscaling, not compute their IDs programamatically",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.11.3\non linux_amd64\n+ provider registry.terraform.io/datadog/datadog v3.67.0\n+ provider registry.terraform.io/hashicorp/archive v2.7.1\n+ provider registry.terraform.io/hashicorp/aws v5.100.0\n+ provider registry.terraform.io/hashicorp/null v3.2.4\n```\n\n### Affected Resource(s) or Data Source(s)\n\naws_elasticache_replication_group\n\n### Expected Behavior\n\nWhen decreasing `num_node_groups`, it should attempt to remove node groups that exist and belong to the replication group.\n\n### Actual Behavior\n\nIt programmatically generates the ids to remove and then AWS returns an error because they don't exist\n\n### Relevant Error/Panic Output\n\n```console\nError: modifying ElastiCache Replication Group (SNIP) shard configuration: operation error ElastiCache: ModifyReplicationGroupShardConfiguration, https response error StatusCode: 400, RequestID: SNIP, InvalidParameterValue: The following node group ids are invalid: [0010]\n\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nresource \"aws_elasticache_replication_group\" \"cluster\" {\n  replication_group_id = \"some_cluster\"\n\n  at_rest_encryption_enabled = false\n  transit_encryption_enabled = false\n\n  port                       = 6379\n  parameter_group_name       = aws_elasticache_parameter_group.cluster.name\n  automatic_failover_enabled = true\n  engine                     = \"valkey\"\n  engine_version             = \"8.0\"\n  multi_az_enabled           = false\n\n  node_type = \"cache.r7g.xlarge\"\n\n  subnet_group_name  = aws_elasticache_subnet_group.cluster_subnet.name\n  maintenance_window = \"mon:08:00-mon:09:00\"\n\n  cluster_mode            = \"enabled\"\n  replicas_per_node_group = 0\n  num_node_groups         = 10\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\nAs seen [in the code](https://github.com/hashicorp/terraform-provider-aws/blob/main/internal/service/elasticache/replication_group.go#L1166) it programmatically calculates the node ids it should remove. However, because of maintenance (or using terraform import), the nodes that actually belong to a cluster may not be in sequential order.\n\nThe concrete example of what I'm facing is:\n- my cluster has 10 nodes, with ids `1-7` , `9`, `11` and `12`\n- i try to decrease `num_node_groups` from 10 to 9\n- it tries to delete node with id `0010` and fails because it doesn't exist\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/elasticache"
      ],
      "created_at": "2025-08-14T15:34:24Z",
      "closed_at": "2026-02-02T15:39:44Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/43884",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45204,
      "title": "[Bug]: aws_elasticache_serverless_cache recreates if engine is changed from valkey 7 to redis 7",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform Core Version\nv1.5.7\n\nAWS Provider Version\nv6.20.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\naws_elasticache_serverless_cache\n\n### Expected Behavior\n\nTerraform should allow in-place valkey 7 to redis 7 engine update as AWS console allows same behaviour. It should not destroy and recreate resource.\n\n### Actual Behavior\n\nTerraform is recreating elasticache serverless.\n\n```console\nTerraform used the selected providers to generate the following execution plan. Resource actions are\nindicated with the following symbols:\n-/+ destroy and then create replacement\n\nTerraform will perform the following actions:\n\n  # aws_elasticache_serverless_cache.test_redis_valkey must be replaced\n-/+ resource \"aws_elasticache_serverless_cache\" \"test_redis_valkey\" {\n      ~ arn                      = \"arn:aws:elasticache:us-west-2:123456789:serverlesscache:test-redis\" -> (known after apply)\n      ~ create_time              = \"2025-11-21T16:36:57Z\" -> (known after apply)\n      ~ daily_snapshot_time      = \"11:30\" -> (known after apply)\n      ~ description              = \" \" -> (known after apply)\n      ~ endpoint                 = [\n          - {\n              - address = \"test-redis-qwerty.serverless.usw2.cache.amazonaws.com\"\n              - port    = 6379\n            },\n        ] -> (known after apply)\n      ~ engine                   = \"valkey\" -> \"redis\" # forces replacement\n      ~ full_engine_version      = \"7.2\" -> (known after apply)\n      ~ id                       = \"test-redis\" -> (known after apply)\n        name                     = \"test-redis\"\n      ~ reader_endpoint          = [\n          - {\n              - address = \"test-redis-qwerty.serverless.usw2.cache.amazonaws.com\"\n              - port    = 6380\n            },\n        ] -> (known after apply)\n      ~ snapshot_retention_limit = 0 -> (known after apply)\n      ~ status                   = \"available\" -> (known after apply)\n        # (5 unchanged attributes hidden)\n    }\n\nPlan: 1 to add, 0 to change, 1 to destroy.\n\nChanges to Outputs:\n  ~ elasticache_engine               = \"valkey\" -> \"redis\"\n  ~ elasticache_primary_endpoint     = [\n      - {\n          - address = \"test-redis-qwerty.serverless.usw2.cache.amazonaws.com\"\n          - port    = 6379\n        },\n    ] -> (known after apply)\n  ~ elasticache_serverless_cache_id  = \"test-redis\" -> (known after apply)\n```\n\n### Relevant Error/Panic Output\n\n```console\n\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>initial valkey 7</summary>\n\n```hcl\nresource \"aws_elasticache_serverless_cache\" \"test_redis_valkey\" {\n  name   = \"test-redis\"\n  \n  engine = \"valkey\"  \n  \n  major_engine_version = \"7\"\n\n  subnet_ids = [\n    aws_subnet.test_subnet_a.id,\n    aws_subnet.test_subnet_b.id\n  ]\n\n  security_group_ids = [aws_security_group.elasticache_sg.id]\n}\n```\n</details>\n\n<details open>\n<summary>after redis 7</summary>\n\n```hcl\nresource \"aws_elasticache_serverless_cache\" \"test_redis_valkey\" {\n  name   = \"test-redis\"\n\n  engine = \"redis\"\n  \n  major_engine_version = \"7\"\n\n  subnet_ids = [\n    aws_subnet.test_subnet_a.id,\n    aws_subnet.test_subnet_b.id\n  ]\n\n  security_group_ids = [aws_security_group.elasticache_sg.id]\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. create `aws_elasticache_serverless_cache` with engine valkey 7 \n2. terraform plan & terraform apply\n3. update engine to redis 7 \n4. terraform plan\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nYes",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/elasticache"
      ],
      "created_at": "2025-11-21T16:52:27Z",
      "closed_at": "2026-02-02T15:37:06Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45204",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45735,
      "title": "ephemeral aws_ecrpublic_authorization_token",
      "problem": "### What new functionality are you requesting?\n\nephemeral aws_ecrpublic_authorization_token\n\n### Description\n\nNow that we have ephemeral support, it'd be great to have `aws_ecrpublic_authorization_token` use that paradigm to avoid contaminating state with ECR authorization tokens.\n\n### Potential Terraform Configuration\n\n```hcl\nephemeral \"aws_ecrpublic_authorization_token\" \"token\" {}\n\nresource \"helm_release\" \"this\" {\n  # ...\n  repository_password = ephemeral.aws_ecrpublic_authorization_token.this.password\n  repository_username = ephemeral.aws_ecrpublic_authorization_token.this.user_name\n}\n```\n\n\n### References\n\nhttps://github.com/hashicorp/terraform-provider-aws/issues/42319\n\n### Would you like to implement the enhancement?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "service/ecrpublic",
        "new-ephemeral-resource"
      ],
      "created_at": "2025-12-24T19:06:26Z",
      "closed_at": "2026-01-30T20:14:36Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45735",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46133,
      "title": "aws_dynamodb_table_item should support managing items in foreign AWS Accounts",
      "problem": "### Terraform and AWS Provider Version\n\nDynamoDB supports resource based permission policies meaning that foreign security principals can interact with a DynamoDB table.\n\nResource aws_dynamodb_table_item only supports working with tables in the AWS Account where the AWS Provider was initialized.\n\nSince DDB Tables names are uniquely scoped per AWS Account, the resource should use a DDB Table ARN instead of a DDB Table Name. This would allow the use of the DDB client, local to the account where the AWS provider was initialized, to interact with DDB tables in foreign accounts. The AWS CLI/API supports either a name or an ARN.\n\nThis may just be a documentation update for the Table name parameter.\n\n### Affected Resource(s) or Data Source(s)\n\n* aws_dynamodb_table_item\n\n### Expected Behavior\n\nThe `aws_dynamodb_table_item` should support a table name or arn.\n\n### Actual Behavior\n\nThe documentation states that only a table name is supported.\n\n### Relevant Error/Panic Output\n\n```console\n\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\n\n```\n</details>\n\n\n### Steps to Reproduce\n\nna\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "documentation",
        "good first issue",
        "service/dynamodb"
      ],
      "created_at": "2026-01-23T13:46:42Z",
      "closed_at": "2026-01-29T23:32:20Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46133",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46189,
      "title": "Allow for multi-part IDs with generated identity tests",
      "problem": "### Description\n\nAdd support for framework multi-part IDs to use `acctest.AttrsImportStateIdFunc()` in generated tests. Currently, you can use `ImportStateIdFunc: acctest.AttrImportStateIdFunc(resourceName, {{ .ImportStateIDAttribute }})` in generated identity tests. See internal/generate/identitytests/resource_test.go.gtpl, lines 55-61, lines 87-95. However, you cannot use, e.g., `ImportStateIdFunc: acctest.AttrsImportStateIdFunc(resourceName, {{ .ImportStateIDFuncSeparator }})` (or similar). As a result, you need a hand coded ImportStateIDFunc, such as:\n\n```go\nfunc testAccManagedPolicyAttachmentsExclusiveImportStateIDFunc(resourceName string) resource.ImportStateIdFunc {\n\treturn func(s *terraform.State) (string, error) {\n\t\trs, ok := s.RootModule().Resources[resourceName]\n\t\tif !ok {\n\t\t\treturn \"\", fmt.Errorf(\"Not found: %s\", resourceName)\n\t\t}\n\n\t\tinstanceARN := rs.Primary.Attributes[\"instance_arn\"]\n\t\tpermissionSetARN := rs.Primary.Attributes[\"permission_set_arn\"]\n\n\t\tif instanceARN == \"\" || permissionSetARN == \"\" {\n\t\t\treturn \"\", fmt.Errorf(\"instance_arn or permission_set_arn is empty. instance_arn=%q, permission_set_arn=%q, all attributes: %v\", instanceARN, permissionSetARN, rs.Primary.Attributes)\n\t\t}\n\n\t\tparts := []string{\n\t\t\tinstanceARN,\n\t\t\tpermissionSetARN,\n\t\t}\n\n\t\treturn strings.Join(parts, intflex.ResourceIdSeparator), nil\n\t}\n}\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_ssoadmin_managed_policy_attachments_exclusive`\n\n### Potential Terraform Configuration\n\n```terraform\n\n```\n\n\n### References\n\n* #46176 (and [comment](https://github.com/hashicorp/terraform-provider-aws/pull/46176#discussion_r2738033473))\n\n### Would you like to implement the enhancement?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "enhancement",
        "service/ssoadmin"
      ],
      "created_at": "2026-01-28T20:36:50Z",
      "closed_at": "2026-01-30T16:42:16Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46189",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46258,
      "title": "aws_arcregionswitch_plan example uses \"trigger\" but schema requires \"triggers\"",
      "problem": "### Documentation Link(s)\n\nhttps://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/arcregionswitch_plan#triggers-1\n\n### Description\n\nThe \"Complex Usage with Multiple Step Types\" example on the `aws_arcregionswitch_plan` documentation page uses `trigger` (singular) block:\n```hcl\ntrigger {\n  action                               = \"activate\"\n  target_region                        = \"us-west-2\"\n  min_delay_minutes_between_executions = 30\n  ...\n}\n```\n\nHowever, the Argument Reference section correctly documents the attribute as `triggers` (plural):\n\n> triggers - (Optional) Set of triggers that can initiate the plan execution.\n\nUsing the example as-is results in an error:\n\nError: Unsupported block type\non arc_region_switch_plan.tf line 57, in resource \"aws_arcregionswitch_plan\" \"main\":\n57:   trigger {\nBlocks of type \"trigger\" are not expected here. Did you mean \"triggers\"?\n\nThe example should be updated to use `triggers` instead of `trigger`.\n\n### References\n\nN/A\n\n### Would you like to implement a fix?\n\nYes",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "documentation",
        "service/arcregionswitch"
      ],
      "created_at": "2026-02-02T16:46:51Z",
      "closed_at": "2026-02-03T16:58:16Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46258",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 31739,
      "title": "[Bug]: Attempting to attach AWS-AWSManagedRulesATPRuleSet to an existing WAF result in panic error.",
      "problem": "### Terraform Core Version\r\n\r\nv1.3.7\r\n\r\n### AWS Provider Version\r\n\r\nv4.67.0\r\n\r\n### Affected Resource(s)\r\n\r\naws_wafv2_web_acl\r\n\r\n### Expected Behavior\r\n\r\nwe should be able apply this configuration successfully.\r\n\r\n### Actual Behavior\r\n\r\nit's throwing below error when applying\r\n\r\n### Relevant Error/Panic Output Snippet\r\n\r\n```\r\n\"method\":cty.List(cty.EmptyObject), \"query_string\":cty.List(cty.EmptyObject), \"single_header\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})),\r\n\u2502 \"single_query_argument\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})), \"uri_path\":cty.List(cty.EmptyObject)})),\r\n\u2502 \"text_transformation\":cty.Set(cty.Object(map[string]cty.Type{\"priority\":cty.Number, \"type\":cty.String}))})),\r\n\u2502 \"rule_group_reference_statement\":cty.ListValEmpty(cty.Object(map[string]cty.Type{\"arn\":cty.String, \"excluded_rule\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String}))})),\r\n\u2502 \"size_constraint_statement\":cty.ListValEmpty(cty.Object(map[string]cty.Type{\"comparison_operator\":cty.String,\r\n\u2502 \"field_to_match\":cty.List(cty.Object(map[string]cty.Type{\"all_query_arguments\":cty.List(cty.EmptyObject), \"body\":cty.List(cty.Object(map[string]cty.Type{\"oversize_handling\":cty.String})),\r\n\u2502 \"cookies\":cty.List(cty.Object(map[string]cty.Type{\"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"excluded_cookies\":cty.List(cty.String),\r\n\u2502 \"included_cookies\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})),\r\n\u2502 \"headers\":cty.List(cty.Object(map[string]cty.Type{\"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"excluded_headers\":cty.List(cty.String),\r\n\u2502 \"included_headers\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})), \"json_body\":cty.List(cty.Object(map[string]cty.Type{\"invalid_fallback_behavior\":cty.String,\r\n\u2502 \"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"included_paths\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})),\r\n\u2502 \"method\":cty.List(cty.EmptyObject), \"query_string\":cty.List(cty.EmptyObject), \"single_header\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})),\r\n\u2502 \"single_query_argument\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})), \"uri_path\":cty.List(cty.EmptyObject)})), \"size\":cty.Number,\r\n\u2502 \"text_transformation\":cty.Set(cty.Object(map[string]cty.Type{\"priority\":cty.Number, \"type\":cty.String}))})),\r\n\u2502 \"sqli_match_statement\":cty.ListValEmpty(cty.Object(map[string]cty.Type{\"field_to_match\":cty.List(cty.Object(map[string]cty.Type{\"all_query_arguments\":cty.List(cty.EmptyObject),\r\n\u2502 \"body\":cty.List(cty.Object(map[string]cty.Type{\"oversize_handling\":cty.String})),\r\n\u2502 \"cookies\":cty.List(cty.Object(map[string]cty.Type{\"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"excluded_cookies\":cty.List(cty.String),\r\n\u2502 \"included_cookies\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})),\r\n\u2502 \"headers\":cty.List(cty.Object(map[string]cty.Type{\"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"excluded_headers\":cty.List(cty.String),\r\n\u2502 \"included_headers\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})), \"json_body\":cty.List(cty.Object(map[string]cty.Type{\"invalid_fallback_behavior\":cty.String,\r\n\u2502 \"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"included_paths\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})),\r\n\u2502 \"method\":cty.List(cty.EmptyObject), \"query_string\":cty.List(cty.EmptyObject), \"single_header\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})),\r\n\u2502 \"single_query_argument\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})), \"uri_path\":cty.List(cty.EmptyObject)})),\r\n\u2502 \"text_transformation\":cty.Set(cty.Object(map[string]cty.Type{\"priority\":cty.Number, \"type\":cty.String}))})),\r\n\u2502 \"xss_match_statement\":cty.ListValEmpty(cty.Object(map[string]cty.Type{\"field_to_match\":cty.List(cty.Object(map[string]cty.Type{\"all_query_arguments\":cty.List(cty.EmptyObject),\r\n\u2502 \"body\":cty.List(cty.Object(map[string]cty.Type{\"oversize_handling\":cty.String})),\r\n\u2502 \"cookies\":cty.List(cty.Object(map[string]cty.Type{\"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"excluded_cookies\":cty.List(cty.String),\r\n\u2502 \"included_cookies\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})),\r\n\u2502 \"headers\":cty.List(cty.Object(map[string]cty.Type{\"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"excluded_headers\":cty.List(cty.String),\r\n\u2502 \"included_headers\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})), \"json_body\":cty.List(cty.Object(map[string]cty.Type{\"invalid_fallback_behavior\":cty.String,\r\n\u2502 \"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"included_paths\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})),\r\n\u2502 \"method\":cty.List(cty.EmptyObject), \"query_string\":cty.List(cty.EmptyObject), \"single_header\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})),\r\n\u2502 \"single_query_argument\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})), \"uri_path\":cty.List(cty.EmptyObject)})),\r\n\u2502 \"text_transformation\":cty.Set(cty.Object(map[string]cty.Type{\"priority\":cty.Number, \"type\":cty.String}))}))})}),\r\n\u2502 \"visibility_config\":cty.ListVal([]cty.Value{cty.ObjectVal(map[string]cty.Value{\"cloudwatch_metrics_enabled\":cty.False, \"metric_name\":cty.StringVal(\"buynomicsdevelopmentCommonRuleSet\"),\r\n\u2502 \"sampled_requests_enabled\":cty.True})})}) does not correlate with any element in actual.\r\n\u2502 \r\n\u2502 This is a bug in the provider, which should be reported in the provider's own issue tracker.\r\n```\r\n\r\n\r\n### Terraform Configuration Files\r\n\r\n```hcl\r\nresource \"aws_wafv2_web_acl\" \"main\" {\r\n  name        = \"${lower(var.name)}-webaclv2\"\r\n  description = \"WAFv2 AWSManagedRules for BNsuite\"\r\n  scope       = \"REGIONAL\"\r\n\r\n  default_action {\r\n    allow {}\r\n  }\r\n\r\nrule {\r\n    name     = \"KeycloakAuthRestrictions\"\r\n    priority = 1\r\n\r\n    override_action {\r\n      none {}\r\n    }\r\n\r\n    statement {\r\n      rule_group_reference_statement {\r\n        arn = aws_wafv2_rule_group.keycloak_auth_restrictions.arn\r\n      }\r\n    }\r\n\r\n    visibility_config {\r\n      cloudwatch_metrics_enabled = false\r\n      metric_name                = \"${lower(var.custom_metric_name)}KeycloakAuthRestrictions\"\r\n      sampled_requests_enabled   = true\r\n    }\r\n  }\r\n\r\nrule {\r\n    name     = \"AccountTakeOverPrevention\"\r\n    priority = 2\r\n\r\n    override_action {\r\n      count {}\r\n    }\r\n\r\n    statement {\r\n      managed_rule_group_statement {\r\n        name        = \"AWSManagedRulesATPRuleSet\"\r\n        vendor_name = \"AWS\"\r\n\r\n        managed_rule_group_configs {\r\n          aws_managed_rules_atp_rule_set {\r\n            login_path = var.bn_context == \"review\" ? \"/admin-${var.bn_context}\" : \"/admin\"\r\n\r\n            request_inspection {\r\n              password_field {\r\n                identifier = \"/password\"\r\n              }\r\n\r\n              payload_type = \"JSON\"\r\n\r\n              username_field {\r\n                identifier = \"/username\"\r\n              }\r\n            }\r\n\r\n            response_inspection {\r\n              status_code {\r\n                failure_codes = [\"403\"]\r\n                success_codes = [\"200\"]\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    visibility_config {\r\n      cloudwatch_metrics_enabled = false\r\n      metric_name                = \"${lower(var.custom_metric_name)}AccountTakeOverPrevention\"\r\n      sampled_requests_enabled   = true\r\n    }\r\n  }\r\n\r\n  tags = {\r\n    Terraform = \"True\"\r\n    Name      = \"${lower(var.name)}-webaclv2\"\r\n  }\r\n\r\n  visibility_config {\r\n    cloudwatch_metrics_enabled = false\r\n    metric_name                = \"${lower(var.custom_metric_name)}Default\"\r\n    sampled_requests_enabled   = true\r\n  }\r\n}\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\ntry to apply this code, it should throw the given error\r\n\r\n### Debug Output\r\n\r\n_No response_\r\n\r\n### Panic Output\r\n\r\n```\r\n \"method\":cty.List(cty.EmptyObject), \"query_string\":cty.List(cty.EmptyObject), \"single_header\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})),\r\n\u2502 \"single_query_argument\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})), \"uri_path\":cty.List(cty.EmptyObject)})),\r\n\u2502 \"text_transformation\":cty.Set(cty.Object(map[string]cty.Type{\"priority\":cty.Number, \"type\":cty.String}))})),\r\n\u2502 \"rule_group_reference_statement\":cty.ListValEmpty(cty.Object(map[string]cty.Type{\"arn\":cty.String, \"excluded_rule\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String}))})),\r\n\u2502 \"size_constraint_statement\":cty.ListValEmpty(cty.Object(map[string]cty.Type{\"comparison_operator\":cty.String,\r\n\u2502 \"field_to_match\":cty.List(cty.Object(map[string]cty.Type{\"all_query_arguments\":cty.List(cty.EmptyObject), \"body\":cty.List(cty.Object(map[string]cty.Type{\"oversize_handling\":cty.String})),\r\n\u2502 \"cookies\":cty.List(cty.Object(map[string]cty.Type{\"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"excluded_cookies\":cty.List(cty.String),\r\n\u2502 \"included_cookies\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})),\r\n\u2502 \"headers\":cty.List(cty.Object(map[string]cty.Type{\"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"excluded_headers\":cty.List(cty.String),\r\n\u2502 \"included_headers\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})), \"json_body\":cty.List(cty.Object(map[string]cty.Type{\"invalid_fallback_behavior\":cty.String,\r\n\u2502 \"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"included_paths\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})),\r\n\u2502 \"method\":cty.List(cty.EmptyObject), \"query_string\":cty.List(cty.EmptyObject), \"single_header\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})),\r\n\u2502 \"single_query_argument\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})), \"uri_path\":cty.List(cty.EmptyObject)})), \"size\":cty.Number,\r\n\u2502 \"text_transformation\":cty.Set(cty.Object(map[string]cty.Type{\"priority\":cty.Number, \"type\":cty.String}))})),\r\n\u2502 \"sqli_match_statement\":cty.ListValEmpty(cty.Object(map[string]cty.Type{\"field_to_match\":cty.List(cty.Object(map[string]cty.Type{\"all_query_arguments\":cty.List(cty.EmptyObject),\r\n\u2502 \"body\":cty.List(cty.Object(map[string]cty.Type{\"oversize_handling\":cty.String})),\r\n\u2502 \"cookies\":cty.List(cty.Object(map[string]cty.Type{\"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"excluded_cookies\":cty.List(cty.String),\r\n\u2502 \"included_cookies\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})),\r\n\u2502 \"headers\":cty.List(cty.Object(map[string]cty.Type{\"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"excluded_headers\":cty.List(cty.String),\r\n\u2502 \"included_headers\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})), \"json_body\":cty.List(cty.Object(map[string]cty.Type{\"invalid_fallback_behavior\":cty.String,\r\n\u2502 \"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"included_paths\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})),\r\n\u2502 \"method\":cty.List(cty.EmptyObject), \"query_string\":cty.List(cty.EmptyObject), \"single_header\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})),\r\n\u2502 \"single_query_argument\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})), \"uri_path\":cty.List(cty.EmptyObject)})),\r\n\u2502 \"text_transformation\":cty.Set(cty.Object(map[string]cty.Type{\"priority\":cty.Number, \"type\":cty.String}))})),\r\n\u2502 \"xss_match_statement\":cty.ListValEmpty(cty.Object(map[string]cty.Type{\"field_to_match\":cty.List(cty.Object(map[string]cty.Type{\"all_query_arguments\":cty.List(cty.EmptyObject),\r\n\u2502 \"body\":cty.List(cty.Object(map[string]cty.Type{\"oversize_handling\":cty.String})),\r\n\u2502 \"cookies\":cty.List(cty.Object(map[string]cty.Type{\"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"excluded_cookies\":cty.List(cty.String),\r\n\u2502 \"included_cookies\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})),\r\n\u2502 \"headers\":cty.List(cty.Object(map[string]cty.Type{\"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"excluded_headers\":cty.List(cty.String),\r\n\u2502 \"included_headers\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})), \"json_body\":cty.List(cty.Object(map[string]cty.Type{\"invalid_fallback_behavior\":cty.String,\r\n\u2502 \"match_pattern\":cty.List(cty.Object(map[string]cty.Type{\"all\":cty.List(cty.EmptyObject), \"included_paths\":cty.List(cty.String)})), \"match_scope\":cty.String, \"oversize_handling\":cty.String})),\r\n\u2502 \"method\":cty.List(cty.EmptyObject), \"query_string\":cty.List(cty.EmptyObject), \"single_header\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})),\r\n\u2502 \"single_query_argument\":cty.List(cty.Object(map[string]cty.Type{\"name\":cty.String})), \"uri_path\":cty.List(cty.EmptyObject)})),\r\n\u2502 \"text_transformation\":cty.Set(cty.Object(map[string]cty.Type{\"priority\":cty.Number, \"type\":cty.String}))}))})}),\r\n\u2502 \"visibility_config\":cty.ListVal([]cty.Value{cty.ObjectVal(map[string]cty.Value{\"cloudwatch_metrics_enabled\":cty.False, \"metric_name\":cty.StringVal(\"buynomicsdevelopmentCommonRuleSet\"),\r\n\u2502 \"sampled_requests_enabled\":cty.True})})}) does not correlate with any element in actual.\r\n\u2502 \r\n\u2502 This is a bug in the provider, which should be reported in the provider's own issue tracker.\r\n```\r\n\r\n### Important Factoids\r\n\r\n_No response_\r\n\r\n### References\r\n\r\n_No response_\r\n\r\n### Would you like to implement a fix?\r\n\r\nNone",
      "solution": "Just leaving a note to say I've hit something similar with 1.3.x and the 5.0 provider, that per #30080 was resolved (or at least worked around) by using TF 1.4.6\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "stale",
        "service/wafv2"
      ],
      "created_at": "2023-06-02T16:52:57Z",
      "closed_at": "2026-01-04T17:43:57Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/31739",
      "comments_count": 8
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 27215,
      "title": "[Docs]: aws_cloudwatch_event_target - batch_target, role_arn should be required",
      "problem": "## Documentation Link\r\n\r\nhttps://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_event_target#argument-reference\r\n\r\n## Description\r\n\r\n### Versions\r\n\r\nTerraform: 1.3.2\r\nAWS Provider: 4.34\r\n\r\n### What's happening\r\n\r\nWhen creating an EventBridge Target, the current documentation states that RoleArn is optional:\r\n\r\n> [role_arn](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_event_target#role_arn) - (Optional) The Amazon Resource Name (ARN) of the IAM role to be used for this target when the rule is triggered. Required if ecs_target is used or target in arn is EC2 instance, Kinesis data stream, Step Functions state machine, or Event Bus in different account or region.\r\n\r\nI have accordingly created the following resource in `batch_target`:\r\n\r\n```hcl\r\nresource \"aws_cloudwatch_event_target\" \"this\" {\r\n  rule     = aws_cloudwatch_event_rule.this.name\r\n  arn      = aws_batch_job_queue.this.arn\r\n  batch_target {\r\n    job_definition = aws_batch_job_definition.this.name\r\n    job_name       = \"my-job\"\r\n    job_attempts   = 3\r\n  }\r\n}\r\n```\r\n\r\n`terraform plan` passes, but when `terraform deploy`, it complains as follows:\r\n\r\n```zsh\r\n\u2502 Error: Creating EventBridge Target failed: ValidationException: RoleArn is required for target arn:aws:batch:us-west-1:***:job-queue/this-queue.\r\n\u2502 \tstatus code: 400, request id: faaee62f-dc3a-4177-86b7-5bacd3215150\r\n\u2502 \r\n\u2502   with aws_cloudwatch_event_target.this,\r\n\u2502   on ../compute.tf line 10, in resource \"aws_cloudwatch_event_target\" \"this\":\r\n\u2502  10: resource \"aws_cloudwatch_event_target\" \"this\" {\r\n\u2502 \r\n\u2575\r\n```\r\n\r\nMy Batch is defined to be executed by Fargate. This potentially implies that the interpretation by the AWS API called by the SDK could be `ecs_target`, which requires a RoleArn to be specified.\r\nSo, I actually specified the RoleArn and the `terraform deploy` worked:\r\n\r\n```hcl\r\nresource \"aws_cloudwatch_event_target\" \"this\" {\r\n  rule     = aws_cloudwatch_event_rule.this.name\r\n  role_arn = aws_iam_role.this.arn  # Added\r\n  arn      = aws_batch_job_queue.this.arn\r\n  batch_target {\r\n    job_definition = aws_batch_job_definition.this.name\r\n    job_name       = \"my-job\"\r\n    job_attempts   = 3\r\n  }\r\n}\r\n```\r\n\r\n### Note\r\n\r\nI am willing to contribute to the relevant documentation update, but it seems to me that `role_arn` may be required for other targets as #20519 and others indicate. I'm not too sure how to describe it in this case that would cause the least confusion to the end user :(\r\n\r\n\r\n\r\n## References\r\n\r\n* Related to this Issue: #20519\r\n* https://github.com/hashicorp/terraform-provider-aws/blob/main/website/docs/r/cloudwatch_event_target.html.markdown\r\n\r\n### Would you like to implement a fix?\r\n\r\nYes",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "documentation",
        "stale",
        "service/events"
      ],
      "created_at": "2022-10-12T16:35:30Z",
      "closed_at": "2026-01-04T17:44:03Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/27215",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 34851,
      "title": "[Bug]:  aws_medialive_channel target_lkfs non functional.",
      "problem": "### Terraform Core Version\r\n\r\n1.6.5\r\n\r\n### AWS Provider Version\r\n\r\n5.30.0\r\n\r\n### Affected Resource(s)\r\n\r\naws_medialive_channel\r\n\r\naudio_normalization_settings {\r\n        target_lkfs = -16\r\n}\r\n\r\nIt seems the target_lkfs value will never accept a value and set it.  I have used positive and negative integers, floats, strings but nothing seems to take.  I do not see a change happen in the state file or on AWS's resource. \r\nI have noticed that if I manually / externally set the value matching what is in terraform running a plan or apply recognizes that the value matches, and is happy.  Obviously not a long term solution.\r\n\r\n\r\n### Expected Behavior\r\n\r\nDocumentation states that putting a number for this attribute should set it.\r\n\r\n### Actual Behavior\r\n\r\nValue in the state file is set to zero, and the field on AWS is empty. \r\n\r\n### Relevant Error/Panic Output Snippet\r\n\r\n_No response_\r\n\r\n### Terraform Configuration Files\r\n\r\nThe aws_medialive_channel resource is very big, so posting the whole thing here seems over kill.   The section audio_normalization_settings target_lkfs is where the problem is seen.   Setting algorithm & algorithm_control seems to work as intended. \r\n\r\n```\r\nresource \"aws_medialive_channel\" \"example\" {\r\n  name          = \"sample\"\r\n  channel_class = \"SINGLE_PIPELINE\"\r\n  role_arn      = aws_iam_role.media_live_role.arn\r\n  log_level     = \"INFO\"\r\n\r\n encoder_settings {\r\n    timecode_config {\r\n      source = \"EMBEDDED\"\r\n    }\r\n\r\n    audio_descriptions {\r\n      audio_selector_name = \"YouTubeAudioSelector\"\r\n      name                = \"YouTubeAudio\"\r\n      audio_type_control  = \"FOLLOW_INPUT\"\r\n      codec_settings {\r\n        // Codec Configuration //\r\n        aac_settings {\r\n          coding_mode = \"CODING_MODE_1_0\"\r\n          profile     = \"LC\"\r\n          bitrate     = 128000\r\n          sample_rate = 48000\r\n          input_type  = \"NORMAL\"\r\n          raw_format  = \"NONE\"\r\n          spec        = \"MPEG4\"\r\n          vbr_quality = null\r\n        }\r\n      }\r\n      audio_normalization_settings {\r\n        algorithm = \"ITU_1770_2\"\r\n        algorithm_control = \"CORRECT_AUDIO\"\r\n        target_lkfs = -16\r\n      }\r\n      language_code_control = \"FOLLOW_INPUT\"\r\n    }\r\n\r\n}\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\nSetting target_lkfs with any value does not seem to be accepted.  When a value is manually put in the aws console running terraform will see it is matching, and accept that the resource is correct, also updating the statefile to match.\r\n\r\n### Debug Output\r\n\r\n_No response_\r\n\r\n### Panic Output\r\n\r\n_No response_\r\n\r\n### Important Factoids\r\n\r\n_No response_\r\n\r\n### References\r\n\r\n_No response_\r\n\r\n### Would you like to implement a fix?\r\n\r\nNo",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/medialive",
        "stale"
      ],
      "created_at": "2023-12-11T04:43:22Z",
      "closed_at": "2026-01-03T17:43:51Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/34851",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 23789,
      "title": "Add aws_ssm_tags resource for tagging SSM resources",
      "problem": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nSimilarly to https://github.com/hashicorp/terraform-provider-aws/pull/8457 it is sometimes useful to manage the tags on resources that are not fully managed by Terraform.\r\n\r\nIn this particular case it's useful for managing the tags on hybrid (or on-premise) SSM managed instances that can currently only be tagged by Terraform from the initial tags on the SSM activation using the `aws_ssm_activation` resource. If you want to change the tags of the instance after this an update to the tags on the activation will recreate the activation but it would then require an out of band action to reregister the managed instance with the new activation ID and code. Instead it would be preferable to set `ignore_changes` on the tags and then have a separate `aws_ssm_tag` resource linked to the instance to tag them.\r\n\r\n### New or Affected Resource(s)\r\n\r\n<!--- Please list the new or affected resources and data sources. --->\r\n\r\n* aws_ssm_tags\r\n\r\n### Potential Terraform Configuration\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n```hcl\r\nlocal {\r\n  tags = {\r\n    Host       = \"foo.example.org\"\r\n    Location   = \"foo\"\r\n    On-Premise = true\r\n  }\r\n}\r\n\r\nresource \"aws_ssm_activation\" \"example\" {\r\n  name               = \"example\"\r\n  registration_limit = 1\r\n\r\n  tags = local.tags\r\n\r\n  lifecycle {\r\n    # Don't replace previous activations if we change the tags because it would\r\n    # require us to reregister for it to propagate to the managed instance.\r\n    ignore_changes = [tags]\r\n  }\r\n}\r\n\r\ndata \"aws_ssm_instances\" \"activated\" {\r\n  filter {\r\n    name   = \"ActivationIds\"\r\n    values = [aws_ssm_activation.example.id]\r\n  }\r\n}\r\n\r\nresource \"aws_ssm_tags\" \"example\" {\r\n  resource_type = \"ManagedInstance\"\r\n  resource_id   = data.aws_ssm_instances.activated.ids[0]\r\n  tags          = local.tags\r\n}\r\n```\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation? For example:\r\n\r\n* https://aws.amazon.com/about-aws/whats-new/2018/04/introducing-amazon-ec2-fleet/\r\n--->\r\n\r\n* #8457\r\n",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "new-resource",
        "service/ssm",
        "stale"
      ],
      "created_at": "2022-03-21T20:14:03Z",
      "closed_at": "2026-01-03T17:44:10Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/23789",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 23409,
      "title": "Cannot manage default x-ray sampling rule",
      "problem": "### Community Note\r\n\r\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n### Terraform CLI and Terraform AWS Provider Version\r\n\r\nTerraform: 0.14.10\r\nAWS Provider: 4.2.0\r\n\r\n### Affected Resource(s)\r\n\r\n* aws_xray_sampling_rule\r\n\r\n### Terraform Configuration Files\r\n\r\n```\r\nresource \"aws_xray_sampling_rule\" \"default\" {\r\n  rule_name      = \"Default\"\r\n  priority       = 10000\r\n  version        = 1\r\n  reservoir_size = 0\r\n  fixed_rate     = 0.00\r\n  url_path       = \"*\"\r\n  host           = \"*\"\r\n  http_method    = \"*\"\r\n  service_type   = \"*\"\r\n  service_name   = \"*\"\r\n  resource_arn   = \"*\"\r\n}\r\n```\r\n\r\n### Expected Behavior\r\n\r\nThe sampling rule can be updated\r\n\r\n### Actual Behavior\r\n\r\nThe following error is thrown:\r\n\r\n```\r\nError: expected priority to be in the range (1 - 9999), got 10000\r\n\r\n  on main.tf line 33, in resource \"aws_xray_sampling_rule\" \"default\":\r\n  33:   priority       = 10000\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\nUse the configuration file above and attempt a \"terraform plan\"\r\n",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "stale",
        "service/xray"
      ],
      "created_at": "2022-02-28T14:35:08Z",
      "closed_at": "2026-01-03T17:44:11Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/23409",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 35074,
      "title": "Provider enforcing only lowercase alphanumeric characters and hyphens allowed in option group \"name\" makes importing impossible",
      "problem": "### Terraform Core Version\r\n\r\n1.6.6\r\n\r\n### AWS Provider Version\r\n\r\n5.31.0\r\n\r\n### Affected Resource(s)\r\n\r\n* aws_db_option_group\r\n\r\n### Expected Behavior\r\n\r\nGiven that this resource exists on aws and I was able to generate a resource via import using the option group identifier, I should be able to import and produce a terraform plan without error.\r\n\r\n\r\n\r\n### Actual Behavior\r\n\r\nCannot execute plan due to colon `:` in name.\r\n\r\n\r\n\r\n### Relevant Error/Panic Output Snippet\r\n\r\n```shell\r\n\u2502 Error: only lowercase alphanumeric characters and hyphens allowed in \"name\"\r\n\u2502 \r\n\u2502   with aws_db_option_group.default_postgres_10,\r\n\u2502   on generated.tf line 3394, in resource \"aws_db_option_group\" \"default_postgres_10\":\r\n\u2502 3394:   name                     = \"default:postgres-10\"\r\n\u2502 \r\n```\r\n\r\n### Terraform Configuration Files\r\n\r\n```\r\nresource \"aws_db_option_group\" \"default_postgres_10\" {\r\n  engine_name              = \"postgres\"\r\n  major_engine_version     = \"10\"\r\n  name                     = \"default:postgres-10\"\r\n  name_prefix              = null\r\n  option_group_description = \"Default option group for postgres 10\"\r\n  tags                     = {}\r\n  tags_all                 = {}\r\n}\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\n1. Create postgres db in rds manually, and then use terraform import to import resources. Or just create a db option group with something like the hcl above.\r\n```\r\nimport {\r\n  id = \"default:postgres-10\"\r\n  to = aws_db_option_group.default_postgres_10\r\n}\r\n```\r\n2. terraform plan\r\n\r\n### Debug Output\r\n\r\n_No response_\r\n\r\n### Panic Output\r\n\r\n_No response_\r\n\r\n### Important Factoids\r\n\r\nThe DB was pre-existing, trying to import everything into terraform that has been created by point-and-click.\r\n\r\n\r\n\r\n### References\r\n\r\nRelated to this issue which only resolved for aws db parameter groups: https://github.com/hashicorp/terraform-provider-aws/issues/12144\r\n\r\n### Would you like to implement a fix?\r\n\r\nNone",
      "solution": "@zaccee Correct. Consider the following sample TF config which I just ran to be 100% certain:\r\n\r\n```\r\nresource \"aws_db_instance\" \"example\" {\r\n  allocated_storage    = 20\r\n  engine               = \"postgres\"\r\n  engine_version       = \"16\"\r\n  instance_class       = \"db.t3.micro\"\r\n  db_name              = \"mydb\"\r\n  username             = \"foo\"\r\n  password             = \"foobarbaz\"\r\n  skip_final_snapshot  = true\r\n  db_subnet_group_name = \"test\"\r\n}\r\n```\r\n\r\nWhen deploying an RDS for PostgreSQL instance at v16 for the first time in my AWS account using Terraform, AWS will automatically created the default option group `default:postgres-16` and the default parameter group `default.postgres16`. Just note that you cannot change any setting in these default option/parameter groups. You must create your own if you need to customize even one setting in either of them.",
      "labels": [
        "enhancement",
        "service/rds",
        "stale"
      ],
      "created_at": "2023-12-28T01:23:11Z",
      "closed_at": "2026-02-02T17:55:27Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/35074",
      "comments_count": 6
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 21746,
      "title": "New resource: `aws_mgn_replication_configuration_template` AWS Application Migration Service",
      "problem": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nService doc:\r\n\"AWS Application Migration Service (MGN) is a highly automated lift-and-shift (rehost) solution that simplifies, expedites, and reduces the cost of migrating applications to AWS.\"\r\n\r\n### New or Affected Resource(s)\r\n\r\n<!--- Please list the new or affected resources and data sources. --->\r\n\r\n* aws_mgn_replication_configuration_template\r\n\r\n### Potential Terraform Configuration\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n```hcl\r\nresource \"aws_mgn_replication_configuration_template\" \"this\" {\r\n  associate_default_security_group = true\r\n  bandwidth_throttling = 1000\r\n  create_public_ip = false\r\n  data_plane_routing = \"PRIVATE_IP\"\r\n  default_large_staging_disk_type = \"gp2\"\r\n  ebs_encryption = \"DEFAULT\"\r\n  ebs_encryption_key_arn = \"\"\r\n  replication_server_instance_type = \"t3.medium\"\r\n  replication_servers_security_groups_ids = [ \"sg-123456\" ]\r\n  staging_area_subnet_id = \"subnet-123456\"\r\n  staging_area_tags = { \r\n      \"Env\" : \"Dev\"\r\n      \"StagingArea\" : \"true\" \r\n   }\r\n  tags = { \r\n      \"Env\" : \"Dev\"\r\n   }\r\n  use_dedicated_replication_server = true\r\n}\r\n```\r\n\r\n### References\r\n\r\n* https://aws.amazon.com/about-aws/whats-new/2021/05/announcing-general-availability-of-aws-application-migration-service/?nc1=h_ls\r\n* https://docs.aws.amazon.com/sdk-for-go/api/service/mgn/#mgn.CreateReplicationConfigurationTemplate\r\n* https://docs.aws.amazon.com/mgn/latest/ug/what-is-application-migration-service.html",
      "solution": "> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "enhancement",
        "new-resource"
      ],
      "created_at": "2021-11-12T03:10:09Z",
      "closed_at": "2026-02-02T02:12:54Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/21746",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 17009,
      "title": "Subsequent builds of the API Gateway don't detect updates to the body (OpenAPI spec import) after a failed attempt",
      "problem": "<!---\r\nPlease note the following potential times when an issue might be in Terraform core:\r\n\r\n* [Configuration Language](https://www.terraform.io/docs/configuration/index.html) or resource ordering issues\r\n* [State](https://www.terraform.io/docs/state/index.html) and [State Backend](https://www.terraform.io/docs/backends/index.html) issues\r\n* [Provisioner](https://www.terraform.io/docs/provisioners/index.html) issues\r\n* [Registry](https://registry.terraform.io/) issues\r\n* Spans resources across multiple providers\r\n\r\nIf you are running into one of these scenarios, we recommend opening an issue in the [Terraform core repository](https://github.com/hashicorp/terraform/) instead.\r\n--->\r\n\r\n<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Terraform CLI and Terraform AWS Provider Version\r\n\r\n<!--- Please run `terraform -v` to show the Terraform core version and provider version(s). If you are not running the latest version of Terraform or the provider, please upgrade because your issue may have already been fixed. [Terraform documentation on provider versioning](https://www.terraform.io/docs/configuration/providers.html#provider-versions). --->\r\n\r\n```sh\r\n# terraform -v\r\nTerraform v0.13.5\r\n+ provider registry.terraform.io/hashicorp/aws v3.22.0\r\n```\r\n\r\n### Affected Resource(s)\r\n\r\n<!--- Please list the affected resources and data sources. --->\r\n\r\n* aws_apigatewayv2_api\r\n\r\n### Terraform Configuration Files\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nPlease include all Terraform configurations required to reproduce the bug. Bug reports without a functional reproduction may be closed without investigation.\r\n\r\n```hcl\r\nresource \"aws_apigatewayv2_api\" \"gw\" {\r\n  name          = local.api_gw_name\r\n  protocol_type = \"HTTP\"\r\n  body          = var.body != \"\" ? file(var.body) : null\r\n}\r\n```\r\n\r\n### Debug Output\r\n\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n\r\nTo obtain the debug output, see the [Terraform documentation on debugging](https://www.terraform.io/docs/internals/debugging.html).\r\n--->\r\nI can provide the debug output if it's useful in this scenario. Just let me know.\r\n\r\n### Expected Behavior\r\n\r\n<!--- What should have happened? --->\r\nWhen the configuration was initially applied, I got the following error:\r\n\r\n```sh\r\n# terraform apply -auto-approve\r\naws_cloudwatch_log_group.default: Refreshing state... [id=/api-gateway/app-api-gw-staging]\r\naws_apigatewayv2_api.gw: Refreshing state... [id=xxx]\r\naws_apigatewayv2_stage.default: Refreshing state... [id=$default]\r\naws_lambda_permission.api_gw[0]: Refreshing state... [id=terraform-20201119190514480700000002]\r\naws_lambda_permission.api_gw[1]: Refreshing state... [id=terraform-20201119190514476700000001]\r\naws_apigatewayv2_api.gw: Modifying... [id=xxx]\r\n\r\nError: error importing API Gateway v2 API (xxx) OpenAPI specification: BadRequestException: Maximum number of Routes for this API has been reached.  Please contact AWS if you need additional Routes.\r\n```\r\n\r\nRerunning the same command should have produced the same error as above.\r\n\r\n### Actual Behavior\r\n\r\n<!--- What actually happened? --->\r\nRerunning the same command right after, produced:\r\n\r\n```sh\r\n# terraform apply -auto-approve\r\naws_cloudwatch_log_group.default: Refreshing state... [id=/api-gateway/app-api-gw-staging]\r\naws_apigatewayv2_api.gw: Refreshing state... [id=xxx]\r\naws_lambda_permission.api_gw[0]: Refreshing state... [id=terraform-20201119190514480700000002]\r\naws_apigatewayv2_stage.default: Refreshing state... [id=$default]\r\naws_lambda_permission.api_gw[1]: Refreshing state... [id=terraform-20201119190514476700000001]\r\n\r\nApply complete! Resources: 0 added, 0 changed, 0 destroyed.\r\n```\r\n\r\nThis is true for all the subsequent runs.\r\n\r\n### Steps to Reproduce\r\n\r\n<!--- Please list the steps required to reproduce the issue. --->\r\n\r\n1. `terraform apply -auto-approve`\r\n2. `terraform apply -auto-approve`\r\n\r\n### Important Factoids\r\n\r\n<!--- Are there anything atypical about your accounts that we should know? For example: Running in EC2 Classic? --->\r\nTo be sure, the error is correct, I was adding 301 routes, which goes above the threshold of 300.\r\n\r\nBefore applying the failed configuration, I exported the API spec (`old.json`). I have then downloaded it once again after the successful subsequent run (`current.json`). Finally, I have compared the number of routes with the OpenAPI spec file I was trying to import via Terraform (`new.json`). This shows that the routes have stayed unchanged and that Terraform did not detect changes in the API `body` even though the file differed from the current `body`:\r\n\r\n```sh\r\n\u279c jq '.paths | to_entries[] | .value | to_entries[] | .key' old.json | wc -l\r\n     273\r\n\u279c jq '.paths | to_entries[] | .value | to_entries[] | .key' new.json | wc -l\r\n     301\r\n\u279c jq '.paths | to_entries[] | .value | to_entries[] | .key' current.json | wc -l\r\n     273\r\n```\r\n\r\nAlso worth noting that if revert to the previous file and run `terraform apply`, Terraform detects a change:\r\n\r\n```sh\r\n# terraform apply -auto-approve\r\nAcquiring state lock. This may take a few moments...\r\naws_cloudwatch_log_group.default: Refreshing state... [id=/api-gateway/app-api-gw-staging]\r\naws_apigatewayv2_api.gw: Refreshing state... [id=2lid9vnukj]\r\naws_lambda_permission.api_gw[0]: Refreshing state... [id=terraform-20201119190514480700000002]\r\naws_lambda_permission.api_gw[1]: Refreshing state... [id=terraform-20201119190514476700000001]\r\naws_apigatewayv2_stage.default: Refreshing state... [id=$default]\r\naws_apigatewayv2_api.gw: Modifying... [id=2lid9vnukj]\r\naws_apigatewayv2_api.gw: Still modifying... [id=2lid9vnukj, 10s elapsed]\r\naws_apigatewayv2_api.gw: Modifications complete after 17s [id=2lid9vnukj]\r\n\r\nApply complete! Resources: 0 added, 1 changed, 0 destroyed\r\n```\r\n\r\nAt this point, if I change the OpenAPI spec file to the failing one, Terraform will fail once again, but only once, as described above.\r\n\r\nThis becomes a problem in our automation setup, as we have an automatic retry mechanism to mitigate flakiness. \r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n* #0000\r\n",
      "solution": "@finferflu Thanks for raising this issue.\r\nThe issue is that from the provider's view, the API's `body` attribute hasn't changed and no difference can be done between what the API's state would be if it represented the `body` and it's current state when read from AWS.\r\n\r\nWhat we could do during resource refresh is call [`ExportApi`](https://docs.aws.amazon.com/apigatewayv2/latest/api-reference/apis-apiid-exports-specification.html#ExportApi) to return what AWS thinks the `body` should be.\r\nWe would have to take into account JSON vs. YAML formats and spec. equivalence.\n\n---\n\nHi @ewbankkit,\r\n\r\nThanks for the update. Will this be added to the provider at some point? \r\n\r\nAt the moment, this is an issue that affects several of our applications, and the only mitigation strategy we have in place is to increase the API Gateway max routes threshold and recreate the API Gateway so that changes to the OpenAPI spec files are detected again. This is, however, disruptive, and we'd rather avoid this if the issue is fixed upstream within a reasonable timescale. \r\n\r\nThanks!",
      "labels": [
        "enhancement",
        "stale",
        "service/apigatewayv2"
      ],
      "created_at": "2021-01-07T18:12:18Z",
      "closed_at": "2026-02-01T17:47:39Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/17009",
      "comments_count": 9
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 31132,
      "title": "[Bug]: Race condition in aws_acm_certificate with aws_acmpca_certificate_authority",
      "problem": "### Terraform Core Version\r\n\r\n1.4.6.\r\n\r\n### AWS Provider Version\r\n\r\n4.65.0\r\n\r\n### Affected Resource(s)\r\n\r\n* aws_acm_certificate\r\n* aws_acmpca_certificate_authority\r\n\r\n### Expected Behavior\r\n\r\naws_acm_certificate should wait until the Private Certificate Authority (PCA) is in ACTIVE state before requesting certificate issuance.\r\n\r\n### Actual Behavior\r\n\r\naws_acm_certificate appears to request a certificate when the CA is in PENDING_CERTIFICATE state. This will cause the certificate to have Status=Failed with reason\r\n\r\n> \"The current state of the private CA is not valid or does not permit the requested operation.\"\r\n\r\n### Relevant Error/Panic Output Snippet\r\n\r\n```shell\r\n=================================\r\n>>CreateCertificateAuthority API[1] - The CA \u201carn:aws:acm-pca:us-east-2:REDACTED:certificate-authority/REDACTED\u201d was created at 2023-05-02T14:15:51. \r\nEvent ID - 3d6e69e3-6e2f-498a-a490-6da66494f795\r\n=================================\r\n\r\n>>ImportCertificateAuthorityCertificate API[2] - The CA was installed at 2023-05-02T14:15:56. The CA was in PENDING_CERTIFICATE state till this time. \r\nEvent ID- df045a04-4c2f-4fe0-837d-3807b0330ddc\r\n=================================\r\n\r\n>>RequestCertificate API[3] - The ACM certificate arn:aws:acm:us-east-2:REDACTED:certificate/94779886-109d-43d6-898b-7d66ebd16ee4 was requested at 2023-05-02T14:15:53. \r\nEvent ID - 691895f7-34b4-4681-9964-654b61e958f3\r\n=================================\r\n```\r\n\r\nConsequently, by looking at the event timings of the API calls involved, we are able to observe that the ACM certificate was requested at a timeframe before Private CA was installed and accordingly the Private CA was still in PENDING_CERTIFICATE when the \"RequestCertificate\" call was made. Hence the failure code \u201cInvalidStateException\u201d was generated with reason \u201cPCA_INVALID_STATE\u201d. Please note that when the CA is in PENDING_CERTIFICATE, it cannot be used to Issue certificates.\r\n\r\n### Terraform Configuration Files\r\n\r\n```terraform\r\n$ cat acm-pca.tf acm-certificate.tf\r\n# Creates an AWS Certificate Manager Private root Certificate Authority (ACM PCA),\r\n# plus a root certificate and fully signs the CA CSR\r\n\r\n# Useful links on the topic of ACM PCA\r\n#\r\n# - https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/acmpca_certificate_authority\r\n# - https://github.com/cert-manager/aws-privateca-issuer\r\n# - https://cert-manager.io/docs/usage/ingress/#supported-annotations\r\n# - https://stackoverflow.com/questions/72258984/how-can-i-get-cert-manager-to-use-aws-acm-pca-to-provision-certificates-for-http/72638105#72638105\r\n\r\nresource \"aws_acmpca_certificate_authority\" \"REDACTED_ca\" {\r\n  # Create root CA\r\n  type = \"ROOT\"\r\n\r\n  certificate_authority_configuration {\r\n    key_algorithm     = \"RSA_4096\"\r\n    signing_algorithm = \"SHA512WITHRSA\"\r\n\r\n    subject {\r\n      common_name  = var.private_ca_subject_common_name\r\n      organization = var.private_ca_subject_organization\r\n      country      = var.private_ca_subject_country\r\n      locality     = var.private_ca_subject_locality\r\n      state        = var.private_ca_subject_state\r\n    }\r\n  }\r\n\r\n  permanent_deletion_time_in_days = 7\r\n}\r\n\r\nresource \"aws_acmpca_certificate\" \"REDACTED_root_ca\" {\r\n  # Issue self-signed root CA certificate\r\n  certificate_authority_arn   = aws_acmpca_certificate_authority.REDACTED_ca.arn\r\n  certificate_signing_request = aws_acmpca_certificate_authority.REDACTED_ca.certificate_signing_request\r\n  signing_algorithm           = \"SHA512WITHRSA\"\r\n\r\n  # https://docs.aws.amazon.com/privateca/latest/userguide/UsingTemplates.html\r\n  template_arn = \"arn:${data.aws_partition.current.partition}:acm-pca:::template/RootCACertificate/V1\"\r\n\r\n  validity {\r\n    type  = \"YEARS\"\r\n    value = 3\r\n  }\r\n}\r\n\r\nresource \"aws_acmpca_certificate_authority_certificate\" \"REDACTED_ca_cert\" {\r\n  # Associates the certificate with an AWS Certificate Manager Private Certificate Authority\r\n  # An ACM PCA Certificate Authority is unable to issue certificates until it has a certificate associated with it.\r\n  # A root level ACM PCA Certificate Authority is able to self-sign its own root certificate.\r\n  certificate_authority_arn = aws_acmpca_certificate_authority.REDACTED_ca.arn\r\n\r\n  certificate       = aws_acmpca_certificate.REDACTED_root_ca.certificate\r\n  certificate_chain = aws_acmpca_certificate.REDACTED_root_ca.certificate_chain\r\n}\r\n# Have the AWS Private Certificate Authority (PCA) issue a private certificate in Amazon Certificate Manager (ACM)\r\n# https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/acm_certificate\r\n\r\nresource \"aws_acm_certificate\" \"REDACTED_elb_cert\" {\r\n  # Upon creation, the certificate will show Status=Issued, Status=Success for each domain, but In Use=No\r\n  certificate_authority_arn = aws_acmpca_certificate_authority.REDACTED_ca.arn\r\n  domain_name               = var.domain_name\r\n\r\n  subject_alternative_names = [\r\n    \"*.${var.domain_name}\"\r\n  ]\r\n}\r\n\r\n# Allow the ACM service to automatically renew certificates issued by a PCA\r\n# https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/acmpca_permission\r\n\r\nresource \"aws_acmpca_permission\" \"REDACTED_ca_cert_permission\" {\r\n  certificate_authority_arn = aws_acmpca_certificate_authority.REDACTED_ca.arn\r\n  actions                   = [\"IssueCertificate\", \"GetCertificate\", \"ListPermissions\"]\r\n  principal                 = \"acm.amazonaws.com\"\r\n}\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\nApply the Terraform modules above (`acm-pca.tf` and `acm-certificate.tf`).\r\n\r\nTerraform will run to completion \"successfully\" despite the certificate showing the following:\r\n\r\n<img width=\"354\" alt=\"Screenshot 2023-05-03 at 9 34 57 AM\" src=\"https://user-images.githubusercontent.com/81818815/235931773-362be4c4-5279-4081-8358-3873a4d599f1.png\">\r\n\r\n\r\n### Debug Output\r\n\r\n_No response_\r\n\r\n### Panic Output\r\n\r\n_No response_\r\n\r\n### Important Factoids\r\n\r\n_No response_\r\n\r\n### References\r\n\r\n_No response_\r\n\r\n### Would you like to implement a fix?\r\n\r\nNo",
      "solution": "I have verified definitively that this is the issue.\r\n\r\nIf I delete and re-create the cert, now that the PCA has been in a ready state for some time, the cert is issued with no problem.\r\n\r\n```\r\nterraform apply -destroy -auto-approve -target='aws_acm_certificate.REDACTED_elb_cert'\r\nterraform apply -auto-approve -target='aws_acm_certificate.REDACTED_elb_cert'\r\n```",
      "labels": [
        "bug",
        "service/acm",
        "stale",
        "service/acmpca"
      ],
      "created_at": "2023-05-03T13:35:23Z",
      "closed_at": "2026-02-01T17:47:09Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/31132",
      "comments_count": 7
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 32442,
      "title": "[Bug]: Resource: aws_cloudwatch_event_target not behaving as expected with API Gateway as target",
      "problem": "### Terraform Core Version\n\n1.2.4\n\n### AWS Provider Version\n\n5.7.0\n\n### Affected Resource(s)\n\nHi, I found that I needed to implement the usage of AWS EventBridge rules to trigger an API Gateway that I've deployed, found that manually there is no problems selecting the API Gateway service as a target for the rule and then selecting the stage and the method for it.\r\nThe problem comes when I tried to do it through terraform, found that first: there is no arguments like \"Target types\" like you see in the UI or any similar option to select specifically an AWS Service, leaving this problem aside I've tried pointing to the ARN of my API Gateway, but what Terraform understand is that I am calling an API Gateway from outside of my account, when I am using one inside my account, and also I can't set up headers for that API in that manner, since is taking me like if this target comes from an \"EventBridge event bus\"\r\n\r\nSo I am not able to select which Service I want to point the target to, in this case is API Gateway, by default is falling under this option, I don't know why, but I think this resource lacks of flexibility\r\n\r\n**Images attached below**\r\n\r\n\r\nBelow I will paste my TF code as well to check:\r\n\r\n```bash\r\nresource \"aws_cloudwatch_event_rule\" \"trigger\" {\r\n  for_each            = var.api_trigger\r\n  name                = \"${var.environment}-${each.value.name}-trigger\"\r\n  description         = each.value.description\r\n  schedule_expression = \"rate(10 minutes)\"\r\n  role_arn            = aws_iam_role.api[each.key].arn\r\n  is_enabled          = each.value.enabled\r\n}\r\n\r\nresource \"aws_cloudwatch_event_target\" \"target\" {\r\n  for_each  = var.api_trigger\r\n  rule      = aws_cloudwatch_event_rule.trigger[each.key].name\r\n  target_id = \"${each.value.name}-target\"\r\n  # arn       = \"${aws_api_gateway_rest_api.api[each.key].execution_arn}/${aws_api_gateway_stage.stage[each.key].stage_name}/${aws_api_gateway_method.api[each.key].http_method}\"\r\n  arn       = \"${aws_api_gateway_stage.stage[each.key].execution_arn}/${aws_api_gateway_method.api[each.key].http_method}\"\r\n  http_target {\r\n    header_parameters = {\r\n      X-API-KEY = \"testing1234\"\r\n    }\r\n  }\r\n\r\n  # dead_letter_config {\r\n  #   arn = aws_sqs_queue.dlq-message-received-alarm.arn\r\n  # }\r\n}\r\n\r\n```\r\n\r\nI had to tweak the ARN attribute in order to get the ARN that I needed because there was no possibility to select the API Gateway ARN as the ARN there, since it was exploding in errors \r\n\r\nThank you so much in advance,\r\nVictor\n\n### Expected Behavior\n\n## Expected behavior:\r\n\r\n![image](https://github.com/hashicorp/terraform-provider-aws/assets/22249283/51a9343d-432f-474a-9c55-2acf2a042810)\r\n![Screenshot 2023-07-10 at 14 58 07](https://github.com/hashicorp/terraform-provider-aws/assets/22249283/5036299a-72f7-4a1b-b2de-116e938c182f)\r\n\r\n\r\n\n\n### Actual Behavior\n\n## Actual behavior (bug):\r\n![image](https://github.com/hashicorp/terraform-provider-aws/assets/22249283/f7f3a462-d7ce-4ff6-9543-cf2bb6c62d91)\r\n\r\n**Look at type**\r\n\r\n![Screenshot 2023-07-10 at 14 54 47](https://github.com/hashicorp/terraform-provider-aws/assets/22249283/ede6bdd8-66aa-4da6-8e9f-90559b3c0055)\r\n\r\nThe import is not working as well... see the output, tried with different target-ids but still the same error, I am running out of ideas here, checked with some teammates and we can't get to the point, any ideas here?\r\n \r\n\r\nDue to this problem I tried a workaround and I thought, what If I import the actual resource that I manually create then I see with a **terraform plan** the output of it and try to replicate it in the code ... but the **import** is not working as well apparently something is messed up with the attribute **target_id**, is taking some random ID or I am not figuring out where this target_id comes from and again ... faced a new bug apparently, \r\n\r\n![image](https://github.com/hashicorp/terraform-provider-aws/assets/22249283/c5a7da4b-5e88-4aaa-bf8b-2726b6f21ddf)\n\n### Relevant Error/Panic Output Snippet\n\n_No response_\n\n### Terraform Configuration Files\n\n-\n\n### Steps to Reproduce\n\nSet up these two resources (aws_cloudwatch_event_rule, aws_cloudwatch_event_target) on terraform and try to use API Gateway endpoint as a target for the AWS EventBridge events\r\n\r\nProblem is on the target resource \n\n### Debug Output\n\n_No response_\n\n### Panic Output\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNone",
      "solution": "Hey @victoruyy \ud83d\udc4b Information on setting Terraform to output debug logs may be found in our [Debugging Terraform](https://developer.hashicorp.com/terraform/internals/debugging) documentation.\r\n\r\nOne thing that was of interest to me on a second look at this was the import errors you received, along with your mention that the target type defaulted to \"Event bus in a different account or region\". This suggests to me that the issue might be related to:\r\n\r\n- The `region` argument of the AWS Provider being set to a region that differs from where these resources are deployed (in the case of attempting to import existing resources)\r\n- The credentials being supplied to the AWS Provider being for a different account than you're attempting to create resources in.\r\n\r\nCan you check these two things and verify whether either of those may be a factor, and if not, use the documentation above to generate debug logging to attach to this issue?\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "stale",
        "service/events"
      ],
      "created_at": "2023-07-10T18:20:11Z",
      "closed_at": "2026-01-01T17:44:29Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/32442",
      "comments_count": 7
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 37553,
      "title": "[Docs]: Resource: aws_customer_gateway  - ip_address argument is marked as optional",
      "problem": "### Documentation Link\n\nhttps://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/customer_gateway#ip_address\n\n### Description\n\nNot specifying _ip_address_ parameter in the _aws_customer_gateway_ resource results in this error:\r\n`Error: creating EC2 Customer Gateway: MissingParameter: The request must contain the parameter ipAddress`\n\n### References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNone",
      "solution": "> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "documentation",
        "good first issue",
        "service/vpnsite"
      ],
      "created_at": "2024-05-15T22:22:47Z",
      "closed_at": "2025-12-31T16:06:35Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/37553",
      "comments_count": 6
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 35218,
      "title": "[Bug]: data.aws_vpclattice_service returns wrong service_identifier and wrong id",
      "problem": "### Terraform Core Version\r\n\r\n1.5.7\r\n\r\n### AWS Provider Version\r\n\r\n5.31.0\r\n\r\n### Affected Resource(s)\r\n\r\ndata.aws_vpclattice_service\r\n\r\n### Expected Behavior\r\n\r\nreturns correct `id` and `service_identifier`\r\n\r\n### Actual Behavior\r\n\r\nreturns seemingly random id and service identifiers.\r\n\r\n\r\n### Relevant Error/Panic Output Snippet\r\n\r\nIn my account I have two services with IDs:\r\n\r\n```\r\n\"id\": \"svc-02be735b954997dbd\"\r\n\"name\": \"service-b-default\"\r\n```\r\n\r\nand \r\n```\r\n\"id\": \"svc-04d8df50bba488b2e\"\r\n\"name\": \"service-a-default\"\r\n```\r\n\r\n```terraform\r\ndata \"aws_vpclattice_service\" \"service_a\" {\r\n  depends_on = [kubernetes_manifest.service_a_network_manifests]\r\n  name       = \"service-a-default\"\r\n}\r\n```\r\n\r\nreturns\r\n\r\n```\r\n id                 = \"svc-04f077bd23f38f344\"\r\n name               = \"service-a-default\"\r\n service_identifier = \"svc-04f077bd23f38f344\"\r\n```\r\n\r\n\r\n### Terraform Configuration Files\r\n\r\n```terraform\r\ndata \"aws_vpclattice_service\" \"service_a\" {\r\n  depends_on = [kubernetes_manifest.service_a_network_manifests]\r\n  name       = \"service-a-default\"\r\n}\r\n\r\ndata \"aws_vpclattice_service\" \"service_b\" {\r\n  depends_on = [kubernetes_manifest.service_b_network_manifests]\r\n  name       = \"service-b-default\"\r\n}\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\nCreate service in console and try to fetch it using a data resource.\r\n\r\n### Debug Output\r\n\r\n_No response_\r\n\r\n### Panic Output\r\n\r\n_No response_\r\n\r\n### Important Factoids\r\n\r\n_No response_\r\n\r\n### References\r\n\r\n_No response_\r\n\r\n### Would you like to implement a fix?\r\n\r\nNo",
      "solution": "I am not able to reproduce the problem - Terraform is fetching the correct services that I created in the AWS Management console. My test case is provided below - the outputs help troubleshoot quicker.\r\n\r\nAs an initial triage, could you please ensure that Terraform is provided with the credentials and region that match the account and/or region where your VPC Lattice services are deployed? The `arn` from the data source should help you validate as well.\r\n\r\n```\r\ndata \"aws_vpclattice_service\" \"service_a\" {\r\n  name       = \"test-a\"\r\n}\r\n\r\ndata \"aws_vpclattice_service\" \"service_b\" {\r\n  name       = \"test-b\"\r\n}\r\n\r\n\r\noutput \"service_a\" {\r\n  value = data.aws_vpclattice_service.service_a\r\n}\r\n\r\noutput \"service_b\" {\r\n  value = data.aws_vpclattice_service.service_b\r\n}\r\n```\r\n\r\nThe IDs match the services that I created manually in AWS Management Console:\r\n```\r\n$ terraform plan\r\n\u2577\r\n\u2502 Warning: Provider development overrides are in effect\r\n\u2502 \r\n\u2502 The following provider development overrides are set in the CLI configuration:\r\n\u2502  - hashicorp/aws in /home/<redacted>/go/bin\r\n\u2502 \r\n\u2502 The behavior may therefore not match any released version of the provider and applying changes may cause the state to become incompatible with published\r\n\u2502 releases.\r\n\u2575\r\ndata.aws_region.current: Reading...\r\ndata.aws_vpclattice_service.service_a: Reading...\r\ndata.aws_vpclattice_service.service_b: Reading...\r\ndata.aws_region.current: Read complete after 0s [id=us-east-1]\r\ndata.aws_vpclattice_service.service_a: Read complete after 1s [id=svc-03b823eda6d76cbad]\r\ndata.aws_vpclattice_service.service_b: Read complete after 1s [id=svc-0ba5fea3da6e359fa]\r\n\r\nChanges to Outputs:\r\n  + service_a = {\r\n      + arn                = \"arn:aws:vpc-lattice:us-east-1:<account_id_redacted>:service/svc-03b823eda6d76cbad\"\r\n      + auth_type          = \"NONE\"\r\n      + certificate_arn    = \"\"\r\n      + custom_domain_name = \"\"\r\n      + dns_entry          = [\r\n          + {\r\n              + domain_name    = \"test-a-03b823eda6d76cbad.<partition_id_redacted>.vpc-lattice-svcs.us-east-1.on.aws\"\r\n              + hosted_zone_id = \"<redacted>\"\r\n            },\r\n        ]\r\n      + id                 = \"svc-03b823eda6d76cbad\"\r\n      + name               = \"test-a\"\r\n      + service_identifier = \"svc-03b823eda6d76cbad\"\r\n      + status             = \"ACTIVE\"\r\n      + tags               = {}\r\n    }\r\n  + service_b = {\r\n      + arn                = \"arn:aws:vpc-lattice:us-east-1:<account_id_redacted>:service/svc-0ba5fea3da6e359fa\"\r\n      + auth_type          = \"NONE\"\r\n      + certificate_arn    = \"\"\r\n      + custom_domain_name = \"\"\r\n      + dns_entry          = [\r\n          + {\r\n              + domain_name    = \"test-b-0ba5fea3da6e359fa.<partition_id_redacted>.vpc-lattice-svcs.us-east-1.on.aws\"\r\n              + hosted_zone_id = \"<redacted>\"\r\n            },\r\n        ]\r\n      + id                 = \"svc-0ba5fea3da6e359fa\"\r\n      + name               = \"test-b\"\r\n      + service_identifier = \"svc-0ba5fea3da6e359fa\"\r\n      + status             = \"ACTIVE\"\r\n      + tags               = {}\r\n    }\r\n\r\nYou can apply this plan to save these new output values to the Terraform state, without changing any real infrastructure.\r\n\r\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\nNote: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run \"terraform apply\" now.\r\n$\r\n```\r\n\r\n![image](https://github.com/hashicorp/terraform-provider-aws/assets/5210117/d4f08166-994b-4397-b922-457c152bafdf)\r\n",
      "labels": [
        "bug",
        "stale",
        "service/vpc",
        "service/vpclattice"
      ],
      "created_at": "2024-01-10T09:43:39Z",
      "closed_at": "2026-01-30T17:52:01Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/35218",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 44602,
      "title": "Missing Resource Identity After Update - Amazon Connect modifying security profiles",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nI am getting error \"Missing Resource Identity After Update\" for a simple Security Profile update in Amazon Connect using Terraform. These security profile updates use the AWSCC Terraform Provider version 1.58. This stopped working for us about 1-2 weeks ago and causing our pipelines to fail. We also have AWS Terraform version 6.14 installed. I have also tested with version 1.57 which was working before and has since stopped.\n\n***If you could treat this with some urgency as it is blocking a prod deployment scheduled for next week and we cannot move code up environments due to this***\n```\n\n### Affected Resource(s) or Data Source(s)\n\nAmazon Connect - Security profiles\n\n### Expected Behavior\n\nAny permission updates should simply get applied to the Security Profile in Amazon Connect with a successful message at the end of the deployment stage of our pipeline\n\n### Actual Behavior\n\nPipeline is failing with message \"Missing Resource Identity After Update\"\n\n\u2502 Error: Missing Resource Identity After Update\n\u2502 \n\u2502   with awscc_connect_security_profile.security_profile[\"Call Centre Manager PSCP LM-CC\"],\n\u2502   on security_profiles.tf line 894, in resource \"awscc_connect_security_profile\" \"security_profile\":\n\u2502  894: resource \"awscc_connect_security_profile\" \"security_profile\" {\n\u2502 \n\u2502 The Terraform Provider unexpectedly returned no resource identity data\n\u2502 after having no errors in the resource update. This is always an issue in\n\u2502 the Terraform Provider and should be reported to the provider developers.\n\n### Relevant Error/Panic Output\n\n```console\n\n```\n\n\n### Sample Terraform Configuration\n\nresource \"awscc_connect_security_profile\" \"security_profile\" {\n  for_each = tomap(local.security_profiles_awscc)\n\n  description                    = each.value.description\n  instance_arn                   = data.aws_connect_instance.this.arn\n  security_profile_name          = each.key\n  permissions                    = each.value.permissions\n  hierarchy_restricted_resources = each.value.hierarchy_restricted_resources\n  #   allowed_access_control_tags = each.value.allowed_access_control_tags\n\n\n### Steps to Reproduce\n\nAdd/Remove permission in VSCode to the Security Profile using AWSCC Provider\nSave\nGit add .\nCommit and Push\nCreate MR\nPipeline will fail on the deploy stage with the error above.\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n@WillGorham33 Thanks for opening this issue \ud83d\udc4f.\nI you are still seeing the problem please open an issue in https://github.com/hashicorp/terraform-provider-awscc.\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug"
      ],
      "created_at": "2025-10-09T13:21:02Z",
      "closed_at": "2025-12-30T20:09:18Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/44602",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46192,
      "title": "6.29.0 is crashing with panic: can't use ElementIterator on unknown value",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.9.6 (also reproducible with 1.13)\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v6.29.0\n+ provider registry.terraform.io/hashicorp/kubernetes v2.38.0\n+ provider registry.terraform.io/hashicorp/null v3.2.4\n+ provider registry.terraform.io/hashicorp/random v3.8.1\n```\n\n### Affected Resource(s) or Data Source(s)\n\nJudging by the error stack trace, it's likely this:\n* aws_dynamodb_table\n\n### Expected Behavior\n\nTerraform doesn't crash\n\n### Actual Behavior\n\nA crash on init (in TF Cloud)\n\n### Relevant Error/Panic Output\n\n```console\n\u2577\n\u2502 Error: Plugin did not respond\n\u2502 \n\u2502   with module.state_dynamodb_table.aws_dynamodb_table.table,\n\u2502   on .terraform/modules/state_dynamodb_table/dynamodb/main.tf line 5, in resource \"aws_dynamodb_table\" \"table\":\n\u2502    5: resource \"aws_dynamodb_table\" \"table\" {\n\u2502 \n\u2502 The plugin encountered an error, and failed to respond to the\n\u2502 plugin.(*GRPCProvider).ValidateResourceConfig call. The plugin logs may\n\u2502 contain more details.\n\u2575\n\u2577\n\u2502 Error: Plugin did not respond\n\u2502 \n\u2502   with data.aws_caller_identity.current,\n\u2502   on setup.tf line 261, in data \"aws_caller_identity\" \"current\":\n\u2502  261: data \"aws_caller_identity\" \"current\" {} # Account ID\n\u2502 \n\u2502 The plugin encountered an error, and failed to respond to the\n\u2502 plugin.(*GRPCProvider).ValidateDataResourceConfig call. The plugin logs may\n\u2502 contain more details.\n\u2575\n\u2577\n\u2502 Error: Plugin did not respond\n\u2502 \n\u2502   with data.aws_eks_cluster.cluster,\n\u2502   on versions.tf line 42, in data \"aws_eks_cluster\" \"cluster\":\n\u2502   42: data \"aws_eks_cluster\" \"cluster\" {\n\u2502 \n\u2502 The plugin encountered an error, and failed to respond to the\n\u2502 plugin.(*GRPCProvider).ValidateDataResourceConfig call. The plugin logs may\n\u2502 contain more details.\n\u2575\n\nStack trace from the terraform-provider-aws_v6.29.0_x5 plugin:\n\npanic: can't use ElementIterator on unknown value\n\ngoroutine 53 [running]:\ngithub.com/hashicorp/go-cty/cty.Value.ElementIterator({{{0x2297d0f0?, 0xc0057690d0?}}, {0x1d32f600?, 0x31acf560?}})\n\tgithub.com/hashicorp/go-cty@v1.5.0/cty/value_ops.go:1043 +0xd1\ngithub.com/hashicorp/terraform-provider-aws/internal/service/dynamodb.validateGlobalSecondaryIndexes.ValueElements.func1(...)\n\tgithub.com/hashicorp/terraform-provider-aws/internal/cty/iter.go:35\ngithub.com/hashicorp/terraform-provider-aws/internal/service/dynamodb.validateGlobalSecondaryIndexes({0x2297cdd8, 0xc0043eb980}, {0x0, {{{0x2297d160, 0xc0058ae5b8}}, {0x1e5370a0, 0xc0018e8150}}}, 0xc004068300)\n\tgithub.com/hashicorp/terraform-provider-aws/internal/service/dynamodb/table.go:3291 +0x113\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*GRPCProviderServer).ValidateResourceTypeConfig(0xc001d6eae0, {0x2297cdd8?, 0xc004380990?}, 0xc0024170e0)\n\tgithub.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/grpc_provider.go:428 +0x4b4\ngithub.com/hashicorp/terraform-plugin-mux/tf5muxserver.(*muxServer).ValidateResourceTypeConfig(0xc001dca750, {0x2297cdd8?, 0xc00572de60?}, 0xc0024170e0)\n\tgithub.com/hashicorp/terraform-plugin-mux@v0.21.0/tf5muxserver/mux_server_ValidateResourceTypeConfig.go:36 +0x18f\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/tf5server.(*server).ValidateResourceTypeConfig(0xc001c8b5e0, {0x2297cdd8?, 0xc00572d380?}, 0xc0023b7810)\n\tgithub.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/tf5server/server.go:772 +0x351\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/internal/tfplugin5._Provider_ValidateResourceTypeConfig_Handler({0x1ffc5260, 0xc001c8b5e0}, {0x2297cdd8, 0xc00572d380}, 0xc0023c5800, 0x0)\n\tgithub.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/tfplugin5/tfplugin5_grpc.pb.go:663 +0x1a9\ngoogle.golang.org/grpc.(*Server).processUnaryRPC(0xc001abea00, {0x2297cdd8, 0xc00572d2f0}, 0xc002eb2000, 0xc001dbd9b0, 0x31a95d60, 0x0)\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1431 +0xfe8\ngoogle.golang.org/grpc.(*Server).handleStream(0xc001abea00, {0x2297d858, 0xc0042cdba0}, 0xc002eb2000)\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1842 +0xb95\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1()\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1061 +0x7f\ncreated by google.golang.org/grpc.(*Server).serveStreams.func2 in goroutine 15\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1072 +0x11d\n\nError: The terraform-provider-aws_v6.29.0_x5 plugin crashed!\n\n\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nresource \"aws_dynamodb_table\" \"table\" {\n  name             = var.name != null ? var.name : \"${var.project}-${var.environment}-${var.table_suffix}\"\n  billing_mode     = var.billing_mode\n  read_capacity    = var.read_capacity\n  write_capacity   = var.write_capacity\n  hash_key         = var.hash_key\n  range_key        = var.range_key\n  stream_enabled   = var.stream_enabled\n  stream_view_type = var.stream_view_type\n\n  dynamic \"attribute\" {\n    for_each = var.attributes\n\n    content {\n      name = attribute.value.name\n      type = attribute.value.type\n    }\n  }\n\n  dynamic \"ttl\" {\n    for_each = var.ttl == null ? [] : [1]\n\n    content {\n      attribute_name = var.ttl.attribute_name\n      enabled        = var.ttl.enabled\n    }\n  }\n\n  dynamic \"global_secondary_index\" {\n    for_each = var.global_secondary_indexes\n\n    content {\n      name               = global_secondary_index.value.name\n      hash_key           = global_secondary_index.value.hash_key\n      range_key          = global_secondary_index.value.range_key\n      projection_type    = global_secondary_index.value.projection_type\n      non_key_attributes = global_secondary_index.value.non_key_attributes\n      write_capacity     = global_secondary_index.value.write_capacity\n      read_capacity      = global_secondary_index.value.read_capacity\n    }\n  }\n\n  point_in_time_recovery {\n    enabled = coalesce(var.enable_point_in_time_recovery, local.point_in_time_recovery_default)\n  }\n\n  dynamic \"replica\" {\n    for_each = var.replica_regions\n\n    content {\n      region_name = replica.value\n    }\n  }\n\n  tags = merge(\n    {\n      Project           = var.project\n      Environment       = var.environment\n      Service           = var.service\n    },\n    var.tags\n  )\n\n  lifecycle {\n    ignore_changes  = [read_capacity, write_capacity]\n    prevent_destroy = true\n  }\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Run `terraform apply`\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\nThere were deprecation warnings about `data.aws_region.name` shown by the previous version, but according to the docs it's not deprecated yet.\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "crash",
        "service/dynamodb"
      ],
      "created_at": "2026-01-28T22:57:37Z",
      "closed_at": "2026-01-29T00:58:56Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46192",
      "comments_count": 12
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46204,
      "title": "aws_nat_gateway have plan changes on new regional_nat_gateway_address property",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.5.7\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v6.28.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\naws_nat_gateway\n\n### Expected Behavior\n\nrunning terraform plan on aws_nat_gateway resource that was created on ~5 version with newest Aws provider version (6.27) is supposed to present no changes\n\n\n### Actual Behavior\n\nWhen running terraform plan on an existing aws_nat_gateway resource, using the latest AWS version (6.28), we receive an drift:\n\nTerraform will perform the following actions:\n\n  # aws_nat_gateway.fca-int-nat-b will be updated in-place\n  ~ resource \"aws_nat_gateway\" \"xxx\" {\n        id                                 = \"nat-xxx\"\n      + regional_nat_gateway_address       = (known after apply)\n        # (14 unchanged attributes hidden)\n    }\n\n  # aws_nat_gateway.fca-int-nat-c will be updated in-place\n  ~ resource \"aws_nat_gateway\" \"xxx-2\" {\n        id                                 = \"nat-xxx-2\"\n      + regional_nat_gateway_address       = (known after apply)\n        # (14 unchanged attributes hidden)\n    }\n\nPlan: 0 to add, 2 to change, 0 to destroy.\n\nBut when (importing and) running terraform plan on the same resource in previous AWS versions (before 6.24), it presents no changes. \n\nThere is no option to fix this drift. Only by adding lifecycle ignore block to each resource. \n\nthis property (\"regional_nat_gateway_address\") was added in this pr: https://github.com/hashicorp/terraform-provider-aws/pull/45240\n\n### Relevant Error/Panic Output\n\n```console\n\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\n\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. import aws_nat_gateway resource that was created in past versions (before 6.24 version)\n2. run terraform plan\n3. changes will appear without the option to fix it. \n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/vpc"
      ],
      "created_at": "2026-01-29T15:09:57Z",
      "closed_at": "2026-01-29T15:10:57Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46204",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45292,
      "title": "[Bug] After bumping to v6.23.0, localstack cannot create an S3 bucket due to S3 Control API",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nterraform version = 1.13.0\nAWS Provider version = 6.23.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\naws_s3_bucket\n\n### Expected Behavior\n\nExpected Behaviour, should just be able to create the s3 in localstack without calling s3 control\n\n### Actual Behavior\n\nJust trying to create an s3 bucket but unable to do so because of s3 Control errors\n\nReverting to provider v6.20 has solved this problem.\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```tf\nresource \"aws_s3_bucket\" \"this\" {\n  bucket = \"test\"\n}\n\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Use with terraform provider version 6.23.0\n2. Using latest localstack image 4.11.0\n3. Run terraform apply for aws_s3_bucket\n4. Hit the above errors\n\n### Debug Logging\n\nJust trying to create a simple bucket using localstack\n```\nresource \"aws_s3_bucket\" \"this\" {\n  bucket = \"test\"\n}\n```\n\nHave setup the s3 endpoints, however, now it looks like it requires s3control to be setup in localstack as well \n```\n\u2502 Error: listing tags for S3 (Simple Storage) Bucket (test): operation error S3 Control: ListTagsForResource, https response error StatusCode: 501, api error InternalFailure: Service 's3control' is not enabled. Please check your 'SERVICES' configuration variable.\n```\n\nAfter enabling \n```\nlisting tags for S3 (Simple Storage) Bucket (test): operation error S3 Control: ListTagsForResource, https response error StatusCode: 501, , api error InternalFailure: No moto route for service s3control on path /v20180820/tags/arn%3Aaws%3As3%3A%3A%3Atest found\n```\n\nNot sure why I am unable to use localstack to spin up my s3 bucket with the new implementation of S3 Control.\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\nI've observed the same behaviour with AWS Provider version 6.23.0, reverting to AWS Provider 6.22.0 solves the problem.\n\n---\n\nI have the same issue when using this provider with wasabi.com. Rolling back to 6.22.1 is the workaround for me too.",
      "labels": [
        "bug",
        "service/s3"
      ],
      "created_at": "2025-11-27T04:21:15Z",
      "closed_at": "2026-01-23T14:07:01Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45292",
      "comments_count": 16
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45843,
      "title": "Forces replacement when use imported ACM",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform - 1.31.4\nAWS - 6.27.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n- data.aws_acm_certificate\n- aws_ec2_client_vpn_endpoint\n\n### Expected Behavior\n\nIt shouldn't update or forces replacement client VPN endpoint.\n\n### Actual Behavior\n\n```\ndata \"aws_acm_certificate\" \"vpn\" {\n  domain   = \"${var.stage}-${var.region}-vpn\"\n  types    = [\"IMPORTED\"]\n  statuses = [\"ISSUED\"]\n}\n\nresource \"aws_ec2_client_vpn_endpoint\" \"client_vpn_endpoint\" {\n  description            = \"Client VPN Endpoint\"\n  client_cidr_block      = \"10.1.0.0/22\"\n  server_certificate_arn = data.aws_acm_certificate.vpn.arn\n  split_tunnel           = true\n  transport_protocol     = \"udp\"\n  vpc_id                 = var.vpc_id\n  vpn_port               = 443\n  security_group_ids     = [aws_security_group.vpn.id]\n\n  dns_servers = [\"10.0.0.2\"]\n\n  authentication_options {\n    type                       = \"certificate-authentication\"\n    root_certificate_chain_arn = data.aws_acm_certificate.vpn.arn\n  }\n\n  connection_log_options {\n    enabled = false\n  }\n\n  tags = {\n    Terraform   = \"true\"\n    Environment = var.stage\n  }\n}\n```\n\nWhen I run `terraform plan` command, it shows the following output.\n```\n# module.vpn[0].aws_ec2_client_vpn_endpoint.client_vpn_endpoint must be replaced\n-/+ resource \"aws_ec2_client_vpn_endpoint\" \"client_vpn_endpoint\" {\n      ~ arn                           = \"arn:aws:ec2:us-east-1:xxx:client-vpn-endpoint/cvpn-endpoint-xxx\" -> (known after apply)\n      ~ disconnect_on_session_timeout = true -> (known after apply)\n      ~ dns_name                      = \"*.cvpn-endpoint-xxx.prod.clientvpn.us-east-1.amazonaws.com\" -> (known after apply)\n      ~ endpoint_ip_address_type      = \"ipv4\" -> (known after apply)\n      ~ id                            = \"cvpn-endpoint-xxx\" -> (known after apply)\n      + self_service_portal_url       = (known after apply)\n      ~ server_certificate_arn        = \"arn:aws:acm:us-east-1:xxx:certificate/xxx\" -> (known after apply)\n        tags                          = {\n            \"Environment\" = \"prod\"\n            \"Terraform\"   = \"true\"\n        }\n      ~ traffic_ip_address_type       = \"ipv4\" -> (known after apply)\n        # (12 unchanged attributes hidden)\n\n      - authentication_options { # forces replacement\n          - root_certificate_chain_arn     = \"arn:aws:acm:us-east-1:xxx:certificate/xxx\" -> null\n          - type                           = \"certificate-authentication\" -> null\n            # (3 unchanged attributes hidden)\n        }\n      + authentication_options { # forces replacement\n          + root_certificate_chain_arn     = (known after apply)\n          + type                           = \"certificate-authentication\"\n            # (3 unchanged attributes hidden)\n        }\n\n      ~ client_connect_options (known after apply)\n      - client_connect_options {\n          - enabled             = false -> null\n            # (1 unchanged attribute hidden)\n        }\n\n      ~ client_login_banner_options (known after apply)\n      - client_login_banner_options {\n          - enabled     = false -> null\n            # (1 unchanged attribute hidden)\n        }\n\n      ~ client_route_enforcement_options (known after apply)\n      - client_route_enforcement_options {\n          - enforced = false -> null\n        }\n\n      ~ connection_log_options {\n          + cloudwatch_log_stream = (known after apply)\n            # (2 unchanged attributes hidden)\n        }\n    }\n\nPlan: 4 to add, 12 to change, 4 to destroy.\n```\n\n### Relevant Error/Panic Output\n\n```\n # module.vpn[0].aws_ec2_client_vpn_authorization_rule.authorization_rule must be replaced\n-/+ resource \"aws_ec2_client_vpn_authorization_rule\" \"authorization_rule\" {\n      ~ client_vpn_endpoint_id = \"cvpn-endpoint-xxx\" -> (known after apply) # forces replacement\n      ~ id                     = \"cvpn-endpoint-xxx,10.0.0.0/16\" -> (known after apply)\n        # (5 unchanged attributes hidden)\n    }\n\n  # module.vpn[0].aws_ec2_client_vpn_endpoint.client_vpn_endpoint must be replaced\n-/+ resource \"aws_ec2_client_vpn_endpoint\" \"client_vpn_endpoint\" {\n      ~ arn                           = \"arn:aws:ec2:us-east-1:xxx:client-vpn-endpoint/cvpn-endpoint-xxx\" -> (known after apply)\n      ~ disconnect_on_session_timeout = true -> (known after apply)\n      ~ dns_name                      = \"*.cvpn-endpoint-xxx.prod.clientvpn.us-east-1.amazonaws.com\" -> (known after apply)\n      ~ endpoint_ip_address_type      = \"ipv4\" -> (known after apply)\n      ~ id                            = \"cvpn-endpoint-xxx\" -> (known after apply)\n      + self_service_portal_url       = (known after apply)\n      ~ server_certificate_arn        = \"arn:aws:acm:us-east-1:xxx:certificate/xxx\" -> (known after apply)\n        tags                          = {\n            \"Environment\" = \"prod\"\n            \"Terraform\"   = \"true\"\n        }\n      ~ traffic_ip_address_type       = \"ipv4\" -> (known after apply)\n        # (12 unchanged attributes hidden)\n\n      - authentication_options { # forces replacement\n          - root_certificate_chain_arn     = \"arn:aws:acm:us-east-1:xxx:certificate/xxx\" -> null\n          - type                           = \"certificate-authentication\" -> null\n            # (3 unchanged attributes hidden)\n        }\n      + authentication_options { # forces replacement\n          + root_certificate_chain_arn     = (known after apply)\n          + type                           = \"certificate-authentication\"\n            # (3 unchanged attributes hidden)\n        }\n\n      ~ client_connect_options (known after apply)\n      - client_connect_options {\n          - enabled             = false -> null\n            # (1 unchanged attribute hidden)\n        }\n\n      ~ client_login_banner_options (known after apply)\n      - client_login_banner_options {\n          - enabled     = false -> null\n            # (1 unchanged attribute hidden)\n        }\n\n      ~ client_route_enforcement_options (known after apply)\n      - client_route_enforcement_options {\n          - enforced = false -> null\n        }\n\n      ~ connection_log_options {\n          + cloudwatch_log_stream = (known after apply)\n            # (2 unchanged attributes hidden)\n        }\n    }\n\n  # module.vpn[0].aws_ec2_client_vpn_network_association.target_network_association_1 must be replaced\n-/+ resource \"aws_ec2_client_vpn_network_association\" \"target_network_association_1\" {\n      ~ association_id         = \"cvpn-assoc-xxx\" -> (known after apply)\n      ~ client_vpn_endpoint_id = \"cvpn-endpoint-xxx\" -> (known after apply) # forces replacement\n      ~ id                     = \"cvpn-assoc-xxx\" -> (known after apply)\n      ~ vpc_id                 = \"vpc-xxx\" -> (known after apply)\n        # (2 unchanged attributes hidden)\n    }\n\n  # module.vpn[0].aws_ec2_client_vpn_network_association.target_network_association_2 must be replaced\n-/+ resource \"aws_ec2_client_vpn_network_association\" \"target_network_association_2\" {\n      ~ association_id         = \"cvpn-assoc-xxx\" -> (known after apply)\n      ~ client_vpn_endpoint_id = \"cvpn-endpoint-xxx\" -> (known after apply) # forces replacement\n      ~ id                     = \"cvpn-assoc-xxx\" -> (known after apply)\n      ~ vpc_id                 = \"vpc-xxx\" -> (known after apply)\n        # (2 unchanged attributes hidden)\n    }\n\nPlan: 4 to add, 12 to change, 4 to destroy.\n```\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\ndata \"aws_acm_certificate\" \"vpn\" {\n  domain   = \"${var.stage}-${var.region}-vpn\"\n  types    = [\"IMPORTED\"]\n  statuses = [\"ISSUED\"]\n}\n\nresource \"aws_ec2_client_vpn_endpoint\" \"client_vpn_endpoint\" {\n  description            = \"Client VPN Endpoint\"\n  client_cidr_block      = \"10.1.0.0/22\"\n  server_certificate_arn = data.aws_acm_certificate.vpn.arn\n  split_tunnel           = true\n  transport_protocol     = \"udp\"\n  vpc_id                 = var.vpc_id\n  vpn_port               = 443\n  security_group_ids     = [aws_security_group.vpn.id]\n\n  dns_servers = [\"10.0.0.2\"]\n\n  authentication_options {\n    type                       = \"certificate-authentication\"\n    root_certificate_chain_arn = data.aws_acm_certificate.vpn.arn\n  }\n\n  connection_log_options {\n    enabled = false\n  }\n\n  tags = {\n    Terraform   = \"true\"\n    Environment = var.stage\n  }\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Import certificate which is generated using easy-rsa (https://docs.aws.amazon.com/vpn/latest/clientvpn-admin/client-auth-mutual-enable.html)\n2. Refer imported ACM certificate using `data.aws_acm_certificate` when create client VPN endpoint.\n3. After created endpoint, run `terraform plan` commend again\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\nI thinik it's related to how data sources work in AWS terraform provider.\nIf actual values are feched when apply plan, it will surely forces replacement, because modify server cretificate is not supported for client VPN endpoint.\nIf I use hard coded certificate ARN, there are no problems, but I don't think it's a good solution.\n\n---\n\n@justinretzolk \nI created client VPN endpoint via referencing `aws_acm_certificate` data source.\nSecond time when I created `terraform plan`, output shows `forces replacement`.\nI ran `terraform apply`, it deleted previously created client VPN endpoint and created new one.\nSo I created `terraform plan` again, output shows `forces replacement` again, then I realized the problem.",
      "labels": [
        "service/acm",
        "service/vpnclient"
      ],
      "created_at": "2026-01-07T08:22:48Z",
      "closed_at": "2026-01-29T05:19:36Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45843",
      "comments_count": 8
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 29186,
      "title": "[Bug]: URL Encoding Preventing Copying of Data between S3 Buckets using aws_s3_object_copy",
      "problem": "### Terraform Core Version\r\n\r\n1.3.3\r\n\r\n### AWS Provider Version\r\n\r\n4.52.0\r\n\r\n### Affected Resource(s)\r\n\r\naws_s3_object_copy\r\n\r\n### Expected Behavior\r\n\r\nBy specifying `source`, you should be able to fetch an object/folder that exists in an S3 bucket, and copy it into another bucket/key\r\n\r\n### Actual Behavior\r\n\r\nThe `source` string provided to the resource, is always URL-encoded, rendering forward slashes  `/` as `%2F`, instead of as a string, leading to `NoSuchKey` errors\r\n\r\n### Relevant Error/Panic Output Snippet\r\n\r\n```shell\r\nError: copying S3 object (bucket: some_bucket; key: some_key/; source: source_bucket%2Fpath%2Fto%2Ffolder%2F): NoSuchKey: The specified key does not exist.\r\n\u2502       status code: 404, request id: <ID> host id: <host_id>\r\n```\r\n\r\n\r\n### Terraform Configuration Files\r\n\r\n```terraform\r\n resource \"aws_s3_object_copy\" \"existing_assets_to_new_env\" {\r\n   bucket = <some_bucket>\r\n   key    = <some_key_in_some_bucket>\r\n   source = \"source_bucket/path/to/source/directory/\"\r\n }\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\n1. Create an S3 bucket with a folder in it with some files\r\n2. Create another S3 bucket, or even just another folder in the same S3 bucket\r\n3. Create an `aws_s3_object_copy` resource and specify the `bucket`, `key`, and `source` arguments\r\n4. The `plan` will show the correct string representation of the `source` argument (e.g. exactly the string specified in the resource), but upon running `apply`, that string will be URL-encoded, leading to the `NoSuchKey` error\r\n\r\n### Debug Output\r\n\r\n_No response_\r\n\r\n### Panic Output\r\n\r\n_No response_\r\n\r\n### Important Factoids\r\n\r\n_No response_\r\n\r\n### References\r\n\r\n[This](https://github.com/hashicorp/terraform-provider-aws/blob/a1a4f4794b84ab838f0cb9ea070536d0bdf9586b/internal/service/s3/object_copy.go#L486) possible seems related?\r\n\r\n### Would you like to implement a fix?\r\n\r\nNone",
      "solution": "Is there any workaround that's available for this? I'm currently hitting it, and I'm not sure there's anything I can do to dance around it.\r\n\r\nOriginally encountered on 4.29 of the provider. Upgraded to 4.54 to see if it was fixed, but no dice. It seems whether you are using an AP or not, it will treat the source as a URL. So I think it may work as long as you never use a folder, because it would be interpreted as `%2f` instead of `/`\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/s3",
        "stale"
      ],
      "created_at": "2023-01-31T17:13:03Z",
      "closed_at": "2025-12-29T17:44:25Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/29186",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 17668,
      "title": "Lambda function version and layer version management ",
      "problem": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n`aws_lambda_function` with the option `publish=true` after awhile creates a long list of old lambda function versions (that can even hold onto ENI's if configured with a VPC, costing $$). It would be nice to be able to either manage those versions separately with another resource or have some option within `aws_lambda_function` that will manage only a rolling number of versions of the function, deleting old ones when no longer needed.\r\n\r\nadditionally\r\n\r\n`aws_lambda_layer_version` only maintains a single version of the layer. It will delete the old layer before uploading a new one. I would like to be able to manage this in the same way as the above `aws_lambda_function` with the ability to maintain a rolling list of the versions. (I could totally be using this resource wrong and this is already supported, but I dont see how to actually acheive this)\r\n\r\n### New or Affected Resource(s)\r\n\r\n<!--- Please list the new or affected resources and data sources. --->\r\n\r\n* aws_lambda_function\r\n* aws_lambda_layer_version\r\n\r\n### Potential Terraform Configuration\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n```hcl\r\nresource \"aws_lambda_function\" \"function\" {\r\n  filename   = \"function.zip\"\r\n  function_name = \"myAwesomeFunction\"\r\n  publish = true\r\n  versions_kept = 3\r\n}\r\n```\r\n\r\n```hcl\r\nresource \"aws_lambda_layer_version\" \"layer\" {\r\n  filename   = \"layer.zip\"\r\n  layer_name = \"myAwesomeLayer\"\r\n  versions_kept = 3\r\n}\r\n```",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/lambda",
        "stale"
      ],
      "created_at": "2021-02-17T21:19:18Z",
      "closed_at": "2025-12-29T17:44:35Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/17668",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46193,
      "title": "6.29.0 crashing with ValidateResourceConfig",
      "problem": "### Terraform and AWS Provider Version\n\n```console\n1.13.5 terraform \n6.29.0 AWS provder\n```\n\n### Affected Resource(s) or Data Source(s)\n\nmany\n\n### Expected Behavior\n\nDoes not Crash :)\n\n### Actual Behavior\n\nAll terraform runs in our pipelines appear to be failing. We have reverted to 6.28.0 which seems to be working fine.\n\n### Relevant Error/Panic Output\n\n```console\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with data.aws_iam_policy_document.recon_history_glue_scripts_bucket_access,\n\u2502   on iam.tf line 86, in data \"aws_iam_policy_document\" \"recon_history_glue_scripts_bucket_access\":\n\u2502   86: data \"aws_iam_policy_document\" \"recon_history_glue_scripts_bucket_access\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateDataResourceConfig request was\n\u2502 cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_reconciliation.aws_iam_role_policy_attachment.cif_to_dynamo_glue_sns_access_attachment,\n\u2502   on ../modules/membership_reconciliation/iam.tf line 48, in resource \"aws_iam_role_policy_attachment\" \"cif_to_dynamo_glue_sns_access_attachment\":\n\u2502   48: resource \"aws_iam_role_policy_attachment\" \"cif_to_dynamo_glue_sns_access_attachment\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_reconciliation.aws_iam_role_policy_attachment.dynamo_to_cif_glue_sns_access_attachment,\n\u2502   on ../modules/membership_reconciliation/iam.tf line 53, in resource \"aws_iam_role_policy_attachment\" \"dynamo_to_cif_glue_sns_access_attachment\":\n\u2502   53: resource \"aws_iam_role_policy_attachment\" \"dynamo_to_cif_glue_sns_access_attachment\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_reconciliation.aws_s3_object.scripts_dir,\n\u2502   on ../modules/membership_reconciliation/s3.tf line 17, in resource \"aws_s3_object\" \"scripts_dir\":\n\u2502   17: resource \"aws_s3_object\" \"scripts_dir\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.recon_membership_history.aws_glue_job.recon_membership_history_glue_job,\n\u2502   on ../modules/recon_membership_history/main.tf line 80, in resource \"aws_glue_job\" \"recon_membership_history_glue_job\":\n\u2502   80: resource \"aws_glue_job\" \"recon_membership_history_glue_job\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_saml_access_policies.module.membership_sns_saml_access_policy.data.aws_iam_policy_document.sns_policy,\n\u2502   on ../modules/terraform_aws_sns_access_policy/main.tf line 12, in data \"aws_iam_policy_document\" \"sns_policy\":\n\u2502   12: data \"aws_iam_policy_document\" \"sns_policy\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateDataResourceConfig request was\n\u2502 cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.cloudfront_s3_content_distribution.aws_route53_record.main,\n\u2502   on .terraform/modules/cloudfront_s3_content_distribution/route53.tf line 7, in resource \"aws_route53_record\" \"main\":\n\u2502    7: resource \"aws_route53_record\" \"main\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.cloudfront_s3_content_distribution.data.aws_iam_policy_document.s3_bucket_policy_document,\n\u2502   on .terraform/modules/cloudfront_s3_content_distribution/s3.tf line 90, in data \"aws_iam_policy_document\" \"s3_bucket_policy_document\":\n\u2502   90: data \"aws_iam_policy_document\" \"s3_bucket_policy_document\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateDataResourceConfig request was\n\u2502 cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_api_lambda_function.module.base_lambda.aws_efs_mount_target.lambda_efs_mount_target,\n\u2502   on .terraform/modules/membership_api_lambda_function.base_lambda/efs.tf line 20, in resource \"aws_efs_mount_target\" \"lambda_efs_mount_target\":\n\u2502   20: resource \"aws_efs_mount_target\" \"lambda_efs_mount_target\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_api_lambda_function.data.aws_iam_policy_document.secrets_manager_policy_document,\n\u2502   on .terraform/modules/membership_api_lambda_function/iam.tf line 60, in data \"aws_iam_policy_document\" \"secrets_manager_policy_document\":\n\u2502   60: data \"aws_iam_policy_document\" \"secrets_manager_policy_document\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateDataResourceConfig request was\n\u2502 cancelled.\n\u2575\n\u2577\n\u2502 Error: Plugin did not respond\n\u2502 \n\u2502   with module.membership_cif_dynamodb_table.aws_dynamodb_table.dynamodb,\n\u2502   on .terraform/modules/membership_cif_dynamodb_table/main.tf line 11, in resource \"aws_dynamodb_table\" \"dynamodb\":\n\u2502   11: resource \"aws_dynamodb_table\" \"dynamodb\" {\n\u2502 \n\u2502 The plugin encountered an error, and failed to respond to the\n\u2502 plugin.(*GRPCProvider).ValidateResourceConfig call. The plugin logs may\n\u2502 contain more details.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_dynamo_stream_events_lambda_function.module.base_lambda.aws_efs_mount_target.lambda_efs_mount_target,\n\u2502   on .terraform/modules/membership_dynamo_stream_events_lambda_function.base_lambda/efs.tf line 20, in resource \"aws_efs_mount_target\" \"lambda_efs_mount_target\":\n\u2502   20: resource \"aws_efs_mount_target\" \"lambda_efs_mount_target\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_dynamo_stream_events_lambda_function.module.base_lambda.aws_efs_file_system_policy.lambda_efs_file_system_policy,\n\u2502   on .terraform/modules/membership_dynamo_stream_events_lambda_function.base_lambda/efs.tf line 53, in resource \"aws_efs_file_system_policy\" \"lambda_efs_file_system_policy\":\n\u2502   53: resource \"aws_efs_file_system_policy\" \"lambda_efs_file_system_policy\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_dynamo_stream_events_lambda_function.data.aws_iam_policy_document.secrets_manager_policy_document,\n\u2502   on .terraform/modules/membership_dynamo_stream_events_lambda_function/iam.tf line 60, in data \"aws_iam_policy_document\" \"secrets_manager_policy_document\":\n\u2502   60: data \"aws_iam_policy_document\" \"secrets_manager_policy_document\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateDataResourceConfig request was\n\u2502 cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_dynamodb_table.aws_dynamodb_table.dynamodb,\n\u2502   on .terraform/modules/membership_dynamodb_table/main.tf line 11, in resource \"aws_dynamodb_table\" \"dynamodb\":\n\u2502   11: resource \"aws_dynamodb_table\" \"dynamodb\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_eligibility_check_glue_job.module.membership_eligibility_check_glue_job.data.aws_iam_policy_document.glue_script_cloudwatch_access_policy_document,\n\u2502   on .terraform/modules/membership_eligibility_check_glue_job.membership_eligibility_check_glue_job/policy.tf line 108, in data \"aws_iam_policy_document\" \"glue_script_cloudwatch_access_policy_document\":\n\u2502  108: data \"aws_iam_policy_document\" \"glue_script_cloudwatch_access_policy_document\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateDataResourceConfig request was\n\u2502 cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_eligibility_check_glue_job.module.membership_eligibility_check_glue_s3_bucket.aws_s3_bucket.s3_bucket,\n\u2502   on .terraform/modules/membership_eligibility_check_glue_job.membership_eligibility_check_glue_s3_bucket/main.tf line 1, in resource \"aws_s3_bucket\" \"s3_bucket\":\n\u2502    1: resource \"aws_s3_bucket\" \"s3_bucket\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Plugin did not respond\n\u2502 \n\u2502   with module.membership_glue_seed_job_demographics.module.membership_glue_seed_job_demographics.data.aws_iam_policy_document.glue_script_cloudwatch_access_policy_document,\n\u2502   on .terraform/modules/membership_glue_seed_job_demographics.membership_glue_seed_job_demographics/policy.tf line 108, in data \"aws_iam_policy_document\" \"glue_script_cloudwatch_access_policy_document\":\n\u2502  108: data \"aws_iam_policy_document\" \"glue_script_cloudwatch_access_policy_document\" {\n\u2502 \n\u2502 The plugin encountered an error, and failed to respond to the\n\u2502 plugin.(*GRPCProvider).ValidateDataResourceConfig call. The plugin logs may\n\u2502 contain more details.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_juvenile_upgrade_lambda_function.module.base_lambda.aws_efs_mount_target.lambda_efs_mount_target,\n\u2502   on .terraform/modules/membership_juvenile_upgrade_lambda_function.base_lambda/efs.tf line 20, in resource \"aws_efs_mount_target\" \"lambda_efs_mount_target\":\n\u2502   20: resource \"aws_efs_mount_target\" \"lambda_efs_mount_target\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_reconciliation.module.cif_to_dynamo_glue_job.aws_iam_policy.glue_script_cloudwatch_access_policy,\n\u2502   on .terraform/modules/membership_reconciliation.cif_to_dynamo_glue_job/iam.tf line 39, in resource \"aws_iam_policy\" \"glue_script_cloudwatch_access_policy\":\n\u2502   39: resource \"aws_iam_policy\" \"glue_script_cloudwatch_access_policy\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Plugin did not respond\n\u2502 \n\u2502   with module.membership_reconciliation.module.dynamo_to_cif_glue_job.data.aws_iam_policy_document.glue_script_cloudwatch_access_policy_document,\n\u2502   on .terraform/modules/membership_reconciliation.dynamo_to_cif_glue_job/policy.tf line 108, in data \"aws_iam_policy_document\" \"glue_script_cloudwatch_access_policy_document\":\n\u2502  108: data \"aws_iam_policy_document\" \"glue_script_cloudwatch_access_policy_document\" {\n\u2502 \n\u2502 The plugin encountered an error, and failed to respond to the\n\u2502 plugin.(*GRPCProvider).ValidateDataResourceConfig call. The plugin logs may\n\u2502 contain more details.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_reconciliation.module.lambda.module.base_lambda.aws_efs_mount_target.lambda_efs_mount_target,\n\u2502   on .terraform/modules/membership_reconciliation.lambda.base_lambda/efs.tf line 20, in resource \"aws_efs_mount_target\" \"lambda_efs_mount_target\":\n\u2502   20: resource \"aws_efs_mount_target\" \"lambda_efs_mount_target\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_reconciliation.module.lambda.module.base_lambda.aws_efs_file_system_policy.lambda_efs_file_system_policy,\n\u2502   on .terraform/modules/membership_reconciliation.lambda.base_lambda/efs.tf line 53, in resource \"aws_efs_file_system_policy\" \"lambda_efs_file_system_policy\":\n\u2502   53: resource \"aws_efs_file_system_policy\" \"lambda_efs_file_system_policy\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_reconciliation.module.lambda.module.s3_access_policy.data.aws_iam_policy_document.default_s3_bucket_role_policy_document,\n\u2502   on .terraform/modules/membership_reconciliation.lambda.s3_access_policy/main.tf line 12, in data \"aws_iam_policy_document\" \"default_s3_bucket_role_policy_document\":\n\u2502   12: data \"aws_iam_policy_document\" \"default_s3_bucket_role_policy_document\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateDataResourceConfig request was\n\u2502 cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_reconciliation.module.s3_bucket.data.aws_s3_bucket.access_logs_bucket,\n\u2502   on .terraform/modules/membership_reconciliation.s3_bucket/data.tf line 30, in data \"aws_s3_bucket\" \"access_logs_bucket\":\n\u2502   30: data \"aws_s3_bucket\" \"access_logs_bucket\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateDataResourceConfig request was\n\u2502 cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_reconciliation.module.zena_user_s3_access_policy.data.aws_iam_policy_document.default_s3_bucket_role_policy_document,\n\u2502   on .terraform/modules/membership_reconciliation.zena_user_s3_access_policy/main.tf line 12, in data \"aws_iam_policy_document\" \"default_s3_bucket_role_policy_document\":\n\u2502   12: data \"aws_iam_policy_document\" \"default_s3_bucket_role_policy_document\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateDataResourceConfig request was\n\u2502 cancelled.\n\u2575\n\u2577\n\u2502 Error: Plugin did not respond\n\u2502 \n\u2502   with module.membership_rules_dynamodb_table.aws_dynamodb_table.dynamodb,\n\u2502   on .terraform/modules/membership_rules_dynamodb_table/main.tf line 11, in resource \"aws_dynamodb_table\" \"dynamodb\":\n\u2502   11: resource \"aws_dynamodb_table\" \"dynamodb\" {\n\u2502 \n\u2502 The plugin encountered an error, and failed to respond to the\n\u2502 plugin.(*GRPCProvider).ValidateResourceConfig call. The plugin logs may\n\u2502 contain more details.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_seed_glue_job.module.membership_glue_seed_job.data.aws_iam_policy_document.glue_script_cloudwatch_access_policy_document,\n\u2502   on .terraform/modules/membership_seed_glue_job.membership_glue_seed_job/policy.tf line 108, in data \"aws_iam_policy_document\" \"glue_script_cloudwatch_access_policy_document\":\n\u2502  108: data \"aws_iam_policy_document\" \"glue_script_cloudwatch_access_policy_document\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateDataResourceConfig request was\n\u2502 cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.membership_seed_glue_job.module.membership_glue_seed_load_s3_bucket.aws_s3_bucket.s3_bucket,\n\u2502   on .terraform/modules/membership_seed_glue_job.membership_glue_seed_load_s3_bucket/main.tf line 1, in resource \"aws_s3_bucket\" \"s3_bucket\":\n\u2502    1: resource \"aws_s3_bucket\" \"s3_bucket\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.recon_membership_history.module.membership_history_lambda_function.aws_efs_file_system_policy.lambda_efs_file_system_policy,\n\u2502   on .terraform/modules/recon_membership_history.membership_history_lambda_function/efs.tf line 53, in resource \"aws_efs_file_system_policy\" \"lambda_efs_file_system_policy\":\n\u2502   53: resource \"aws_efs_file_system_policy\" \"lambda_efs_file_system_policy\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with module.recon_membership_history.module.membership_history_lambda_function.aws_security_group.lambda_efs_sg,\n\u2502   on .terraform/modules/recon_membership_history.membership_history_lambda_function/security-groups.tf line 1, in resource \"aws_security_group\" \"lambda_efs_sg\":\n\u2502    1: resource \"aws_security_group\" \"lambda_efs_sg\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ValidateResourceConfig request was cancelled.\n\u2575\nStack trace from the terraform-provider-aws_v6.29.0_x5 plugin:\npanic: can't use ElementIterator on unknown value\ngoroutine 785 [running]:\ngithub.com/hashicorp/go-cty/cty.Value.ElementIterator({{{0x2297d0f0?, 0xc00318d870?}}, {0x1d32f600?, 0x31acf560?}})\n\tgithub.com/hashicorp/go-cty@v1.5.0/cty/value_ops.go:1043 +0xd1\ngithub.com/hashicorp/terraform-provider-aws/internal/service/dynamodb.validateGlobalSecondaryIndexes.ValueElements.func1(...)\n\tgithub.com/hashicorp/terraform-provider-aws/internal/cty/iter.go:35\ngithub.com/hashicorp/terraform-provider-aws/internal/service/dynamodb.validateGlobalSecondaryIndexes({0x2297cdd8, 0xc000dfa3f0}, {0x1, {{{0x2297d160, 0xc0033e2388}}, {0x1e5370a0, 0xc0014b03c0}}}, 0xc0052bec30)\n\tgithub.com/hashicorp/terraform-provider-aws/internal/service/dynamodb/table.go:3291 +0x113\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*GRPCProviderServer).ValidateResourceTypeConfig(0xc0035e8510, {0x2297cdd8?, 0xc000cb9590?}, 0xc0058d9bc0)\n\tgithub.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/grpc_provider.go:428 +0x4b4\ngithub.com/hashicorp/terraform-plugin-mux/tf5muxserver.(*muxServer).ValidateResourceTypeConfig(0xc00361a870, {0x2297cdd8?, 0xc000b7cfc0?}, 0xc0058d9bc0)\n\tgithub.com/hashicorp/terraform-plugin-mux@v0.21.0/tf5muxserver/mux_server_ValidateResourceTypeConfig.go:36 +0x18f\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/tf5server.(*server).ValidateResourceTypeConfig(0xc0035d6f00, {0x2297cdd8?, 0xc001c11050?}, 0xc0058fd8b0)\n\tgithub.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/tf5server/server.go:772 +0x351\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/internal/tfplugin5._Provider_ValidateResourceTypeConfig_Handler({0x1ffc5260, 0xc0035d6f00}, {0x2297cdd8, 0xc001c11050}, 0xc0058fe780, 0x0)\n\tgithub.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/tfplugin5/tfplugin5_grpc.pb.go:663 +0x1a9\ngoogle.golang.org/grpc.(*Server).processUnaryRPC(0xc0033a9200, {0x2297cdd8, 0xc001c10fc0}, 0xc005590660, 0xc0036b7920, 0x31a95d60, 0x0)\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1431 +0xfe8\ngoogle.golang.org/grpc.(*Server).handleStream(0xc0033a9200, {0x2297d858, 0xc003776000}, 0xc005590660)\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1842 +0xb95\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1()\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1061 +0x7f\ncreated by google.golang.org/grpc.(*Server).serveStreams.func2 in goroutine 24\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1072 +0x11d\nError: The terraform-provider-aws_v6.29.0_x5 plugin crashed!\nThis is always indicative of a bug within the plugin. It would be immensely\nhelpful if you could report the crash with the plugin's maintainers so that it\ncan be fixed. The output above should help diagnose the issue.\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nNot applicable seems to be all our runs though not 100% certain... Can provide additional details if needed\n```\n</details>\n\n\n### Steps to Reproduce\n\nAttempt to run a terraform plan (or apply on something planned with prior provider version)\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "crash",
        "service/iam",
        "service/s3",
        "service/route53",
        "service/dynamodb",
        "service/efs",
        "service/glue",
        "service/vpc",
        "prioritized"
      ],
      "created_at": "2026-01-28T23:04:37Z",
      "closed_at": "2026-01-28T23:38:40Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46193",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 39512,
      "title": "Trying to use the provider directly with the RPC API I always get \"Resource Not Implemented\" errors.",
      "problem": "### Description\n\nI'm directly running the latest provider plugin \"terraform-provider-aws_v5.68.0_x5\".\r\nAnd i'm using the RPC API to communicate with the plugin from Node.js.\r\nBut API calls that require the type_name prop will always give me the following error.\r\n```ts\r\n{\r\n  diagnostics: [\r\n    {\r\n      severity: 1,\r\n      summary: 'Resource Not Implemented',\r\n      detail: 'The combined provider does not implement the requested resource type. This is always an issue in the provider implementation and should be reported to the provider developers.\\n' +\r\n        '\\n' +\r\n        'Missing resource type: '\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nExample: \r\n```ts\r\nconst result = await call(\"PlanResourceChange\", {\r\n  type_name: 'aws_s3_bucket',\r\n  prior_state: dynamicValue(null),\r\n  proposed_new_state: dynamicValue({}),\r\n});\r\n```\r\nAm i doing something wrong or is this a bug?\n\n### References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNone",
      "solution": "> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "provider"
      ],
      "created_at": "2024-09-26T23:36:47Z",
      "closed_at": "2026-01-28T23:56:11Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/39512",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 23464,
      "title": "StackSet with auto_deployment gets administration_role_arn during refresh, resulting in update loop",
      "problem": "<!---\r\nPlease note the following potential times when an issue might be in Terraform core:\r\n\r\n* [Configuration Language](https://www.terraform.io/docs/configuration/index.html) or resource ordering issues\r\n* [State](https://www.terraform.io/docs/state/index.html) and [State Backend](https://www.terraform.io/docs/backends/index.html) issues\r\n* [Provisioner](https://www.terraform.io/docs/provisioners/index.html) issues\r\n* [Registry](https://registry.terraform.io/) issues\r\n* Spans resources across multiple providers\r\n\r\nIf you are running into one of these scenarios, we recommend opening an issue in the [Terraform core repository](https://github.com/hashicorp/terraform/) instead.\r\n--->\r\n\r\n<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Terraform CLI and Terraform AWS Provider Version\r\n\r\n<!--- Please run `terraform -v` to show the Terraform core version and provider version(s). If you are not running the latest version of Terraform or the provider, please upgrade because your issue may have already been fixed. [Terraform documentation on provider versioning](https://www.terraform.io/docs/configuration/providers.html#provider-versions). --->\r\n- Terraform v1.1.2\r\n- provider aws v3.70.0\r\n\r\n### Affected Resource(s)\r\n\r\n<!--- Please list the affected resources and data sources. --->\r\n\r\n* aws_cloudformation_stack_set\r\n\r\n### Terraform Configuration Files\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nPlease include all Terraform configurations required to reproduce the bug. Bug reports without a functional reproduction may be closed without investigation.\r\n\r\n```hcl\r\nresource \"aws_cloudformation_stack_set\" \"stacksetOU\" {\r\n\r\n  count = var.OUs == null || !var.migrate ? 0 : 1\r\n  auto_deployment {\r\n    enabled                          = true\r\n    retain_stacks_on_account_removal = false\r\n  }\r\n\r\n  name             = var.name\r\n  permission_model = \"SERVICE_MANAGED\"\r\n  template_body    = var.template_body\r\n  parameters       = var.parameters\r\n  capabilities     = var.capabilities\r\n  tags             = var.tags\r\n\r\n  timeouts {\r\n    update = var.update\r\n  }\r\n}\r\n```\r\n\r\n### Debug Output\r\n\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n\r\nTo obtain the debug output, see the [Terraform documentation on debugging](https://www.terraform.io/docs/internals/debugging.html).\r\n--->\r\n\r\n### Panic Output\r\n\r\n<!--- If Terraform produced a panic, please provide a link to a GitHub Gist containing the output of the `crash.log`. --->\r\n\r\n### Expected Behavior\r\nThere were no changes to the stack itself, so not update needed\r\n<!--- What should have happened? --->\r\n\r\n### Actual Behavior\r\nThe stackset is updated successfully, only to planned for update on the next run again. \r\n\r\n<!--- What actually happened? --->\r\nThis is the plan, showing that the administrator_role_arn will be removed (as it is service managed, it should not be there)\r\nThe update is successful when i check in the AWS Console Organizations\r\n\r\n```\r\nTerraform will perform the following actions:\r\n\r\n  # module.BASELINE.aws_cloudformation_stack_set.stacksetOU[0] will be updated in-place\r\n\r\n  ~ resource \"aws_cloudformation_stack_set\" \"stacksetOU\" {\r\n\r\n      - administration_role_arn = \"arn:aws:iam::11111111111:role/aws-service-role/stacksets.cloudformation.amazonaws.com/AWSServiceRoleForCloudFormationStackSetsOrgAdmin\" -> null\r\n\r\n        id                      = \"BASELINE\"\r\n        name                    = \"BASELINE\"\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\n<!--- Please list the steps required to reproduce the issue. --->\r\n\r\n### Important Factoids\r\n\r\nWhen i do add the administrator_role_arn to the configuration, just so it matches the state, i get this expected error\r\n \r\n```\r\n   1: resource \"aws_cloudformation_stack_set\" \"stacksetOU\" {\r\n\r\n \"auto_deployment\": conflicts with administration_role_arn\r\n```\r\n\r\n<!--- Are there anything atypical about your accounts that we should know? For example: Running in EC2 Classic? --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n* #0000\r\n",
      "solution": "Hi @justinretzolk , this is an issue I am also having with Terraform deployments at the moment. I would like to point out that I think this is part of a much wider problem with Terraform's AWS Provider implementation of AWS CloudFormation Stacksets.\r\n\r\nIn my instance, when Terraform attempts to deploy a second time because of this issue, it causes a much wider failure because other parameters cannot be configured such as FailureTolerance and MaxConcurrent (which stops timeout issues when deploying) detailed here: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html#stackset-ops-options.\r\n\r\nThe wider issues related are linked here and the only solution I have had is to avoid using SERVICE_MANAGED roles and make use of provisioners :( so I configure the required StackSet options.\r\n\r\nhttps://github.com/hashicorp/terraform-provider-aws/issues/11380\r\nhttps://github.com/hashicorp/terraform-provider-aws/issues/18490\r\nhttps://github.com/hashicorp/terraform-provider-aws/issues/12877\r\n\r\nI have noticed that you have commented on these so it would be great to get a much wider update to the issues present!\r\nThanks\r\n\r\n\r\nTerraform version: 1.1.5\r\nAWS Provider version: 4.3.0\n\n---\n\nLooks like we're running into this. Not sure if this would work - but potentially a workaround here is to add:\r\n```\r\n  lifecycle {\r\n    ignore_changes = [\r\n        administration_role_arn\r\n    ]\r\n  }\r\n```\n\n---\n\nCan confirm my org runs into this same issue - adding a lifecycle rule works as a workaround for now.",
      "labels": [
        "bug",
        "service/cloudformation"
      ],
      "created_at": "2022-03-02T15:58:57Z",
      "closed_at": "2026-01-15T18:38:21Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/23464",
      "comments_count": 16
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 34517,
      "title": "[New Resource]: aws_sagemaker_model_card",
      "problem": "### Description\n\nA new resources in AWS Sagemaker under Governance section called Model Cards\n\n### Requested Resource(s) and/or Data Source(s)\n\naws_sagemaker_model_card\n\n### Potential Terraform Configuration\n\n```terraform\nresource \"aws_sagemaker_model_card\" \"this\" {\r\n  name = \"Model Card Name\"\r\n  model_card_status = \"Draft\"\r\n\r\n  encryption = {\r\n    kms = \"arn_of_kms_key\"\r\n  }\r\n\r\n  model_details = {\r\n    model_name = \"model_name\"\r\n    model_artifacts = [\r\n      \"uri_1\",\r\n      \"uri_2\"\r\n    ]\r\n\r\n    inference_environment = [\r\n      \"container_1\",\r\n      \"container_2\"\r\n    ]\r\n\r\n    model_id = \"id\"\r\n    model_description = \"description\"\r\n    model_version = 1\r\n\r\n    problem_type = \"Binary classification\"\r\n    algorithm_type = \"Recurrent neural network\"\r\n\r\n    model_creator = \"John Doe\"\r\n    model_owner = \"John Doe, Marry Smith\"\r\n  }\r\n\r\n  business_details = {\r\n    business_problem = \"Description\"\r\n    business_stakeholders = \"Stakeholder_1, Stakeholder_2\"\r\n    line_of_business = \"Description\"\r\n  }\r\n\r\n  intended_uses = {\r\n    description = \"General purpose\"\r\n    factors_affecting_model_efficacy = \"Description\"\r\n    risk_rating = \"Low\"\r\n    risk_rating_description = \"Description\"\r\n  }\r\n\r\n  training_details = {\r\n\r\n    objective_function = {\r\n      optimization_direction = \"Minimize\"\r\n      metric = \"Loss\"\r\n      description = \"Description\"\r\n      notes = \"Description\"\r\n    }\r\n\r\n    training_observations = \"Description\"\r\n    training_job_details = {\r\n      name = \"Job name\"\r\n      training_dataset = [\r\n        \"uri_1\",\r\n        \"uri_2\"\r\n      ]\r\n\r\n      training_environment = [\r\n        \"container_1\",\r\n        \"container_2\"\r\n      ]\r\n    }\r\n\r\n    training_results = {\r\n      metrics {\r\n        {\r\n          metric = \"some_metric\"\r\n          value = \"some_value\"\r\n          description = \"description\"\r\n        },\r\n        {\r\n          metric = \"some_metric\"\r\n          value = \"some_value\"\r\n          description = \"description\"\r\n        }\r\n      }\r\n\r\n      hyperparameters {\r\n        {\r\n          parameter = \"p1\"\r\n          value = \"some_value\"\r\n        },\r\n        {\r\n          parameter = \"p2\"\r\n          value = \"some_value\"\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  evaluation_result = {\r\n    data_source = {\r\n      type = \"s3\"\r\n      uri = \"s3_uri_to_json_file\"\r\n    }\r\n\r\n    report_type = \"clarify_bias\"\r\n    job_name = \"some_name\"\r\n  }\r\n\r\n  ethical_considerations = \"Description\"\r\n  caveats_and_recommendations = \"Description\"\r\n  custom_fields = {\r\n    field_1 = \"value\"\r\n    field_2 = \"value\"\r\n    field_3 = \"value\"\r\n  }\r\n\r\n}\n```\n\n\n### References\n\n### AWS documentation\r\nGeneral description what it is a how to use Model Cards [link](https://docs.aws.amazon.com/sagemaker/latest/dg/model-cards.html)\r\nDocumentation for [aws cli](https://docs.aws.amazon.com/cli/latest/reference/sagemaker/create-model-card.html)\r\nDocumentation for [CloudFormation ](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-sagemaker-modelcard.html)\r\n\r\n\n\n### Would you like to implement a fix?\n\nNone",
      "solution": "> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "new-resource",
        "service/sagemaker"
      ],
      "created_at": "2023-11-22T10:24:38Z",
      "closed_at": "2026-01-16T15:00:44Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/34517",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 35189,
      "title": "[Bug]: RDS Aroura Cluster not applying IAM iam_database_authentication_enabled on snapshot based creation",
      "problem": "### Terraform Core Version\r\n\r\n1.5.7\r\n\r\n### AWS Provider Version\r\n\r\n5.31.0\r\n\r\n### Affected Resource(s)\r\n\r\naws_rds_cluster\r\n\r\n### Expected Behavior\r\n\r\n Apply [iam_database_authentication_enabled](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/rds_cluster#iam_database_authentication_enabled) on RDS cluster creation when starting a new AZ cluster from snapshot. \r\n\r\n### Actual Behavior\r\n\r\nInitial RDS cluster build contains iam_database_authentication_enabled in the `terraform plan` but does not actually apply the property to the RDS cluster. However, on re-plan/apply it does flag the property as needing a change and properly applies it. \r\n\r\n### Relevant Error/Panic Output Snippet\r\n\r\n_No response_\r\n\r\n### Terraform Configuration Files\r\n\r\n```\r\nmodule \"aurora\" {\r\n  source = \"terraform-aws-modules/rds-aurora/aws\"\r\n  #checkov:skip=CKV_TF_1:Use of latest version is recommended\r\n  version = \"~> 8.5.0\"\r\n\r\n  ###########\r\n  # General\r\n  ###########\r\n  name           = var.snapshot_identifier != null ? local.full_db_name : \"${local.full_db_name}-no-snapshot\"\r\n  engine         = \"aurora-postgresql\"\r\n  engine_version = var.db_version\r\n  instance_class = var.db_instance_class\r\n  instances = var.db_instances != null ? var.db_instances : {\r\n    for az in var.availability_zones :\r\n    \"${az}\" => {\r\n      availability_zone = az\r\n    }\r\n  }\r\n\r\n  ###########\r\n  # Encryption\r\n  ###########\r\n\r\n  storage_encrypted                     = true\r\n  kms_key_id                            = module.kms.key_arn\r\n  db_cluster_activity_stream_kms_key_id = module.kms.key_arn\r\n  apply_immediately                     = true\r\n\r\n\r\n  ###########\r\n  # Backup\r\n  ###########\r\n\r\n  snapshot_identifier       = var.snapshot_identifier\r\n  final_snapshot_identifier = \"${local.full_db_name}-final-snapshot\"\r\n\r\n  ###########\r\n  # Authentication\r\n  ###########\r\n\r\n  master_username                     = var.snapshot_identifier != null ? null : \"master\"\r\n  manage_master_user_password         = true\r\n  iam_database_authentication_enabled = true\r\n\r\n  ###########\r\n  # Networking\r\n  ###########\r\n\r\n  vpc_id                = var.vpc_id\r\n  db_subnet_group_name  = aws_db_subnet_group.finlife-db-subnet-group.name\r\n  create_security_group = true\r\n  security_group_name   = \"database-${local.full_db_name}\"\r\n\r\n  security_group_rules = {\r\n    for idx, sg in var.allowed_ingress_security_groups :\r\n    idx => {\r\n      description = \"Ingress for ${sg}\"\r\n\r\n      from_port                = 5432\r\n      to_port                  = 5432\r\n      protocol                 = \"tcp\"\r\n      source_security_group_id = sg\r\n    }\r\n\r\n  }\r\n  vpc_security_group_ids = var.other_security_groups\r\n\r\n  ###########\r\n  # Logging\r\n  ###########\r\n  enabled_cloudwatch_logs_exports = [\"postgresql\"]\r\n  create_cloudwatch_log_group     = true\r\n  monitoring_interval             = 10\r\n\r\n  ###########\r\n  # Auto Scaling\r\n  ###########\r\n  autoscaling_enabled      = var.autoscaling_enabled\r\n  autoscaling_min_capacity = var.autoscaling_min_capacity\r\n  autoscaling_max_capacity = var.autoscaling_max_capacity\r\n\r\n  tags = {\r\n    Terraform = \"true\"\r\n  }\r\n}\r\n```\r\n\r\n\r\nNote: I am using https://github.com/terraform-aws-modules/terraform-aws-rds-aurora/blob/master/main.tf which is just passing the value of ` iam_database_authentication_enabled` directly to the `aws_rds_cluster` resource\r\n\r\n### Steps to Reproduce\r\n\r\nCreate a Postgres Cluster with  `iam_database_authentication_enabled = true` and a snapshot identifier, check IAM Auth setting for cluster in console. \r\n\r\n### Debug Output\r\n\r\nhttps://gist.github.com/DServy/8e75964309d0a6a6b180e4585f51dff1\r\n\r\n(Log even has it flagged as false after apply)\r\n\r\n### Panic Output\r\n\r\n_No response_\r\n\r\n### Important Factoids\r\n\r\n_No response_\r\n\r\n### References\r\n\r\nIf I had to guess, something like https://github.com/hashicorp/terraform-provider-aws/pull/33699 needs to apply to the `iam_database_authentication_enabled` var during snapshot restore. \r\n\r\n### Would you like to implement a fix?\r\n\r\nNone",
      "solution": "> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/rds",
        "stale"
      ],
      "created_at": "2024-01-08T14:44:08Z",
      "closed_at": "2026-01-16T18:08:32Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/35189",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 37917,
      "title": "[Bug]: Error when removing Athena workgroup encryption",
      "problem": "### Terraform Core Version\n\n1.7.4\n\n### AWS Provider Version\n\n5.35.0\n\n### Affected Resource(s)\n\naws_athena_workgroup\n\n### Expected Behavior\n\nRemoving the configuration.result_configuration.encryption_configuration block from the resource should call the UpdateWorkgroup API setting ResultConfigurationUpdates={RemoveEncryptionConfiguration=true} \n\n### Actual Behavior\n\nTerraform seems to try to set the encryption configuration to empty values which is not allowes\n\n### Relevant Error/Panic Output Snippet\n\n```shell\nWhen removing the configuration.result_configuration.encryption_configuration block from the resource, terraform fails on the apply stage with the following error:\r\n\r\nError: updating Athena Workgroup (test): operation error Athena: UpdateWorkGroup, 1 validation error(s) found. - missing required field, UpdateWorkGroupInput.Configuration.ResultConfigurationUpdates.EncryptionConfiguration.EncryptionOption\n```\n\n\n### Terraform Configuration Files\n\n\r\n```\r\nresource \"aws_athena_workgroup\" \"test\" {\r\n  name = \"test\"\r\n  force_destroy = true\r\n\r\n  configuration {\r\n  bytes_scanned_cutoff_per_query     = 107374182400\r\n  enforce_workgroup_configuration    = true\r\n  publish_cloudwatch_metrics_enabled = true\r\n    result_configuration {\r\n    output_location = \"s3://...\"\r\n      encryption_configuration {\r\n        encryption_option = \"SSE_KMS\"\r\n        kms_key_arn          = <KMS key resource reference ARN>\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\n\n### Steps to Reproduce\n\n1. create an Athena workgroup with encryption\r\n```\r\nresource \"aws_athena_workgroup\" \"test\" {\r\n  name = \"test\"\r\n  force_destroy = true\r\n\r\n  configuration {\r\n  bytes_scanned_cutoff_per_query     = 107374182400\r\n  enforce_workgroup_configuration    = true\r\n  publish_cloudwatch_metrics_enabled = true\r\n    result_configuration {\r\n    output_location = \"s3://...\"\r\n      encryption_configuration {\r\n        encryption_option = \"SSE_KMS\"\r\n        kms_key_arn          = <KMS key resource reference ARN>\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n2. remove the configuration.result_configuration.encryption_configuration block, then apply the terraform plan\n\n### Debug Output\n\n_No response_\n\n### Panic Output\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/athena"
      ],
      "created_at": "2024-06-11T13:12:47Z",
      "closed_at": "2026-01-26T16:57:43Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/37917",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 38820,
      "title": "[Bug]: aws_config_configuration_recorder fails to remove exclusion",
      "problem": "### Terraform Core Version\r\n\r\n1.9.4\r\n\r\n### AWS Provider Version\r\n\r\n5.62.0\r\n\r\n### Affected Resource(s)\r\n\r\n* aws_config_configuration_recorder\r\n\r\n### Expected Behavior\r\n\r\nWhen a config recorder has been created with an `exclusion_by_resource_types` exclusion enabled it should be possible to remove the exclusions.\r\n\r\n### Actual Behavior\r\n\r\nModifying the existing recorder fails with an `InvalidRecordingGroupException`\r\n\r\n### Relevant Error/Panic Output Snippet\r\n\r\n```shell\r\nError: putting ConfigService Configuration Recorder (recorder): operation error Config Service: PutConfigurationRecorder, https response error StatusCode: 400, RequestID: 343d6b46-1754-4798-9476-426daec08bf2, InvalidRecordingGroupException: The recording group provided is not valid\r\n```\r\n\r\n\r\n### Terraform Configuration Files\r\n\r\n```shell\r\ndata \"aws_iam_role\" \"this\" {\r\n  name = \"AWSConfig\"\r\n}\r\n\r\nresource \"aws_config_configuration_recorder\" \"this\" {\r\n  name     = \"recorder\"\r\n  role_arn = data.aws_iam_role.this.arn\r\n\r\n  recording_group {\r\n    all_supported = false\r\n    exclusion_by_resource_types {\r\n      resource_types = [\"AWS::EC2::EC2Fleet\"]\r\n    }\r\n    recording_strategy {\r\n      use_only = \"EXCLUSION_BY_RESOURCE_TYPES\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\n1. Create a config recorder with an exclusion\r\n\r\n2. Modify the config recorder to include all types:\r\n```shell\r\nresource \"aws_config_configuration_recorder\" \"this\" {\r\n  name     = \"recorder\"\r\n  role_arn = data.aws_iam_role.this.arn\r\n\r\n  recording_group {\r\n    all_supported                 = true\r\n    include_global_resource_types = true\r\n  }\r\n}\r\n```\r\n3. Run `terraform apply` The following changes are shown:\r\n```shell\r\nTerraform will perform the following actions:\r\n\r\n  # aws_config_configuration_recorder.this will be updated in-place\r\n  ~ resource \"aws_config_configuration_recorder\" \"this\" {\r\n        id       = \"recorder\"\r\n        name     = \"recorder\"\r\n        # (1 unchanged attribute hidden)\r\n\r\n      ~ recording_group {\r\n          ~ all_supported                 = false -> true\r\n          ~ include_global_resource_types = false -> true\r\n            # (1 unchanged attribute hidden)\r\n\r\n            # (2 unchanged blocks hidden)\r\n        }\r\n\r\n        # (1 unchanged block hidden)\r\n    }\r\n\r\nPlan: 0 to add, 1 to change, 0 to destroy.\r\n```\r\n4. The request fails:\r\n```shell\r\naws_config_configuration_recorder.this: Modifying... [id=recorder]\r\n\u2577\r\n\u2502 Error: putting ConfigService Configuration Recorder (recorder): operation error Config Service: PutConfigurationRecorder, https response error StatusCode: 400, RequestID: b2f68142-e45b-46f7-be84-9f5bea414c4e, InvalidRecordingGroupException: The recording group provided is not valid\r\n\u2502 \r\n\u2502   with aws_config_configuration_recorder.this,\r\n\u2502   on main.tf line 114, in resource \"aws_config_configuration_recorder\" \"this\":\r\n\u2502  114: resource \"aws_config_configuration_recorder\" \"this\" {\r\n\u2502 \r\n\u2575\r\n```\r\n\r\nDo note that in step 3 there are 2 unchanged blocks. This is the state of the resource before the change:\r\n```shell\r\nterraform state show aws_config_configuration_recorder.this\r\n# aws_config_configuration_recorder.this:\r\nresource \"aws_config_configuration_recorder\" \"this\" {\r\n    id       = \"recorder\"\r\n    name     = \"recorder\"\r\n    role_arn = \"arn:aws:iam::511330993215:role/AWSConfig\"\r\n\r\n    recording_group {\r\n        all_supported                 = false\r\n        include_global_resource_types = false\r\n        resource_types                = []\r\n\r\n        exclusion_by_resource_types {\r\n            resource_types = [\r\n                \"AWS::EC2::EC2Fleet\",\r\n            ]\r\n        }\r\n\r\n        recording_strategy {\r\n            use_only = \"EXCLUSION_BY_RESOURCE_TYPES\"\r\n        }\r\n    }\r\n\r\n    recording_mode {\r\n        recording_frequency = \"CONTINUOUS\"\r\n    }\r\n}\r\n```\r\nSo it seems like the `exclusion_by_resource_types` and `recording_strategy` blocks don't get cleaned-up when removing them from the Terraform config.\r\nExplicitly setting them to empty does show them in the diff, but the request still fails.\r\nResource definition:\r\n```shell\r\nresource \"aws_config_configuration_recorder\" \"this\" {\r\n  name     = \"recorder\"\r\n  role_arn = data.aws_iam_role.this.arn\r\n\r\n  recording_group {\r\n    all_supported = true\r\n    include_global_resource_types = true\r\n    exclusion_by_resource_types {\r\n\r\n    }\r\n    recording_strategy {\r\n\r\n    }\r\n  }\r\n}\r\n```\r\nOutput:\r\n```shell\r\nTerraform will perform the following actions:\r\n\r\n  # aws_config_configuration_recorder.this will be updated in-place\r\n  ~ resource \"aws_config_configuration_recorder\" \"this\" {\r\n        id       = \"recorder\"\r\n        name     = \"recorder\"\r\n        # (1 unchanged attribute hidden)\r\n\r\n      ~ recording_group {\r\n          ~ all_supported                 = false -> true\r\n          ~ include_global_resource_types = false -> true\r\n            # (1 unchanged attribute hidden)\r\n\r\n          ~ exclusion_by_resource_types {\r\n              ~ resource_types = [\r\n                  - \"AWS::EC2::EC2Fleet\",\r\n                ]\r\n            }\r\n\r\n          ~ recording_strategy {\r\n              - use_only = \"EXCLUSION_BY_RESOURCE_TYPES\" -> null\r\n            }\r\n        }\r\n\r\n        # (1 unchanged block hidden)\r\n    }\r\n\r\nPlan: 0 to add, 1 to change, 0 to destroy.\r\n\r\nDo you want to perform these actions in workspace \"id853249-2c949b-splaas\"?\r\n  Terraform will perform the actions described above.\r\n  Only 'yes' will be accepted to approve.\r\n\r\n  Enter a value: yes\r\n\r\naws_config_configuration_recorder.this: Modifying... [id=recorder]\r\n\u2577\r\n\u2502 Error: putting ConfigService Configuration Recorder (recorder): operation error Config Service: PutConfigurationRecorder, https response error StatusCode: 400, RequestID: 91d3286d-d25e-4a38-9b0d-f1a3bb607e6a, InvalidRecordingGroupException: The recording group provided is not valid\r\n\u2502 \r\n\u2502   with aws_config_configuration_recorder.this,\r\n\u2502   on main.tf line 124, in resource \"aws_config_configuration_recorder\" \"this\":\r\n\u2502  124: resource \"aws_config_configuration_recorder\" \"this\" {\r\n\u2502 \r\n```\r\n\r\n\r\n### Debug Output\r\n\r\n[tf.log](https://github.com/user-attachments/files/16579231/tf.log)\r\n\r\n\r\n### Panic Output\r\n\r\n_No response_\r\n\r\n### Important Factoids\r\n\r\n_No response_\r\n\r\n### References\r\n\r\n_No response_\r\n\r\n### Would you like to implement a fix?\r\n\r\nNo",
      "solution": "Provider version 5.77.0 here.\n\nI've tried to workaround this issue by simply removing all of the exclusions like this:\n\n```hcl\nresource \"aws_config_configuration_recorder\" \"config_configuration_recorder\" {\n  role_arn = aws_iam_role.config_iam_role.arn\n\n  recording_group {\n    all_supported = false\n\n    exclusion_by_resource_types {\n      resource_types = []\n    }\n\n    recording_strategy {\n      use_only = \"EXCLUSION_BY_RESOURCE_TYPES\"\n    }\n  }\n```\n\nThe plan output seemed like it'd work out:\n\n```hcl\n  # aws_config_configuration_recorder.config_configuration_recorder will be updated in-place\n  ~ resource \"aws_config_configuration_recorder\" \"config_configuration_recorder\" {\n        id       = \"default\"\n        name     = \"default\"\n        # (1 unchanged attribute hidden)\n      ~ recording_group {\n            # (3 unchanged attributes hidden)\n          ~ exclusion_by_resource_types {\n              ~ resource_types = [\n                  - \"AWS::IAM::Group\",\n                  - \"AWS::IAM::Policy\",\n                  - \"AWS::IAM::Role\",\n                  - \"AWS::IAM::User\",\n                ]\n            }\n            # (1 unchanged block hidden)\n        }\n        # (1 unchanged block hidden)\n    }\n```\n\nHowever that wasn't the case, and the error still popped:\n\n```hcl\naws_config_configuration_recorder.config_configuration_recorder: Modifying... [id=default]\n\u2577\n\u2502 Error: putting ConfigService Configuration Recorder (default): operation error Config Service: PutConfigurationRecorder, https response error StatusCode: 400, RequestID: 2fb4889d-2797-499a-80e5-402be28e356f, InvalidRecordingGroupException: The recording group provided is not valid\n\u2502 \n\u2502   with aws_config_configuration_recorder.config_configuration_recorder,\n\u2502   on config.tf line 97, in resource \"aws_config_configuration_recorder\" \"config_configuration_recorder\":\n\u2502   97: resource \"aws_config_configuration_recorder\" \"config_configuration_recorder\" {\n\u2502 \n\u2575\n```\n\n~~Was anybody able to workaround this issue, preferably without destroying the resource?~~\n\nEdit: Ok, so I was able to make it work without destroying `aws_config_configuration_recorder` when I went to the AWS console and manually removed the resources that were being excluded from recording in the Settings page.\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/configservice"
      ],
      "created_at": "2024-08-12T08:26:39Z",
      "closed_at": "2026-01-22T17:44:27Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/38820",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 39861,
      "title": "[Bug]: aws_servicecatalog_portfolio_share does not support sharing to GovCloud organization",
      "problem": "### Terraform Core Version\r\n\r\nlatest\r\n\r\n### AWS Provider Version\r\n\r\nv5.72.1\r\n\r\n### Affected Resource(s)\r\n\r\naws_servicecatalog_portfolio_share\r\n\r\n### Expected Behavior\r\n\r\nUse `aws_servicecatalog_portfolio_share` to share a servicecatalog portfolio to a GovCloud organization **(partition is `aws-us-gov` rather than `aws`)** using either the organization arn or organization id.\r\n\r\n```hcl\r\n# MUST BE RUN FROM A GOVCLOUD ORGANIZATION MANAGEMENT ACCOUNT TO REPRODUCE\r\n\r\nresource \"aws_servicecatalog_organizations_access\" \"svc_ctlg_orgs_access\" {\r\n  enabled = \"true\"\r\n}\r\n\r\ndata \"aws_organizations_organization\" \"current\" {}\r\n\r\nresource \"aws_servicecatalog_portfolio\" \"portfolio\" {\r\n  name          = \"Example Portfolio\"\r\n  description   = \"Demo portfolio for service catalog products\"\r\n  provider_name = \"Example Organization\"\r\n}\r\n```\r\n\r\nThe above should be combined with one of the below options to be able to share to a govcloud organization by id or arn using the [`servicecatalog.CreatePortfolioShare` api](https://docs.aws.amazon.com/servicecatalog/latest/dg/API_CreatePortfolioShare.html)\r\n\r\n```hcl\r\n# Option 1 - share to org by id\r\nresource \"aws_servicecatalog_portfolio_share\" \"org_id\" {\r\n  portfolio_id = aws_servicecatalog_portfolio.portfolio.id\r\n  principal_id = data.aws_organizations_organization.current.id\r\n  type         = \"ORGANIZATION\"\r\n}\r\n\r\n# Option 2 - share to org by arn\r\nresource \"aws_servicecatalog_portfolio_share\" \"org_arn\" {\r\n  portfolio_id = aws_servicecatalog_portfolio.portfolio.id\r\n  principal_id = data.aws_organizations_organization.current.arn\r\n  type         = \"ORGANIZATION\"\r\n}\r\n```\r\n\r\n### Actual Behavior\r\n\r\n#### Option 1 (share by id) Fails\r\n\r\nSharing to govcloud organization by id gets blocked by the Terraform validation regex:\r\n\r\n```\r\nPlanning failed. Terraform encountered an error while generating this plan.\r\n\r\n\u2577\r\n\u2502 Error: \"principal_id\" (o-52g4c5mxce) is an invalid ARN: arn: invalid prefix\r\n\u2502\r\n\u2502   with aws_servicecatalog_portfolio_share.org_id,\r\n\u2502   on portfolio.tf line 20, in resource \"aws_servicecatalog_portfolio_share\" \"org_id\":\r\n\u2502   20:   principal_id = data.aws_organizations_organization.current.id\r\n\u2502\r\n\u2575\r\n\u2577\r\n\u2502 Error: \"principal_id\" does not look like an OU or organization: \"o-52g4c5mxce\"\r\n\u2502\r\n\u2502   with aws_servicecatalog_portfolio_share.org_id,\r\n\u2502   on portfolio.tf line 20, in resource \"aws_servicecatalog_portfolio_share\" \"org_id\":\r\n\u2502   20:   principal_id = data.aws_organizations_organization.current.id\r\n\u2502\r\n\u2575\r\n\u2577\r\n\u2502 Error: \"principal_id\" doesn't look like AWS Account ID (exactly 12 digits): \"o-52g4c5mxce\"\r\n\u2502\r\n\u2502   with aws_servicecatalog_portfolio_share.org_id,\r\n\u2502   on portfolio.tf line 20, in resource \"aws_servicecatalog_portfolio_share\" \"org_id\":\r\n\u2502   20:   principal_id = data.aws_organizations_organization.current.id\r\n\u2502\r\n```\r\n\r\nEven though sharing to organization id works directly with the servicecatalog api:\r\n```shell\r\naws servicecatalog create-portfolio-share \\\r\n  --portfolio-id 'port-aaaaaaaaaaaa' \\\r\n  --organization-node 'Type=ORGANIZATION,Value=o-aaaaaaaaaa'\r\n```\r\n\r\n#### Option 2 (share by arn) Fails\r\n\r\nSharing to govcloud organization by arn gets past the Terraform validation regex, but gets blocked by ServiceCatalog validation regex:\r\n```shell\r\n\u2502 Error: creating Service Catalog Portfolio Share: operation error Service Catalog: CreatePortfolioShare, https response error\r\nStatusCode: 400, RequestID: b4c17130-10cf-48d8-8730-178e09ed4354, api error ValidationException: 1 validation error\r\ndetected: Value 'arn:aws-us-gov:organizations::111111111111:organization/o-aaaaaaaaaa' at 'organizationNode.value' failed to\r\nsatisfy constraint: Member must satisfy regular expression pattern: (^[0-9]{12}$)|\r\n(^arn:aws:organizations::\\d{12}:organization\\/o-[a-z0-9]{10,32})|(^o-[a-z0-9]{10,32}$)|(^arn:aws:organizations::\\d{12}:ou\\/o-\r\n[a-z0-9]{10,32}\\/ou-[0-9a-z]{4,32}-[0-9a-z]{8,32}$)|(^ou-[0-9a-z]{4,32}-[a-z0-9]{8,32}$)\r\n```\r\n\r\n### More Info\r\n\r\n[`servicecatalog.CreatePortfolioShare` api](https://docs.aws.amazon.com/servicecatalog/latest/dg/API_CreatePortfolioShare.html) accepts [`OrganizationNode.Value`](https://docs.aws.amazon.com/servicecatalog/latest/dg/API_OrganizationNode.html#servicecatalog-Type-OrganizationNode-Value) matching this regular expression: `(^[0-9]{12}$)|(^arn:aws:organizations::\\d{12}:organization\\/o-[a-z0-9]{10,32})|(^o-[a-z0-9]{10,32}$)|(^arn:aws:organizations::\\d{12}:ou\\/o-[a-z0-9]{10,32}\\/ou-[0-9a-z]{4,32}-[0-9a-z]{8,32}$)|(^ou-[0-9a-z]{4,32}-[a-z0-9]{8,32}$)` which allows any of the following:\r\n\r\n- account id `^[0-9]{12}$`\r\n- org arn `^arn:aws:organizations::\\d{12}:organization\\/o-[a-z0-9]{10,32}`\r\n- org id `^o-[a-z0-9]{10,32}$`\r\n- org unit arn `^arn:aws:organizations::\\d{12}:ou\\/o-[a-z0-9]{10,32}\\/ou-[0-9a-z]{4,32}-[0-9a-z]{8,32}$`\r\n- org unit id `^ou-[0-9a-z]{4,32}-[a-z0-9]{8,32}$`\r\n\r\nHowever, the `aws_servicecatalog_portfolio_share` terraform resource only allows ARNs for orgs and org units:\r\n- https://github.com/hashicorp/terraform-provider-aws/blob/main/internal/service/servicecatalog/portfolio_share.go#L67\r\n- https://github.com/hashicorp/terraform-provider-aws/blob/main/internal/service/servicecatalog/validate.go#L13\r\n\r\nUnfortunately, the combination of Terraform `aws_servicecatalog_portfolio_share` requiring an arn, and `servicecatalog.CreatePortfolioShare` api only supporting `aws` partition in its validation, means `aws_servicecatalog_portfolio_share` cannot share with orgs or org units outside the `aws` partition (`aws-us-gov` for example)\r\n\r\nServiceCatalog api accepting only `arn:aws:` arns is a bug of course can't be fixed by the Terraform provider \ud83d\ude26 . But if the Terraform resource accepted org and org unit ids (rather than only ARNs), sharing would be possible with Terraform in GovCloud\r\n\r\n### Steps to Reproduce\r\n\r\nFrom govcloud mgmt account: terraform plan / terraform apply",
      "solution": "~#45895 may have fixed this.~ Didn't fix it but is related: #45895 \n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/servicecatalog",
        "partition/aws-us-gov"
      ],
      "created_at": "2024-10-23T18:07:32Z",
      "closed_at": "2026-01-23T15:11:30Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/39861",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 40724,
      "title": "[Bug]: LakeFormation permissions for S3Tables Catalog",
      "problem": "### Terraform Core Version\r\n\r\n1.10.3\r\n\r\n### AWS Provider Version\r\n\r\n5.82.2\r\n\r\n### Affected Resource(s)\r\n\r\naws_lakeformation_permissions\r\n\r\n### Expected Behavior\r\n\r\nGive table permissions in S3Tables Bucket (Grant permission on a table -> https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-tables-integrating-aws.html)\r\n\r\n### Actual Behavior\r\n\r\nError getting the catalog_id, in command line works:\r\n```shell\r\naws lakeformation grant-permissions \\\r\n--region <region e.g. us-east-1> \\\r\n--cli-input-json \\\r\n'{\r\n    \"Principal\": {\r\n        \"DataLakePrincipalIdentifier\": \"<user or role ARN e.g. arn:aws:iam::<accound-id>:role/ExampleRole>\"\r\n    },\r\n    \"Resource\": {\r\n        \"Table\": {\r\n            \"CatalogId\": \"<account-id>:<s3tablescatalog>/<S3 table bucket name>\",\r\n            \"DatabaseName\": \"<S3 table bucket namespace e.g. test_namespace>\",\r\n            \"Name\": \"<S3 table bucket table name e.g. test_table>\"\r\n        }\r\n    },\r\n    \"Permissions\": [\r\n        \"ALL\"\r\n    ]\r\n}'\r\n```\r\n\r\n\r\n### Relevant Error/Panic Output Snippet\r\n\r\n```shell\r\nError: \"table.0.catalog_id\" doesn't look like AWS Account ID (exactly 12 digits): \"$ACCOUNT_ID:s3tablescatalog/$TABLE_BUCKET\"\r\n\u2502 \r\n\u2502   with aws_lakeformation_permissions.example,\r\n\u2502   on main.tf line 192, in resource \"aws_lakeformation_permissions\" \"example\":\r\n\u2502  192:     catalog_id = \"${data.aws_caller_identity.current.account_id}:s3tablescatalog/${var.table_bucket.name}\"\r\n```\r\n\r\n\r\n### Terraform Configuration Files\r\n\r\n```tf\r\ndata \"aws_caller_identity\" \"current\" {}\r\n\r\ndata \"aws_iam_user\" \"current_user\" {\r\n  user_name = var.aws_user\r\n}\r\n\r\nresource \"aws_s3tables_table\" \"example\" {\r\n  name             = \"example-table\"\r\n  namespace        = aws_s3tables_namespace.example\r\n  table_bucket_arn = aws_s3tables_namespace.example.table_bucket_arn\r\n  format           = \"ICEBERG\"\r\n}\r\n\r\nresource \"aws_s3tables_namespace\" \"example\" {\r\n  namespace        = \"example-namespace\"\r\n  table_bucket_arn = aws_s3tables_table_bucket.example.arn\r\n}\r\n\r\nresource \"aws_s3tables_table_bucket\" \"example\" {\r\n  name = \"example-bucket\"\r\n}\r\n\r\nresource \"aws_lakeformation_permissions\" \"table_permissions\" {\r\n  permissions = [\"ALL\"]\r\n  principal   = \"arn:aws:iam::${data.aws_caller_identity.current.account_id}:user/${var.aws_user}\"\r\n\r\n  table {\r\n    catalog_id = \"${data.aws_caller_identity.current.account_id}:s3tablescatalog/${var.table_bucket}\"\r\n    database_name = aws_s3tables_namespace.example.namespace\r\n    name          = aws_s3tables_table.example.name\r\n  }\r\n}\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\n1. terraform init -upgrade\r\n2. terraform apply\r\n\r\n### Debug Output\r\n\r\n_No response_\r\n\r\n### Panic Output\r\n\r\n_No response_\r\n\r\n### Important Factoids\r\n\r\n_No response_\r\n\r\n### References\r\n\r\n_No response_\r\n\r\n### Would you like to implement a fix?\r\n\r\nNone",
      "solution": "## S3Tables + LakeFormation Integration Status\n\n**Active Development**\n* #44896 \n* #44910 \n* #44893\n* #44912\n\n**Community PRs** \n* #43024 - Extended catalog ID validation (27 \ud83d\udc4d, test issues)\n* #43931 - S3Tables catalog validation fix (8 \ud83d\udc4d)\n\n**Recently Fixed**\n* #44890 - LakeFormation Tags for S3Tables \u2705 (merged v6.20.0)\n* #44574 \n\n**Related Issues**\n* #40725 - Glue federated catalog \u2192 #43583 (PR ready)\n* #43167 - S3Tables compaction \u2192 #43923 (blocked on metadata)\n* #38982 - ListPermissions operation error (directly related to permissions reading)\n* #44074 - Permissions resource recreation (likely related to catalog validation)  \n* #38600 - AllIAMPrincipals support (PR addressing similar validation scope)\n* #33687 - Table region support (stale)\n\n**For maintainers**: This cluster spans catalog validation, permissions filtering, and cross-service integration. The core validation issues appear resolved, with systematic permissions refactoring in progress.\n\n---\n\nwhen the problem will solved? I have the same error\n_\"catalog_id\" doesn't look like AWS Account ID (exactly 12 digits): \"<acc_id>:s3tablescatalog/<db_name>_\n\n---\n\n> when the problem will solved? I have the same error _\"catalog_id\" doesn't look like AWS Account ID (exactly 12 digits): \"<acc_id>:s3tablescatalog/<db_name>_\n\nSame",
      "labels": [
        "bug",
        "service/lakeformation"
      ],
      "created_at": "2024-12-30T09:55:13Z",
      "closed_at": "2026-01-20T19:49:22Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/40724",
      "comments_count": 10
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 42025,
      "title": "[Documentation]: `aws_ec2_transit_gateway_vpc_attachment `: Clarify behavior of the `transit_gateway_default_route_table_[association|propagation]` arguments",
      "problem": "### Terraform Core Version\n\n1.5.7\n\n### AWS Provider Version\n\n5.89.0\n\n### Affected Resource(s)\n\naws_ec2_transit_gateway_vpc_attachment\naws_ec2_transit_gateway_route_table_association\naws_ec2_transit_gateway_route_table_propagation\n\n\n### Expected Behavior\n\nI created these resources (redacted for clarity):\n\n```hcl\nresource \"aws_ec2_transit_gateway_vpc_attachment\" \"tgw_vpc_att\" {\n  ...\n  ...\n  transit_gateway_default_route_table_association = false\n  transit_gateway_default_route_table_propagation = false\n  ...\n  ...\n}\n\nresource \"aws_ec2_transit_gateway_route_table_association\" \"tgw_rt_a\" {\n  ...\n  transit_gateway_route_table_id = var.transit_gateway_route_table_id\n  ...\n  depends_on = [\n    aws_ec2_transit_gateway_vpc_attachment.tgw_vpc_att\n  ]\n}\n\nresource \"aws_ec2_transit_gateway_route_table_propagation\" \"tgw_rt_p\" {\n  ...\n  transit_gateway_route_table_id = var.transit_gateway_route_table_id\n  ...\n  depends_on = [\n    aws_ec2_transit_gateway_vpc_attachment.tgw_vpc_att\n  ]\n}\n```\nOn the first run, all resources are created as intended.\n\nI am expecting that on subsequent runs nothing is changed.\n\n\n### Actual Behavior\n\nOn the second run, change\n\n```console\n  transit_gateway_default_route_table_association = true -> false\n  transit_gateway_default_route_table_propagation = true -> false\n```\n\nis detected and association and propagation deleted.\nOn the third run, missing aws_ec2_transit_gateway_route_table_association and aws_ec2_transit_gateway_route_table_propagation are detected and created again.\n\nNOTE: There is only one routing table for now, but I am preparing the code to be able to choose which route table will be used for association/propagation.\n\n### Relevant Error/Panic Output Snippet\n\n```shell\n\n```\n\n### Terraform Configuration Files\n\n```hcl\nprovider \"aws\" {\n  region = \"eu-central-1\"\n  profile = ...\n}\n```\n\n### Steps to Reproduce\n\nCreate a TGW and VPC, then Just run the code (required arguments filled with your specific resource IDs) above several times.\n\n### Debug Output\n\n_No response_\n\n### Panic Output\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNone",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\nSo far I am using workaround\n```\nresource \"aws_ec2_transit_gateway_vpc_attachment\" \"tgw_vpc_att\" {\n  ...\n  transit_gateway_default_route_table_association = var.transit_gateway_route_table_id == <default route table ID> ? true : false\n  transit_gateway_default_route_table_propagation = var.transit_gateway_route_table_id == <default route table ID> ? true : false\n}\n```\nso there is a workaround.\n\n\n---\n\nHey @jirizemanek \ud83d\udc4b Thank you for taking the time to raise this! \n\n> NOTE: There is only one routing table for now\n\nBased on this note and your follow up response, it seems reasonable to assume that the route table ID being passed to the `aws_ec2_transit_gateway_route_table_association` and `aws_ec2_transit_gateway_route_table_propagation` resources -- is that correct?\n\nIf so, this is behaving as I would expect, since you're essentially using separate Terraform resources to manage the same AWS resources. This is similar to, say, using a [`aws_security_group` resource](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group) with in-line `ingress` and `egress` rule definitions while also using any of the other, related resources ([`aws_vpc_security_group_egress_rule `](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/vpc_security_group_egress_rule), for instance).\n\nThe reason this happens is how Terraform works at its core. During the initial plan, none of the resources exist, so Terraform plans to create them all. Because the `aws_ec2_transit_gateway_route_table_association` and `aws_ec2_transit_gateway_route_table_propagation` resources are dependent on the `aws_ec2_transit_gateway_vpc_attachment`, the latter is created first and saved to the state file while `transit_gateway_default_route_table_association` and `transit_gateway_default_route_table_propagation` are set to `false`. Afterwards, the other two resources are created, which, when targeted at the default route table, are functionally identical to setting those settings to `true`. On the next plan, Terraform will see the latter of the two resources are not having changed, but will notice the change in the `aws_ec2_transit_gateway_route_table_association` resource and \"correct\" the drift. On the next plan, the opposite is occurs, and the resources continue to fight with each other.\n\nWith that in mind, what you mentioned as a workaround is less so a workaround and more the \"correct\" way to go about it. I would add that a common additional step would be to add a `count` to enable conditional creation of the latter two resources under the same circumstances, e.g.:\n\n```hcl\nlocals {\n  route_table_is_default = var.transit_gateway_route_table_id == <default route table ID>\n}\n\nresource \"aws_ec2_transit_gateway_vpc_attachment\" \"tgw_vpc_att\" {\n  transit_gateway_default_route_table_association = local.route_table_is_default\n  transit_gateway_default_route_table_propagation = local.route_table_is_default \n  ...\n}\n\nresource \"aws_ec2_transit_gateway_route_table_association\" \"tgw_rt_a\" {\n  count = local.route_table_is_default ? 0 : 1\n  ...\n}\n\nresource \"aws_ec2_transit_gateway_route_table_propagation\" \"tgw_rt_p\" {\n  count = local.route_table_is_default ? 0 : 1\n  ...\n}\n```\n\nI'll leave this open for now, in case I've misunderstood anything about your configuration.",
      "labels": [
        "documentation",
        "good first issue",
        "service/transitgateway"
      ],
      "created_at": "2025-03-28T13:47:39Z",
      "closed_at": "2026-01-27T14:56:58Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/42025",
      "comments_count": 10
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 42292,
      "title": "Support for Service Principals in `aws_ram_principal_association`",
      "problem": "### Description\n\nCurrently, the `aws_ram_principal_association` resource cannot associate a service principal (e.g., `pca\u2011connector\u2011ad.amazonaws.com`), even though the same operation is possible with the AWS CLI by passing the principal to the --principals flag.\n\nAttempting to specify a service principal results in the following error:\n\n```hcl\nresource \"aws_ram_principal_association\" \"example\" {\n  resource_share_arn = aws_ram_resource_share.example.arn\n  principal          = \"pca-connector-ad.amazonaws.com\"\n}\n```\n\n```\nError: \"principal\" doesn't look like AWS Account ID (exactly 12 digits): \"pca-connector-ad.amazonaws.com\"\nError: \"principal\" (pca-connector-ad.amazonaws.com) is an invalid ARN: arn: invalid prefix\n```\n\nAlthough this pattern is not called out in the AWS CLI or Go SDK references, the AWS Private CA documentation demonstrates creating a resource share that targets a service principal:\nhttps://docs.aws.amazon.com/privateca/latest/userguide/connector-for-ad-getting-started-prerequisites.html#prereq-share-pca\n\nTo support service principals, the provider would also need to expose the sources attribute that exists in both the CLI and SDK.\n\n**Enhancement request**\n\nAdd support to aws_ram_principal_association for:\n1. principal = \"pca-connector-ad.amazonaws.com\" (and other service principals)\n2. sources = [\"123456789012\"] (or similar) when the principal is a service principal\n\nWith this change, Terraform could manage resource shares required by features such as Private CA Connector for AD, achieving parity with the AWS CLI.\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_ram_principal_association`\n\n### Potential Terraform Configuration\n\n```hcl\nresource \"aws_ram_principal_association\" \"example\" {\n  resource_share_arn = aws_ram_resource_share.example.arn\n  principal          = \"pca-connector-ad.amazonaws.com\"\n  sources            = [\"123456789012\"]\n}\n```\n\n\n### References\n\n* AWS PCA Connector for AD - Resource Share documentation:\n  * https://docs.aws.amazon.com/privateca/latest/userguide/connector-for-ad-getting-started-prerequisites.html#prereq-share-pca\n\n* AWS CLI Reference (does not mention service principals explicitly):\n  * https://docs.aws.amazon.com/cli/latest/reference/ram/create-resource-share.html\n\n* AWS SDK for Go v2 Reference:\n  * https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/service/ram#Client.CreateResourceShare\n  * https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/service/ram#CreateResourceShareInput\n\n\n### Would you like to implement the enhancement?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "enhancement",
        "service/ram"
      ],
      "created_at": "2025-04-18T16:28:25Z",
      "closed_at": "2026-01-15T22:23:28Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/42292",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 43164,
      "title": "aws_redshiftserverless_workgroup price_performance_target object \"level\" shouldn't be required value or except 0 if enable is false",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.3.3\naws v5.100.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\naws_redshiftserverless_workgroup\n\n### Expected Behavior\n\nWhen trying to change the level of the price_performance_target from 0 to 50 when pricePerformanceTarget enabled attribute is false.\n\nIt should allow to change the level to 50, or keep the level at 0, but in both scenarios it is failing.\n\nwhen pricePerformanceTarget enabled attribute is false level value should automatically set to 0 or allow to change the value when pricePerformanceTarget enabled attribute is false.\n\n### Actual Behavior\n\nWhen trying to change the level of the price_performance_target from 0 to 50 when pricePerformanceTarget enabled attribute is false.\n~ resource \"aws_redshiftserverless_workgroup\" \"serverless\" {\n19:09:31\u00a0          id                   = \"dev-srv2-serverless-1\"\n19:09:31\u00a0          tags                 = {\n19:09:31\u00a0              \"Infra\" = \"dev-srv\"\n19:09:31\u00a0              \"Name\"  = \"dev-srv2-serverless-1\"\n19:09:31\u00a0              \"env\"   = \"dev-srv2\"\n19:09:31\u00a0          }\n19:09:31\u00a0          # (14 unchanged attributes hidden)\n19:09:31\u00a0  \n19:09:31\u00a0        ~ price_performance_target {\n19:09:31\u00a0            ~ level   = 0 -> 50\n19:09:31\u00a0              # (1 unchanged attribute hidden)\n19:09:31\u00a0          }\n19:09:31\u00a0  \n19:09:31\u00a0          # (9 unchanged blocks hidden)\n19:09:31\u00a0      }\n \nupdating Redshift Serverless Workgroup (dev-srv2-serverless-1): operation error Redshift Serverless: UpdateWorkgroup, https response error StatusCode: 400, RequestID: 8f1ae0a2-a2eb-4bec-8a57-80926ec4f948, ValidationException: pricePerformanceTargetStatus is already disabled\n\nWhen there is no change in the \"level\" attribute i.e. default is 0, when pricePerformanceTarget enabled attribute is false, it expects one of these values [1 25 50 75 100] and got the below error::\nexpected price_performance_target.0.level to be one of [1 25 50 75 100], got 0\n\nSo i am not able to change the value or keep the default value 0 when pricePerformanceTarget enabled attribute is false.\n\n### Relevant Error/Panic Output\n\n```console\n\n```\n\n\n### Sample Terraform Configuration\n\n\nresource \"aws_redshiftserverless_workgroup\" \"serverless\" {\n  namespace_name = \"test\"\n  workgroup_name = \"test\"\n  base_capacity  = 32\n  max_capacity   = 64\n  price_performance_target {\n      enabled = false\n      level   = <Condition> ? var.config.price_performance_target_level : 0\n    }\n \n  })\n}\n\n### Steps to Reproduce\n\nPlan the configuration, if price_performance_target  block enabled is false, it expects the value [1 25 50 75 100] and if you set the one of these values, it fails as enabled is false, so if we set the value price_performance_target enabled false it don't expect any value\n\n### Debug Logging\n\n<details>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\nHey @gaurgup5 \ud83d\udc4b Thank you for taking the time to raise this! It looks like there's a couple of things at play here. The documentation for `aws_redshiftserverless_workgroup` incorrectly states that `level` is a required argument when in reality, it's [marked as optional](https://github.com/hashicorp/terraform-provider-aws/blob/377bbab32f885ea7d475ef883293dd42f80f646f/internal/service/redshiftserverless/workgroup.go#L186). I'll work on a documentation pull request to get that fixed. \n\nAs far as attempting to update the level while `enabled` is set to `false`, the error that you're receiving is coming from how the upstream API operates. To demonstrate, I created and applied the following configuration:\n\n```hcl\nresource \"aws_redshiftserverless_namespace\" \"example\" {\n  namespace_name = \"jretzolk-test\"\n}\n\nresource \"aws_redshiftserverless_workgroup\" \"example\" {\n  namespace_name = aws_redshiftserverless_namespace.example.namespace_name\n  workgroup_name = \"jretzolk-test\"\n\n  price_performance_target {\n    enabled = false\n  }\n}\n```\n\nAfter doing so, I attempted a couple of things via the [`aws` CLI](https://docs.aws.amazon.com/cli/latest/reference/redshift-serverless/update-workgroup.html):\n\nFirst, attempting to update the `level` with the `status` still set to disabled:\n\n```console\n$ aws redshift-serverless update-workgroup --workgroup-name jretzolk-test --price-performance-target level=50,status=DISABLED\n\nAn error occurred (ValidationException) when calling the UpdateWorkgroup operation: pricePerformanceTargetStatus is already disabled\n```\n\nNext, I attempted to updated the `level` without specifying the `status` (in an attempt to update the level without explicitly sending the status along):\n\n```console\n$ aws redshift-serverless update-workgroup --workgroup-name jretzolk-test --price-performance-target level=50\n\nAn error occurred (ValidationException) when calling the UpdateWorkgroup operation: You can't set pricePerformanceTargetLevel without setting pricePerformanceTargetStatus to enabled.\n```\n\nWe may be able to add some validation to help the provider emit an error when attempting to set the `level` when `enabled` is set to `false`, but we would classify that as more of an enhancement request than a bug.\n\n---\n\n@justinretzolk : Thanks for the response and I got that \"level\" is not a required argument and is optional when price_performance_target  enabled is set to False, but when the price_performance_target is enabbled with level = 50 and i try to run below terraform by setting the enable = FALSE and setting the base capacity to 32, it gives me error:\n\nresource \"aws_redshiftserverless_workgroup\" \"example\" {\n  namespace_name = aws_redshiftserverless_namespace.example.namespace_name\n  workgroup_name = \"jretzolk-test\"\n  base_capacity  = 32\n\n  price_performance_target {\n    enabled = false\n  }\n}\n\nError: updating Redshift Serverless Workgroup : operation error Redshift Serverless: UpdateWorkgroup, https response error StatusCode: 400, RequestID: 62e086ad-3e75-4208-b624-e33f55ba1e26, ValidationException: Base capacity cannot be updated when PerformanceTarget is Enabled.\n\nIt seems we can't set the base_capacity and price_performance_target at the same time, please suggest the resolution for the same.",
      "labels": [
        "bug",
        "service/redshiftserverless"
      ],
      "created_at": "2025-06-24T17:58:02Z",
      "closed_at": "2026-01-26T19:51:07Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/43164",
      "comments_count": 8
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 44692,
      "title": "DynamoDB table global secondary index keeps changing when warm_throughput is not defined",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.13.1\nprovider registry.terraform.io/hashicorp/aws v6.17.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_dynamodb_table`\n\n### Expected Behavior\n\n`No changes. Your infrastructure matches the configuration.`\n\n### Actual Behavior\n\n```hcl\n~ resource \"aws_dynamodb_table\" \"this\" {\n        id                          = \"broken-table\"\n        name                        = \"broken-table\"\n        tags                        = {\n            \"Name\"                     = \"broken-table\"\n        }\n        # (14 unchanged attributes hidden)\n\n      - global_secondary_index {\n          - hash_key           = \"test\" -> null\n          - name               = \"test-gsi\" -> null\n          - non_key_attributes = [] -> null\n          - projection_type    = \"KEYS_ONLY\" -> null\n          - range_key          = \"timestamp#offset\" -> null\n          - read_capacity      = 0 -> null\n          - write_capacity     = 0 -> null\n\n          - warm_throughput {\n              - read_units_per_second  = 12000 -> null\n              - write_units_per_second = 17194 -> null\n            }\n        }\n      + global_secondary_index {\n          + hash_key           = \"test\"\n          + name               = \"test-gsi\"\n          + non_key_attributes = []\n          + projection_type    = \"KEYS_ONLY\"\n          + range_key          = \"timestamp#offset\"\n          + read_capacity      = (known after apply)\n          + write_capacity     = (known after apply)\n\n          + warm_throughput (known after apply)\n        }\n```\n\n### Relevant Error/Panic Output\n\n```console\n\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nvariable \nresource \"aws_dynamodb_table\" \"this\" {\n  name           = \"broken-table\"\n  billing_mode   = \"PAY_PER_REQUEST\"\n  tags           = {\n    \"Name\" = \"broken-table\"\n  }\n\n  attribute {\n        name = \"test\"\n        type = \"S\"\n  }\n\n  global_secondary_index {\n      name               = \"test-gsi\"\n      hash_key           = \"test\"\n      range_key          = \"test\"\n      projection_type    = \"KEYS_ONLY\"\n    }\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Provision a table with `PAY_PER_REQUEST ` billing mode and `global_secondary_indexes` defined but no `warm_throughput` attribute set leaving it to the default values (12000 and 4000 units correspondingly).\n2. Start adding items to the table to increase warm throughput write units in a GIS so it changes from the default `4000` value to a new value.\n3. Run terraform plan once more and the change will appear in the plan/apply but won't actually be applied as the write warm throughput defined by AWS when on-demand mode is enabled.\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\nThe change was introduced in this PR https://github.com/hashicorp/terraform-provider-aws/pull/41308\nWe started seeing that perpetual change in our plans when v6.13.0 was released with this change \n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\nI'm experiencing a similar issue, but on the **table itself** (not GSI).\n\n  Even though `warm_throughput` is explicitly configured in my Terraform and already exists in AWS,\n  `terraform refresh` does not import the values into state. Every `plan` shows:\n\n  ```hcl\n  + warm_throughput {\n      + read_units_per_second  = 12000\n      + write_units_per_second = 4000\n    }\n\n  - Provider: 6.28.0\n  - Terraform: 1.14.3\n```\n\n  This seems to be the same root cause from #41308.\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "regression",
        "service/dynamodb"
      ],
      "created_at": "2025-10-17T12:55:28Z",
      "closed_at": "2026-01-28T15:34:44Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/44692",
      "comments_count": 8
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45034,
      "title": "aws_placement_group enforces an incorrect partition_count limit",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.13.4\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v6.20.0\n+ provider registry.terraform.io/hashicorp/null v3.2.4\n+ provider registry.terraform.io/hashicorp/vault v5.4.0\n+ provider registry.terraform.io/mongey/kafka v0.13.1\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* aws_placement_group\n\n### Expected Behavior\n\nPlacement groups using `partition` strategy should not enforce an upper limit of 7 and instead allow the AWS API to enforce limits, as this limit is mutable.\nhttps://github.com/hashicorp/terraform-provider-aws/blob/main/internal/service/ec2/ec2_placement_group.go#L56\n\n### Actual Behavior\n\nProvider errors out when the partition count is greater than hard coded limit of 7.\n\n### Relevant Error/Panic Output\n\n```\nError: expected partition_count to be in the range (0 - 7), got 15\n```\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nresource \"aws_placement_group\" \"partitioned\" {\n  name            = \"partitioned-placement-group\"\n  strategy        = \"partition\"\n  partition_count = 8\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Attempt to create an `aws_placement_group` with `strategy = \"partition\"` and `partition_count` greater than 7.\n\n### Debug Logging\n\nn/a\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\nhttps://github.com/hashicorp/terraform-provider-aws/blob/main/internal/service/ec2/ec2_placement_group.go#L56\n\nAWS allow modifying this limit, although it does not seem to be very publicly advertised, nor is it actually listed under service quotas - modification requires opening a support case (this functionality may be limited to enterprise support customers).\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\nHi @gmarkey \ud83d\udc4b ,\n\nthanks for raising the issue. I can have a look into this one.\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "good first issue",
        "service/ec2"
      ],
      "created_at": "2025-11-12T02:31:36Z",
      "closed_at": "2026-01-19T21:28:47Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45034",
      "comments_count": 8
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45082,
      "title": "New Resource: aws_opensearch_application for OpenSearch UI with IAM Identity Center integration",
      "problem": "### What new functionality are you requesting?\n\n*`aws_opensearch_application`\n\n### Description\n\nThe OpenSearch Application UI Dashboards feature enables organizations to create unified applications that integrate multiple OpenSearch domains and collections, providing a modern operational analytics experience (https://github.com/hashicorp/terraform-provider-aws/issues/44557). A critical capability of this feature is the integration with AWS IAM Identity Center (formerly AWS SSO) for authentication and authorization, allowing users to access OpenSearch Dashboards through single sign-on (SSO).\n\nCurrently, creating and managing OpenSearch Applications requires manual configuration through the AWS Console or CLI. The addition of the `aws_opensearch_application` resource would enable Infrastructure as Code (IaC) practitioners to:\n\n- Automate the creation and lifecycle management of OpenSearch Applications\n- Configure SAML-based identity federation with AWS IAM Identity Center\n- Manage application-level access policies and IAM role associations\n- Ensure consistent configuration across multiple environments (development, staging, production)\n- Integrate OpenSearch Application provisioning into existing Terraform workflows\n\nThis resource is essential for organizations adopting OpenSearch Application UI Dashboards with SSO integration, as it allows them to manage this critical infrastructure component declaratively alongside their other AWS resources.\n\n### Potential Terraform Configuration\n\n```hcl\nresource \"aws_opensearch_application\" \"example\" {\n  # Required: The unique name of the OpenSearch application\n  # Names must be unique within an AWS Region for each account\n  # Length: 3-30 characters, Pattern: [a-z][a-z0-9\\-]+\n  name = \"example-application\"\n\n  # Optional: Configuration settings for the OpenSearch application\n  # Maximum 200 items\n  app_configs {\n    key   = \"admin.enabled\"\n    value = \"true\"\n  }\n  app_configs {\n    key   = \"ui.theme\"\n    value = \"dark\"\n  }\n\n  # Optional: The data sources to link to the OpenSearch application\n  # Can include OpenSearch domains (ARN format: arn:aws:es:region:account:domain/domain-name)\n  # or OpenSearch Serverless collections (ARN format: arn:aws:aoss:region:account:collection/id)\n  data_sources {\n    data_source_arn         = aws_opensearch_domain.example.arn\n    data_source_description = \"Production OpenSearch domain\"\n  }\n\n  # Optional: Configuration settings for integrating AWS IAM Identity Center\n  iam_identity_center_options {\n    enabled                                    = true\n    iam_identity_center_instance_arn           = tolist(data.aws_ssoadmin_instances.this.arns)[0]\n    iam_role_for_identity_center_application_arn = aws_iam_role.application_ui.arn\n  }\n\n  # Optional: A list of tags attached to the application\n  tags = {\n    Environment = \"development\"\n    Application = \"opensearch\"\n    ManagedBy   = \"terraform\"\n  }\n\n  # Optional: Unique identifier to ensure idempotency of the request\n  # Typically managed automatically by Terraform, but can be explicitly set\n  # client_token = \"unique-client-token-12345\"\n}\n```\n\n\n### References\n\n### AWS SDK Documentation\n- AWS SDK for Go v2 - OpenSearch Service: https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/service/opensearch\n- AWS SDK for Go v2 - OpenSearch Service API Reference: https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/service/opensearch@latest\n\n### AWS API Documentation\n- CreateApplication API: https://docs.aws.amazon.com/opensearch-service/latest/APIReference/API_CreateApplication.html\n- UpdateApplication API: https://docs.aws.amazon.com/opensearch-service/latest/APIReference/API_UpdateApplication.html\n- DeleteApplication API: https://docs.aws.amazon.com/opensearch-service/latest/APIReference/API_DeleteApplication.html\n- GetApplication API: https://docs.aws.amazon.com/opensearch-service/latest/APIReference/API_GetApplication.html\n- ListApplications API: https://docs.aws.amazon.com/opensearch-service/latest/APIReference/API_ListApplications.html\n\n### AWS CLI Documentation\n- AWS CLI opensearch create-application: https://docs.aws.amazon.com/cli/latest/reference/opensearch/create-application.html\n\n### AWS Service Documentation\n- OpenSearch Application UI Documentation: https://docs.aws.amazon.com/opensearch-service/latest/developerguide/application.html\n- IdentityCenterOptions API Reference: https://docs.aws.amazon.com/opensearch-service/latest/APIReference/API_IdentityCenterOptions.html\n\n### AWS Announcements\n- SAML Single Sign-On for OpenSearch UI: https://aws.amazon.com/about-aws/whats-new/2025/04/amazon-opensearch-service-saml-single-sign-on/\n\n### Related GitHub Issues/PRs\n- Search for existing issues: https://github.com/hashicorp/terraform-provider-aws/issues?q=opensearch+application\n- OpenSearch Domain: Add suport to IDC integration with OpenSearch UI Applications: https://github.com/hashicorp/terraform-provider-aws/issues/44557\n\n### Would you like to implement the enhancement?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "enhancement",
        "new-resource",
        "service/opensearch"
      ],
      "created_at": "2025-11-14T15:04:06Z",
      "closed_at": "2026-01-20T15:38:20Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45082",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45241,
      "title": "aws_route53_zone fails with InvalidChangeBatch during ForceNew operations",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.0\non darwin_arm64\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_route53_zone`\n\n### Expected Behavior\n\n## Expected Behavior\n\nWhen changing the `name` attribute of an `aws_route53_zone` resource (which triggers recreation due to `ForceNew: true`), the old zone should be properly destroyed with `force_destroy = true`:\n\n1. Custom DNS records in the old zone should be successfully deleted during cleanup\n2. Zone apex NS and SOA records should be correctly preserved from deletion attempts  \n3. The old zone should be completely removed without errors\n4. The new zone should be created with the updated name\n\n### Actual Behavior\n\nWhen changing the `name` attribute of an `aws_route53_zone` resource with `force_destroy = true`, the deletion process may fail because:\n\n```\n-/+ resource \"aws_route53_zone\" \"example\" {\n      ~ arn                 = \"arn:aws:route53:::hostedzone/Z123456789EXAMPLE\" -> (known after apply)\n      ~ id                  = \"Z123456789EXAMPLE\" -> (known after apply)\n      ~ name                = \"old-domain.example.com\" -> \"new-domain.example.com\" # forces replacement\n      ~ name_servers        = [\n          - \"ns-0.awsdns-00.com.\",\n          - \"ns-1024.awsdns-00.org.\",\n          - \"ns-1536.awsdns-00.co.uk.\",\n          - \"ns-512.awsdns-00.net.\",\n        ] -> (known after apply)\n      ~ primary_name_server = \"ns-0.awsdns-00.com.\" -> (known after apply)\n      ~ zone_id             = \"Z123456789EXAMPLE\" -> (known after apply)\n```\n\nThis results in the following error during deletion:\n\n```\ndeleting Route53 Hosted Zone (Z123456789EXAMPLE) resource record sets: operation error Route 53: ChangeResourceRecordSets, https response error StatusCode: 400, RequestID: 12345678-1234-1234-1234-123456789abc, InvalidChangeBatch: [A HostedZone must contain at least one NS record for the zone itself., A HostedZone must contain exactly one SOA record.]\n```\n\n**Root cause:**\n1. The cleanup logic uses the **new zone name** from Terraform state instead of the **actual zone name** being deleted\n2. Record filtering fails when comparing:\n   - Actual record names from the old zone (e.g., `old-domain.example.com`)\n   - Zone name parameter from Terraform state (e.g., `new-domain.example.com`)\n3. NS/SOA record preservation logic breaks, causing the system to attempt deletion of undeletable records\n\n### Relevant Error/Panic Output\n\n```console\ndeleting Route53 Hosted Zone (Z123456789EXAMPLE) resource record sets: operation error Route 53: ChangeResourceRecordSets, https response error StatusCode: 400, RequestID: 12345678-1234-1234-1234-123456789abc, InvalidChangeBatch: [A HostedZone must contain at least one NS record for the zone itself., A HostedZone must contain exactly one SOA record.]\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nresource \"aws_route53_zone\" \"example\" {\n  name          = \"old-domain.example.com\"\n  force_destroy = true\n\n  tags = {\n    Environment = \"test\"\n  }\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Apply the initial configuration with `old-domain.example.com`\n2. Add some custom DNS records to the zone (optional, but helps demonstrate the cleanup issue)\n3. Change the `name` attribute to `new-domain.example.com`\n4. Run `terraform apply`\n5. Observe the deletion error during the ForceNew operation\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\ncopilot\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nYes",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/route53"
      ],
      "created_at": "2025-11-24T21:15:43Z",
      "closed_at": "2026-01-26T15:32:11Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45241",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45268,
      "title": "Route53 resource association fails on query logging",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.0\non windows_amd64\n+ provider registry.terraform.io/hashicorp/aws v6.22.1\n```\n\n### Affected Resource(s) or Data Source(s)\n\n\"aws_route53profiles_resource_association\"\n\n\n### Expected Behavior\n\nrouet53 profile associates the resource and addds to state\n\n### Actual Behavior\n\nthe resouce is added to the profile but not saved in terraform state\n\n### Relevant Error/Panic Output\n\n```console\n\n  # aws_route53profiles_resource_association.example will be created\n  + resource \"aws_route53profiles_resource_association\" \"example\" {\n      + id                  = (known after apply)\n      + name                = \"test\"\n      + owner_id            = (known after apply)\n      + profile_id          = \"profil;e_id\"\n      + region              = \"eu-central-1\"\n      + resource_arn        = \"arn:aws:route53resolver:eu-central-1:account_id:resolver-query-log-config/resouces\"\n      + resource_properties = (known after apply)\n      + resource_type       = (known after apply)\n      + status              = (known after apply)\n      + status_message      = (known after apply)\n    }\n\nPlan: 1 to add, 0 to change, 0 to destroy.\naws_route53profiles_resource_association.example: Creating...\naws_route53profiles_resource_association.example: Still creating... [10s elapsed]\n\u2577\n\u2502 Error: Invalid JSON String Value\n\u2502\n\u2502   with aws_route53profiles_resource_association.example,\n\u2502   on main.tf line 1, in resource \"aws_route53profiles_resource_association\" \"example\":\n\u2502    1: resource \"aws_route53profiles_resource_association\" \"example\" {\n\u2502\n\u2502 A string value was provided that is not valid JSON string format (RFC 7159).\n\u2502\n\u2502 Given Value:\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nresource \"aws_route53profiles_resource_association\" \"example\" {\n  name         = \"test\"\n  profile_id   = \"profile_id\"\n  resource_arn = \"arn:aws:route53resolver:eu-central-1:acccount_id:resolver-query-log-config/resouce\"\n}\n\nterraform {\n  required_providers {\n    aws = {\n      source = \"hashicorp/aws\"\n      version = \"6.22.1\"\n    }\n  }\n}\n\nprovider \"aws\" {\n  region = \"eu-central-1\"\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. create relavent profile and query logging\n2. try to associate query to profile\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\nthis is a new option by aws\nhttps://aws.amazon.com/about-aws/whats-new/2025/11/amazon-route-53-profiles-resolver-query-logging-configurations/\n\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/route53profiles"
      ],
      "created_at": "2025-11-26T11:44:24Z",
      "closed_at": "2026-01-14T13:52:31Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45268",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45566,
      "title": "S3 Tag-on-Create does not validate region support",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.1\nTerraform AWS Provider 6.25.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\naws_s3_bucket with tags\n\n\n\n### Expected Behavior\n\nThe CreateBucket action including tags should not attempt when the destination region does not support the \"Tags\" parameter within the \"CreateBucketConfiguration\" option.\n\n### Actual Behavior\n\nThe AWS S3API returns an error for 'unsupported argument' due to the region not supported bucket configuration including tags, causing the terraform deployment to fail.\n\n### Relevant Error/Panic Output\n\n```console\n\nError: creating S3 Bucket ({bucket-name}): operation error S3: CreateBucket, https response error StatusCode: 400, RequestID: {request-id}, HostID: {host-id}, api error UnsupportedArgument: The request contained an unsupported argument.\n\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\n\nresource \"aws_s3_bucket\" \"my_bucket_with_tags\" {\n  bucket = \"my-bucket-with-tags\"\n\n  tags = {\n    Name = \"my tagged bucket\"\n  }\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\nintroduced in commit #07f46ca\n\n1) create basic bucket that includes tags\n2) attempt to deploy to a region that does not support Tags within the CreateBucketConfiguration.\n3) see error\n\n\nalternative:\n\ndirectly using the AWS CLI to show the error:\n\naws s3api create-bucket --bucket my-bucket-with-tags --create-bucket-configuration 'LocationConstraint={region-without-support},Tags=[{Key=Name,Value=my-tagged-bucket}]'\n\n\n### Debug Logging\n\n_No response_\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\nintroduced in commit #07f46ca\n\nConfirmed via AWS support case that this limitation is region-specific, and thus the terraform provider should validate the region's capabilities and fail back to \"create-then-put\" sequence if it doesn't.\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> > Relates [#45251](https://github.com/hashicorp/terraform-provider-aws/pull/45251). In theory [`ABAC support for S3 general > Thanks. Just bear in mind that there are non-commercial instances of AWS that don't have 100% feature parity with commercial AWS\n\nBased on @ewbankkit 's commit history, I suspect they are quite aware of parity issues in the non-commercial AWS regions. \n\n+1 on tihs issue for us. We have had to pin the AWS provider version until this is resolved (as other feature parity \"fallbacks\" have been in the past).\n\nReferences to AWS public documentation which says \"all regions\" is superseded by documentation available for and in the AWS non-commercial regions documenting feature differences.\n\nAs a general statement: It seems like this issue is going to keep cropping up for new features unless AWS puts in a validation step for including new features in the Terraform provider to confirm whether a new feature had been simultaneously released in all non-commercial regions and includes graceful fallback support when a new feature isn't supported.\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/s3"
      ],
      "created_at": "2025-12-12T17:15:02Z",
      "closed_at": "2026-01-23T18:36:57Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45566",
      "comments_count": 8
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45684,
      "title": "ESC S3 Bucket creating with tags fails",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.3\non darwin_arm64\n\nterraform-provider-aws v6.27.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\naws_s3_bucket\n\n### Expected Behavior\n\nCreate a bucket with tags\n\n### Actual Behavior\n\nError:\n\"errorCode\": \"UnsupportedArgument\",\n\"errorMessage\": \"The request contained an unsupported argument.\",\n\nNo bucket created\n\n### Relevant Error/Panic Output\n\n```console\n\u2502 Error: creating S3 Bucket (redacted): operation error S3: CreateBucket, https response error StatusCode: 400, RequestID: redacted, HostID: redacted, api error UnsupportedArgument: The request contained an unsupported argument.\n```\nIn CloudTrail it looks like this:\n```json\n\"errorCode\": \"UnsupportedArgument\",\n\"errorMessage\": \"The request contained an unsupported argument.\",\n\"requestParameters\": {\n  \"CreateBucketConfiguration\": {\n    \"LocationConstraint\": \"eusc-de-east-1\",\n    \"xmlns\": \"http://s3.amazonaws.com/doc/2006-03-01/\",\n    \"Tags\": {\n      \"Tag\": [\n        {\n          \"Value\": \"redacted\",\n          \"Key\": \"redacted\"\n        }\n      ]\n    }\n  },\n  \"bucketName\": \"redacted\",\n  \"Host\": \"redacted.s3.eusc-de-east-1.amazonaws.eu\",\n  \"x-amz-acl\": \"private\"\n},\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nresource \"aws_s3_bucket\" \"redacted\" {\n  bucket = \"redacted\"\n  tags = {\n    redacted = \"redacted\"\n  }\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\nTry to create a bucket with name & tags in the european sovereign cloud.\n\nIn comparison doing so through the UI creates the bucket without tags and then tags in a separate API call.\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\nBy the way, just tried not tagging as a workaround, that also doesn't work in the EuSC:\n```\nError: listing tags for S3 (Simple Storage) Bucket (redacted): operation error S3 Control: ListTagsForResource, https response error StatusCode: 405, RequestID: redacted, HostID: redacted, api error MethodNotAllowed: The specified method is not allowed against this resource.\n```\n\n---\n\nIt actually works with 6.22, so #45251 may have actually broken, not fixed this.",
      "labels": [
        "bug",
        "service/s3",
        "partition/aws-eusc"
      ],
      "created_at": "2025-12-22T13:33:46Z",
      "closed_at": "2026-01-23T18:36:57Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45684",
      "comments_count": 9
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45705,
      "title": "`aws_bedrock_inference_profile` forces replacement on identical imported resource",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.3\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v6.27.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_bedrock_inference_profile`\n\n### Expected Behavior\n\nUsing `terraform import` for an existing `aws_bedrock_inference_profile` on a resource with the exact same configuration should NOT trigger a `forces replacement` on the `model_source`.\n\n### Actual Behavior\n\nWhen using the exact same configuration for a previously created `aws_bedrock_inference_profile` resource, and using `terraform import` on another `aws_bedrock_inference_profile` in another place (with the exact same config), a `forces replacement` is triggered because the AWS provider thinks the `model_source` block has changed when it hasn't.\n\n### Relevant Error/Panic Output\n\nThe HCL snippet below is a result of running `terraform plan` right after a `terraform import` on the `aws_bedrock_inference_profile.example` resource using an ID of a `aws_bedrock_inference_profile` resource that was previously created, and contained the exact same configuration.\n\n```hcl\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\n-/+ destroy and then create replacement\n\nTerraform will perform the following actions:\n\n  # aws_bedrock_inference_profile.example must be replaced\n-/+ resource \"aws_bedrock_inference_profile\" \"example\" {\n      ~ arn         = \"arn:aws:bedrock:us-west-2:123456789012:application-inference-profile/bretnbwz5dpq\" -> (known after apply)\n      ~ created_at  = \"2025-12-23T11:47:59Z\" -> (known after apply)\n      ~ id          = \"bretnbwz5dpq\" -> (known after apply)\n      ~ models      = [\n          - {\n              - model_arn = \"arn:aws:bedrock:us-east-1::foundation-model/anthropic.claude-sonnet-4-5-20250929-v1:0\"\n            },\n          - {\n              - model_arn = \"arn:aws:bedrock:us-east-2::foundation-model/anthropic.claude-sonnet-4-5-20250929-v1:0\"\n            },\n          - {\n              - model_arn = \"arn:aws:bedrock:us-west-2::foundation-model/anthropic.claude-sonnet-4-5-20250929-v1:0\"\n            },\n        ] -> (known after apply)\n        name        = \"my-aip-us-anthropic-claude-sonnet-4-5-20250929-v1-0\"\n      ~ status      = \"ACTIVE\" -> (known after apply)\n      ~ type        = \"APPLICATION\" -> (known after apply)\n      ~ updated_at  = \"2025-12-23T11:47:59Z\" -> (known after apply)\n        # (3 unchanged attributes hidden)\n\n      + model_source { # forces replacement\n          + copy_from = \"arn:aws:bedrock:us-west-2:123456789012:inference-profile/us.anthropic.claude-sonnet-4-5-20250929-v1:0\"\n        }\n    }\n\nPlan: 1 to add, 0 to change, 1 to destroy.\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>AWS Bedrock IP resource snippet</summary>\n\n```hcl\nprovider \"aws\" {\n  region = \"us-west-2\"\n}\n\nresource \"aws_bedrock_inference_profile\" \"example\" {\n  name        = \"my-aip-us-anthropic-claude-sonnet-4-5-20250929-v1-0\"\n  description = \"Test AIP using the us-anthropic-claude-sonnet-4-5-20250929-v1-0 IP\"\n\n  model_source {\n    copy_from = \"arn:aws:bedrock:us-west-2:123456789012:inference-profile/us.anthropic.claude-sonnet-4-5-20250929-v1:0\"\n  }\n}\n\noutput \"aws_bedrock_inference_profile_example\" {\n  value = aws_bedrock_inference_profile.example\n}\n\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Create a folder structure like the following where you have two folders with one `main.tf` file inside of each of them:\n\n```\n$ tree .\n.\n\u251c\u2500\u2500 bedrock-aip-a\n\u2502   \u2514\u2500\u2500 main.tf\n\u2514\u2500\u2500 bedrock-aip-b\n    \u2514\u2500\u2500 main.tf\n```\n\n2. Select an AWS account to work with\n3. Get the ARN of the `us.anthropic.claude-sonnet-4-5-20250929-v1:0` inference profile in the `us-west-2` region for your AWS account. Replace that ARN with the one included in the `model_source.copy_from` field in the `Sample Terraform Configuration`.\n4. Place the modified `Sample Terraform Configuration` included in this bug report (with the real inference profile ARN) into each of the two `main.tf` files.\n5. Go into the folder `bedrock-aip-a` and run `terraform init -reconfigure -upgrade`\n6. Then run `terraform apply`\n7. Make note of the `id` that is generated and is included in the `aws_bedrock_inference_profile_example` output\n8. Go into the folder `bedrock-aip-b` and run `terraform init -reconfigure -upgrade`\n9. Run `terraform import 'aws_bedrock_inference_profile.example' <id-from-the-output-of-bedrock-aip-a>` using the ID from the output of the `bedrock-aip-a` folder\n10. Run `terraform plan` after the successful import\n11. Notice that, even though the contents of `main.tf` are exactly the same, Terraform wants to create a new resource based on a perceived change in the `model_source` block as shown in the error block included\n\n### Debug Logging\n\nThis is the output debug log of the `terraform plan` in the `bedrock-aip-b` folder after successfully running a `terraform import` into the `aws_bedrock_inference_profile.example` resource using the ID from the previously created `aws_bedrock_inference_profile.example` resource.\n\n<details>\n<summary>Plan debug log</summary>\n\n```console\n$ TF_LOG=debug terraform plan\n\n2025-12-23T13:08:42.737+0100 [INFO]  Terraform version: 1.14.3\n2025-12-23T13:08:42.738+0100 [DEBUG] using github.com/hashicorp/go-tfe v1.94.0\n2025-12-23T13:08:42.738+0100 [DEBUG] using github.com/hashicorp/hcl/v2 v2.24.0\n2025-12-23T13:08:42.738+0100 [DEBUG] using github.com/hashicorp/terraform-svchost v0.1.1\n2025-12-23T13:08:42.738+0100 [DEBUG] using github.com/zclconf/go-cty v1.16.3\n2025-12-23T13:08:42.738+0100 [INFO]  Go runtime version: go1.25.5\n2025-12-23T13:08:42.738+0100 [INFO]  CLI args: []string{\"/Users/myuser/.config/tfenv/versions/1.14.3/terraform\", \"plan\"}\n2025-12-23T13:08:42.738+0100 [DEBUG] Attempting to open CLI config file: /Users/myuser/.terraformrc\n2025-12-23T13:08:42.738+0100 [DEBUG] File doesn't exist, but doesn't need to. Ignoring.\n2025-12-23T13:08:42.738+0100 [DEBUG] ignoring non-existing provider search directory terraform.d/plugins\n2025-12-23T13:08:42.738+0100 [DEBUG] ignoring non-existing provider search directory /Users/myuser/.terraform.d/plugins\n2025-12-23T13:08:42.738+0100 [DEBUG] ignoring non-existing provider search directory /Users/myuser/Library/Application Support/io.terraform/plugins\n2025-12-23T13:08:42.738+0100 [DEBUG] ignoring non-existing provider search directory /Library/Application Support/io.terraform/plugins\n2025-12-23T13:08:42.738+0100 [INFO]  CLI command args: []string{\"plan\"}\n2025-12-23T13:08:43.136+0100 [DEBUG] checking for provisioner in \".\"\n2025-12-23T13:08:43.136+0100 [DEBUG] checking for provisioner in \"/Users/myuser/.config/tfenv/versions/1.14.3\"\n2025-12-23T13:08:43.137+0100 [INFO]  backend/local: starting Plan operation\n2025-12-23T13:08:43.139+0100 [DEBUG] created provider logger: level=debug\n2025-12-23T13:08:43.139+0100 [INFO]  provider: configuring client automatic mTLS\n2025-12-23T13:08:43.145+0100 [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.27.0/darwin_arm64/terraform-provider-aws_v6.27.0_x5 args=[\".terraform/providers/registry.terraform.io/hashicorp/aws/6.27.0/darwin_arm64/terraform-provider-aws_v6.27.0_x5\"]\n2025-12-23T13:08:43.175+0100 [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.27.0/darwin_arm64/terraform-provider-aws_v6.27.0_x5 pid=20273\n2025-12-23T13:08:43.175+0100 [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.27.0/darwin_arm64/terraform-provider-aws_v6.27.0_x5\n2025-12-23T13:08:43.542+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Starting github.com/hashicorp/terraform-provider-aws@6.27.0 (go1.24.11)...\n2025-12-23T13:08:43.542+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Creating Terraform AWS Provider (SDKv2-style)...\n2025-12-23T13:08:43.563+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Initializing Terraform AWS Provider (SDKv2-style)...\n2025-12-23T13:08:43.578+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Creating Terraform AWS Provider (Framework-style)...\n2025-12-23T13:08:43.589+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Initializing Terraform AWS Provider (Framework-style)...\n2025-12-23T13:08:43.590+0100 [INFO]  provider.terraform-provider-aws_v6.27.0_x5: configuring server automatic mTLS: timestamp=\"2025-12-23T13:08:43.589+0100\"\n2025-12-23T13:08:43.596+0100 [DEBUG] provider: using plugin: version=5\n2025-12-23T13:08:43.596+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: plugin address: address=/var/folders/x9/j7xbl9_54cgcg_rts_j5gryw0000gn/T/plugin2020701438 network=unix timestamp=\"2025-12-23T13:08:43.596+0100\"\n2025-12-23T13:08:44.269+0100 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2025-12-23T13:08:44.274+0100 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.27.0/darwin_arm64/terraform-provider-aws_v6.27.0_x5 id=20273\n2025-12-23T13:08:44.274+0100 [DEBUG] provider: plugin exited\n2025-12-23T13:08:44.274+0100 [DEBUG] Building and walking validate graph\n2025-12-23T13:08:44.274+0100 [DEBUG] ProviderTransformer: \"aws_bedrock_inference_profile.example\" (*terraform.NodeValidatableResource) needs provider[\"registry.terraform.io/hashicorp/aws\"]\n2025-12-23T13:08:44.274+0100 [DEBUG] ReferenceTransformer: \"aws_bedrock_inference_profile.example\" references: []\n2025-12-23T13:08:44.275+0100 [DEBUG] ReferenceTransformer: \"provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" references: []\n2025-12-23T13:08:44.275+0100 [DEBUG] Starting graph walk: walkValidate\n2025-12-23T13:08:44.275+0100 [DEBUG] created provider logger: level=debug\n2025-12-23T13:08:44.275+0100 [INFO]  provider: configuring client automatic mTLS\n2025-12-23T13:08:44.278+0100 [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.27.0/darwin_arm64/terraform-provider-aws_v6.27.0_x5 args=[\".terraform/providers/registry.terraform.io/hashicorp/aws/6.27.0/darwin_arm64/terraform-provider-aws_v6.27.0_x5\"]\n2025-12-23T13:08:44.313+0100 [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.27.0/darwin_arm64/terraform-provider-aws_v6.27.0_x5 pid=20274\n2025-12-23T13:08:44.314+0100 [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.27.0/darwin_arm64/terraform-provider-aws_v6.27.0_x5\n2025-12-23T13:08:44.681+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Starting github.com/hashicorp/terraform-provider-aws@6.27.0 (go1.24.11)...\n2025-12-23T13:08:44.681+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Creating Terraform AWS Provider (SDKv2-style)...\n2025-12-23T13:08:44.703+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Initializing Terraform AWS Provider (SDKv2-style)...\n2025-12-23T13:08:44.716+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Creating Terraform AWS Provider (Framework-style)...\n2025-12-23T13:08:44.729+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Initializing Terraform AWS Provider (Framework-style)...\n2025-12-23T13:08:44.730+0100 [INFO]  provider.terraform-provider-aws_v6.27.0_x5: configuring server automatic mTLS: timestamp=\"2025-12-23T13:08:44.729+0100\"\n2025-12-23T13:08:44.736+0100 [DEBUG] provider: using plugin: version=5\n2025-12-23T13:08:44.736+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: plugin address: address=/var/folders/x9/j7xbl9_54cgcg_rts_j5gryw0000gn/T/plugin3720974781 network=unix timestamp=\"2025-12-23T13:08:44.736+0100\"\n2025-12-23T13:08:44.811+0100 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2025-12-23T13:08:44.815+0100 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.27.0/darwin_arm64/terraform-provider-aws_v6.27.0_x5 id=20274\n2025-12-23T13:08:44.815+0100 [DEBUG] provider: plugin exited\n2025-12-23T13:08:44.815+0100 [INFO]  backend/local: plan calling Plan\n2025-12-23T13:08:44.815+0100 [DEBUG] Building and walking plan graph for NormalMode\n2025-12-23T13:08:44.815+0100 [DEBUG] ProviderTransformer: \"aws_bedrock_inference_profile.example (expand)\" (*terraform.nodeExpandPlannableResource) needs provider[\"registry.terraform.io/hashicorp/aws\"]\n2025-12-23T13:08:44.815+0100 [DEBUG] ReferenceTransformer: \"aws_bedrock_inference_profile.example (expand)\" references: []\n2025-12-23T13:08:44.815+0100 [DEBUG] ReferenceTransformer: \"provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" references: []\n2025-12-23T13:08:44.815+0100 [DEBUG] Starting graph walk: walkPlan\n2025-12-23T13:08:44.816+0100 [DEBUG] created provider logger: level=debug\n2025-12-23T13:08:44.816+0100 [INFO]  provider: configuring client automatic mTLS\n2025-12-23T13:08:44.818+0100 [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.27.0/darwin_arm64/terraform-provider-aws_v6.27.0_x5 args=[\".terraform/providers/registry.terraform.io/hashicorp/aws/6.27.0/darwin_arm64/terraform-provider-aws_v6.27.0_x5\"]\n2025-12-23T13:08:44.854+0100 [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.27.0/darwin_arm64/terraform-provider-aws_v6.27.0_x5 pid=20275\n2025-12-23T13:08:44.854+0100 [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.27.0/darwin_arm64/terraform-provider-aws_v6.27.0_x5\n2025-12-23T13:08:45.220+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Starting github.com/hashicorp/terraform-provider-aws@6.27.0 (go1.24.11)...\n2025-12-23T13:08:45.220+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Creating Terraform AWS Provider (SDKv2-style)...\n2025-12-23T13:08:45.242+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Initializing Terraform AWS Provider (SDKv2-style)...\n2025-12-23T13:08:45.255+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Creating Terraform AWS Provider (Framework-style)...\n2025-12-23T13:08:45.265+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Initializing Terraform AWS Provider (Framework-style)...\n2025-12-23T13:08:45.266+0100 [INFO]  provider.terraform-provider-aws_v6.27.0_x5: configuring server automatic mTLS: timestamp=\"2025-12-23T13:08:45.265+0100\"\n2025-12-23T13:08:45.272+0100 [DEBUG] provider: using plugin: version=5\n2025-12-23T13:08:45.272+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: plugin address: address=/var/folders/x9/j7xbl9_54cgcg_rts_j5gryw0000gn/T/plugin3323538328 network=unix timestamp=\"2025-12-23T13:08:45.272+0100\"\n2025-12-23T13:08:45.346+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Configuring Terraform AWS Provider: @caller=github.com/hashicorp/terraform-provider-aws/internal/conns/config.go:147 @module=aws tf_mux_provider=\"*schema.GRPCProviderServer\" tf_req_id=821fcf74-3e7b-cc49-2032-c029ce60c531 tf_rpc=ConfigureProvider tf_provider_addr=registry.terraform.io/hashicorp/aws timestamp=\"2025-12-23T13:08:45.346+0100\"\n2025-12-23T13:08:45.346+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Resolving credentials provider: @module=aws.aws-base tf_rpc=ConfigureProvider tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=821fcf74-3e7b-cc49-2032-c029ce60c531 @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.69/logging/tf_logger.go:47 timestamp=\"2025-12-23T13:08:45.346+0100\"\n2025-12-23T13:08:45.346+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Using profile: @module=aws.aws-base tf_aws.profile.source=envvar tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=821fcf74-3e7b-cc49-2032-c029ce60c531 @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.69/logging/tf_logger.go:47 tf_aws.profile=myaccount/Administrator tf_rpc=ConfigureProvider timestamp=\"2025-12-23T13:08:45.346+0100\"\n2025-12-23T13:08:45.346+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Loading configuration: tf_mux_provider=\"*schema.GRPCProviderServer\" tf_rpc=ConfigureProvider @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.69/logging/tf_logger.go:47 @module=aws.aws-base tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=821fcf74-3e7b-cc49-2032-c029ce60c531 timestamp=\"2025-12-23T13:08:45.346+0100\"\n2025-12-23T13:08:45.347+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Retrieving credentials: tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ConfigureProvider @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.69/logging/tf_logger.go:47 @module=aws.aws-base tf_req_id=821fcf74-3e7b-cc49-2032-c029ce60c531 timestamp=\"2025-12-23T13:08:45.347+0100\"\n2025-12-23T13:08:46.392+0100 [INFO]  provider.terraform-provider-aws_v6.27.0_x5: Retrieved credentials: @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.69/logging/tf_logger.go:39 tf_aws.credentials_source=ProcessProvider tf_mux_provider=\"*schema.GRPCProviderServer\" @module=aws.aws-base tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=821fcf74-3e7b-cc49-2032-c029ce60c531 tf_rpc=ConfigureProvider timestamp=\"2025-12-23T13:08:46.392+0100\"\n2025-12-23T13:08:46.393+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Loading configuration: tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ConfigureProvider @module=aws.aws-base tf_mux_provider=\"*schema.GRPCProviderServer\" tf_req_id=821fcf74-3e7b-cc49-2032-c029ce60c531 @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.69/logging/tf_logger.go:47 timestamp=\"2025-12-23T13:08:46.392+0100\"\n2025-12-23T13:08:46.394+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Retrieving AWS account details: @caller=github.com/hashicorp/terraform-provider-aws/internal/conns/config.go:171 @module=aws tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ConfigureProvider tf_req_id=821fcf74-3e7b-cc49-2032-c029ce60c531 timestamp=\"2025-12-23T13:08:46.394+0100\"\n2025-12-23T13:08:46.394+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Retrieving caller identity from STS: tf_req_id=821fcf74-3e7b-cc49-2032-c029ce60c531 tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ConfigureProvider @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.69/logging/tf_logger.go:47 @module=aws.aws-base timestamp=\"2025-12-23T13:08:46.394+0100\"\n2025-12-23T13:08:46.395+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: HTTP Request Sent: tf_provider_addr=registry.terraform.io/hashicorp/aws http.request.header.content_type=application/x-www-form-urlencoded http.request.header.x_amz_security_token=\"*****\" @module=aws.aws-base http.request.header.amz_sdk_invocation_id=3bda5dfd-4042-403d-be84-151a6009d5bf http.request.header.amz_sdk_request=\"attempt=1; max=25\" http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=ASIA************NYMP/20251223/us-west-2/sts/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=*****\" http.request_content_length=43 rpc.service=STS @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.69/logging/tf_logger.go:47 http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.14.3 (+https://www.terraform.io) terraform-provider-aws/6.27.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/macos lang/go#1.24.11 md/GOOS#darwin md/GOARCH#arm64 api/sts#1.41.5 m/v,w\" rpc.method=GetCallerIdentity tf_aws.sdk=aws-sdk-go-v2 tf_mux_provider=\"*schema.GRPCProviderServer\" tf_req_id=821fcf74-3e7b-cc49-2032-c029ce60c531 http.request.header.x_amz_date=20251223T120846Z http.method=POST\n  http.request.body=\n  | Action=GetCallerIdentity&Version=2011-06-15\n   tf_aws.signing_region=\"\" tf_rpc=ConfigureProvider aws.region=us-west-2 http.url=https://sts.us-west-2.amazonaws.com/ net.peer.name=sts.us-west-2.amazonaws.com rpc.system=aws-api timestamp=\"2025-12-23T13:08:46.395+0100\"\n2025-12-23T13:08:47.119+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: HTTP Response Received: tf_aws.signing_region=\"\" @module=aws.aws-base\n  http.response.body=\n  | <GetCallerIdentityResponse xmlns=\"https://sts.amazonaws.com/doc/2011-06-15/\">\n  |   <GetCallerIdentityResult>\n  |     <Arn>arn:aws:sts::123456789012:assumed-role/Administrator/myuser@company.com</Arn>\n  |     <UserId>AROA*************ENSW:myuser@company.com</UserId>\n  |     <Account>123456789012</Account>\n  |   </GetCallerIdentityResult>\n  |   <ResponseMetadata>\n  |     <RequestId>bdecf8d6-6036-4642-a842-e55689e6fcb5</RequestId>\n  |   </ResponseMetadata>\n  | </GetCallerIdentityResponse>\n   http.response.header.date=\"Tue, 23 Dec 2025 12:08:47 GMT\" http.response.header.x_amzn_requestid=bdecf8d6-6036-4642-a842-e55689e6fcb5 rpc.service=STS tf_req_id=821fcf74-3e7b-cc49-2032-c029ce60c531 http.status_code=200 http.duration=723 tf_aws.sdk=aws-sdk-go-v2 tf_mux_provider=\"*schema.GRPCProviderServer\" rpc.method=GetCallerIdentity rpc.system=aws-api tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ConfigureProvider @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.69/logging/tf_logger.go:47 aws.region=us-west-2 http.response.header.content_type=text/xml http.response.header.x_amz_sts_extended_request_id=MTp1cy13ZXN0LTI6UzoxNzY2NDkxNzI3MDI4OlI6bmNPcldKN2s= http.response_content_length=460 timestamp=\"2025-12-23T13:08:47.119+0100\"\n2025-12-23T13:08:47.119+0100 [INFO]  provider.terraform-provider-aws_v6.27.0_x5: Retrieved caller identity from STS: @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.69/logging/tf_logger.go:39 @module=aws.aws-base tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=821fcf74-3e7b-cc49-2032-c029ce60c531 tf_rpc=ConfigureProvider timestamp=\"2025-12-23T13:08:47.119+0100\"\n2025-12-23T13:08:47.121+0100 [DEBUG] ReferenceTransformer: \"aws_bedrock_inference_profile.example\" references: []\naws_bedrock_inference_profile.example: Refreshing state... [id=bretnbwz5dpq]\n2025-12-23T13:08:47.131+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: HTTP Request Sent: http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=ASIA************NYMP/20251223/us-west-2/bedrock/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;host;x-amz-date;x-amz-security-token, Signature=*****\" http.request.header.x_amz_date=20251223T120847Z http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.14.3 (+https://www.terraform.io) terraform-provider-aws/6.27.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/macos lang/go#1.24.11 md/GOOS#darwin md/GOARCH#arm64 api/bedrock#1.53.0 m/v,w\" net.peer.name=bedrock.us-west-2.amazonaws.com tf_provider_addr=registry.terraform.io/hashicorp/aws http.method=GET http.request.header.amz_sdk_request=\"attempt=1; max=25\" tf_aws.sdk=aws-sdk-go-v2 tf_aws.signing_region=\"\" @module=aws http.request.body=\"\" http.request.header.x_amz_security_token=\"*****\" rpc.service=Bedrock rpc.system=aws-api tf_mux_provider=\"*proto5server.Server\" tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 tf_resource_type=aws_bedrock_inference_profile aws.region=us-west-2 http.request.header.amz_sdk_invocation_id=a9f11c11-933c-4a59-a5b0-42949dba5d48 http.url=https://bedrock.us-west-2.amazonaws.com/inference-profiles/bretnbwz5dpq rpc.method=GetInferenceProfile tf_rpc=ReadResource @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.69/logging/tf_logger.go:45 timestamp=\"2025-12-23T13:08:47.131+0100\"\n2025-12-23T13:08:47.773+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: HTTP Response Received: rpc.service=Bedrock rpc.system=aws-api tf_aws.signing_region=\"\" tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 @module=aws http.response.header.content_type=application/json rpc.method=GetInferenceProfile aws.region=us-west-2 http.duration=642\n  http.response.body=\n  | {\"createdAt\":\"2025-12-23T11:47:59.747299887Z\",\"description\":\"Test AIP using the us-anthropic-claude-sonnet-4-5-20250929-v1-0 IP\",\"inferenceProfileArn\":\"arn:aws:bedrock:us-west-2:123456789012:application-inference-profile/bretnbwz5dpq\",\"inferenceProfileId\":\"bretnbwz5dpq\",\"inferenceProfileName\":\"my-aip-us-anthropic-claude-sonnet-4-5-20250929-v1-0\",\"models\":[{\"modelArn\":\"arn:aws:bedrock:us-east-1::foundation-model/anthropic.claude-sonnet-4-5-20250929-v1:0\"},{\"modelArn\":\"arn:aws:bedrock:us-east-2::foundation-model/anthropic.claude-sonnet-4-5-20250929-v1:0\"},{\"modelArn\":\"arn:aws:bedrock:us-west-2::foundation-model/anthropic.claude-sonnet-4-5-20250929-v1:0\"}],\"status\":\"ACTIVE\",\"toolboxArn\":null,\"type\":\"APPLICATION\",\"updatedAt\":\"2025-12-23T11:47:59.747299887Z\"}\n   http.response.header.date=\"Tue, 23 Dec 2025 12:08:47 GMT\" http.response_content_length=764 tf_aws.sdk=aws-sdk-go-v2 tf_mux_provider=\"*proto5server.Server\" tf_resource_type=aws_bedrock_inference_profile http.response.header.x_amzn_requestid=b24135cf-5b20-49c2-8a3e-0986529f2eff http.status_code=200 tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ReadResource @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.69/logging/tf_logger.go:45 timestamp=\"2025-12-23T13:08:47.773+0100\"\n2025-12-23T13:08:47.775+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: HTTP Request Sent: tf_mux_provider=\"*proto5server.Server\" http.method=POST\n  http.request.body=\n  | {\"resourceARN\":\"arn:aws:bedrock:us-west-2:123456789012:application-inference-profile/bretnbwz5dpq\"}\n   http.request.header.amz_sdk_request=\"attempt=1; max=25\" http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=ASIA************NYMP/20251223/us-west-2/bedrock/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=*****\" http.request.header.x_amz_security_token=\"*****\" http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.14.3 (+https://www.terraform.io) terraform-provider-aws/6.27.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/macos lang/go#1.24.11 md/GOOS#darwin md/GOARCH#arm64 api/bedrock#1.53.0 m/v,w\" tf_aws.sdk=aws-sdk-go-v2 tf_aws.signing_region=\"\" @module=aws http.request.header.content_type=application/json http.request.header.x_amz_date=20251223T120847Z http.url=https://bedrock.us-west-2.amazonaws.com/listTagsForResource tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 tf_rpc=ReadResource @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.69/logging/tf_logger.go:45 rpc.service=Bedrock tf_provider_addr=registry.terraform.io/hashicorp/aws tf_resource_type=aws_bedrock_inference_profile aws.region=us-west-2 http.request.header.amz_sdk_invocation_id=bfcfef42-28e4-4dec-80dd-18cf8780352d http.request_content_length=99 net.peer.name=bedrock.us-west-2.amazonaws.com rpc.method=ListTagsForResource rpc.system=aws-api timestamp=\"2025-12-23T13:08:47.775+0100\"\n2025-12-23T13:08:48.008+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: HTTP Response Received: aws.region=us-west-2\n  http.response.body=\n  | {\"tags\":[]}\n   tf_aws.sdk=aws-sdk-go-v2 tf_aws.signing_region=\"\" tf_provider_addr=registry.terraform.io/hashicorp/aws http.response.header.date=\"Tue, 23 Dec 2025 12:08:47 GMT\" rpc.system=aws-api tf_mux_provider=\"*proto5server.Server\" tf_rpc=ReadResource @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.69/logging/tf_logger.go:45 http.duration=232 http.response.header.x_amzn_requestid=dd686904-8185-4d6d-afcd-6c778205388c http.response_content_length=11 @module=aws http.response.header.content_type=application/json http.status_code=200 rpc.service=Bedrock tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 tf_resource_type=aws_bedrock_inference_profile rpc.method=ListTagsForResource timestamp=\"2025-12-23T13:08:48.008+0100\"\n2025-12-23T13:08:48.008+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: tf_resource_type=aws_bedrock_inference_profile tf_rpc=ReadResource @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 @module=sdk.framework tf_mux_provider=\"*proto5server.Server\" tf_attribute_path=updated_at tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 timestamp=\"2025-12-23T13:08:48.008+0100\"\n2025-12-23T13:08:48.008+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ReadResource @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 @module=sdk.framework tf_attribute_path=type tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 tf_resource_type=aws_bedrock_inference_profile tf_mux_provider=\"*proto5server.Server\" timestamp=\"2025-12-23T13:08:48.008+0100\"\n2025-12-23T13:08:48.008+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: @module=sdk.framework tf_attribute_path=created_at tf_mux_provider=\"*proto5server.Server\" tf_resource_type=aws_bedrock_inference_profile tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 tf_rpc=ReadResource @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 timestamp=\"2025-12-23T13:08:48.008+0100\"\n2025-12-23T13:08:48.008+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: tf_mux_provider=\"*proto5server.Server\" tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 @module=sdk.framework tf_attribute_path=status tf_provider_addr=registry.terraform.io/hashicorp/aws tf_resource_type=aws_bedrock_inference_profile tf_rpc=ReadResource timestamp=\"2025-12-23T13:08:48.008+0100\"\n2025-12-23T13:08:48.008+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: tf_mux_provider=\"*proto5server.Server\" tf_rpc=ReadResource @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 tf_resource_type=aws_bedrock_inference_profile tf_attribute_path=arn timestamp=\"2025-12-23T13:08:48.008+0100\"\n2025-12-23T13:08:48.008+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: tf_mux_provider=\"*proto5server.Server\" tf_resource_type=aws_bedrock_inference_profile tf_rpc=ReadResource @module=sdk.framework tf_attribute_path=description tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 timestamp=\"2025-12-23T13:08:48.008+0100\"\n2025-12-23T13:08:48.008+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: tf_mux_provider=\"*proto5server.Server\" tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 tf_attribute_path=tags_all tf_provider_addr=registry.terraform.io/hashicorp/aws tf_resource_type=aws_bedrock_inference_profile tf_rpc=ReadResource @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 @module=sdk.framework timestamp=\"2025-12-23T13:08:48.008+0100\"\n2025-12-23T13:08:48.009+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: tf_provider_addr=registry.terraform.io/hashicorp/aws tf_resource_type=aws_bedrock_inference_profile tf_rpc=ReadResource @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 @module=sdk.framework tf_attribute_path=region tf_mux_provider=\"*proto5server.Server\" tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 timestamp=\"2025-12-23T13:08:48.009+0100\"\n2025-12-23T13:08:48.009+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: @module=sdk.framework tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 tf_resource_type=aws_bedrock_inference_profile @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 tf_attribute_path=id tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ReadResource timestamp=\"2025-12-23T13:08:48.009+0100\"\n2025-12-23T13:08:48.009+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: tf_attribute_path=name tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 tf_resource_type=aws_bedrock_inference_profile @module=sdk.framework tf_rpc=ReadResource @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 timestamp=\"2025-12-23T13:08:48.009+0100\"\n2025-12-23T13:08:48.009+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 @module=sdk.framework tf_resource_type=aws_bedrock_inference_profile tf_rpc=ReadResource tf_attribute_path=models[0].model_arn tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 timestamp=\"2025-12-23T13:08:48.009+0100\"\n2025-12-23T13:08:48.009+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: @module=sdk.framework tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ReadResource @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 tf_attribute_path=models[0] tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 tf_resource_type=aws_bedrock_inference_profile timestamp=\"2025-12-23T13:08:48.009+0100\"\n2025-12-23T13:08:48.009+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: @module=sdk.framework tf_attribute_path=models[1].model_arn tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 tf_resource_type=aws_bedrock_inference_profile tf_rpc=ReadResource @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 timestamp=\"2025-12-23T13:08:48.009+0100\"\n2025-12-23T13:08:48.009+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: tf_attribute_path=models[1] tf_mux_provider=\"*proto5server.Server\" tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 tf_resource_type=aws_bedrock_inference_profile tf_rpc=ReadResource @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/aws @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 timestamp=\"2025-12-23T13:08:48.009+0100\"\n2025-12-23T13:08:48.009+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: tf_attribute_path=models[2].model_arn tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 tf_resource_type=aws_bedrock_inference_profile tf_rpc=ReadResource @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 @module=sdk.framework timestamp=\"2025-12-23T13:08:48.009+0100\"\n2025-12-23T13:08:48.009+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 @module=sdk.framework tf_mux_provider=\"*proto5server.Server\" tf_resource_type=aws_bedrock_inference_profile tf_rpc=ReadResource @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 tf_attribute_path=models[2] tf_provider_addr=registry.terraform.io/hashicorp/aws timestamp=\"2025-12-23T13:08:48.009+0100\"\n2025-12-23T13:08:48.009+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Value switched to prior value due to semantic equality logic: tf_req_id=2f75f60a-0c66-ccef-ba8c-dea26b526325 tf_resource_type=aws_bedrock_inference_profile tf_attribute_path=models tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ReadResource @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwschemadata/value_semantic_equality.go:91 @module=sdk.framework tf_mux_provider=\"*proto5server.Server\" timestamp=\"2025-12-23T13:08:48.009+0100\"\n2025-12-23T13:08:48.012+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Detected value change between proposed new state and prior state: @module=sdk.framework tf_req_id=ac1a4e9a-5364-16d5-32a1-721fd7c601b3 tf_resource_type=aws_bedrock_inference_profile tf_rpc=PlanResourceChange @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:241 tf_attribute_path=model_source tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws timestamp=\"2025-12-23T13:08:48.012+0100\"\n2025-12-23T13:08:48.012+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Marking Computed attributes with null configuration values as unknown (known after apply) in the plan to prevent potential Terraform errors: tf_rpc=PlanResourceChange @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:250 tf_req_id=ac1a4e9a-5364-16d5-32a1-721fd7c601b3 tf_resource_type=aws_bedrock_inference_profile @module=sdk.framework tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws timestamp=\"2025-12-23T13:08:48.012+0100\"\n2025-12-23T13:08:48.012+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: tf_attribute_path=\"AttributeName(\\\"created_at\\\")\" tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=ac1a4e9a-5364-16d5-32a1-721fd7c601b3 tf_resource_type=aws_bedrock_inference_profile @module=sdk.framework tf_rpc=PlanResourceChange @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 timestamp=\"2025-12-23T13:08:48.012+0100\"\n2025-12-23T13:08:48.012+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=ac1a4e9a-5364-16d5-32a1-721fd7c601b3 tf_resource_type=aws_bedrock_inference_profile tf_rpc=PlanResourceChange @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 @module=sdk.framework tf_attribute_path=\"AttributeName(\\\"models\\\")\" tf_mux_provider=\"*proto5server.Server\" timestamp=\"2025-12-23T13:08:48.012+0100\"\n2025-12-23T13:08:48.012+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: @module=sdk.framework tf_attribute_path=\"AttributeName(\\\"updated_at\\\")\" tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=ac1a4e9a-5364-16d5-32a1-721fd7c601b3 tf_resource_type=aws_bedrock_inference_profile tf_rpc=PlanResourceChange @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 timestamp=\"2025-12-23T13:08:48.012+0100\"\n2025-12-23T13:08:48.012+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=ac1a4e9a-5364-16d5-32a1-721fd7c601b3 tf_resource_type=aws_bedrock_inference_profile @module=sdk.framework tf_attribute_path=\"AttributeName(\\\"status\\\")\" tf_mux_provider=\"*proto5server.Server\" tf_rpc=PlanResourceChange timestamp=\"2025-12-23T13:08:48.012+0100\"\n2025-12-23T13:08:48.012+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 tf_attribute_path=\"AttributeName(\\\"arn\\\")\" tf_mux_provider=\"*proto5server.Server\" tf_req_id=ac1a4e9a-5364-16d5-32a1-721fd7c601b3 @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/aws tf_resource_type=aws_bedrock_inference_profile tf_rpc=PlanResourceChange timestamp=\"2025-12-23T13:08:48.012+0100\"\n2025-12-23T13:08:48.012+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 @module=sdk.framework tf_attribute_path=\"AttributeName(\\\"tags_all\\\")\" tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=ac1a4e9a-5364-16d5-32a1-721fd7c601b3 tf_resource_type=aws_bedrock_inference_profile tf_rpc=PlanResourceChange timestamp=\"2025-12-23T13:08:48.012+0100\"\n2025-12-23T13:08:48.012+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 @module=sdk.framework tf_mux_provider=\"*proto5server.Server\" tf_rpc=PlanResourceChange tf_attribute_path=\"AttributeName(\\\"type\\\")\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=ac1a4e9a-5364-16d5-32a1-721fd7c601b3 tf_resource_type=aws_bedrock_inference_profile timestamp=\"2025-12-23T13:08:48.012+0100\"\n2025-12-23T13:08:48.012+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=ac1a4e9a-5364-16d5-32a1-721fd7c601b3 @module=sdk.framework tf_attribute_path=\"AttributeName(\\\"id\\\")\" tf_mux_provider=\"*proto5server.Server\" tf_resource_type=aws_bedrock_inference_profile tf_rpc=PlanResourceChange @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 timestamp=\"2025-12-23T13:08:48.012+0100\"\n2025-12-23T13:08:48.012+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: tf_rpc=PlanResourceChange @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 tf_attribute_path=\"AttributeName(\\\"region\\\")\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=ac1a4e9a-5364-16d5-32a1-721fd7c601b3 tf_resource_type=aws_bedrock_inference_profile @module=sdk.framework tf_mux_provider=\"*proto5server.Server\" timestamp=\"2025-12-23T13:08:48.012+0100\"\n2025-12-23T13:08:48.015+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: Marking Computed attributes with null configuration values as unknown (known after apply) in the plan to prevent potential Terraform errors: @module=sdk.framework tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=4ddededc-e609-78d5-ccfa-2d248a9848d5 tf_resource_type=aws_bedrock_inference_profile tf_rpc=PlanResourceChange @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:250 timestamp=\"2025-12-23T13:08:48.015+0100\"\n2025-12-23T13:08:48.015+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/aws @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 tf_attribute_path=\"AttributeName(\\\"region\\\")\" tf_mux_provider=\"*proto5server.Server\" tf_req_id=4ddededc-e609-78d5-ccfa-2d248a9848d5 tf_resource_type=aws_bedrock_inference_profile tf_rpc=PlanResourceChange timestamp=\"2025-12-23T13:08:48.015+0100\"\n2025-12-23T13:08:48.015+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: tf_rpc=PlanResourceChange @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 @module=sdk.framework tf_attribute_path=\"AttributeName(\\\"status\\\")\" tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=4ddededc-e609-78d5-ccfa-2d248a9848d5 tf_resource_type=aws_bedrock_inference_profile timestamp=\"2025-12-23T13:08:48.015+0100\"\n2025-12-23T13:08:48.015+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 @module=sdk.framework tf_attribute_path=\"AttributeName(\\\"type\\\")\" tf_req_id=4ddededc-e609-78d5-ccfa-2d248a9848d5 tf_rpc=PlanResourceChange tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_resource_type=aws_bedrock_inference_profile timestamp=\"2025-12-23T13:08:48.015+0100\"\n2025-12-23T13:08:48.015+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=4ddededc-e609-78d5-ccfa-2d248a9848d5 tf_resource_type=aws_bedrock_inference_profile tf_attribute_path=\"AttributeName(\\\"created_at\\\")\" tf_rpc=PlanResourceChange @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 @module=sdk.framework tf_mux_provider=\"*proto5server.Server\" timestamp=\"2025-12-23T13:08:48.015+0100\"\n2025-12-23T13:08:48.015+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: tf_attribute_path=\"AttributeName(\\\"tags_all\\\")\" tf_req_id=4ddededc-e609-78d5-ccfa-2d248a9848d5 tf_rpc=PlanResourceChange @module=sdk.framework tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_resource_type=aws_bedrock_inference_profile @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 timestamp=\"2025-12-23T13:08:48.015+0100\"\n2025-12-23T13:08:48.015+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: tf_rpc=PlanResourceChange @module=sdk.framework tf_attribute_path=\"AttributeName(\\\"updated_at\\\")\" tf_mux_provider=\"*proto5server.Server\" tf_req_id=4ddededc-e609-78d5-ccfa-2d248a9848d5 tf_resource_type=aws_bedrock_inference_profile @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 tf_provider_addr=registry.terraform.io/hashicorp/aws timestamp=\"2025-12-23T13:08:48.015+0100\"\n2025-12-23T13:08:48.015+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: @module=sdk.framework tf_attribute_path=\"AttributeName(\\\"arn\\\")\" tf_mux_provider=\"*proto5server.Server\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=4ddededc-e609-78d5-ccfa-2d248a9848d5 tf_resource_type=aws_bedrock_inference_profile tf_rpc=PlanResourceChange @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 timestamp=\"2025-12-23T13:08:48.015+0100\"\n2025-12-23T13:08:48.015+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: tf_resource_type=aws_bedrock_inference_profile tf_rpc=PlanResourceChange @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 @module=sdk.framework tf_attribute_path=\"AttributeName(\\\"id\\\")\" tf_mux_provider=\"*proto5server.Server\" tf_req_id=4ddededc-e609-78d5-ccfa-2d248a9848d5 tf_provider_addr=registry.terraform.io/hashicorp/aws timestamp=\"2025-12-23T13:08:48.015+0100\"\n2025-12-23T13:08:48.015+0100 [DEBUG] provider.terraform-provider-aws_v6.27.0_x5: marking computed attribute that is null in the config as unknown: @module=sdk.framework tf_attribute_path=\"AttributeName(\\\"models\\\")\" tf_mux_provider=\"*proto5server.Server\" tf_req_id=4ddededc-e609-78d5-ccfa-2d248a9848d5 tf_resource_type=aws_bedrock_inference_profile @caller=github.com/hashicorp/terraform-plugin-framework@v1.17.0/internal/fwserver/server_planresourcechange.go:538 tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=PlanResourceChange timestamp=\"2025-12-23T13:08:48.015+0100\"\n2025-12-23T13:08:48.017+0100 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2025-12-23T13:08:48.020+0100 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.27.0/darwin_arm64/terraform-provider-aws_v6.27.0_x5 id=20275\n2025-12-23T13:08:48.020+0100 [DEBUG] provider: plugin exited\n2025-12-23T13:08:48.021+0100 [DEBUG] building apply graph to check for errors\n2025-12-23T13:08:48.021+0100 [DEBUG] ProviderTransformer: \"aws_bedrock_inference_profile.example (expand)\" (*terraform.nodeExpandApplyableResource) needs provider[\"registry.terraform.io/hashicorp/aws\"]\n2025-12-23T13:08:48.021+0100 [DEBUG] ProviderTransformer: \"aws_bedrock_inference_profile.example\" (*terraform.NodeApplyableResourceInstance) needs provider[\"registry.terraform.io/hashicorp/aws\"]\n2025-12-23T13:08:48.021+0100 [DEBUG] ProviderTransformer: \"aws_bedrock_inference_profile.example (destroy)\" (*terraform.NodeDestroyResourceInstance) needs provider[\"registry.terraform.io/hashicorp/aws\"]\n2025-12-23T13:08:48.021+0100 [DEBUG] ReferenceTransformer: \"aws_bedrock_inference_profile.example (expand)\" references: []\n2025-12-23T13:08:48.021+0100 [DEBUG] ReferenceTransformer: \"aws_bedrock_inference_profile.example\" references: []\n2025-12-23T13:08:48.021+0100 [DEBUG] ReferenceTransformer: \"provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" references: []\n2025-12-23T13:08:48.021+0100 [INFO]  backend/local: plan operation completed\n\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\n-/+ destroy and then create replacement\n\nTerraform will perform the following actions:\n\n  # aws_bedrock_inference_profile.example must be replaced\n-/+ resource \"aws_bedrock_inference_profile\" \"example\" {\n      ~ arn         = \"arn:aws:bedrock:us-west-2:123456789012:application-inference-profile/bretnbwz5dpq\" -> (known after apply)\n      ~ created_at  = \"2025-12-23T11:47:59Z\" -> (known after apply)\n      ~ id          = \"bretnbwz5dpq\" -> (known after apply)\n      ~ models      = [\n          - {\n              - model_arn = \"arn:aws:bedrock:us-east-1::foundation-model/anthropic.claude-sonnet-4-5-20250929-v1:0\"\n            },\n          - {\n              - model_arn = \"arn:aws:bedrock:us-east-2::foundation-model/anthropic.claude-sonnet-4-5-20250929-v1:0\"\n            },\n          - {\n              - model_arn = \"arn:aws:bedrock:us-west-2::foundation-model/anthropic.claude-sonnet-4-5-20250929-v1:0\"\n            },\n        ] -> (known after apply)\n        name        = \"my-aip-us-anthropic-claude-sonnet-4-5-20250929-v1-0\"\n      ~ status      = \"ACTIVE\" -> (known after apply)\n      ~ type        = \"APPLICATION\" -> (known after apply)\n      ~ updated_at  = \"2025-12-23T11:47:59Z\" -> (known after apply)\n        # (3 unchanged attributes hidden)\n\n      + model_source { # forces replacement\n          + copy_from = \"arn:aws:bedrock:us-west-2:123456789012:inference-profile/us.anthropic.claude-sonnet-4-5-20250929-v1:0\"\n        }\n    }\n\nPlan: 1 to add, 0 to change, 1 to destroy.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nNote: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run \"terraform apply\" now.\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/bedrock",
        "resource-import"
      ],
      "created_at": "2025-12-23T12:10:47Z",
      "closed_at": "2026-01-27T21:07:18Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45705",
      "comments_count": 7
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45784,
      "title": "[Bug] Improve fallback behavior for S3 Control Tagging in non-commercial regions",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nterraform version = 1.13.5\nterraform-provider-aws = 6.23.0, 6.27.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_s3_bucket`\n\n### Expected Behavior\n\nIf the region does not support tag-on-create (settings the Tags element in the CreateBucketConfiguration), or managing tags via S3 Control tagging APIs (TagResource, UntagResource, ListTagsForResource), then the behavior from 6.22 should be preserved.\n\nI think expanding the error messages that trigger the fallback behavior to include MethodNotAllowed (for [func ListTags](https://github.com/hashicorp/terraform-provider-aws/blob/6ddf44c974d5bdaf06cf7486d81cffc0cdbd70c1/internal/service/s3/tags.go#L168) and [func UpdateTags](https://github.com/hashicorp/terraform-provider-aws/blob/6ddf44c974d5bdaf06cf7486d81cffc0cdbd70c1/internal/service/s3/tags.go#L227)) and UnsupportedArgument/tags (for [func resourceBucketCreate](https://github.com/hashicorp/terraform-provider-aws/blame/6ddf44c974d5bdaf06cf7486d81cffc0cdbd70c1/internal/service/s3/bucket.go#L722)) should do the trick.\n\n### Actual Behavior\n\nFrom 6.23.0 - 6.26.0, the fallback behavior only activated if the returning error contained `...is not authorized to perform...`.\n\nIn 6.27.0, #45576 added an additional check if `account_id` was missing (usually because `skip_requesting_account_id=true` due to using an s3-compatible service like localstack or cloudflare r2) but only for existing buckets. That PR doesn't appear to cover bucket creation but I might be reading the tests wrong.\n\n\n\n### Relevant Error/Panic Output\n\nExisting Bucket\n```console\nError: listing tags for S3 (Simple Storage) Bucket (****): operation error S3 Control: ListTagsForResource, https response error StatusCode: 405, RequestID: ****, HostID: ****, api error MethodNotAllowed: The specified method is not allowed against this resource.\n```\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Error<Code>MethodNotAllowed</Code><Message>The specified method is not allowed against this resource.</Message><Method>GET</Method><RequestId>****</RequestId><HostId>****</HostId></Error>\n```\n\nCreating Bucket\n```console\nError: creating S3 Bucket (****): operation error S3: CreateBucket, https response error StatusCode: 400, RequestID: ****, HostID: ****, api error UnsupportedArgument: The request contained an unsupported argument.\n```\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Error<Code>UnsupportedArgument</Code><Message>The request contained an unsupported argument.</Message><ArgumentName>tags</ArgumentName><RequestId>****</RequestId><HostId>****</HostId></Error>\n```\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nresource \"aws_s3_bucket\" \"this\" {\n  bucket = \"test\"\n\n  tags = {\n    Name        = \"My test\"\n  }\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Attempt to create, list, or update a bucket in non-commercial regions (e.g., \"aws-iso\" partition)\n\n### Debug Logging\n\nn/a\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\nList: https://github.com/hashicorp/terraform-provider-aws/blob/v6.27.0/internal/service/s3/tags.go#L177-L186\nUpdate: https://github.com/hashicorp/terraform-provider-aws/blob/v6.27.0/internal/service/s3/tags.go#L232-L243\nCreate: https://github.com/hashicorp/terraform-provider-aws/blame/v6.27.0/internal/service/s3/bucket.go#L786-L789\n\nNew ticket requested on https://github.com/hashicorp/terraform-provider-aws/issues/45292#issuecomment-3607438743\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/s3"
      ],
      "created_at": "2025-12-31T18:46:58Z",
      "closed_at": "2026-01-23T18:36:56Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45784",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45813,
      "title": "r/aws_sagemaker_monitoring_schedule: Additional arguments",
      "problem": "Add arguments to the `aws_sagemaker_monitoring_schedule` resource.\nSee the [API spec](https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateMonitoringSchedule.html#API_CreateMonitoringSchedule_RequestSyntax).\n\nRelates https://github.com/hashicorp/terraform-provider-aws/issues/36047.\n\nSpecifically, add support for the following arguments within the `MonitoringAppSpecification` block:\n* `ContainerArguments` To allow users to specify arguments that are passed to the container at runtime.\n* `ContainerEntrypoint` To enable users to define the entry point for the container.\n* `ImageUri` To provide the ability to specify the URI of the Docker image used for monitoring.\n* `PostAnalyticsProcessorSourceUri` To allow users to specify the source URI for the post-analytics processor.\n* `RecordPreprocessorSourceUri` To enable users to define the source URI for the record preprocessor.",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "enhancement",
        "service/sagemaker"
      ],
      "created_at": "2026-01-05T20:15:00Z",
      "closed_at": "2026-01-14T20:33:08Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45813",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45824,
      "title": "Route53 Health Check fails on no regions",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.3\non darwin_arm64\n+ provider registry.opentofu.org/hashicorp/aws v6.27.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\naws_route53_health_check\n\n### Expected Behavior\n\nNo change detected, as previously this worked and was setup with all regions, if regions is not specified, and regions is still documented as optional.\n\n### Actual Behavior\n```\n# module.sla.aws_route53_health_check.redacted will be updated in-place\n  ~ resource \"aws_route53_health_check\" \"redacted\" {\n        id                     = \"redacted\"\n      ~ regions                = [\n          - \"ap-northeast-1\",\n          - \"ap-southeast-1\",\n          - \"ap-southeast-2\",\n          - \"eu-west-1\",\n          - \"sa-east-1\",\n          - \"us-east-1\",\n          - \"us-west-1\",\n          - \"us-west-2\",\n        ]\n        # (15 unchanged attributes hidden)\n    }\n...\n\n\u2502 Error: updating Route53 Health Check (redacted): operation error Route 53: UpdateHealthCheck, https response error StatusCode: 400, RequestID: redacted, InvalidInput: Invalid XML ; javax.xml.stream.XMLStreamException: org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 100; cvc-complex-type.2.4.b: The content of element 'Regions' is not complete. One of '{\"https://route53.amazonaws.com/doc/2013-04-01/\":Region}' is expected.\n```\nLooks to me like it is trying to delete all regions, whereas it should just keep all regions, since no limitation of regions is specified.\n\n### Relevant Error/Panic Output\n\n```console\n\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nresource \"aws_route53_health_check\" \"redacted\" {\n  fqdn               = \"redacted.${var.domain_base_name}\"\n  port               = 443\n  type               = \"HTTPS\"\n  resource_path      = \"/redacted\"\n  failure_threshold  = \"2\"\n  enable_sni         = true\n  request_interval   = 30\n  invert_healthcheck = false\n}\n```\nNo regions set, as it is optional and used to default to all regions.\n</details>\n\n\n### Steps to Reproduce\n\n1. Previously created Route53 Record with all regions by specifying no regions parameter at all.\n2. Executed an update with current TF provider (not for any reason to change the R53 health check and with no code changes to the health check parameters)\n3. Results in attempt by provider to remove all regions rather than to keep all regions\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/route53"
      ],
      "created_at": "2026-01-06T10:11:47Z",
      "closed_at": "2026-01-09T13:31:17Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45824",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45866,
      "title": "[Bug] data aws_ecr_lifecycle_policy_document ignores target_storage_class and storage_class attributes",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.5.5\non linux_amd64\n+ provider registry.terraform.io/hashicorp/aws v6.28.0\n+ provider registry.terraform.io/hashicorp/random v3.7.2\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `data \"aws_ecr_lifecycle_policy_document\"`\n\n\n### Expected Behavior\n\nHi,\nThe data source should generate a valid JSON lifecycle policy including the targetStorageClass field in the action block and the storageClass field in the selection block, as these attributes were added in version 6.28.0 according to changelog #45752.\n\n```\n{\n  \"rules\": [\n    {\n      \"rulePriority\": 2,\n      \"description\": \"Archive unused images after 90 days\",\n      \"selection\": {\n        \"tagStatus\": \"any\",\n        \"countType\": \"sinceImagePulled\",\n        \"countUnit\": \"days\",\n        \"countNumber\": 90\n      },\n      \"action\": {\n        \"type\": \"transition\",\n        \"targetStorageClass\": \"archive\"\n      }\n    },\n    {\n      \"rulePriority\": 3,\n      \"description\": \"Delete archive images after 90 days\",\n      \"selection\": {\n        \"tagStatus\": \"any\",\n        \"countType\": \"sinceImageTransitioned\",\n        \"countUnit\": \"days\",\n        \"storageClass\": \"archive\",\n        \"countNumber\": 90\n      },\n      \"action\": {\n        \"type\": \"expire\"\n      }\n    }\n  ]\n}\n```\n\n### Actual Behavior\n\nThe data source accepts the target_storage_class and storage_class attributes in the Terraform configuration without validation errors, but silently ignores them in the generated JSON output.\n\n```\n{\n  \"rules\": [\n    {\n      \"rulePriority\": 2,\n      \"description\": \"Archive unused images after 90 days\",\n      \"selection\": {\n        \"tagStatus\": \"any\",\n        \"countType\": \"sinceImagePulled\",\n        \"countUnit\": \"days\",\n        \"countNumber\": 90\n      },\n      \"action\": {\n        \"type\": \"transition\"\n      }\n    },\n    {\n      \"rulePriority\": 3,\n      \"description\": \"Delete archive images after 90 days\",\n      \"selection\": {\n        \"tagStatus\": \"any\",\n        \"countType\": \"sinceImageTransitioned\",\n        \"countUnit\": \"days\",\n        \"countNumber\": 90\n      },\n      \"action\": {\n        \"type\": \"expire\"\n      }\n    }\n  ]\n}\n```\n\n### Relevant Error/Panic Output\n\n```\n\n```\n\n\n### Sample Terraform Configuration\n\n```\ndata \"aws_ecr_lifecycle_policy_document\" \"example\" {\n  rule {\n    priority    = 1\n    description = \"Expire untagged images after 7 days\"\n\n    selection {\n      tag_status   = \"untagged\"\n      count_type   = \"sinceImagePushed\"\n      count_unit   = \"days\"\n      count_number = 7\n    }\n\n    action {\n      type = \"expire\"\n    }\n  }\n\n  rule {\n    priority    = 2\n    description = \"Archive unused images after 90 days\"\n\n    selection {\n      tag_status   = \"any\"\n      count_type   = \"sinceImagePulled\"\n      count_unit   = \"days\"\n      count_number = 90\n    }\n\n    action {\n      type                 = \"transition\"\n      target_storage_class = \"archive\"\n    }\n  }\n\n  rule {\n    priority    = 3\n    description = \"Delete archive images after 90 days\"\n\n    selection {\n      tag_status    = \"any\"\n      count_type    = \"sinceImageTransitioned\"\n      count_unit    = \"days\"\n      storage_class = \"archive\"\n      count_number  = 90\n    }\n\n    action {\n      type = \"expire\"\n    }\n  }\n}\n\nresource \"aws_ecr_lifecycle_policy\" \"example\" {\n  repository = aws_ecr_repository.example.name\n  policy     = data.aws_ecr_lifecycle_policy_document.example.json\n}\n```\n\n### Steps to Reproduce\n\n1. Create a lifecycle policy data source with archive transition rules using target_storage_class = \"archive\"\n2. Create a lifecycle policy data source with archive deletion rules using storage_class = \"archive\" in the selection block\n3. Output the generated JSON: output \"test\" { value = data.aws_ecr_lifecycle_policy_document.example.json }\n4. Run terraform apply\n5. Observe that the JSON output is missing both targetStorageClass and storageClass fields\n\nError Message\nWhen attempting to apply the generated (incomplete) JSON to ECR:\n```\nError: creating ECR Lifecycle Policy: operation error ECR: PutLifecyclePolicy, \nhttps response error StatusCode: 400, RequestID: xxx, \nInvalidParameterException: Invalid parameter at 'LifecyclePolicyText' \nfailed to satisfy constraint: 'Lifecycle policy validation failure: \ninstance failed to match exactly one schema (matched 0 out of 4)'\n```\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\nGood evening @lbertorello \ud83d\udc4b ,\n\nthank you for taking the time to raise the issue!\n\nI think I understood the issue and already have an idea on what is missing here. Let me prepare a pull request.\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/ecr"
      ],
      "created_at": "2026-01-08T15:17:11Z",
      "closed_at": "2026-01-12T13:05:48Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45866",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45868,
      "title": "Config generation for aws_cloudfront_distribution crashes when using a multitenant distribution",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.3\non darwin_arm64\n+ provider registry.terraform.io/cloudflare/cloudflare v5.15.0\n+ provider registry.terraform.io/hashicorp/aws v6.28.0\n+ provider registry.terraform.io/hashicorp/http v3.5.0\n+ provider registry.terraform.io/hashicorp/null v3.2.4\n+ provider registry.terraform.io/hashicorp/random v3.7.2\n+ provider registry.terraform.io/lukasaron/stripe v3.4.1\n```\n\n### Affected Resource(s) or Data Source(s)\n\n`aws_cloudfront_distribution`\n\n### Expected Behavior\n\nI would expect better error handling or some error message saying to use the `aws_cloudfront_multitenant_distribution` resource instead.\n\n### Actual Behavior\n\nIt crashes.\n\n### Relevant Error/Panic Output\n\n```console\nStack trace from the terraform-provider-aws_v6.28.0_x5 plugin:\n\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x2 addr=0x10 pc=0x116d7218c]\n\ngoroutine 32 [running]:\ngithub.com/hashicorp/terraform-provider-aws/internal/service/cloudfront.flattenDefaultCacheBehavior(0x140024e2a50)\n        github.com/hashicorp/terraform-provider-aws/internal/service/cloudfront/distribution.go:1782 +0x94c\ngithub.com/hashicorp/terraform-provider-aws/internal/service/cloudfront.resourceDistributionRead({0x120dacfb8, 0x14001d32720}, 0x140024a8000, {0x12097ff80?, 0x140003ace10})\n        github.com/hashicorp/terraform-provider-aws/internal/service/cloudfront/distribution.go:1049 +0x7ac\ngithub.com/hashicorp/terraform-provider-aws/internal/provider/sdkv2.wrapResource.(*wrappedResource).read.interceptedCRUDHandler[...].func3(0x140024a8000, {0x12097ff80, 0x140003ace10})\n        github.com/hashicorp/terraform-provider-aws/internal/provider/sdkv2/intercept.go:178 +0x480\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).read(0x120dacfb8?, {0x120dacfb8?, 0x140019ef8f0?}, 0xd?, {0x12097ff80?, 0x140003ace10?})\n        github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource.go:861 +0x64\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).RefreshWithoutUpgrade(0x14001785900, {0x120dacfb8, 0x140019ef8f0}, 0x14001525520, {0x12097ff80, 0x140003ace10})\n        github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource.go:1162 +0x3d4\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*GRPCProviderServer).ReadResource(0x1400349cc30, {0x120dacfb8?, 0x140019ef830?}, 0x14000470b90)\n        github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/grpc_provider.go:915 +0x92c\ngithub.com/hashicorp/terraform-plugin-mux/tf5muxserver.(*muxServer).ReadResource(0x140034bb950, {0x120dacfb8?, 0x140019ef560?}, 0x14000470b90)\n        github.com/hashicorp/terraform-plugin-mux@v0.21.0/tf5muxserver/mux_server_ReadResource.go:35 +0x178\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/tf5server.(*server).ReadResource(0x140034a8fa0, {0x120dacfb8?, 0x140019eed80?}, 0x14000a4c0e0)\n        github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/tf5server/server.go:862 +0x1f8\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/internal/tfplugin5._Provider_ReadResource_Handler({0x120835d20, 0x140034a8fa0}, {0x120dacfb8, 0x140019eed80}, 0x14001c33f00, 0x0)\n        github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/tfplugin5/tfplugin5_grpc.pb.go:753 +0x1b8\ngoogle.golang.org/grpc.(*Server).processUnaryRPC(0x14003492600, {0x120dacfb8, 0x140019ee840}, 0x14003564240, 0x1400356c210, 0x12f384ff8, 0x0)\n        google.golang.org/grpc@v1.75.1/server.go:1431 +0xbd0\ngoogle.golang.org/grpc.(*Server).handleStream(0x14003492600, {0x120dad978, 0x140036e8000}, 0x14003564240)\n        google.golang.org/grpc@v1.75.1/server.go:1842 +0x858\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1()\n        google.golang.org/grpc@v1.75.1/server.go:1061 +0x74\ncreated by google.golang.org/grpc.(*Server).serveStreams.func2 in goroutine 55\n        google.golang.org/grpc@v1.75.1/server.go:1072 +0x120\n\nError: The terraform-provider-aws_v6.28.0_x5 plugin crashed!\n\nThis is always indicative of a bug within the plugin. It would be immensely\nhelpful if you could report the crash with the plugin's maintainers so that it\ncan be fixed. The output above should help diagnose the issue.\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nimport {\n  to = aws_cloudfront_distribution.distribution\n  id = \"<id of a multitenant distribution>\"\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\nIf you attempt to generate a config for a cloudfront distribution, but reference a multitenant distribution like so:\n`terraform plan -generate-config-out=foo.tf` it crashes.\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "crash"
      ],
      "created_at": "2026-01-08T16:33:14Z",
      "closed_at": "2026-01-08T20:47:48Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45868",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45872,
      "title": "aws_cloudfront_multitenant_distribution default_cache_behavior and origin blocks are incorrect",
      "problem": "### Documentation Link(s)\n\nhttps://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudfront_multitenant_distribution#default-cache-behavior\n\n### Description\n\nExample incorrectly shows:\n```\nallowed_methods = [\"DELETE\", \"GET\", \"HEAD\", \"OPTIONS\", \"PATCH\", \"POST\", \"PUT\"]\ncached_methods  = [\"GET\", \"HEAD\"]\n```\n\nShould be in a block:\n```\nallowed_methods {\n  cached_methods = [\"GET\", \"HEAD\"]\n  items          = [\"DELETE\", \"GET\", \"HEAD\", \"OPTIONS\", \"PATCH\", \"POST\", \"PUT\"]\n}\n```\n\nThe `origin` block is also incorrect, showing: `origin_id   = \"example-origin\"` instead of `id = \"example-origin\"`\n\n### References\n\nI used terraform's generate config and compared it to the docs. With some trial and error I was able to find these discrepancies.\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "documentation",
        "service/cloudfront"
      ],
      "created_at": "2026-01-08T19:09:18Z",
      "closed_at": "2026-01-09T14:16:45Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45872",
      "comments_count": 7
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45894,
      "title": "[BUG]: Region validation incompatible with AWS European Sovereign Cloud regions",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.0\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v6.28.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\nresource/aws_lambda_permission, resource/aws_datazone_environment_profile, resource/aws_emrserverless_application and resource/aws_cloudwatch_event\n\n### Expected Behavior\n\nResources should be correctly created on eusc-de-east-1 region\n\n### Actual Behavior\n\nFails with:\nError: invalid value for function_name (must be valid function name or function ARN)\n\nDestroy fails with the same error and resources have to be destroyed manually\n\n### Relevant Error/Panic Output\n\n```console\nError: invalid value for function_name (must be valid function name or function ARN)\n```\n\n### Steps to Reproduce\n\nTry to create a lambda function triggered by an SNS message using resource/aws_lambda_permission object in eusc-de-east-1, standard approach described in the [documentation](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lambda_permission).\n\n\n### Important Facts and References\n\nAfter investigating the issue found that the regex validation of regions in resource/aws_lambda_permission requires regions to start with \"[a-z]{2}-\", which does not match the region eusc-de-east-1. Found similar behavior in several other places.\n\nFound the same issue in multiple other resources, specific places where the overly strict regex is implemented:\n[internal/service/lambda/validate.go:22](https://github.com/hashicorp/terraform-provider-aws/blob/7d3a5e0bf999d24cdd81bc3cf5dabc4557e800ad/internal/service/lambda/validate.go#L22)\n[internal/service/lambda/permission.go:32](https://github.com/hashicorp/terraform-provider-aws/blob/7d3a5e0bf999d24cdd81bc3cf5dabc4557e800ad/internal/service/lambda/permission.go#L32)\n[internal/service/events/rule.go:359,360](https://github.com/hashicorp/terraform-provider-aws/blob/7d3a5e0bf999d24cdd81bc3cf5dabc4557e800ad/internal/service/events/rule.go#L359)\n[internal/service/datazone/environment_profile.go:64](https://github.com/hashicorp/terraform-provider-aws/blob/7d3a5e0bf999d24cdd81bc3cf5dabc4557e800ad/internal/service/datazone/environment_profile.go#L64)\n[internal/service/emrserverless/application.go:319](https://github.com/hashicorp/terraform-provider-aws/blob/7d3a5e0bf999d24cdd81bc3cf5dabc4557e800ad/internal/service/emrserverless/application.go#L319)\n\nIt's also present in a commented-out validation, I decided to fix it in there it too in case somebody reimplements it:\n[internal/service/paymentcryptography/key_alias.go:58](https://github.com/hashicorp/terraform-provider-aws/blob/7d3a5e0bf999d24cdd81bc3cf5dabc4557e800ad/internal/service/paymentcryptography/key_alias.go#L58)\n\nFix to this issue is rather straightforward, an ad-hoc solution to support this region is to use \"[a-z]{2,4}-\" in the regex, which is implemented in the attached pull request. It should be considered to make the validation less strict to prevent such problems from arising in the future.\n\n### Would you like to implement a fix?\n\nYes",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\nThank you for the detailed issue report and the accompanying PR #45895. This is part of our ongoing effort to fully support AWS European Sovereign Cloud (ESC) in the Terraform AWS Provider.\n\n## Progress Summary\n\n**Issues Fixed (v6.16.0):**\n- **ARN validation for `aws-eusc` partition** (#44561, #44573) - Fixed validation to properly support `arn:aws-eusc:*` ARNs for ESC resources\n\n**Issues Being Addressed:**\n- **Region validation regex patterns** (#45894, #45895) - Your PR addresses the `[a-z]{2}-` regex limitation that prevents `eusc-de-east-1` from being recognized in multiple services (Lambda, DataZone, EMR Serverless, CloudWatch Events)\n\n**Outstanding Issues:**\n- **Provider endpoints configuration ignored** (#44562) - The provider currently ignores the `endpoints` configuration block and attempts to use `.amazonaws.com` instead of configured `.amazonaws.eu` endpoints. Workaround: Use environment variables like `AWS_ENDPOINT_URL_STS`\n- **S3 bucket creation with tags fails** (#45684) - ESC S3 API doesn't support tags in `CreateBucket` operation, requiring separate tagging calls (similar to AWS Console behavior)\n\n## Our Commitment\n\nWe are committed to providing full support for AWS European Sovereign Cloud. The fixes implemented so far demonstrate our dedication to ensuring the Terraform AWS Provider works seamlessly with ESC regions. We will continue to address the remaining issues to provide a complete ESC experience.\n\nYour contribution with PR #45895 is valuable and addresses a fundamental validation issue that affects multiple services. We appreciate the thorough analysis and the specific file locations you identified.\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "provider"
      ],
      "created_at": "2026-01-09T17:17:47Z",
      "closed_at": "2026-01-13T22:18:15Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45894",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45900,
      "title": "aws_cloudfront_multitenant_distribution missing required attribute 's3_origin_config'",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.13.5\non linux_amd64\n+ provider registry.terraform.io/hashicorp/aws v6.28.0\n+ provider registry.terraform.io/hashicorp/awscc v1.55.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_cloudfront_multitenant_distribution`\n\n### Expected Behavior\n\nI would like to be able to set `s3_origin_config` so it is possible to create the resource.\n\n### Actual Behavior\n\nThe `aws_cloudfront_multitenant_distribution` resource is missing the `s3_origin_config` block from its schema. This means there is no way to specify S3-specific origin configuration. I don't really understand why, but if I want to `OriginAccessControlId` and a s3 bucket, AWS requires that I put an empty `OriginAccessIdentity` in the `S3OriginConfig` object.\n\n### Relevant Error/Panic Output\n\n```console\nError: creating CloudFront Multi-tenant Distribution\n\nStatusCode: 400, RequestID: 2f643390-a8bf-4204-9dd9-cd43d21a3251,\nInvalidOrigin: The specified origin server does not exist or is not valid.\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nresource \"aws_cloudfront_origin_access_control\" \"oac\" {\n  name                              = \"test-oac\"\n  origin_access_control_origin_type = \"s3\"\n  signing_behavior                  = \"always\"\n  signing_protocol                  = \"sigv4\"\n}\n\nresource \"aws_cloudfront_multitenant_distribution\" \"main\" {\n  enabled = true\n  comment = \"Test Distribution\"\n  \n  tenant_config {}\n\n  origin {\n    id                           = \"bucket.s3.us-east-1.amazonaws.com\"\n    domain_name                  = \"bucket.s3.us-east-1.amazonaws.com\"\n    origin_access_control_id     = aws_cloudfront_origin_access_control.oac.id\n    \n    connection_attempts          = 3\n    connection_timeout           = 10\n    response_completion_timeout  = 30\n  }\n\n  default_cache_behavior {\n    target_origin_id       = \"bucket.s3.us-east-1.amazonaws.com\"\n    viewer_protocol_policy = \"redirect-to-https\"\n    cache_policy_id        = \"4135ea2d-6df8-44a3-9df3-4b5a84be39ad\"\n    compress               = true\n\n    allowed_methods {\n      items          = [\"GET\", \"HEAD\"]\n      cached_methods = [\"GET\", \"HEAD\"]\n    }\n  }\n\n  restrictions {\n    geo_restriction {\n      restriction_type = \"none\"\n    }\n  }\n\n  viewer_certificate {\n    acm_certificate_arn      = \"arn:aws:acm:us-east-1:account:certificate/id\"\n    minimum_protocol_version = \"TLSv1.2_2021\"\n    ssl_support_method       = \"sni-only\"\n  }\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\nTry to apply the configuration above.\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n### Relations\n\nRelates #45535\n\n\n### GenAI / LLM Assisted Development\n\nGithub CoPilot: Claude Sonnet 4.5\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\nThis is perplexing. We were told that `s3_origin_config` was not supported for multitenant. I will do more research and see what we need to do. Thanks for reporting the issue!\n\n---\n\n@elliotmr If I'm understanding your op, you're saying that you are trying to do OAC but can't _without_ `s3_origin_config` with OAI set to empty? I have reproduced the same issue and working on a fix.\n\nJust to be clear, you're not wanting to do OAI at all. We all agree that the [documentation](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-config-options.html#unsupported-saas) states it's not supported:\n\n> ## Unsupported features\n> The following features can't be used with a multi-tenant distribution. If you want to create a new multi-tenant distribution using the same settings as your standard distribution, note that some settings aren't available.\n> ...\n> [Origin access identity (OAI)](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-restricting-access-to-s3.html#private-content-restricting-access-to-s3-oai) \u2013 Use [origin access control (OAC)](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-restricting-access-to-origin.html) instead.\n\nThe issue isn't trying to do OAI with multi-tenant. The issue is satisfying a CloudFront quirk in order to do OAC?",
      "labels": [
        "bug",
        "service/cloudfront"
      ],
      "created_at": "2026-01-09T20:41:40Z",
      "closed_at": "2026-01-14T21:35:52Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45900",
      "comments_count": 11
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45903,
      "title": "v6.28.0 regression in aws_dynamodb_table when name attribute is constructed",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.13.5\non linux_amd64\n+ provider registry.terraform.io/hashicorp/aws v6.28.0\n+ provider registry.terraform.io/hashicorp/random v3.7.2\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_dynamodb_table`\n\n### Expected Behavior\n\nterraform plan works when aws_dynamodb_table.this.name is constructed\n\n### Actual Behavior\n\nterraform plan fails with an AWS API error when aws_dynamodb_table.this.name is constructed\n\n### Relevant Error/Panic Output\n\n```console\n\u2502 Error: operation error DynamoDB: DescribeTable, https response error StatusCode: 400, RequestID: 23PDCF03G2DJAI5CAJ22ET7KKVVV4KQNSO5AEMVJF66Q9ASUAAJG, api error ValidationException: 2 validation errors detected: Value '' at 'tableName' failed to satisfy constraint: Member must have length greater than or equal to 3; Value '' at 'tableName' failed to satisfy constraint: Member must satisfy regular expression pattern: [a-zA-Z0-9_.-]+\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nterraform {\n  required_version = \">= 1.0\"\n\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~> 6.28.0\"  # Change to ~> 6.27.0 to see it work\n    }\n    random = {\n      source  = \"hashicorp/random\"\n      version = \"~> 3.0\"\n    }\n  }\n}\n\nprovider \"aws\" {\n  region = \"us-east-1\"  # Change to your preferred region\n}\n\nresource \"random_pet\" \"name\" {\n  length    = 2\n  separator = \"-\"\n}\n\nresource \"aws_dynamodb_table\" \"basic-dynamodb-table\" {\n  name         = \"test-${random_pet.name.id}\"\n  billing_mode = \"PAY_PER_REQUEST\"\n  hash_key     = \"UserId\"\n  range_key    = \"GameTitle\"\n\n  attribute {\n    name = \"UserId\"\n    type = \"S\"\n  }\n\n  attribute {\n    name = \"GameTitle\"\n    type = \"S\"\n  }\n\n  attribute {\n    name = \"TopScore\"\n    type = \"N\"\n  }\n\n  global_secondary_index {\n    name               = \"GameTitleIndex\"\n    hash_key           = \"GameTitle\"\n    range_key          = \"TopScore\"\n    projection_type    = \"INCLUDE\"\n    non_key_attributes = [\"UserId\"]\n  }\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Put the configuration above into main.tf\n2. Run `terraform init`\n3. Run `terraform plan` -> fails\n\nOptionally:\n\n1. Update `main.tf` to downgrade AWS provider to 6.27.0\n2. Run `terraform init -upgrade`\n3. Run `terraform plan` -> works\n\n### Debug Logging\n\n<details>\n<summary>Click to expand log output</summary>\n\n```console\n2026-01-10T00:00:30.493Z [INFO]  Terraform version: 1.13.5\n2026-01-10T00:00:30.493Z [DEBUG] using github.com/hashicorp/go-tfe v1.74.1\n2026-01-10T00:00:30.493Z [DEBUG] using github.com/hashicorp/hcl/v2 v2.24.0\n2026-01-10T00:00:30.493Z [DEBUG] using github.com/hashicorp/terraform-svchost v0.1.1\n2026-01-10T00:00:30.493Z [DEBUG] using github.com/zclconf/go-cty v1.16.3\n2026-01-10T00:00:30.493Z [INFO]  Go runtime version: go1.24.5\n2026-01-10T00:00:30.493Z [INFO]  CLI args: []string{\"terraform\", \"plan\"}\n2026-01-10T00:00:30.493Z [DEBUG] Attempting to open CLI config file: /home/ubuntu/.terraformrc\n2026-01-10T00:00:30.493Z [DEBUG] File doesn't exist, but doesn't need to. Ignoring.\n2026-01-10T00:00:30.493Z [DEBUG] checking for credentials in \"/home/ubuntu/.terraform.d/plugins\"\n2026-01-10T00:00:30.493Z [DEBUG] ignoring non-existing provider search directory terraform.d/plugins\n2026-01-10T00:00:30.493Z [DEBUG] will search for provider plugins in /home/ubuntu/.terraform.d/plugins\n2026-01-10T00:00:30.493Z [DEBUG] ignoring non-existing provider search directory /home/ubuntu/.local/share/terraform/plugins\n2026-01-10T00:00:30.493Z [DEBUG] ignoring non-existing provider search directory /usr/local/share/terraform/plugins\n2026-01-10T00:00:30.493Z [DEBUG] ignoring non-existing provider search directory /usr/share/terraform/plugins\n2026-01-10T00:00:30.494Z [INFO]  CLI command args: []string{\"plan\"}\n2026-01-10T00:00:31.103Z [DEBUG] checking for provisioner in \".\"\n2026-01-10T00:00:31.103Z [DEBUG] checking for provisioner in \"/home/ubuntu/.local/share/mise/installs/terraform/1.13.5\"\n2026-01-10T00:00:31.103Z [DEBUG] checking for provisioner in \"/home/ubuntu/.terraform.d/plugins\"\n2026-01-10T00:00:31.103Z [INFO]  backend/local: starting Plan operation\n2026-01-10T00:00:31.104Z [DEBUG] created provider logger: level=debug\n2026-01-10T00:00:31.104Z [INFO]  provider: configuring client automatic mTLS\n2026-01-10T00:00:31.112Z [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 args=[\".terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5\"]\n2026-01-10T00:00:31.113Z [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 pid=2846658\n2026-01-10T00:00:31.113Z [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5\n2026-01-10T00:00:31.195Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Starting github.com/hashicorp/terraform-provider-aws@6.28.0 (go1.25.5)...\n2026-01-10T00:00:31.195Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Creating Terraform AWS Provider (SDKv2-style)...\n2026-01-10T00:00:31.224Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Initializing Terraform AWS Provider (SDKv2-style)...\n2026-01-10T00:00:31.246Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Creating Terraform AWS Provider (Framework-style)...\n2026-01-10T00:00:31.264Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Initializing Terraform AWS Provider (Framework-style)...\n2026-01-10T00:00:31.265Z [INFO]  provider.terraform-provider-aws_v6.28.0_x5: configuring server automatic mTLS: timestamp=2026-01-10T00:00:31.265Z\n2026-01-10T00:00:31.275Z [DEBUG] provider: using plugin: version=5\n2026-01-10T00:00:31.275Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: plugin address: network=unix address=/tmp/plugin2046875967 timestamp=2026-01-10T00:00:31.275Z\n2026-01-10T00:00:32.055Z [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2026-01-10T00:00:32.064Z [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 id=2846658\n2026-01-10T00:00:32.064Z [DEBUG] provider: plugin exited\n2026-01-10T00:00:32.064Z [DEBUG] created provider logger: level=debug\n2026-01-10T00:00:32.064Z [INFO]  provider: configuring client automatic mTLS\n2026-01-10T00:00:32.066Z [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/linux_amd64/terraform-provider-random_v3.7.2_x5 args=[\".terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/linux_amd64/terraform-provider-random_v3.7.2_x5\"]\n2026-01-10T00:00:32.067Z [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/linux_amd64/terraform-provider-random_v3.7.2_x5 pid=2846687\n2026-01-10T00:00:32.067Z [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/linux_amd64/terraform-provider-random_v3.7.2_x5\n2026-01-10T00:00:32.070Z [INFO]  provider.terraform-provider-random_v3.7.2_x5: configuring server automatic mTLS: timestamp=2026-01-10T00:00:32.070Z\n2026-01-10T00:00:32.090Z [DEBUG] provider: using plugin: version=5\n2026-01-10T00:00:32.090Z [DEBUG] provider.terraform-provider-random_v3.7.2_x5: plugin address: address=/tmp/plugin277487207 network=unix timestamp=2026-01-10T00:00:32.089Z\n2026-01-10T00:00:32.097Z [DEBUG] No provider meta schema returned\n2026-01-10T00:00:32.098Z [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2026-01-10T00:00:32.098Z [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/linux_amd64/terraform-provider-random_v3.7.2_x5 id=2846687\n2026-01-10T00:00:32.098Z [DEBUG] provider: plugin exited\n2026-01-10T00:00:32.098Z [DEBUG] Building and walking validate graph\n2026-01-10T00:00:32.098Z [DEBUG] ProviderTransformer: \"aws_dynamodb_table.basic-dynamodb-table\" (*terraform.NodeValidatableResource) needs provider[\"registry.terraform.io/hashicorp/aws\"]\n2026-01-10T00:00:32.098Z [DEBUG] ProviderTransformer: \"random_pet.name\" (*terraform.NodeValidatableResource) needs provider[\"registry.terraform.io/hashicorp/random\"]\n2026-01-10T00:00:32.099Z [DEBUG] ReferenceTransformer: \"aws_dynamodb_table.basic-dynamodb-table\" references: [random_pet.name]\n2026-01-10T00:00:32.099Z [DEBUG] ReferenceTransformer: \"provider[\\\"registry.terraform.io/hashicorp/random\\\"]\" references: []\n2026-01-10T00:00:32.099Z [DEBUG] ReferenceTransformer: \"provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" references: []\n2026-01-10T00:00:32.099Z [DEBUG] ReferenceTransformer: \"random_pet.name\" references: []\n2026-01-10T00:00:32.099Z [DEBUG] Starting graph walk: walkValidate\n2026-01-10T00:00:32.099Z [DEBUG] created provider logger: level=debug\n2026-01-10T00:00:32.099Z [INFO]  provider: configuring client automatic mTLS\n2026-01-10T00:00:32.101Z [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/linux_amd64/terraform-provider-random_v3.7.2_x5 args=[\".terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/linux_amd64/terraform-provider-random_v3.7.2_x5\"]\n2026-01-10T00:00:32.101Z [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/linux_amd64/terraform-provider-random_v3.7.2_x5 pid=2846701\n2026-01-10T00:00:32.101Z [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/linux_amd64/terraform-provider-random_v3.7.2_x5\n2026-01-10T00:00:32.105Z [INFO]  provider.terraform-provider-random_v3.7.2_x5: configuring server automatic mTLS: timestamp=2026-01-10T00:00:32.105Z\n2026-01-10T00:00:32.122Z [DEBUG] provider.terraform-provider-random_v3.7.2_x5: plugin address: address=/tmp/plugin642194032 network=unix timestamp=2026-01-10T00:00:32.122Z\n2026-01-10T00:00:32.122Z [DEBUG] provider: using plugin: version=5\n2026-01-10T00:00:32.127Z [DEBUG] created provider logger: level=debug\n2026-01-10T00:00:32.127Z [INFO]  provider: configuring client automatic mTLS\n2026-01-10T00:00:32.130Z [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 args=[\".terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5\"]\n2026-01-10T00:00:32.130Z [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 pid=2846710\n2026-01-10T00:00:32.130Z [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5\n2026-01-10T00:00:32.202Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Starting github.com/hashicorp/terraform-provider-aws@6.28.0 (go1.25.5)...\n2026-01-10T00:00:32.202Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Creating Terraform AWS Provider (SDKv2-style)...\n2026-01-10T00:00:32.227Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Initializing Terraform AWS Provider (SDKv2-style)...\n2026-01-10T00:00:32.246Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Creating Terraform AWS Provider (Framework-style)...\n2026-01-10T00:00:32.264Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Initializing Terraform AWS Provider (Framework-style)...\n2026-01-10T00:00:32.265Z [INFO]  provider.terraform-provider-aws_v6.28.0_x5: configuring server automatic mTLS: timestamp=2026-01-10T00:00:32.265Z\n2026-01-10T00:00:32.275Z [DEBUG] provider: using plugin: version=5\n2026-01-10T00:00:32.275Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: plugin address: address=/tmp/plugin1656801736 network=unix timestamp=2026-01-10T00:00:32.275Z\n2026-01-10T00:00:32.282Z [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2026-01-10T00:00:32.284Z [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/linux_amd64/terraform-provider-random_v3.7.2_x5 id=2846701\n2026-01-10T00:00:32.284Z [DEBUG] provider: plugin exited\n2026-01-10T00:00:32.359Z [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2026-01-10T00:00:32.367Z [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 id=2846710\n2026-01-10T00:00:32.367Z [DEBUG] provider: plugin exited\n2026-01-10T00:00:32.367Z [INFO]  backend/local: plan calling Plan\n2026-01-10T00:00:32.367Z [DEBUG] Building and walking plan graph for NormalMode\n2026-01-10T00:00:32.367Z [DEBUG] ProviderTransformer: \"random_pet.name (expand)\" (*terraform.nodeExpandPlannableResource) needs provider[\"registry.terraform.io/hashicorp/random\"]\n2026-01-10T00:00:32.367Z [DEBUG] ProviderTransformer: \"aws_dynamodb_table.basic-dynamodb-table (expand)\" (*terraform.nodeExpandPlannableResource) needs provider[\"registry.terraform.io/hashicorp/aws\"]\n2026-01-10T00:00:32.367Z [DEBUG] ReferenceTransformer: \"random_pet.name (expand)\" references: []\n2026-01-10T00:00:32.368Z [DEBUG] ReferenceTransformer: \"aws_dynamodb_table.basic-dynamodb-table (expand)\" references: [random_pet.name (expand)]\n2026-01-10T00:00:32.368Z [DEBUG] ReferenceTransformer: \"provider[\\\"registry.terraform.io/hashicorp/random\\\"]\" references: []\n2026-01-10T00:00:32.368Z [DEBUG] ReferenceTransformer: \"provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" references: []\n2026-01-10T00:00:32.368Z [DEBUG] Starting graph walk: walkPlan\n2026-01-10T00:00:32.368Z [DEBUG] created provider logger: level=debug\n2026-01-10T00:00:32.368Z [INFO]  provider: configuring client automatic mTLS\n2026-01-10T00:00:32.372Z [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/linux_amd64/terraform-provider-random_v3.7.2_x5 args=[\".terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/linux_amd64/terraform-provider-random_v3.7.2_x5\"]\n2026-01-10T00:00:32.373Z [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/linux_amd64/terraform-provider-random_v3.7.2_x5 pid=2846731\n2026-01-10T00:00:32.373Z [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/linux_amd64/terraform-provider-random_v3.7.2_x5\n2026-01-10T00:00:32.376Z [INFO]  provider.terraform-provider-random_v3.7.2_x5: configuring server automatic mTLS: timestamp=2026-01-10T00:00:32.376Z\n2026-01-10T00:00:32.398Z [DEBUG] provider: using plugin: version=5\n2026-01-10T00:00:32.398Z [DEBUG] provider.terraform-provider-random_v3.7.2_x5: plugin address: network=unix address=/tmp/plugin490980396 timestamp=2026-01-10T00:00:32.398Z\n2026-01-10T00:00:32.404Z [DEBUG] created provider logger: level=debug\n2026-01-10T00:00:32.404Z [INFO]  provider: configuring client automatic mTLS\n2026-01-10T00:00:32.412Z [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 args=[\".terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5\"]\n2026-01-10T00:00:32.412Z [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 pid=2846740\n2026-01-10T00:00:32.412Z [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5\n2026-01-10T00:00:32.498Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Starting github.com/hashicorp/terraform-provider-aws@6.28.0 (go1.25.5)...\n2026-01-10T00:00:32.498Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Creating Terraform AWS Provider (SDKv2-style)...\n2026-01-10T00:00:32.529Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Initializing Terraform AWS Provider (SDKv2-style)...\n2026-01-10T00:00:32.551Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Creating Terraform AWS Provider (Framework-style)...\n2026-01-10T00:00:32.573Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Initializing Terraform AWS Provider (Framework-style)...\n2026-01-10T00:00:32.574Z [INFO]  provider.terraform-provider-aws_v6.28.0_x5: configuring server automatic mTLS: timestamp=2026-01-10T00:00:32.574Z\n2026-01-10T00:00:32.578Z [DEBUG] provider: using plugin: version=5\n2026-01-10T00:00:32.578Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: plugin address: address=/tmp/plugin3259433194 network=unix timestamp=2026-01-10T00:00:32.578Z\n2026-01-10T00:00:32.588Z [DEBUG] Resource instance state not found for node \"random_pet.name\", instance random_pet.name\n2026-01-10T00:00:32.588Z [DEBUG] ReferenceTransformer: \"random_pet.name\" references: []\n2026-01-10T00:00:32.588Z [DEBUG] refresh: random_pet.name: no state, so not refreshing\n2026-01-10T00:00:32.590Z [DEBUG] provider.terraform-provider-random_v3.7.2_x5: Marking Computed attributes with null configuration values as unknown (known after apply) in the plan to prevent potential Terraform errors: @module=sdk.framework tf_provider_addr=registry.terraform.io/hashicorp/random tf_req_id=04204c61-e1a6-e6b9-de63-e7882e28c1b9 tf_resource_type=random_pet tf_rpc=PlanResourceChange @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server_planresourcechange.go:229 timestamp=2026-01-10T00:00:32.590Z\n2026-01-10T00:00:32.590Z [DEBUG] provider.terraform-provider-random_v3.7.2_x5: marking computed attribute that is null in the config as unknown: @caller=github.com/hashicorp/terraform-plugin-framework@v1.14.1/internal/fwserver/server_planresourcechange.go:480 tf_attribute_path=\"AttributeName(\\\"id\\\")\" tf_provider_addr=registry.terraform.io/hashicorp/random tf_resource_type=random_pet tf_rpc=PlanResourceChange @module=sdk.framework tf_req_id=04204c61-e1a6-e6b9-de63-e7882e28c1b9 timestamp=2026-01-10T00:00:32.590Z\n2026-01-10T00:00:32.592Z [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2026-01-10T00:00:32.592Z [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/random/3.7.2/linux_amd64/terraform-provider-random_v3.7.2_x5 id=2846731\n2026-01-10T00:00:32.592Z [DEBUG] provider: plugin exited\n2026-01-10T00:00:32.656Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Configuring Terraform AWS Provider: tf_mux_provider=\"*schema.GRPCProviderServer\" tf_req_id=af4b4b16-07b5-2365-b257-7b56a3589069 @module=aws tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ConfigureProvider @caller=github.com/hashicorp/terraform-provider-aws/internal/conns/config.go:147 timestamp=2026-01-10T00:00:32.656Z\n2026-01-10T00:00:32.658Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Resolving credentials provider: tf_req_id=af4b4b16-07b5-2365-b257-7b56a3589069 @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 @module=aws.aws-base tf_mux_provider=\"*schema.GRPCProviderServer\" tf_rpc=ConfigureProvider tf_provider_addr=registry.terraform.io/hashicorp/aws timestamp=2026-01-10T00:00:32.656Z\n2026-01-10T00:00:32.658Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Setting profile: @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 tf_aws.profile=Sandbox-James_admin tf_aws.profile.source=provider tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ConfigureProvider @module=aws.aws-base tf_mux_provider=\"*schema.GRPCProviderServer\" tf_req_id=af4b4b16-07b5-2365-b257-7b56a3589069 timestamp=2026-01-10T00:00:32.656Z\n2026-01-10T00:00:32.658Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Loading configuration: @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ConfigureProvider @module=aws.aws-base tf_mux_provider=\"*schema.GRPCProviderServer\" tf_req_id=af4b4b16-07b5-2365-b257-7b56a3589069 timestamp=2026-01-10T00:00:32.656Z\n2026-01-10T00:00:32.659Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Retrieving credentials: @module=aws.aws-base tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=af4b4b16-07b5-2365-b257-7b56a3589069 @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 tf_rpc=ConfigureProvider timestamp=2026-01-10T00:00:32.659Z\n2026-01-10T00:00:32.661Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Request Sent: http.method=GET rpc.service=SSO tf_rpc=ConfigureProvider @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 http.request.body=\"\" http.request.header.amz_sdk_invocation_id=a2b90994-0b23-4209-973b-7f42713bde93 http.request.header.amz_sdk_request=\"attempt=1; max=3\" http.request.header.x_amz_sso_bearer_token=aoaAAAAAGlhop8Nbb3Es8t6SncGGjG9nie-psly1GG3B5NbyAgnXuGopy4DOnHSaSEfnnISO7-stCqx2jzskqovvABkc0:MGUCMGG3Pi9UEpBq99xFekzA0vM4qRbRodrtAr2hdneuuH74WhNZkMGIVszNbbBFY20yrgIxALZZE8HD0CbyfVUUfOPKEd1ebU4gweMqv4nTEiAJqIyhKukjFQQ3oupZMZy0i9Jrcg http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.13.5 (+https://www.terraform.io) terraform-provider-aws/6.28.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/linux lang/go#1.25.5 md/GOOS#linux md/GOARCH#amd64 api/sso#1.30.8 m/E\" rpc.method=GetRoleCredentials @module=aws.aws-base aws.region=us-east-1 rpc.system=aws-api tf_aws.signing_region=\"\" tf_req_id=af4b4b16-07b5-2365-b257-7b56a3589069 http.url=\"https://portal.sso.us-east-1.amazonaws.com/federation/credentials?account_id=986603402751&role_name=AWSAdministratorAccess\" net.peer.name=portal.sso.us-east-1.amazonaws.com tf_aws.sdk=aws-sdk-go-v2 tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws timestamp=2026-01-10T00:00:32.661Z\n2026-01-10T00:00:33.441Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Response Received: tf_provider_addr=registry.terraform.io/hashicorp/aws @module=aws.aws-base http.response.header.access_control_expose_headers=[RequestId, x-amzn-RequestId] http.response.header.content_type=application/json http.response.header.server=\"AWS SSO\" http.response.header.x_amzn_requestid=2736db9f-be2f-4d6f-82d8-62af707010e8 http.status_code=200 tf_req_id=af4b4b16-07b5-2365-b257-7b56a3589069 @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 http.duration=779 http.response.header.requestid=2736db9f-be2f-4d6f-82d8-62af707010e8 rpc.method=GetRoleCredentials rpc.system=aws-api tf_aws.signing_region=\"\" tf_mux_provider=\"*schema.GRPCProviderServer\" aws.region=us-east-1 rpc.service=SSO tf_rpc=ConfigureProvider\n  http.response.body=\n  | {\"roleCredentials\":{\"accessKeyId\":\"ASIA************6RLN\",\"secretAccessKey\":\"ue8l********************************38KE\",\"sessionToken\":\"IQoJb3JpZ2luX2VjEOj//////////wEaCXVzLWVhc3QtMSJGMEQCIHrJZcyqGd4Q4pBnjanM+teiSHCwmqJEb+dmVXVkHQ7YAiBYsEKGcoaLtGIiJTO/MFZGbdeHoXYr2qyp6UsvQNrUdCqMAwix//////////8BEAAaDDk4NjYwMzQwMjc1MSIMrikpEZ1pDaD7cI2TKuACaOOs5Ig7xA4sX5jdWUda5F2z54DAPeXkbB1QC+yKsLNpfy/FaOlsppk1RS7OZIOYCMvuxcdJuIQQn1Zwg9RuzHXaKo73jzhVmZe8IXzG8ZpllbAU3qnNSNsRTdhKgHgRrdbBtQSyo/SKqD3TzK1gXjbokYu3X9mfScgEI0SxMznx5MQs+LofE0XA6bUONF2AdHTakgw7OZNHgbYlIA2gvOPwWeTiQ3G1KjwRwQ316+RlbKZsTyiIA8Y4tewKtB3hI+rqDf8V84Zmdyp4tVQNDzcR/A/YFQfvYWxbGzepKGUTlFqN5TFxlKqNTk3wjrUDvdHsDb0YmNa/TKPxveEFhD1+OwFGrVC3NedMU5Rlwgg1uovUCI8SJuUfL4WG1DEQ6jISch0I0EKkRvg5yGhxS79Iy8iVcVvjbOVsdnG8JQeRjzF/D6gAri1DxQdt6Hu3mNeAPO7NcjinMXa4Hq20ITChrYbLBjqlAel/fqi9ZIBsCzsAuHZhMu77b7oZiwEsjcQLwE+Q66pKZGMkV/giGAL/qcHzS8vIxpJ6cSYb5IDjFAenNGJQePMqG93qLZ6M0uQnyYnTGY1/LL/cbblT6+bm/5O1jOYp8Cj2k9vJ2zhvegNiTYDDBptT5CwgewVjHIXcAjUqmE5bmVjX8SOg4EKwpAPMW8n8AeJXj157gSIwb2l4De/u9pTyGXHJIA==\",\"expiration\":1768032032000}}\n   http.response.header.cache_control=no-cache http.response.header.date=\"Sat, 10 Jan 2026 00:00:33 GMT\" http.response_content_length=1072 tf_aws.sdk=aws-sdk-go-v2 timestamp=2026-01-10T00:00:33.441Z\n2026-01-10T00:00:33.441Z [INFO]  provider.terraform-provider-aws_v6.28.0_x5: Retrieved credentials: tf_req_id=af4b4b16-07b5-2365-b257-7b56a3589069 @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:39 tf_rpc=ConfigureProvider @module=aws.aws-base tf_aws.credentials_source=SSOProvider tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws timestamp=2026-01-10T00:00:33.441Z\n2026-01-10T00:00:33.441Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Loading configuration: @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 @module=aws.aws-base tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=af4b4b16-07b5-2365-b257-7b56a3589069 tf_rpc=ConfigureProvider timestamp=2026-01-10T00:00:33.441Z\n2026-01-10T00:00:33.444Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Retrieving AWS account details: tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws @module=aws tf_req_id=af4b4b16-07b5-2365-b257-7b56a3589069 tf_rpc=ConfigureProvider @caller=github.com/hashicorp/terraform-provider-aws/internal/conns/config.go:171 timestamp=2026-01-10T00:00:33.444Z\n2026-01-10T00:00:33.444Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Retrieving caller identity from STS: @module=aws.aws-base tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=af4b4b16-07b5-2365-b257-7b56a3589069 tf_rpc=ConfigureProvider @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 timestamp=2026-01-10T00:00:33.444Z\n2026-01-10T00:00:33.446Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Request Sent: http.request.header.content_type=application/x-www-form-urlencoded http.url=https://sts.us-east-1.amazonaws.com/ http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.13.5 (+https://www.terraform.io) terraform-provider-aws/6.28.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/linux lang/go#1.25.5 md/GOOS#linux md/GOARCH#amd64 api/sts#1.41.5 m/r,t,u\" net.peer.name=sts.us-east-1.amazonaws.com\n  http.request.body=\n  | Action=GetCallerIdentity&Version=2011-06-15\n   http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=ASIA************6RLN/20260110/us-east-1/sts/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=*****\" http.request.header.x_amz_security_token=\"*****\" rpc.method=GetCallerIdentity rpc.system=aws-api tf_req_id=af4b4b16-07b5-2365-b257-7b56a3589069 tf_rpc=ConfigureProvider @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 aws.region=us-east-1 http.request.header.amz_sdk_request=\"attempt=1; max=25\" http.request_content_length=43 tf_aws.sdk=aws-sdk-go-v2 tf_aws.signing_region=\"\" http.method=POST http.request.header.amz_sdk_invocation_id=38ebf47b-e710-4eb9-befc-006c2f2a3a56 http.request.header.x_amz_date=20260110T000033Z rpc.service=STS tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws @module=aws.aws-base timestamp=2026-01-10T00:00:33.445Z\n2026-01-10T00:00:33.881Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Response Received: @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 aws.region=us-east-1 http.response.header.content_type=text/xml http.response.header.x_amz_sts_extended_request_id=MTp1cy1lYXN0LTE6UzoxNzY4MDAzMjMzODE4OlI6cmhTTldVa1Q= rpc.method=GetCallerIdentity rpc.service=STS tf_aws.sdk=aws-sdk-go-v2 http.response.header.date=\"Sat, 10 Jan 2026 00:00:33 GMT\" http.response_content_length=495 rpc.system=aws-api tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=af4b4b16-07b5-2365-b257-7b56a3589069 http.duration=434 http.response.header.x_amzn_requestid=8da41904-a137-4818-809a-9129d7f5165d tf_aws.signing_region=\"\" tf_rpc=ConfigureProvider @module=aws.aws-base\n  http.response.body=\n  | <GetCallerIdentityResponse xmlns=\"https://sts.amazonaws.com/doc/2011-06-15/\">\n  |   <GetCallerIdentityResult>\n  |     <Arn>arn:aws:sts::986603402751:assumed-role/AWSReservedSSO_AWSAdministratorAccess_a890a794c928c559/james@stacklet.io</Arn>\n  |     <UserId>AROA*************KRNP:james@stacklet.io</UserId>\n  |     <Account>986603402751</Account>\n  |   </GetCallerIdentityResult>\n  |   <ResponseMetadata>\n  |     <RequestId>8da41904-a137-4818-809a-9129d7f5165d</RequestId>\n  |   </ResponseMetadata>\n  | </GetCallerIdentityResponse>\n   http.status_code=200 timestamp=2026-01-10T00:00:33.881Z\n2026-01-10T00:00:33.881Z [INFO]  provider.terraform-provider-aws_v6.28.0_x5: Retrieved caller identity from STS: @module=aws.aws-base tf_req_id=af4b4b16-07b5-2365-b257-7b56a3589069 tf_rpc=ConfigureProvider tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:39 timestamp=2026-01-10T00:00:33.881Z\n2026-01-10T00:00:33.882Z [DEBUG] Resource instance state not found for node \"aws_dynamodb_table.basic-dynamodb-table\", instance aws_dynamodb_table.basic-dynamodb-table\n2026-01-10T00:00:33.882Z [DEBUG] ReferenceTransformer: \"aws_dynamodb_table.basic-dynamodb-table\" references: []\n2026-01-10T00:00:33.883Z [DEBUG] refresh: aws_dynamodb_table.basic-dynamodb-table: no state, so not refreshing\n2026-01-10T00:00:33.896Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Request Sent: @module=aws http.method=POST tf_req_id=8c49e9d9-ec68-651f-e7f8-880540862e66 aws.dynamodb.table_names=[] tf_resource_type=aws_dynamodb_table tf_rpc=PlanResourceChange http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=ASIA************6RLN/20260110/us-east-1/dynamodb/aws4_request, SignedHeaders=accept-encoding;amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date;x-amz-security-token;x-amz-target, Signature=*****\" rpc.method=DescribeTable tf_aws.sdk=aws-sdk-go-v2 rpc.system=aws-api tf_aws.signing_region=\"\" tf_provider_addr=registry.terraform.io/hashicorp/aws\n  http.request.body=\n  | {\"TableName\":\"\"}\n   http.request_content_length=16 http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.13.5 (+https://www.terraform.io) terraform-provider-aws/6.28.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/linux lang/go#1.25.5 md/GOOS#linux md/GOARCH#amd64 api/dynamodb#1.53.5 m/P,r,t,u\" net.peer.name=986603402751.ddb.us-east-1.amazonaws.com @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 aws.region=us-east-1 http.request.header.amz_sdk_request=\"attempt=1; max=25\" http.request.header.x_amz_security_token=\"*****\" rpc.service=DynamoDB http.request.header.accept_encoding=identity http.request.header.content_type=application/x-amz-json-1.0 http.request.header.x_amz_target=DynamoDB_20120810.DescribeTable http.url=https://986603402751.ddb.us-east-1.amazonaws.com/ tf_mux_provider=\"*schema.GRPCProviderServer\" db.system.name=aws.dynamodb http.request.header.amz_sdk_invocation_id=f626386c-284e-4d77-8a04-725e2009f93e http.request.header.x_amz_date=20260110T000033Z timestamp=2026-01-10T00:00:33.896Z\n2026-01-10T00:00:34.231Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Response Received: db.system.name=aws.dynamodb http.duration=334\n  http.response.body=\n  | {\"__type\":\"com.amazon.coral.validate#ValidationException\",\"message\":\"2 validation errors detected: Value '' at 'tableName' failed to satisfy constraint: Member must have length greater than or equal to 3; Value '' at 'tableName' failed to satisfy constraint: Member must satisfy regular expression pattern: [a-zA-Z0-9_.-]+\"}\n   http.response.header.content_type=application/x-amz-json-1.0 http.response.header.x_amzn_requestid=ILB2KQNLOCDU5LPTGDGJLEKMDVVV4KQNSO5AEMVJF66Q9ASUAAJG tf_rpc=PlanResourceChange @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 http.response.header.connection=keep-alive http.response.header.server=Server rpc.service=DynamoDB rpc.system=aws-api tf_aws.sdk=aws-sdk-go-v2 aws.dynamodb.table_names=[] http.response.header.date=\"Sat, 10 Jan 2026 00:00:34 GMT\" http.response.header.x_amz_crc32=1623335524 http.status_code=400 tf_aws.signing_region=\"\" tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_resource_type=aws_dynamodb_table aws.region=us-east-1 http.response_content_length=324 rpc.method=DescribeTable tf_req_id=8c49e9d9-ec68-651f-e7f8-880540862e66 @module=aws timestamp=2026-01-10T00:00:34.231Z\n2026-01-10T00:00:34.231Z [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: request failed with unretryable error https response error StatusCode: 400, RequestID: ILB2KQNLOCDU5LPTGDGJLEKMDVVV4KQNSO5AEMVJF66Q9ASUAAJG, api error ValidationException: 2 validation errors detected: Value '' at 'tableName' failed to satisfy constraint: Member must have length greater than or equal to 3; Value '' at 'tableName' failed to satisfy constraint: Member must satisfy regular expression pattern: [a-zA-Z0-9_.-]+: @module=aws db.system.name=aws.dynamodb tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=8c49e9d9-ec68-651f-e7f8-880540862e66 tf_resource_type=aws_dynamodb_table aws.dynamodb.table_names=[] aws.region=us-east-1 tf_rpc=PlanResourceChange @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 rpc.service=DynamoDB tf_aws.sdk=aws-sdk-go-v2 rpc.method=DescribeTable rpc.system=aws-api tf_mux_provider=\"*schema.GRPCProviderServer\" timestamp=2026-01-10T00:00:34.231Z\n2026-01-10T00:00:34.232Z [ERROR] provider.terraform-provider-aws_v6.28.0_x5: Response contains error diagnostic: diagnostic_severity=ERROR tf_provider_addr=registry.terraform.io/hashicorp/aws @module=sdk.proto diagnostic_detail=\"\" diagnostic_summary=\"operation error DynamoDB: DescribeTable, https response error StatusCode: 400, RequestID: ILB2KQNLOCDU5LPTGDGJLEKMDVVV4KQNSO5AEMVJF66Q9ASUAAJG, api error ValidationException: 2 validation errors detected: Value '' at 'tableName' failed to satisfy constraint: Member must have length greater than or equal to 3; Value '' at 'tableName' failed to satisfy constraint: Member must satisfy regular expression pattern: [a-zA-Z0-9_.-]+\" tf_proto_version=5.10 tf_req_id=8c49e9d9-ec68-651f-e7f8-880540862e66 tf_resource_type=aws_dynamodb_table tf_rpc=PlanResourceChange @caller=github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/diag/diagnostics.go:58 timestamp=2026-01-10T00:00:34.232Z\n2026-01-10T00:00:34.232Z [ERROR] vertex \"aws_dynamodb_table.basic-dynamodb-table\" error: operation error DynamoDB: DescribeTable, https response error StatusCode: 400, RequestID: ILB2KQNLOCDU5LPTGDGJLEKMDVVV4KQNSO5AEMVJF66Q9ASUAAJG, api error ValidationException: 2 validation errors detected: Value '' at 'tableName' failed to satisfy constraint: Member must have length greater than or equal to 3; Value '' at 'tableName' failed to satisfy constraint: Member must satisfy regular expression pattern: [a-zA-Z0-9_.-]+\n2026-01-10T00:00:34.232Z [ERROR] vertex \"aws_dynamodb_table.basic-dynamodb-table (expand)\" error: operation error DynamoDB: DescribeTable, https response error StatusCode: 400, RequestID: ILB2KQNLOCDU5LPTGDGJLEKMDVVV4KQNSO5AEMVJF66Q9ASUAAJG, api error ValidationException: 2 validation errors detected: Value '' at 'tableName' failed to satisfy constraint: Member must have length greater than or equal to 3; Value '' at 'tableName' failed to satisfy constraint: Member must satisfy regular expression pattern: [a-zA-Z0-9_.-]+\n2026-01-10T00:00:34.232Z [WARN]  Planning encountered errors, so plan is not applyable\n2026-01-10T00:00:34.232Z [INFO]  backend/local: plan operation completed\n\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\n  + create\n\nTerraform planned the following actions, but then encountered a problem:\n\n  # random_pet.name will be created\n  + resource \"random_pet\" \"name\" {\n      + id        = (known after apply)\n      + length    = 2\n      + separator = \"-\"\n    }\n\nPlan: 1 to add, 0 to change, 0 to destroy.\n\u2577\n\u2502 Error: operation error DynamoDB: DescribeTable, https response error StatusCode: 400, RequestID: ILB2KQNLOCDU5LPTGDGJLEKMDVVV4KQNSO5AEMVJF66Q9ASUAAJG, api error ValidationException: 2 validation errors detected: Value '' at 'tableName' failed to satisfy constraint: Member must have length greater than or equal to 3; Value '' at 'tableName' failed to satisfy constraint: Member must satisfy regular expression pattern: [a-zA-Z0-9_.-]+\n\u2502\n\u2502   with aws_dynamodb_table.basic-dynamodb-table,\n\u2502   on main.tf line 26, in resource \"aws_dynamodb_table\" \"basic-dynamodb-table\":\n\u2502   26: resource \"aws_dynamodb_table\" \"basic-dynamodb-table\" {\n\u2502\n\u2575\n2026-01-10T00:00:34.340Z [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2026-01-10T00:00:34.344Z [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 id=2846740\n2026-01-10T00:00:34.344Z [DEBUG] provider: plugin exited\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nClaude Code was used to diagnose & generate a minimal reproducer, but it's based on real terraform that pre-dates the widespread use of LLMs.\n\n### Important Facts and References\n\n## Root Cause Analysis\n\nThe regression was introduced in v6.28.0 by changes to the `validateTableAttributes` function in `internal/service/dynamodb/table.go`.\n\n**Problematic code** (lines 3121-3126 in v6.28.0):\n\n```go\n// validate against remote as well, because we're using the remote state as a bridge between the table and gsi resources\nremoteGSIAttributes := map[string]bool{}\ntable, err := findTableByName(ctx, conn, d.Get(names.AttrName).(string))\nif err != nil && !retry.NotFound(err) {\n    return err\n}\n```\n\n**The issue**: This validation code calls `findTableByName()` (which performs a `DescribeTable` API call) during the planning phase. When the table name contains a computed value like `random_pet.name.id`, the value is **unknown** during planning, so `d.Get(names.AttrName).(string)` returns an empty string `\"\"`.\n\nThe subsequent `DescribeTable(\"\")` call fails AWS API validation because empty strings are not valid DynamoDB table names.\n\n## Additional Context\n\n- This appears to be related to the introduction of the experimental `aws_dynamodb_global_secondary_index` resource in v6.28.0\n- The validation was added to \"bridge between the table and gsi resources\" (per code comment)\n- This issue affects any configuration where a DynamoDB table name uses computed values from other resources\n- Pinning to `~> 6.27.0` works as a temporary workaround\n\n## References\n\n- https://github.com/hashicorp/terraform-provider-aws/pull/44999 - the change appears to be part of the v6.28.0 release changes to support the new GSI resource\n- Git diff between v6.27.0 and v6.28.0 shows the `validateTableAttributes` function was modified to add remote table lookups\n\n\n### Would you like to implement a fix?\n\nNo  (Maybe?  I'll try)",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "regression",
        "service/dynamodb"
      ],
      "created_at": "2026-01-10T00:07:46Z",
      "closed_at": "2026-01-13T21:49:21Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45903",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45920,
      "title": "[Bug]: aws_cloudfront_multitenant_distribution origin_group uses incorrect attribute name and field name",
      "problem": "### Terraform and AWS Provider Version\n\n```\nTerraform v1.10.5\nAWS Provider v6.28.0\n```\n\n### Affected Resource(s)\n\n* `aws_cloudfront_multitenant_distribution`\n\n### Expected Behavior\n\nThe `origin_group` block should use `id` attribute (like the `origin` block does) and Terraform should successfully apply changes.\n\n### Actual Behavior\n\nTerraform fails during apply with:\n```\nError: updating CloudFront Multi-tenant Distribution\noperation error CloudFront: UpdateDistribution, 1 validation error(s) found.\n- missing required field, UpdateDistributionInput.DistributionConfig.OriginGroups.Items[0].Id.\n```\n\n### Root Cause\n\n**Two bugs in the implementation:**\n\n1. **Schema uses wrong attribute name:** `origin_id` instead of `id`\n2. **Go field doesn't match AWS SDK:** `OriginID` instead of `ID`\n\n**Schema (line 527):**\n```go\n\"origin_id\": schema.StringAttribute{  // WRONG - should be \"id\"\n    Required: true,\n}\n```\n\n**Go struct (line 1091):**\n```go\ntype originGroupModel struct {\n    OriginID types.String `tfsdk:\"origin_id\"`  // WRONG - should be ID with tfsdk:\"id\"\n    ...\n}\n```\n\n**AWS SDK (what we need to match):**\n```go\ntype OriginGroup struct {\n    Id *string  // Required field\n    ...\n}\n```\n\nThe AutoFlex framework maps Go field names to AWS SDK field names. It cannot map `OriginID` \u2192 `Id`, so the required `Id` field is never populated, causing the error.\n\n### Terraform Configuration\n\n```hcl\nresource \"aws_cloudfront_multitenant_distribution\" \"example\" {\n  comment = \"Multi-tenant distribution\"\n  enabled = true\n\n  tenant_config {}\n\n  origin {\n    id          = \"s3-origin\"\n    domain_name = \"example.s3.amazonaws.com\"\n    origin_access_control_id = aws_cloudfront_origin_access_control.oac.id\n  }\n\n  origin {\n    id          = \"alb-origin\"\n    domain_name = \"example.alb.amazonaws.com\"\n    custom_origin_config {\n      http_port              = 80\n      https_port             = 443\n      origin_protocol_policy = \"http-only\"\n      origin_ssl_protocols   = [\"TLSv1.2\"]\n    }\n  }\n\n  origin_group {\n    origin_id = \"s3-with-alb-fallback\"  # WRONG - should be 'id'\n    \n    failover_criteria {\n      status_codes = [403]\n    }\n    \n    member {\n      origin_id = \"s3-origin\"\n    }\n    \n    member {\n      origin_id = \"alb-origin\"\n    }\n  }\n\n  default_cache_behavior {\n    target_origin_id       = \"s3-with-alb-fallback\"\n    viewer_protocol_policy = \"redirect-to-https\"\n    \n    allowed_methods {\n      items = [\"GET\", \"HEAD\"]\n      cached_methods = [\"GET\", \"HEAD\"]\n    }\n  }\n\n  restrictions {\n    geo_restriction {\n      restriction_type = \"none\"\n    }\n  }\n\n  viewer_certificate {\n    cloudfront_default_certificate = true\n  }\n}\n```\n\n### Expected Configuration After Fix\n\n```hcl\norigin_group {\n  id = \"s3-with-alb-fallback\"  # Correct attribute name\n  \n  member {\n    origin_id = \"s3-origin\"  # This is correct - references an origin\n  }\n}\n```\n\n### Suggested Fix\n\n**1. Fix schema attribute name (line 527):**\n```go\n\"id\": schema.StringAttribute{\n    Required: true,\n}\n```\n\n**2. Fix Go field name (line 1091):**\n```go\ntype originGroupModel struct {\n    ID types.String `tfsdk:\"id\"`\n    ...\n}\n```\n\n### References\n\n- AWS SDK OriginGroup: https://github.com/aws/aws-sdk-go-v2/blob/main/service/cloudfront/types/types.go\n- Provider Code: https://github.com/hashicorp/terraform-provider-aws/blob/main/internal/service/cloudfront/multitenant_distribution.go\n\n### Workaround\n\nCurrently, the only workaround is to not include the `origin_group` block in Terraform configuration and manage it outside of Terraform.",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/cloudfront"
      ],
      "created_at": "2026-01-12T13:47:09Z",
      "closed_at": "2026-01-14T19:27:47Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45920",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45938,
      "title": "skaff: Rearrange word order in resource and data source object + function names",
      "problem": "### Description\n\nRecently I have worked on more new resources and data sources. As I use skaff to generate the new resource and data source skeletons, I noticed that some of the object and function names that are based on the resource name has the wrong wording order. For example, after I run `skaff -r HelloWorld` in one of the service packages, the resulting code would have the following:\n\n```go\n// @FrameworkResource(\"aws_xray_hello_world\", name=\"Hello World\")\nfunc newResourceHelloWorld(_ context.Context) (resource.ResourceWithConfigure, error) {\n\tr := &resourceHelloWorld{}\n\n\t// TIP: ==== CONFIGURABLE TIMEOUTS ====\n\t// Users can configure timeout lengths but you need to use the times they\n\t// provide. Access the timeout they configure (or the defaults) using,\n\t// e.g., r.CreateTimeout(ctx, plan.Timeouts) (see below). The times here are\n\t// the defaults if they don't configure timeouts.\n\tr.SetDefaultCreateTimeout(30 * time.Minute)\n\tr.SetDefaultUpdateTimeout(30 * time.Minute)\n\tr.SetDefaultDeleteTimeout(30 * time.Minute)\n\n\treturn r, nil\n}\n\nconst (\n\tResNameHelloWorld = \"Hello World\"\n)\n\ntype resourceHelloWorld struct {\n\tframework.ResourceWithModel[resourceHelloWorldModel]\n\tframework.WithTimeouts\n}\n```\n\nWhereas according to the contributor guide, existing resources/data sources, and maintainer changes from code reviews, \"HelloWorld\" and \"Reosurce\" should be swapped as follows:\n\n```go\n// @FrameworkResource(\"aws_xray_hello_world\", name=\"Hello World\")\nfunc newHelloWorldResource(_ context.Context) (resource.ResourceWithConfigure, error) {\n\tr := &helloWorldResource{}\n\n\t// TIP: ==== CONFIGURABLE TIMEOUTS ====\n\t// Users can configure timeout lengths but you need to use the times they\n\t// provide. Access the timeout they configure (or the defaults) using,\n\t// e.g., r.CreateTimeout(ctx, plan.Timeouts) (see below). The times here are\n\t// the defaults if they don't configure timeouts.\n\tr.SetDefaultCreateTimeout(30 * time.Minute)\n\tr.SetDefaultUpdateTimeout(30 * time.Minute)\n\tr.SetDefaultDeleteTimeout(30 * time.Minute)\n\n\treturn r, nil\n}\n\nconst (\n\tResNameHelloWorld = \"Hello World\"\n)\n\ntype helloWorldResource struct {\n\tframework.ResourceWithModel[helloWorldResourceModel]\n\tframework.WithTimeouts\n}\n```\n\nI'd like to fix the templates so that the proper names are used up front, to avoid further refactoring or have the wrong convention slip into the code base.\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a relevant change?\n\nYes",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "skaff"
      ],
      "created_at": "2026-01-13T06:13:14Z",
      "closed_at": "2026-01-13T13:13:24Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45938",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45946,
      "title": "aws_vpc_endpoint non-idempotency for ip_address_type",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.3\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v6.28.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_vpc_endpoint`\n\n\n### Expected Behavior\n\nNo changes during each terraform execution\n\n### Actual Behavior\n\nAccording to the provider documentation https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/vpc_endpoint.html#ip_address_type-1 \n```\n[ip_address_type]\n(Optional) The IP address type for the endpoint. Valid values are ipv4, dualstack, and ipv6.\n``` \n\nbut terraform updates endpoint each run to uppercase:\n```\nTerraform will perform the following actions:\n  # aws_vpc_endpoint.services[\"shared\"] will be updated in-place\n  ~ resource \"aws_vpc_endpoint\" \"services\" {\n        id                         = \"vpce-XXX\"\n      ~ ip_address_type            = \"IPV4\" -> \"ipv4\"\n        # (20 unchanged attributes hidden)\n        # (4 unchanged blocks hidden)\n    }\n```\n\n\n### Relevant Error/Panic Output\n\n```console\n\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nresource \"aws_vpc_endpoint\" \"services\" {\n  vpc_endpoint_type = \"ServiceNetwork\"\n  vpc_id            = module.vpc-info.vpc_id\n  ip_address_type   = \"ipv4\"\n```\n</details>\n\n\n### Steps to Reproduce\n\n- run terraform apply\n- run terraform appy again, observe changes applied\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/vpc"
      ],
      "created_at": "2026-01-13T14:57:27Z",
      "closed_at": "2026-01-14T18:31:58Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45946",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45950,
      "title": "Route53 Cluster Control now causes Terraform to panic, SIGSEGV and crash",
      "problem": "### Terraform and AWS Provider Version\n\n```console\n$ terraform --version\nTerraform v1.12.2\non darwin_arm64\n\nYour version of Terraform is out of date! The latest version\nis 1.14.3. You can update by downloading from https://developer.hashicorp.com/terraform/install\n\n---\n\naws >= 6.28.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* aws_route53recoverycontrolconfig_control_panel\n* Maybe others?\n\n### Expected Behavior\n\nIt should not crash all of Terraform with a segfault.\n\n### Actual Behavior\n\n```\naws_route53recoverycontrolconfig_control_panel.control_panel[0]: Still creating... [48m00s elapsed]\naws_route53recoverycontrolconfig_control_panel.control_panel[0]: Still creating... [48m10s elapsed]\naws_route53recoverycontrolconfig_control_panel.control_panel[0]: Still creating... [48m20s elapsed]\naws_route53recoverycontrolconfig_control_panel.control_panel[0]: Still creating... [48m30s elapsed]\naws_route53recoverycontrolconfig_control_panel.control_panel[0]: Still creating... [48m40s elapsed]\naws_route53recoverycontrolconfig_control_panel.control_panel[0]: Still creating... [48m50s elapsed]\naws_route53recoverycontrolconfig_control_panel.control_panel[0]: Still creating... [49m00s elapsed]\naws_route53recoverycontrolconfig_control_panel.control_panel[0]: Still creating... [49m10s elapsed]\naws_route53recoverycontrolconfig_control_panel.control_panel[0]: Still creating... [49m20s elapsed]\naws_route53recoverycontrolconfig_control_panel.control_panel[0]: Still creating... [49m30s elapsed]\naws_route53recoverycontrolconfig_control_panel.control_panel[0]: Still creating... [49m40s elapsed]\naws_route53recoverycontrolconfig_control_panel.control_panel[0]: Still creating... [49m50s elapsed]\naws_route53recoverycontrolconfig_control_panel.control_panel[0]: Still creating... [50m00s elapsed]\naws_route53recoverycontrolconfig_control_panel.control_panel[0]: Still creating... [50m10s elapsed]\naws_route53recoverycontrolconfig_control_panel.control_panel[0]: Still creating... [50m20s elapsed]\n\u2577\n\u2502 Error: Request cancelled\n\u2502 \n\u2502   with aws_route53recoverycontrolconfig_control_panel.control_panel[0],\n\u2502   on gtm.tf line 1, in resource \"aws_route53recoverycontrolconfig_control_panel\" \"control_panel\":\n\u2502    1: resource \"aws_route53recoverycontrolconfig_control_panel\" \"control_panel\" {\n\u2502 \n\u2502 The plugin.(*GRPCProvider).ApplyResourceChange request was cancelled.\n\u2575\nStack trace from the terraform-provider-aws_v6.28.0_x5 plugin:\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x1a7c001d]\ngoroutine 109 [running]:\ngithub.com/hashicorp/terraform-provider-aws/internal/service/route53recoverycontrolconfig.resourceControlPanelCreate({0x2215fe18, 0xc00315cae0}, 0xc003146fc0, {0x1f970c80, 0xc0003e33b0})\n\tgithub.com/hashicorp/terraform-provider-aws/internal/service/route53recoverycontrolconfig/control_panel.go:80 +0x27d\ngithub.com/hashicorp/terraform-provider-aws/internal/provider/sdkv2.wrapResource.(*wrappedResource).create.interceptedCRUDHandler[...].func2(0xc003146fc0, {0x1f970c80, 0xc0003e33b0})\n\tgithub.com/hashicorp/terraform-provider-aws/internal/provider/sdkv2/intercept.go:178 +0x5d5\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).create(0x2215fe18?, {0x2215fe18?, 0xc00313dbc0?}, 0xd?, {0x1f970c80?, 0xc0003e33b0?})\n\tgithub.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource.go:844 +0x7a\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).Apply(0xc002c28900, {0x2215fe18, 0xc00313dbc0}, 0xc001470750, 0xc003146ea0, {0x1f970c80, 0xc0003e33b0})\n\tgithub.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource.go:980 +0xb33\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*GRPCProviderServer).ApplyResourceChange(0xc003534be8, {0x2215fe18?, 0xc00313db00?}, 0xc00310bcc0)\n\tgithub.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/grpc_provider.go:1499 +0x1089\ngithub.com/hashicorp/terraform-plugin-mux/tf5muxserver.(*muxServer).ApplyResourceChange(0xc0035498c0, {0x2215fe18?, 0xc00313d830?}, 0xc00310bcc0)\n\tgithub.com/hashicorp/terraform-plugin-mux@v0.21.0/tf5muxserver/mux_server_ApplyResourceChange.go:36 +0x18d\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/tf5server.(*server).ApplyResourceChange(0xc003538f00, {0x2215fe18?, 0xc00313cd50?}, 0xc003140780)\n\tgithub.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/tf5server/server.go:944 +0x3b9\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/internal/tfplugin5._Provider_ApplyResourceChange_Handler({0x1f8263c0, 0xc003538f00}, {0x2215fe18, 0xc00313cd50}, 0xc003140700, 0x0)\n\tgithub.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/tfplugin5/tfplugin5_grpc.pb.go:789 +0x1a6\ngoogle.golang.org/grpc.(*Server).processUnaryRPC(0xc0034c0600, {0x2215fe18, 0xc00313ccc0}, 0xc0028e9da0, 0xc0036080c0, 0x30b85448, 0x0)\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1431 +0xfe8\ngoogle.golang.org/grpc.(*Server).handleStream(0xc0034c0600, {0x22160898, 0xc0036e6000}, 0xc0028e9da0)\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1842 +0xb95\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1()\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1061 +0x7f\ncreated by google.golang.org/grpc.(*Server).serveStreams.func2 in goroutine 36\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1072 +0x11d\nError: The terraform-provider-aws_v6.28.0_x5 plugin crashed!\nThis is always indicative of a bug within the plugin. It would be immensely\nhelpful if you could report the crash with the plugin's maintainers so that it\ncan be fixed. The output above should help diagnose the issue.\n```\n\n### Analysis\n\nThe crash occurs at line 80: https://github.com/hashicorp/terraform-provider-aws/blob/1504f96d10fb0b79b15558313ad537160b0ee3f5/internal/service/route53recoverycontrolconfig/control_panel.go#L80\n\nThis logic is __not__ correctly checking for errors, and instead assumes the following line always succeeds.\n\nhttps://github.com/hashicorp/terraform-provider-aws/blob/1504f96d10fb0b79b15558313ad537160b0ee3f5/internal/service/route53recoverycontrolconfig/control_panel.go#L79\n\n### Sample Terraform Configuration\n\n```\nresource \"aws_route53recoverycontrolconfig_control_panel\" \"control_panel\" {\n  count = var.arc_cluster_arn == null ? 0 : 1\n\n  cluster_arn = var.arc_cluster_arn\n  name        = var.name\n}\n```\n\n\n### Steps to Reproduce\n\n1. Use the `aws_route53recoverycontrolconfig_control_panel` resource\n2. Observe Terraform segfaulting and crashing\n\n### Debug Logging\n\nUnable to provide fully due to internal policy. This issue seems to be intermittent to catch though.\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\nWas previously working on a previous v6 minor version, seems to have been broken in the past couple of months as it was working at the end of November 2025. Either that or AWS has possibly changed behaviour/had some kind of outage?\n\n### Would you like to implement a fix?\n\nYes",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "crash",
        "service/route53recoverycontrolconfig"
      ],
      "created_at": "2026-01-13T17:17:02Z",
      "closed_at": "2026-01-13T20:52:53Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45950",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45973,
      "title": "Error: The terraform-provider-aws_v6.28.0_x5 plugin crashed!",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.3\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/archive v2.2.0\n+ provider registry.terraform.io/hashicorp/aws v6.28.0\n+ provider registry.terraform.io/hashicorp/time v0.13.1\n```\n\n### Affected Resource(s) or Data Source(s)\n\naws_networkmanager_global_network\naws_networkmanager_core_network_policy_document\n\n### Expected Behavior\n\naws provider plugins should load properly\n\n\n### Actual Behavior\n\n```\ndata.aws_networkmanager_core_network_policy_document.this: Reading...\n\nPlanning failed. Terraform encountered an error while generating this plan.\n\n\u2577\n\u2502 Error: Plugin did not respond\n\u2502 \n\u2502   with data.aws_networkmanager_core_network_policy_document.this,\n\u2502   on cloudwan-policy.tf line 157, in data \"aws_networkmanager_core_network_policy_document\" \"this\":\n\u2502  157: data \"aws_networkmanager_core_network_policy_document\" \"this\" {\n\u2502 \n\u2502 The plugin encountered an error, and failed to respond to the plugin.(*GRPCProvider).ReadDataSource call. The plugin logs may contain more details.\n\u2575\n\u2577\n\u2502 Error: Plugin did not respond\n\u2502 \n\u2502   with aws_networkmanager_global_network.this,\n\u2502   on cloudwan.tf line 7, in resource \"aws_networkmanager_global_network\" \"this\":\n\u2502    7: resource \"aws_networkmanager_global_network\" \"this\" {\n\u2502 \n\u2502 The plugin encountered an error, and failed to respond to the plugin.(*GRPCProvider).ReadResource call. The plugin logs may contain more details.\n\u2575\n\nStack trace from the terraform-provider-aws_v6.28.0_x5 plugin:\n\npanic: interface conversion: interface {} is nil, not map[string]interface {}\n\ngoroutine 48 [running]:\ngithub.com/hashicorp/terraform-provider-aws/internal/service/networkmanager.expandCoreNetworkPolicyAttachmentRoutingPolicyRulesAction({0x14002a73a40?, 0x14001c22fb0?, 0x1181aab3c?})\n        github.com/hashicorp/terraform-provider-aws/internal/service/networkmanager/core_network_policy_document_data_source.go:1031 +0xf4\ngithub.com/hashicorp/terraform-provider-aws/internal/service/networkmanager.expandCoreNetworkPolicyAttachmentRoutingPolicyRules({0x14002a73a10, 0x1, 0x14001c23048?}, {0x14000984587?, 0x28?})\n        github.com/hashicorp/terraform-provider-aws/internal/service/networkmanager/core_network_policy_document_data_source.go:997 +0x37c\ngithub.com/hashicorp/terraform-provider-aws/internal/service/networkmanager.dataSourceCoreNetworkPolicyDocumentRead({0x14002a26d20?, 0x0?}, 0x1400367b8c0, {0x0?, 0x11e60d820?})\n        github.com/hashicorp/terraform-provider-aws/internal/service/networkmanager/core_network_policy_document_data_source.go:647 +0x350\ngithub.com/hashicorp/terraform-provider-aws/internal/provider/sdkv2.(*sdkProvider).initialize.wrapDataSource.(*wrappedDataSource).read.interceptedCRUDHandler[...].func23(0x1400367b8c0, {0x11e60d820, 0x1400042ae10})\n        github.com/hashicorp/terraform-provider-aws/internal/provider/sdkv2/intercept.go:178 +0x4e4\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).read(0x11ea21078?, {0x11ea21078?, 0x140030c47e0?}, 0xd?, {0x11e60d820?, 0x1400042ae10?})\n        github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource.go:861 +0x64\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).ReadDataApply(0x14002482300, {0x11ea21078, 0x140030c47e0}, 0x0?, {0x11e60d820, 0x1400042ae10})\n        github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource.go:1088 +0x124\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*GRPCProviderServer).ReadDataSource(0x14003487d70, {0x11ea21078?, 0x140030c4720?}, 0x140030c4360)\n        github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/grpc_provider.go:1889 +0x5a4\ngithub.com/hashicorp/terraform-plugin-mux/tf5muxserver.(*muxServer).ReadDataSource(0x140034b2fc0, {0x11ea21078?, 0x140030c43c0?}, 0x140030c4360)\n        github.com/hashicorp/terraform-plugin-mux@v0.21.0/tf5muxserver/mux_server_ReadDataSource.go:36 +0x17c\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/tf5server.(*server).ReadDataSource(0x1400349a320, {0x11ea21078?, 0x140021aca50?}, 0x14003588550)\n        github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/tf5server/server.go:736 +0x1c4\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/internal/tfplugin5._Provider_ReadDataSource_Handler({0x11e4c56c0, 0x1400349a320}, {0x11ea21078, 0x140021aca50}, 0x14003627380, 0x0)\n        github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/tfplugin5/tfplugin5_grpc.pb.go:843 +0x1c0\ngoogle.golang.org/grpc.(*Server).processUnaryRPC(0x14003374600, {0x11ea21078, 0x140030516b0}, 0x14001acc120, 0x1400354b440, 0x12cc79030, 0x0)\n        google.golang.org/grpc@v1.75.1/server.go:1431 +0xc9c\ngoogle.golang.org/grpc.(*Server).handleStream(0x14003374600, {0x11ea21ab8, 0x14003664000}, 0x14001acc120)\n        google.golang.org/grpc@v1.75.1/server.go:1842 +0x900\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1()\n        google.golang.org/grpc@v1.75.1/server.go:1061 +0x84\ncreated by google.golang.org/grpc.(*Server).serveStreams.func2 in goroutine 27\n        google.golang.org/grpc@v1.75.1/server.go:1072 +0x138\n\nError: The terraform-provider-aws_v6.28.0_x5 plugin crashed!\n\nThis is always indicative of a bug within the plugin. It would be immensely\nhelpful if you could report the crash with the plugin's maintainers so that it\ncan be fixed. The output above should help diagnose the issue.\n```\n\n### Relevant Error/Panic Output\n\n```data.aws_networkmanager_core_network_policy_document.this: Reading...\n\nPlanning failed. Terraform encountered an error while generating this plan.\n\n\u2577\n\u2502 Error: Plugin did not respond\n\u2502 \n\u2502   with data.aws_networkmanager_core_network_policy_document.this,\n\u2502   on cloudwan-policy.tf line 157, in data \"aws_networkmanager_core_network_policy_document\" \"this\":\n\u2502  157: data \"aws_networkmanager_core_network_policy_document\" \"this\" {\n\u2502 \n\u2502 The plugin encountered an error, and failed to respond to the plugin.(*GRPCProvider).ReadDataSource call. The plugin logs may contain more details.\n\u2575\n\u2577\n\u2502 Error: Plugin did not respond\n\u2502 \n\u2502   with aws_networkmanager_global_network.this,\n\u2502   on cloudwan.tf line 7, in resource \"aws_networkmanager_global_network\" \"this\":\n\u2502    7: resource \"aws_networkmanager_global_network\" \"this\" {\n\u2502 \n\u2502 The plugin encountered an error, and failed to respond to the plugin.(*GRPCProvider).ReadResource call. The plugin logs may contain more details.\n\u2575\n\nStack trace from the terraform-provider-aws_v6.28.0_x5 plugin:\n\npanic: interface conversion: interface {} is nil, not map[string]interface {}\n\ngoroutine 48 [running]:\ngithub.com/hashicorp/terraform-provider-aws/internal/service/networkmanager.expandCoreNetworkPolicyAttachmentRoutingPolicyRulesAction({0x14002a73a40?, 0x14001c22fb0?, 0x1181aab3c?})\n        github.com/hashicorp/terraform-provider-aws/internal/service/networkmanager/core_network_policy_document_data_source.go:1031 +0xf4\ngithub.com/hashicorp/terraform-provider-aws/internal/service/networkmanager.expandCoreNetworkPolicyAttachmentRoutingPolicyRules({0x14002a73a10, 0x1, 0x14001c23048?}, {0x14000984587?, 0x28?})\n        github.com/hashicorp/terraform-provider-aws/internal/service/networkmanager/core_network_policy_document_data_source.go:997 +0x37c\ngithub.com/hashicorp/terraform-provider-aws/internal/service/networkmanager.dataSourceCoreNetworkPolicyDocumentRead({0x14002a26d20?, 0x0?}, 0x1400367b8c0, {0x0?, 0x11e60d820?})\n        github.com/hashicorp/terraform-provider-aws/internal/service/networkmanager/core_network_policy_document_data_source.go:647 +0x350\ngithub.com/hashicorp/terraform-provider-aws/internal/provider/sdkv2.(*sdkProvider).initialize.wrapDataSource.(*wrappedDataSource).read.interceptedCRUDHandler[...].func23(0x1400367b8c0, {0x11e60d820, 0x1400042ae10})\n        github.com/hashicorp/terraform-provider-aws/internal/provider/sdkv2/intercept.go:178 +0x4e4\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).read(0x11ea21078?, {0x11ea21078?, 0x140030c47e0?}, 0xd?, {0x11e60d820?, 0x1400042ae10?})\n        github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource.go:861 +0x64\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).ReadDataApply(0x14002482300, {0x11ea21078, 0x140030c47e0}, 0x0?, {0x11e60d820, 0x1400042ae10})\n        github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource.go:1088 +0x124\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*GRPCProviderServer).ReadDataSource(0x14003487d70, {0x11ea21078?, 0x140030c4720?}, 0x140030c4360)\n        github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/grpc_provider.go:1889 +0x5a4\ngithub.com/hashicorp/terraform-plugin-mux/tf5muxserver.(*muxServer).ReadDataSource(0x140034b2fc0, {0x11ea21078?, 0x140030c43c0?}, 0x140030c4360)\n        github.com/hashicorp/terraform-plugin-mux@v0.21.0/tf5muxserver/mux_server_ReadDataSource.go:36 +0x17c\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/tf5server.(*server).ReadDataSource(0x1400349a320, {0x11ea21078?, 0x140021aca50?}, 0x14003588550)\n        github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/tf5server/server.go:736 +0x1c4\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/internal/tfplugin5._Provider_ReadDataSource_Handler({0x11e4c56c0, 0x1400349a320}, {0x11ea21078, 0x140021aca50}, 0x14003627380, 0x0)\n        github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/tfplugin5/tfplugin5_grpc.pb.go:843 +0x1c0\ngoogle.golang.org/grpc.(*Server).processUnaryRPC(0x14003374600, {0x11ea21078, 0x140030516b0}, 0x14001acc120, 0x1400354b440, 0x12cc79030, 0x0)\n        google.golang.org/grpc@v1.75.1/server.go:1431 +0xc9c\ngoogle.golang.org/grpc.(*Server).handleStream(0x14003374600, {0x11ea21ab8, 0x14003664000}, 0x14001acc120)\n        google.golang.org/grpc@v1.75.1/server.go:1842 +0x900\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1()\n        google.golang.org/grpc@v1.75.1/server.go:1061 +0x84\ncreated by google.golang.org/grpc.(*Server).serveStreams.func2 in goroutine 27\n        google.golang.org/grpc@v1.75.1/server.go:1072 +0x138\n\nError: The terraform-provider-aws_v6.28.0_x5 plugin crashed!\n\nThis is always indicative of a bug within the plugin. It would be immensely\nhelpful if you could report the crash with the plugin's maintainers so that it\ncan be fixed. The output above should help diagnose the issue.\n\n\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```\n# Segments can be up to 100 characters, no spaces, and only letters/numbers\n\n  segments = {\n    prodnon = {\n      isolate_attachments = false\n    }\n\n    prodcat1 = {\n    }\n\n    prodcat2 = {\n    }\n\n    prodss = {\n    }\n\n    lowernon = {\n      isolate_attachments = false\n    }\n\n    lowercat1 = {\n    }\n\n    lowercat2 = {\n    }\n\n    sandboxshared = {\n    }\n  }\n\n  network_function_groups = {\n    LowerInspectionNFG = {\n      description = \"NFG for Lower Environment Inspection VPCs\"\n    }\n    LowerEgressNFG = {\n      description = \"NFG for Lower Environment Egress VPCs\"\n    }\n    ProdInspectionNFG = {\n      description = \"NFG for Prod Environment Inspection VPCs\"\n    }\n  }\n\n  attachment_policies_by_resource_id = {\n    \"vpc-0c6d2779004ea02e3\" = \"sandboxshared\" # egress-test - used for sandbox\n  }\n\n\n\n  total_nfg_attachment_policies = length(keys(local.network_function_groups))\n  total_attachment_policies_by_resource = length(keys(local.attachment_policies_by_resource_id))\n  total_segments = length(keys(local.segments))\n\n  segment_actions_network_function_groups_send_to = {\n    send-to-loweregressnfg = {\n      action = \"send-to\"\n      description = \"Lower to Egress\"\n      segment = \"lowernon\"\n      network_function_groups = [\"LowerEgressNFG\"]\n    }\n  }\n\n  segment_actions_network_function_groups_send_via = {\n    send-via-between-lowersnon-cat2 = {\n      action = \"send-via\"\n      mode = \"dual-hop\"\n      description = \"Lower Inspection between NON and CAT2\"\n      description = \"Intra / Inter - Inspection\"\n      segment = \"lowercat2\"\n      when_sent_to_segments = [\"lowercat2\", \"lowernon\"]\n      network_function_groups = [\"LowerInspectionNFG\"]\n    }\n    send-via-between-lowerspci = {\n      action = \"send-via\"\n      mode = \"dual-hop\"\n      description = \"Lower Inspection between CAT1 and CAT2\"\n      description = \"Intra / Inter - Inspection\"\n      segment = \"lowercat1\"\n      when_sent_to_segments = [\"lowercat1\", \"lowercat2\"]\n      network_function_groups = [\"LowerInspectionNFG\"]\n    }\n    send-via-between-prodss-any = {\n      action = \"send-via\"\n      mode = \"dual-hop\"\n      description = \"Prod Inspection between SS and Any\"\n      description = \"Intra / Inter - Inspection\"\n      segment = \"prodss\"\n      when_sent_to_segments = [\"lowernon\", \"lowercat1\", \"lowercat2\", \"prodcat1\", \"prodcat2\", \"prodnon\", \"prodss\"]\n      network_function_groups = [\"ProdInspectionNFG\"]\n    }\n    send-via-between-prodnon-cat2 = {\n      action = \"send-via\"\n      mode = \"dual-hop\"\n      description = \"Prod Inspection between NON and CAT2\"\n      description = \"Intra / Inter - Inspection\"\n      segment = \"prodcat2\"\n      when_sent_to_segments = [\"prodcat2\", \"prodnon\"]\n      network_function_groups = [\"ProdInspectionNFG\"]\n    }\n    send-via-between-prodpci = {\n      action = \"send-via\"\n      mode = \"dual-hop\"\n      description = \"Prod Inspection between CAT1 and CAT2\"\n      description = \"Intra / Inter - Inspection\"\n      segment = \"prodcat1\"\n      when_sent_to_segments = [\"prodcat1\", \"prodcat2\"]\n      network_function_groups = [\"ProdInspectionNFG\"]\n    }\n\n\n  }\n\n\n\n  segment_action_attachment_route_share = {\n  }\n\n  segment_action_static_routes = {\n  }\n\n\n\n}\n\n\ndata \"aws_networkmanager_core_network_policy_document\" \"this\" {\n\n  version = \"2025.11\" # Version of the core network policy to support Attachment routing policies, default is 2021.12\n\n  core_network_configuration {\n    vpn_ecmp_support = true\n    security_group_referencing_support = true\n    dns_support = true\n    asn_ranges       = [\"4201000000-4201000100\"]\n\n    edge_locations {\n      location = \"us-east-1\"\n      asn      = 4201000000\n    }\n\n    edge_locations {\n      location = \"us-west-2\"\n      asn      = 4201000001\n    }\n\n  }\n\n  dynamic \"segments\" {\n    for_each = keys(local.segments)\n\n    content {\n      name           = segments.value\n      description    = try(local.segments[segments.value].description, \"\")\n      edge_locations = try(local.segments[segments.value].edge_locations, [])\n\n      require_attachment_acceptance = try(local.segments[segments.value].require_attachment_acceptance, true)\n      isolate_attachments           = try(local.segments[segments.value].isolate_attachments, true)\n    }\n  }\n\n  dynamic \"network_function_groups\" {\n    for_each = local.network_function_groups\n\n    content {\n      name                          = network_function_groups.key\n      description                   = network_function_groups.value.description\n      require_attachment_acceptance = try(network_function_groups.value.require_attachment_acceptance, false)\n    }\n  }\n\n  dynamic \"attachment_policies\" {\n    for_each = keys(local.network_function_groups)\n\n    content {\n      rule_number = index(keys(local.network_function_groups), attachment_policies.value) + 1\n\n      condition_logic = \"and\"\n\n      conditions {\n        type     = \"tag-value\"\n        operator = \"equals\"\n        key      = \"NFG\"\n        value    = attachment_policies.value\n      }\n      action {\n        add_to_network_function_group = attachment_policies.value\n      }\n    }\n  }\n\n  dynamic \"attachment_policies\" {\n    for_each = keys(local.attachment_policies_by_resource_id)\n\n    content {\n      rule_number = index(keys(local.attachment_policies_by_resource_id), attachment_policies.value) + 1 + local.total_nfg_attachment_policies\n\n      condition_logic = \"and\"\n\n      conditions {\n        type     = \"attachment-type\"\n        operator = \"equals\"\n        value    = \"vpc\"\n      }\n\n      conditions {\n        type     = \"resource-id\"\n        operator = \"equals\"\n        value    = attachment_policies.value\n      }\n\n      action {\n        association_method = \"constant\"\n        segment            = local.attachment_policies_by_resource_id[attachment_policies.value]\n      }\n    }\n  }\n\n  dynamic \"attachment_policies\" {\n    for_each = keys(local.segments)\n\n    content {\n      rule_number     = index(keys(local.segments), attachment_policies.value) + 1 + local.total_attachment_policies_by_resource + local.total_nfg_attachment_policies\n\n      conditions {\n        type     = \"tag-value\"\n        operator = \"equals\"\n        key      = \"segment\"\n        value    = attachment_policies.value\n      }\n\n      action {\n        association_method = \"constant\"\n        segment            = attachment_policies.value\n      }\n    }\n  }\n\n\n\n  dynamic \"segment_actions\" {\n    for_each = local.segment_actions_network_function_groups_send_via\n\n    content {\n      action = segment_actions.value[\"action\"]\n      mode   = segment_actions.value[\"mode\"]\n      segment = segment_actions.value[\"segment\"]\n\n      when_sent_to {\n      segments = segment_actions.value[\"when_sent_to_segments\"]\n      }\n\n      via {\n        network_function_groups = segment_actions.value[\"network_function_groups\"]\n      }\n    }\n  }\n\n  attachment_routing_policy_rules {\n  rule_number     = 10\n  description     = \"Inbound routes from GCP West VPN attachments\"\n  conditions {\n    type          = \"routing-policy-label\"\n    value         = \"InboundFromGCPWest\"\n  }\n  action {\n    associate_routing_policies = []\n  }\n}\n\n\n}\n\n\n\n```\n</details>\n\n\n### Steps to Reproduce\n\nintroduce changes with following argument in resource block: aws_networkmanager_core_network_policy_document\n\nhttps://registry.terraform.io/providers/hashicorp/aws/6.27.0/docs/data-sources/networkmanager_core_network_policy_document#attachment_routing_policy_rules\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "crash",
        "service/networkmanager"
      ],
      "created_at": "2026-01-14T18:22:45Z",
      "closed_at": "2026-01-26T18:24:04Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45973",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 45998,
      "title": "[Bug]: Provider Panic/Crash with Custom S3 Region Strings (SIGSEGV in ResolveAuthSchemes)",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.3\non linux_amd64\n+ provider registry.terraform.io/hashicorp/aws v6.28.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_s3_bucket`\n\n### Expected Behavior\n\nThe provider should accept the non-standard region string without panicking, allowing the S3 client to sign requests for custom endpoints (Ceph/MinIO), consistent with the behavior in version 5.x.\n\nAt a minimum, if the SDK cannot handle the input, the provider should return a clean validation error message instead of crashing with a SIGSEGV/Runtime Panic. But again this will prevent special names (non-aws oriented) to be rejected.\n\n### Actual Behavior\n\n\nThe error comes from the new AWS SDK v2 validation: Error: operation error S3: CreateBucket, bind auth scheme params: invalid input region ...\n\n### Relevant Error/Panic Output\n\n```console\nStack trace from the terraform-provider-aws_6.28.0 plugin:\n\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0xf69fe3]\n\ngoroutine 69 [running]:\ngithub.com/aws/aws-sdk-go-v2/service/s3.(*endpointAuthResolver).ResolveAuthSchemes(0xc001de0ba0?, {0x20ae8848?, 0xc002df6300?}, 0x0?)\n    github.com/aws/aws-sdk-go-v2/service/s3@v1.90.2/endpoint_auth_resolver.go:22 +0x23\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nterraform {\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"6.28.0\" # Problem occurs on v6.x\n    }\n  }\n}\n\nprovider \"aws\" {\n  # The strict validation in SDK v2 rejects this custom region format\n  region                      = \"ceph-objectstore-my-own-cloud:region-very-premium\"\n  access_key                  = \"test\"\n  secret_key                  = \"test\"\n  skip_credentials_validation = true\n  skip_requesting_account_id  = true\n  skip_metadata_api_check     = true\n  s3_use_path_style           = true\n\n  endpoints {\n    s3 = \"https://ceph.example.com\"\n  }\n}\n\nresource \"aws_s3_bucket\" \"example\" {\n  bucket = \"example-bucket-test\"\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Create a main.tf using hashicorp/aws version `6.21.0 `(or later).\n\n2. Configure the `provider \"aws\" `block with a region string that includes a colon (e.g.,` region = \"ceph-objectstore:region-very-premium`\").\n\n3. Configure a custom S3 endpoint (e.g., endpoints { `s3 = \"http://localhost:9000\" `}).\n\n4. Define any `aws_s3_bucket` resource.\n\n5. Run terraform init and terraform apply.\n\n6. **Observation**: The provider panics with a segmentation fault immediately during the creation step.\n\nPS. it is not necessary to have Ceph or Minio, the problem is on the validation side (characters)\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n14:41:59 aws_s3_bucket.buildpacks_ydl: Creating...\n14:41:59 aws_s3_bucket.droplets_ydl: Creating...\n14:41:59 aws_s3_bucket.packages_ydl: Creating...\n14:41:59 aws_s3_bucket.resources_ydl: Creating...\n14:41:59 \u2577\n14:41:59 \u2502 Error: creating S3 Bucket (buildpacks-ydl): operation error S3: CreateBucket, bind auth scheme params: invalid input region ceph-objectstore-one:region-very-premium\n14:41:59 \u2502\n14:41:59 \u2502 with aws_s3_bucket.buildpacks_ydl,\n14:41:59 \u2502 on manifest.tf line 46, in resource \"aws_s3_bucket\" \"buildpacks_ydl\":\n14:41:59 \u2502 46: resource \"aws_s3_bucket\" \"buildpacks_ydl\" {\n14:41:59 \u2502\n14:41:59 \u2575\n14:41:59 \u2577\n14:41:59 \u2502 Error: creating S3 Bucket (droplets-ydl): operation error S3: CreateBucket, bind auth scheme params: invalid input region ceph-objectstore-one:region-very-premium\n14:41:59 \u2502\n14:41:59 \u2502 with aws_s3_bucket.droplets_ydl,\n14:41:59 \u2502 on manifest.tf line 60, in resource \"aws_s3_bucket\" \"droplets_ydl\":\n14:41:59 \u2502 60: resource \"aws_s3_bucket\" \"droplets_ydl\" {\n14:41:59 \u2502\n14:41:59 \u2575\n14:41:59 \u2577\n14:41:59 \u2502 Error: creating S3 Bucket (packages-ydl): operation error S3: CreateBucket, bind auth scheme params: invalid input region ceph-objectstore-one:region-very-premium\n14:41:59 \u2502\n14:41:59 \u2502 with aws_s3_bucket.packages_ydl,\n14:41:59 \u2502 on manifest.tf line 74, in resource \"aws_s3_bucket\" \"packages_ydl\":\n14:41:59 \u2502 74: resource \"aws_s3_bucket\" \"packages_ydl\" {\n14:41:59 \u2502\n14:41:59 \u2575\n14:41:59 \u2577\n14:41:59 \u2502 Error: creating S3 Bucket (resources-ydl): operation error S3: CreateBucket, bind auth scheme params: invalid input region ceph-objectstore-one:region-very-premium\n14:41:59 \u2502\n14:41:59 \u2502 with aws_s3_bucket.resources_ydl,\n14:41:59 \u2502 on manifest.tf line 88, in resource \"aws_s3_bucket\" \"resources_ydl\":\n14:41:59 \u2502 88: resource \"aws_s3_bucket\" \"resources_ydl\" {\n14:41:59 \u2502\n14:41:59 \u2575\n14:41:59 [2026-01-13T12:41:59+00:00] deleting users with suffix tmp-76613\n14:42:02 [2026-01-13T12:42:02+00:00] Deleting Users\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\nDescription: Current Behavior After upgrading to hashicorp/aws v6.x, S3-compatible backends (specifically Ceph) that rely on internal routing identifiers in the region field (e.g., ceph-my-objectstore:region-very-premium) now fail immediately during the plan/apply phase.\n\nThe error comes from the new AWS SDK v2 validation: Error: operation error S3: CreateBucket, bind auth scheme params: invalid input region ...\n\nExpected Behavior The provider should allow non-standard region strings when a custom endpoints URL is configured. This worked correctly in provider v5.x (which used SDK v1), allowing us to sign requests for Ceph clusters that require specific routing keys in the region field.\n\nSteps to Reproduce\n\nConfigure provider with v6.x\n\nSet skip_region_validation = true (Note: This flag currently fails to bypass the new SDK's input validation)\n\nSet region = \"ceph:custom-very-region\"\n\nRun terraform plan\n\nContext This is a regression caused by the v6 SDK upgrade. The provider currently enforces AWS-specific naming rules (RFC 1123-style regions) even on custom endpoints, rendering the endpoints configuration unusable for many existing Ceph/OpenStack implementations.\n\nProposed Solution When a custom S3 endpoint is provided, the provider should:\n\nInitialize the SDK with a dummy compliant region (e.g. us-east-1) to pass the strict bind auth scheme check.\n\nUse a middleware to inject the original \"dirty\" region string back into the context for signing, restoring v5 compatibility.\n\nThis is a Ceph storage cluster which requires a specific region string in the Authorization header for routing purposes. This configuration functioned correctly in terraform-provider-aws v5.x.\n\n### Would you like to implement a fix?\n\nYes",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "crash",
        "service/s3"
      ],
      "created_at": "2026-01-16T14:47:00Z",
      "closed_at": "2026-01-16T18:34:11Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/45998",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46011,
      "title": "Error when changing an aws_lb_target_group's health_check protocol",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.3\non linux_amd64\n+ provider registry.terraform.io/hashicorp/aws v6.28.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_lb_target_group`\n\n### Expected Behavior\n\nIf an `aws_lb_target_group` is applied with a `health_check` block that has a `protocol` argument of \"HTTP\", and then the argument is changed to \"TCP\", the Terraform provider should be able to change the protocol of the health check configuration.\n\n### Actual Behavior\n\nThe Terraform provider gives an error that can only be resolved by manually using the aws console or similar to modify the health check  so it matches the Terraform configuration and then doing a plan that refreshes state (that doesn't have `-refresh=false` set), or deleting the state with `terraform state rm`.\n\n### Relevant Error/Panic Output\n\n```console\n$ tf apply -no-color\naws_vpc.this: Refreshing state... [id=vpc-foo]\naws_lb_target_group.this: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-2:foo:targetgroup/foo/foo]\n\nPlanning failed. Terraform encountered an error while generating this plan.\n\n\nError: Invalid Attribute Combination\n\nAttribute \"health_check[0].matcher\" cannot be specified when \"health_check[0].protocol\" is \"TCP\".\n\nPath: health_check[0].matcher\n\n  with aws_lb_target_group.this,\n  on main.tf line 5, in resource \"aws_lb_target_group\" \"this\":\n   5: resource \"aws_lb_target_group\" \"this\" {\n\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>First configuration</summary>\n\n```hcl\nresource \"aws_vpc\" \"this\" {\n  cidr_block = \"10.0.0.0/16\"\n}\n\nresource \"aws_lb_target_group\" \"this\" {\n  port = 80\n  protocol = \"TCP\"\n  vpc_id = aws_vpc.this.id\n\n  health_check {\n    protocol = \"HTTP\"\n    path = \"/\"\n    matcher = 200\n  }\n}\n\n```\n</details>\n\n<details open>\n<summary>Second configuration</summary>\n\n```hcl\nresource \"aws_vpc\" \"this\" {\n  cidr_block = \"10.0.0.0/16\"\n}\n\nresource \"aws_lb_target_group\" \"this\" {\n  port = 80\n  protocol = \"TCP\"\n  vpc_id = aws_vpc.this.id\n\n  health_check {\n    protocol = \"TCP\"\n  }\n}\n\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Create a Terrraform configuration that includes an `aws_lb_target_group` with a `health_check` that has the `protocol` argument set to \"HTTP\" (See the first example above).\n2. Apply the configuration.\n3. Modify the configuration so the `protocol` for the `health_check` is now \"TCP\" (See the second example above).\n4. Attempt to apply the configuration. An error will be printed.\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n2026-01-16T15:54:57.867-0800 [INFO]  Terraform version: 1.14.3\n2026-01-16T15:54:57.867-0800 [DEBUG] using github.com/hashicorp/go-tfe v1.94.0\n2026-01-16T15:54:57.867-0800 [DEBUG] using github.com/hashicorp/hcl/v2 v2.24.0\n2026-01-16T15:54:57.867-0800 [DEBUG] using github.com/hashicorp/terraform-svchost v0.1.1\n2026-01-16T15:54:57.867-0800 [DEBUG] using github.com/zclconf/go-cty v1.16.3\n2026-01-16T15:54:57.867-0800 [INFO]  Go runtime version: go1.25.5\n2026-01-16T15:54:57.867-0800 [INFO]  CLI args: []string{\"terraform\", \"apply\", \"-no-color\"}\n2026-01-16T15:54:57.867-0800 [DEBUG] Attempting to open CLI config file: /home/lwaay/.terraformrc\n2026-01-16T15:54:57.867-0800 [INFO]  Loading CLI configuration from /home/lwaay/.terraformrc\n2026-01-16T15:54:57.867-0800 [DEBUG] ignoring non-existing provider search directory terraform.d/plugins\n2026-01-16T15:54:57.867-0800 [DEBUG] ignoring non-existing provider search directory /home/lwaay/.terraform.d/plugins\n2026-01-16T15:54:57.867-0800 [DEBUG] ignoring non-existing provider search directory /home/lwaay/.local/share/terraform/plugins\n2026-01-16T15:54:57.867-0800 [DEBUG] ignoring non-existing provider search directory /usr/share/gnome/terraform/plugins\n2026-01-16T15:54:57.867-0800 [DEBUG] ignoring non-existing provider search directory /usr/local/share/terraform/plugins\n2026-01-16T15:54:57.867-0800 [DEBUG] ignoring non-existing provider search directory /usr/share/terraform/plugins\n2026-01-16T15:54:57.867-0800 [DEBUG] ignoring non-existing provider search directory /var/lib/snapd/desktop/terraform/plugins\n2026-01-16T15:54:57.868-0800 [INFO]  CLI command args: []string{\"apply\", \"-no-color\"}\n2026-01-16T15:54:58.371-0800 [DEBUG] checking for provisioner in \".\"\n2026-01-16T15:54:58.371-0800 [DEBUG] checking for provisioner in \"/home/lwaay/.terraform.versions\"\n2026-01-16T15:54:58.372-0800 [INFO]  backend/local: starting Apply operation\n2026-01-16T15:54:58.373-0800 [DEBUG] created provider logger: level=debug\n2026-01-16T15:54:58.373-0800 [INFO]  provider: configuring client automatic mTLS\n2026-01-16T15:54:58.382-0800 [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 args=[\".terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5\"]\n2026-01-16T15:54:58.383-0800 [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 pid=26717\n2026-01-16T15:54:58.383-0800 [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5\n2026-01-16T15:54:58.466-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Starting github.com/hashicorp/terraform-provider-aws@6.28.0 (go1.25.5)...\n2026-01-16T15:54:58.466-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Creating Terraform AWS Provider (SDKv2-style)...\n2026-01-16T15:54:58.492-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Initializing Terraform AWS Provider (SDKv2-style)...\n2026-01-16T15:54:58.512-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Creating Terraform AWS Provider (Framework-style)...\n2026-01-16T15:54:58.524-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Initializing Terraform AWS Provider (Framework-style)...\n2026-01-16T15:54:58.525-0800 [INFO]  provider.terraform-provider-aws_v6.28.0_x5: configuring server automatic mTLS: timestamp=2026-01-16T15:54:58.525-0800\n2026-01-16T15:54:58.533-0800 [DEBUG] provider: using plugin: version=5\n2026-01-16T15:54:58.533-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: plugin address: address=/tmp/plugin2918927497 network=unix timestamp=2026-01-16T15:54:58.533-0800\n2026-01-16T15:54:59.294-0800 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2026-01-16T15:54:59.303-0800 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 id=26717\n2026-01-16T15:54:59.303-0800 [DEBUG] provider: plugin exited\n2026-01-16T15:54:59.303-0800 [DEBUG] Building and walking validate graph\n2026-01-16T15:54:59.303-0800 [DEBUG] ProviderTransformer: \"aws_vpc.this\" (*terraform.NodeValidatableResource) needs provider[\"registry.terraform.io/hashicorp/aws\"]\n2026-01-16T15:54:59.303-0800 [DEBUG] ProviderTransformer: \"aws_lb_target_group.this\" (*terraform.NodeValidatableResource) needs provider[\"registry.terraform.io/hashicorp/aws\"]\n2026-01-16T15:54:59.304-0800 [DEBUG] ReferenceTransformer: \"aws_vpc.this\" references: []\n2026-01-16T15:54:59.304-0800 [DEBUG] ReferenceTransformer: \"aws_lb_target_group.this\" references: [aws_vpc.this]\n2026-01-16T15:54:59.304-0800 [DEBUG] ReferenceTransformer: \"provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" references: []\n2026-01-16T15:54:59.304-0800 [DEBUG] Starting graph walk: walkValidate\n2026-01-16T15:54:59.304-0800 [DEBUG] created provider logger: level=debug\n2026-01-16T15:54:59.304-0800 [INFO]  provider: configuring client automatic mTLS\n2026-01-16T15:54:59.308-0800 [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 args=[\".terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5\"]\n2026-01-16T15:54:59.308-0800 [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 pid=26747\n2026-01-16T15:54:59.308-0800 [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5\n2026-01-16T15:54:59.385-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Starting github.com/hashicorp/terraform-provider-aws@6.28.0 (go1.25.5)...\n2026-01-16T15:54:59.385-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Creating Terraform AWS Provider (SDKv2-style)...\n2026-01-16T15:54:59.406-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Initializing Terraform AWS Provider (SDKv2-style)...\n2026-01-16T15:54:59.420-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Creating Terraform AWS Provider (Framework-style)...\n2026-01-16T15:54:59.433-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Initializing Terraform AWS Provider (Framework-style)...\n2026-01-16T15:54:59.434-0800 [INFO]  provider.terraform-provider-aws_v6.28.0_x5: configuring server automatic mTLS: timestamp=2026-01-16T15:54:59.434-0800\n2026-01-16T15:54:59.442-0800 [DEBUG] provider: using plugin: version=5\n2026-01-16T15:54:59.442-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: plugin address: address=/tmp/plugin811151592 network=unix timestamp=2026-01-16T15:54:59.442-0800\n2026-01-16T15:54:59.462-0800 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2026-01-16T15:54:59.467-0800 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 id=26747\n2026-01-16T15:54:59.467-0800 [DEBUG] provider: plugin exited\n2026-01-16T15:54:59.467-0800 [INFO]  backend/local: apply calling Plan\n2026-01-16T15:54:59.467-0800 [DEBUG] Building and walking plan graph for NormalMode\n2026-01-16T15:54:59.467-0800 [DEBUG] ProviderTransformer: \"aws_lb_target_group.this (expand)\" (*terraform.nodeExpandPlannableResource) needs provider[\"registry.terraform.io/hashicorp/aws\"]\n2026-01-16T15:54:59.467-0800 [DEBUG] ProviderTransformer: \"aws_vpc.this (expand)\" (*terraform.nodeExpandPlannableResource) needs provider[\"registry.terraform.io/hashicorp/aws\"]\n2026-01-16T15:54:59.467-0800 [DEBUG] ReferenceTransformer: \"aws_lb_target_group.this (expand)\" references: [aws_vpc.this (expand)]\n2026-01-16T15:54:59.468-0800 [DEBUG] ReferenceTransformer: \"aws_vpc.this (expand)\" references: []\n2026-01-16T15:54:59.468-0800 [DEBUG] ReferenceTransformer: \"provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" references: []\n2026-01-16T15:54:59.468-0800 [DEBUG] Starting graph walk: walkPlan\n2026-01-16T15:54:59.468-0800 [DEBUG] created provider logger: level=debug\n2026-01-16T15:54:59.468-0800 [INFO]  provider: configuring client automatic mTLS\n2026-01-16T15:54:59.471-0800 [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 args=[\".terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5\"]\n2026-01-16T15:54:59.471-0800 [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 pid=26766\n2026-01-16T15:54:59.471-0800 [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5\n2026-01-16T15:54:59.547-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Starting github.com/hashicorp/terraform-provider-aws@6.28.0 (go1.25.5)...\n2026-01-16T15:54:59.547-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Creating Terraform AWS Provider (SDKv2-style)...\n2026-01-16T15:54:59.569-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Initializing Terraform AWS Provider (SDKv2-style)...\n2026-01-16T15:54:59.583-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Creating Terraform AWS Provider (Framework-style)...\n2026-01-16T15:54:59.596-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Initializing Terraform AWS Provider (Framework-style)...\n2026-01-16T15:54:59.597-0800 [INFO]  provider.terraform-provider-aws_v6.28.0_x5: configuring server automatic mTLS: timestamp=2026-01-16T15:54:59.597-0800\n2026-01-16T15:54:59.604-0800 [DEBUG] provider: using plugin: version=5\n2026-01-16T15:54:59.604-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: plugin address: address=/tmp/plugin619055511 network=unix timestamp=2026-01-16T15:54:59.604-0800\n2026-01-16T15:54:59.675-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Configuring Terraform AWS Provider: tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=0b1f1324-6db7-a63d-ac0f-bc22bf225c4f tf_rpc=ConfigureProvider @caller=github.com/hashicorp/terraform-provider-aws/internal/conns/config.go:147 @module=aws tf_mux_provider=\"*schema.GRPCProviderServer\" timestamp=2026-01-16T15:54:59.675-0800\n2026-01-16T15:54:59.675-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Resolving credentials provider: @module=aws.aws-base tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=0b1f1324-6db7-a63d-ac0f-bc22bf225c4f @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 tf_rpc=ConfigureProvider timestamp=2026-01-16T15:54:59.675-0800\n2026-01-16T15:54:59.676-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Loading configuration: tf_req_id=0b1f1324-6db7-a63d-ac0f-bc22bf225c4f @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 @module=aws.aws-base tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ConfigureProvider timestamp=2026-01-16T15:54:59.675-0800\n2026-01-16T15:54:59.676-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Retrieving credentials: @module=aws.aws-base tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=0b1f1324-6db7-a63d-ac0f-bc22bf225c4f @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 tf_rpc=ConfigureProvider timestamp=2026-01-16T15:54:59.676-0800\n2026-01-16T15:54:59.676-0800 [INFO]  provider.terraform-provider-aws_v6.28.0_x5: Retrieved credentials: tf_aws.credentials_source=\"SharedConfigCredentials: /home/lwaay/.aws/credentials\" tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=0b1f1324-6db7-a63d-ac0f-bc22bf225c4f tf_rpc=ConfigureProvider @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:39 @module=aws.aws-base timestamp=2026-01-16T15:54:59.676-0800\n2026-01-16T15:54:59.676-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Loading configuration: @module=aws.aws-base tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ConfigureProvider tf_mux_provider=\"*schema.GRPCProviderServer\" tf_req_id=0b1f1324-6db7-a63d-ac0f-bc22bf225c4f @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 timestamp=2026-01-16T15:54:59.676-0800\n2026-01-16T15:54:59.676-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Retrieving AWS account details: tf_rpc=ConfigureProvider @module=aws tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=0b1f1324-6db7-a63d-ac0f-bc22bf225c4f @caller=github.com/hashicorp/terraform-provider-aws/internal/conns/config.go:171 timestamp=2026-01-16T15:54:59.676-0800\n2026-01-16T15:54:59.676-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: Retrieving caller identity from STS: tf_req_id=0b1f1324-6db7-a63d-ac0f-bc22bf225c4f tf_rpc=ConfigureProvider tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 @module=aws.aws-base timestamp=2026-01-16T15:54:59.676-0800\n2026-01-16T15:54:59.677-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Request Sent: http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=AKIA************NAPP/20260116/us-east-2/sts/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date, Signature=*****\" http.request_content_length=43 http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.14.3 (+https://www.terraform.io) terraform-provider-aws/6.28.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/linux lang/go#1.25.5 md/GOOS#linux md/GOARCH#amd64 api/sts#1.41.5 m/n\" net.peer.name=sts.us-east-2.amazonaws.com\n  http.request.body=\n  | Action=GetCallerIdentity&Version=2011-06-15\n   http.request.header.amz_sdk_invocation_id=2ba322b3-d94b-442c-8ba0-6f9ffc44f04b rpc.method=GetCallerIdentity rpc.system=aws-api tf_aws.signing_region=\"\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ConfigureProvider http.method=POST http.request.header.content_type=application/x-www-form-urlencoded rpc.service=STS tf_mux_provider=\"*schema.GRPCProviderServer\" tf_req_id=0b1f1324-6db7-a63d-ac0f-bc22bf225c4f @module=aws.aws-base aws.region=us-east-2 http.request.header.x_amz_date=20260116T235459Z http.url=https://sts.us-east-2.amazonaws.com/ tf_aws.sdk=aws-sdk-go-v2 @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 http.request.header.amz_sdk_request=\"attempt=1; max=25\" timestamp=2026-01-16T15:54:59.677-0800\n2026-01-16T15:54:59.993-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Response Received: http.response.header.x_amzn_requestid=efd69d3f-3738-4cbc-ab11-a6fbf245271a rpc.method=GetCallerIdentity rpc.service=STS rpc.system=aws-api tf_aws.sdk=aws-sdk-go-v2 http.response.header.content_type=text/xml http.response.header.date=\"Fri, 16 Jan 2026 23:55:00 GMT\" http.status_code=200 tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=0b1f1324-6db7-a63d-ac0f-bc22bf225c4f @module=aws.aws-base http.duration=315 http.response.header.x_amz_sts_extended_request_id=MTp1cy1lYXN0LTI6UzoxNzY4NjA3NzAwNTE0OlI6ejZwc2Jtcnc= tf_aws.signing_region=\"\"\n  http.response.body=\n  | <GetCallerIdentityResponse xmlns=\"https://sts.amazonaws.com/doc/2011-06-15/\">\n  |   <GetCallerIdentityResult>\n  |     <Arn>arn:aws:iam::redacted:user/luka.waymouth</Arn>\n  |     <UserId>AIDA*************TXXU</UserId>\n  |     <Account>redacted</Account>\n  |   </GetCallerIdentityResult>\n  |   <ResponseMetadata>\n  |     <RequestId>efd69d3f-3738-4cbc-ab11-a6fbf245271a</RequestId>\n  |   </ResponseMetadata>\n  | </GetCallerIdentityResponse>\n   http.response_content_length=410 tf_rpc=ConfigureProvider @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:47 aws.region=us-east-2 timestamp=2026-01-16T15:54:59.993-0800\n2026-01-16T15:54:59.993-0800 [INFO]  provider.terraform-provider-aws_v6.28.0_x5: Retrieved caller identity from STS: tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ConfigureProvider @module=aws.aws-base tf_req_id=0b1f1324-6db7-a63d-ac0f-bc22bf225c4f @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:39 tf_mux_provider=\"*schema.GRPCProviderServer\" timestamp=2026-01-16T15:54:59.993-0800\n2026-01-16T15:54:59.995-0800 [DEBUG] ReferenceTransformer: \"aws_vpc.this\" references: []\naws_vpc.this: Refreshing state... [id=vpc-042dad1d9d9cb16be]\n2026-01-16T15:55:00.008-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Request Sent: aws.region=us-east-2 http.method=POST\n  http.request.body=\n  | Action=DescribeVpcs&Version=2016-11-15&VpcId.1=vpc-042dad1d9d9cb16be\n   http.request.header.amz_sdk_request=\"attempt=1; max=25\" http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.14.3 (+https://www.terraform.io) terraform-provider-aws/6.28.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/linux lang/go#1.25.5 md/GOOS#linux md/GOARCH#amd64 api/ec2#1.279.0 m/C,n\" @module=aws http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=AKIA************NAPP/20260116/us-east-2/ec2/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date, Signature=*****\" net.peer.name=ec2.us-east-2.amazonaws.com rpc.service=EC2 tf_aws.signing_region=\"\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=ec24ec7c-82f2-a249-9afb-dfd156a958e9 tf_resource_type=aws_vpc @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 http.request.header.amz_sdk_invocation_id=649bf81e-b153-4c6f-bb99-599396291661 http.url=https://ec2.us-east-2.amazonaws.com/ rpc.system=aws-api tf_aws.sdk=aws-sdk-go-v2 http.request_content_length=68 rpc.method=DescribeVpcs tf_mux_provider=\"*schema.GRPCProviderServer\" tf_rpc=ReadResource http.request.header.content_type=application/x-www-form-urlencoded http.request.header.x_amz_date=20260116T235500Z timestamp=2026-01-16T15:55:00.008-0800\n2026-01-16T15:55:00.332-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Response Received: http.response.header.x_amzn_requestid=b8d71815-207c-4e0d-bf90-5eb099fb7557 @module=aws http.response.header.cache_control=\"no-cache, no-store\" http.response.header.content_type=text/xml;charset=UTF-8 http.response_content_length=1124 http.status_code=200 tf_rpc=ReadResource http.duration=324 http.response.header.server=AmazonEC2 rpc.service=EC2 tf_aws.sdk=aws-sdk-go-v2 tf_aws.signing_region=\"\" tf_provider_addr=registry.terraform.io/hashicorp/aws aws.region=us-east-2\n  http.response.body=\n  | <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n  | <DescribeVpcsResponse xmlns=\"http://ec2.amazonaws.com/doc/2016-11-15/\">\n  |     <requestId>b8d71815-207c-4e0d-bf90-5eb099fb7557</requestId>\n  |     <vpcSet>\n  |         <item>\n  |             <vpcId>vpc-042dad1d9d9cb16be</vpcId>\n  |             <ownerId>redacted</ownerId>\n  |             <state>available</state>\n  |             <cidrBlock>10.0.0.0/16</cidrBlock>\n  |             <cidrBlockAssociationSet>\n  |                 <item>\n  |                     <cidrBlock>10.0.0.0/16</cidrBlock>\n  |                     <associationId>vpc-cidr-assoc-074e5d428bcb76efb</associationId>\n  |                     <cidrBlockState>\n  |                         <state>associated</state>\n  |                     </cidrBlockState>\n  |                 </item>\n  |             </cidrBlockAssociationSet>\n  |             <dhcpOptionsId>dopt-7686cb1d</dhcpOptionsId>\n  |             <instanceTenancy>default</instanceTenancy>\n  |             <isDefault>false</isDefault>\n  |             <blockPublicAccessStates>\n  |                 <internetGatewayBlockMode>off</internetGatewayBlockMode>\n  |             </blockPublicAccessStates>\n  |         </item>\n  |     </vpcSet>\n  | </DescribeVpcsResponse>\n   http.response.header.date=\"Fri, 16 Jan 2026 23:55:00 GMT\" http.response.header.strict_transport_security=\"max-age=31536000; includeSubDomains\" tf_req_id=ec24ec7c-82f2-a249-9afb-dfd156a958e9 tf_resource_type=aws_vpc @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 rpc.method=DescribeVpcs rpc.system=aws-api tf_mux_provider=\"*schema.GRPCProviderServer\" timestamp=2026-01-16T15:55:00.332-0800\n2026-01-16T15:55:00.333-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Request Sent: http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=AKIA************NAPP/20260116/us-east-2/ec2/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date, Signature=*****\" http.url=https://ec2.us-east-2.amazonaws.com/ net.peer.name=ec2.us-east-2.amazonaws.com rpc.system=aws-api tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=ec24ec7c-82f2-a249-9afb-dfd156a958e9 tf_rpc=ReadResource http.method=POST\n  http.request.body=\n  | Action=DescribeVpcAttribute&Attribute=enableDnsHostnames&Version=2016-11-15&VpcId=vpc-042dad1d9d9cb16be\n   http.request.header.amz_sdk_invocation_id=18af7045-d020-46f2-82c6-29fa2cd1bb6c http.request.header.amz_sdk_request=\"attempt=1; max=25\" http.request.header.content_type=application/x-www-form-urlencoded rpc.service=EC2 tf_aws.sdk=aws-sdk-go-v2 tf_aws.signing_region=\"\" @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 aws.region=us-east-2 http.request_content_length=103 http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.14.3 (+https://www.terraform.io) terraform-provider-aws/6.28.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/linux lang/go#1.25.5 md/GOOS#linux md/GOARCH#amd64 api/ec2#1.279.0 m/n\" tf_mux_provider=\"*schema.GRPCProviderServer\" tf_resource_type=aws_vpc @module=aws http.request.header.x_amz_date=20260116T235500Z rpc.method=DescribeVpcAttribute timestamp=2026-01-16T15:55:00.333-0800\n2026-01-16T15:55:00.431-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Response Received: tf_mux_provider=\"*schema.GRPCProviderServer\" http.duration=97 http.response.header.strict_transport_security=\"max-age=31536000; includeSubDomains\" http.response_content_length=336 http.status_code=200 tf_aws.signing_region=\"\" tf_resource_type=aws_vpc\n  http.response.body=\n  | <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n  | <DescribeVpcAttributeResponse xmlns=\"http://ec2.amazonaws.com/doc/2016-11-15/\">\n  |     <requestId>117d0db6-6e50-4cba-a42f-28e23dd8e0f3</requestId>\n  |     <vpcId>vpc-042dad1d9d9cb16be</vpcId>\n  |     <enableDnsHostnames>\n  |         <value>false</value>\n  |     </enableDnsHostnames>\n  | </DescribeVpcAttributeResponse>\n   http.response.header.date=\"Fri, 16 Jan 2026 23:55:01 GMT\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ReadResource @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 @module=aws http.response.header.cache_control=\"no-cache, no-store\" http.response.header.server=AmazonEC2 http.response.header.x_amzn_requestid=117d0db6-6e50-4cba-a42f-28e23dd8e0f3 rpc.system=aws-api tf_req_id=ec24ec7c-82f2-a249-9afb-dfd156a958e9 aws.region=us-east-2 http.response.header.content_type=text/xml;charset=UTF-8 rpc.method=DescribeVpcAttribute rpc.service=EC2 tf_aws.sdk=aws-sdk-go-v2 timestamp=2026-01-16T15:55:00.431-0800\n2026-01-16T15:55:00.432-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Request Sent: rpc.service=EC2 rpc.system=aws-api @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 aws.region=us-east-2 http.method=POST http.request.header.x_amz_date=20260116T235500Z http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.14.3 (+https://www.terraform.io) terraform-provider-aws/6.28.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/linux lang/go#1.25.5 md/GOOS#linux md/GOARCH#amd64 api/ec2#1.279.0 m/n\" tf_aws.sdk=aws-sdk-go-v2 tf_aws.signing_region=\"\" tf_mux_provider=\"*schema.GRPCProviderServer\" @module=aws\n  http.request.body=\n  | Action=DescribeVpcAttribute&Attribute=enableDnsSupport&Version=2016-11-15&VpcId=vpc-042dad1d9d9cb16be\n   http.url=https://ec2.us-east-2.amazonaws.com/ rpc.method=DescribeVpcAttribute tf_req_id=ec24ec7c-82f2-a249-9afb-dfd156a958e9 http.request.header.amz_sdk_request=\"attempt=1; max=25\" http.request_content_length=101 tf_provider_addr=registry.terraform.io/hashicorp/aws tf_resource_type=aws_vpc tf_rpc=ReadResource http.request.header.amz_sdk_invocation_id=c00adec1-1f09-42d7-9eeb-65c37c3b8c26 http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=AKIA************NAPP/20260116/us-east-2/ec2/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date, Signature=*****\" http.request.header.content_type=application/x-www-form-urlencoded net.peer.name=ec2.us-east-2.amazonaws.com timestamp=2026-01-16T15:55:00.432-0800\n2026-01-16T15:55:00.530-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Response Received: http.response.header.x_amzn_requestid=061c39ca-b410-4d2c-9103-1cef8338bf17 http.status_code=200 tf_req_id=ec24ec7c-82f2-a249-9afb-dfd156a958e9 tf_rpc=ReadResource\n  http.response.body=\n  | <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n  | <DescribeVpcAttributeResponse xmlns=\"http://ec2.amazonaws.com/doc/2016-11-15/\">\n  |     <requestId>061c39ca-b410-4d2c-9103-1cef8338bf17</requestId>\n  |     <vpcId>vpc-042dad1d9d9cb16be</vpcId>\n  |     <enableDnsSupport>\n  |         <value>true</value>\n  |     </enableDnsSupport>\n  | </DescribeVpcAttributeResponse>\n   http.response.header.content_type=text/xml;charset=UTF-8 http.response.header.date=\"Fri, 16 Jan 2026 23:55:01 GMT\" http.response.header.server=AmazonEC2 rpc.service=EC2 @module=aws http.response.header.cache_control=\"no-cache, no-store\" http.response.header.strict_transport_security=\"max-age=31536000; includeSubDomains\" http.response_content_length=331 tf_aws.sdk=aws-sdk-go-v2 tf_provider_addr=registry.terraform.io/hashicorp/aws tf_resource_type=aws_vpc @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 http.duration=97 rpc.method=DescribeVpcAttribute rpc.system=aws-api tf_aws.signing_region=\"\" tf_mux_provider=\"*schema.GRPCProviderServer\" aws.region=us-east-2 timestamp=2026-01-16T15:55:00.530-0800\n2026-01-16T15:55:00.532-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Request Sent:\n  http.request.body=\n  | Action=DescribeVpcAttribute&Attribute=enableNetworkAddressUsageMetrics&Version=2016-11-15&VpcId=vpc-042dad1d9d9cb16be\n   http.request.header.amz_sdk_invocation_id=d3f1a446-1254-401f-b757-79c02b361351 tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=ec24ec7c-82f2-a249-9afb-dfd156a958e9 http.request.header.x_amz_date=20260116T235500Z http.request.header.amz_sdk_request=\"attempt=1; max=25\" http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=AKIA************NAPP/20260116/us-east-2/ec2/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date, Signature=*****\" http.request.header.content_type=application/x-www-form-urlencoded rpc.method=DescribeVpcAttribute tf_aws.sdk=aws-sdk-go-v2 tf_rpc=ReadResource http.request_content_length=117 http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.14.3 (+https://www.terraform.io) terraform-provider-aws/6.28.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/linux lang/go#1.25.5 md/GOOS#linux md/GOARCH#amd64 api/ec2#1.279.0 m/n\" rpc.service=EC2 tf_resource_type=aws_vpc @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 aws.region=us-east-2 http.method=POST http.url=https://ec2.us-east-2.amazonaws.com/ net.peer.name=ec2.us-east-2.amazonaws.com rpc.system=aws-api tf_aws.signing_region=\"\" @module=aws timestamp=2026-01-16T15:55:00.531-0800\n2026-01-16T15:55:00.639-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Response Received: http.status_code=200 tf_aws.signing_region=\"\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_rpc=ReadResource http.response.header.x_amzn_requestid=25fc7c22-297e-495e-8ba0-5f85601576a2 @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 @module=aws http.response.header.strict_transport_security=\"max-age=31536000; includeSubDomains\" rpc.system=aws-api tf_resource_type=aws_vpc http.duration=107 http.response.header.date=\"Fri, 16 Jan 2026 23:55:01 GMT\" http.response_content_length=364 rpc.method=DescribeVpcAttribute tf_aws.sdk=aws-sdk-go-v2 tf_req_id=ec24ec7c-82f2-a249-9afb-dfd156a958e9 aws.region=us-east-2\n  http.response.body=\n  | <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n  | <DescribeVpcAttributeResponse xmlns=\"http://ec2.amazonaws.com/doc/2016-11-15/\">\n  |     <requestId>25fc7c22-297e-495e-8ba0-5f85601576a2</requestId>\n  |     <vpcId>vpc-042dad1d9d9cb16be</vpcId>\n  |     <enableNetworkAddressUsageMetrics>\n  |         <value>false</value>\n  |     </enableNetworkAddressUsageMetrics>\n  | </DescribeVpcAttributeResponse>\n   http.response.header.content_type=text/xml;charset=UTF-8 rpc.service=EC2 tf_mux_provider=\"*schema.GRPCProviderServer\" http.response.header.cache_control=\"no-cache, no-store\" http.response.header.server=AmazonEC2 timestamp=2026-01-16T15:55:00.639-0800\n2026-01-16T15:55:00.639-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Request Sent: @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 @module=aws rpc.service=EC2 tf_resource_type=aws_vpc tf_rpc=ReadResource http.request.header.amz_sdk_invocation_id=696ded56-1ab8-484b-bcfe-384f212a51fa http.request.header.amz_sdk_request=\"attempt=1; max=25\" http.request.header.content_type=application/x-www-form-urlencoded http.request.header.x_amz_date=20260116T235500Z http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.14.3 (+https://www.terraform.io) terraform-provider-aws/6.28.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/linux lang/go#1.25.5 md/GOOS#linux md/GOARCH#amd64 api/ec2#1.279.0 m/C,n\" net.peer.name=ec2.us-east-2.amazonaws.com http.method=POST\n  http.request.body=\n  | Action=DescribeNetworkAcls&Filter.1.Name=default&Filter.1.Value.1=true&Filter.2.Name=vpc-id&Filter.2.Value.1=vpc-042dad1d9d9cb16be&Version=2016-11-15\n   http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=AKIA************NAPP/20260116/us-east-2/ec2/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date, Signature=*****\" http.url=https://ec2.us-east-2.amazonaws.com/ rpc.method=DescribeNetworkAcls tf_aws.sdk=aws-sdk-go-v2 tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=ec24ec7c-82f2-a249-9afb-dfd156a958e9 aws.region=us-east-2 http.request_content_length=149 rpc.system=aws-api tf_aws.signing_region=\"\" tf_mux_provider=\"*schema.GRPCProviderServer\" timestamp=2026-01-16T15:55:00.639-0800\n2026-01-16T15:55:00.747-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Response Received: tf_rpc=ReadResource @module=aws rpc.method=DescribeNetworkAcls rpc.system=aws-api tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 aws.region=us-east-2\n  http.response.body=\n  | <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n  | <DescribeNetworkAclsResponse xmlns=\"http://ec2.amazonaws.com/doc/2016-11-15/\">\n  |     <requestId>866e22d7-7bd4-4676-b404-bbef2565f56c</requestId>\n  |     <networkAclSet>\n  |         <item>\n  |             <networkAclId>acl-0ebd5c94ee26a7896</networkAclId>\n  |             <vpcId>vpc-042dad1d9d9cb16be</vpcId>\n  |             <ownerId>redacted</ownerId>\n  |             <default>true</default>\n  |             <entrySet>\n  |                 <item>\n  |                     <ruleNumber>100</ruleNumber>\n  |                     <protocol>-1</protocol>\n  |                     <ruleAction>allow</ruleAction>\n  |                     <egress>true</egress>\n  |                     <cidrBlock>0.0.0.0/0</cidrBlock>\n  |                 </item>\n  |                 <item>\n  |                     <ruleNumber>32767</ruleNumber>\n  |                     <protocol>-1</protocol>\n  |                     <ruleAction>deny</ruleAction>\n  |                     <egress>true</egress>\n  |                     <cidrBlock>0.0.0.0/0</cidrBlock>\n  |                 </item>\n  |                 <item>\n  |                     <ruleNumber>100</ruleNumber>\n  |                     <protocol>-1</protocol>\n  |                     <ruleAction>allow</ruleAction>\n  |                     <egress>false</egress>\n  |                     <cidrBlock>0.0.0.0/0</cidrBlock>\n  |                 </item>\n  |                 <item>\n  |                     <ruleNumber>32767</ruleNumber>\n  |                     <protocol>-1</protocol>\n  |                     <ruleAction>deny</ruleAction>\n  |                     <egress>false</egress>\n  |                     <cidrBlock>0.0.0.0/0</cidrBlock>\n  |                 </item>\n  |             </entrySet>\n  |             <associationSet/>\n  |             <tagSet/>\n  |         </item>\n  |     </networkAclSet>\n  | </DescribeNetworkAclsResponse>\n   http.response.header.server=AmazonEC2 rpc.service=EC2 tf_aws.signing_region=\"\" tf_req_id=ec24ec7c-82f2-a249-9afb-dfd156a958e9 http.response.header.date=\"Fri, 16 Jan 2026 23:55:01 GMT\" http.response.header.strict_transport_security=\"max-age=31536000; includeSubDomains\" http.response.header.x_amzn_requestid=866e22d7-7bd4-4676-b404-bbef2565f56c tf_resource_type=aws_vpc http.duration=105 http.response.header.cache_control=\"no-cache, no-store\" http.response.header.content_type=text/xml;charset=UTF-8 http.response_content_length=1723 http.status_code=200 tf_aws.sdk=aws-sdk-go-v2 timestamp=2026-01-16T15:55:00.746-0800\n2026-01-16T15:55:00.748-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Request Sent: @module=aws http.method=POST http.request.header.amz_sdk_request=\"attempt=1; max=25\" http.url=https://ec2.us-east-2.amazonaws.com/ rpc.method=DescribeRouteTables tf_aws.sdk=aws-sdk-go-v2 tf_provider_addr=registry.terraform.io/hashicorp/aws @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 http.request.header.x_amz_date=20260116T235500Z http.request_content_length=158 rpc.system=aws-api tf_mux_provider=\"*schema.GRPCProviderServer\" tf_rpc=ReadResource aws.region=us-east-2\n  http.request.body=\n  | Action=DescribeRouteTables&Filter.1.Name=association.main&Filter.1.Value.1=true&Filter.2.Name=vpc-id&Filter.2.Value.1=vpc-042dad1d9d9cb16be&Version=2016-11-15\n   http.request.header.content_type=application/x-www-form-urlencoded http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.14.3 (+https://www.terraform.io) terraform-provider-aws/6.28.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/linux lang/go#1.25.5 md/GOOS#linux md/GOARCH#amd64 api/ec2#1.279.0 m/C,n\" net.peer.name=ec2.us-east-2.amazonaws.com rpc.service=EC2 tf_req_id=ec24ec7c-82f2-a249-9afb-dfd156a958e9 tf_resource_type=aws_vpc http.request.header.amz_sdk_invocation_id=90e759e9-ffcd-4775-be3f-07f603f86bb1 http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=AKIA************NAPP/20260116/us-east-2/ec2/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date, Signature=*****\" tf_aws.signing_region=\"\" timestamp=2026-01-16T15:55:00.747-0800\n2026-01-16T15:55:00.858-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Response Received: http.response_content_length=1253 tf_resource_type=aws_vpc http.status_code=200 tf_aws.sdk=aws-sdk-go-v2 tf_aws.signing_region=\"\" tf_rpc=ReadResource http.response.header.server=AmazonEC2 http.response.header.x_amzn_requestid=2e5023f1-ea28-4de9-ab55-b6856422379f @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 @module=aws http.duration=110\n  http.response.body=\n  | <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n  | <DescribeRouteTablesResponse xmlns=\"http://ec2.amazonaws.com/doc/2016-11-15/\">\n  |     <requestId>2e5023f1-ea28-4de9-ab55-b6856422379f</requestId>\n  |     <routeTableSet>\n  |         <item>\n  |             <routeTableId>rtb-0546f210217fdb571</routeTableId>\n  |             <vpcId>vpc-042dad1d9d9cb16be</vpcId>\n  |             <ownerId>redacted</ownerId>\n  |             <routeSet>\n  |                 <item>\n  |                     <destinationCidrBlock>10.0.0.0/16</destinationCidrBlock>\n  |                     <gatewayId>local</gatewayId>\n  |                     <state>active</state>\n  |                     <origin>CreateRouteTable</origin>\n  |                 </item>\n  |             </routeSet>\n  |             <associationSet>\n  |                 <item>\n  |                     <routeTableAssociationId>rtbassoc-06e1c2c39069c1d86</routeTableAssociationId>\n  |                     <routeTableId>rtb-0546f210217fdb571</routeTableId>\n  |                     <main>true</main>\n  |                     <associationState>\n  |                         <state>associated</state>\n  |                     </associationState>\n  |                 </item>\n  |             </associationSet>\n  |             <propagatingVgwSet/>\n  |             <tagSet/>\n  |         </item>\n  |     </routeTableSet>\n  | </DescribeRouteTablesResponse>\n   http.response.header.date=\"Fri, 16 Jan 2026 23:55:01 GMT\" http.response.header.cache_control=\"no-cache, no-store\" rpc.method=DescribeRouteTables rpc.service=EC2 rpc.system=aws-api tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=ec24ec7c-82f2-a249-9afb-dfd156a958e9 http.response.header.strict_transport_security=\"max-age=31536000; includeSubDomains\" aws.region=us-east-2 http.response.header.content_type=text/xml;charset=UTF-8 timestamp=2026-01-16T15:55:00.858-0800\n2026-01-16T15:55:00.859-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Request Sent: http.request_content_length=158 rpc.service=EC2 tf_mux_provider=\"*schema.GRPCProviderServer\" tf_req_id=ec24ec7c-82f2-a249-9afb-dfd156a958e9 @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45\n  http.request.body=\n  | Action=DescribeSecurityGroups&Filter.1.Name=group-name&Filter.1.Value.1=default&Filter.2.Name=vpc-id&Filter.2.Value.1=vpc-042dad1d9d9cb16be&Version=2016-11-15\n   http.request.header.amz_sdk_request=\"attempt=1; max=25\" http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.14.3 (+https://www.terraform.io) terraform-provider-aws/6.28.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/linux lang/go#1.25.5 md/GOOS#linux md/GOARCH#amd64 api/ec2#1.279.0 m/C,n\" rpc.method=DescribeSecurityGroups rpc.system=aws-api tf_aws.signing_region=\"\" tf_provider_addr=registry.terraform.io/hashicorp/aws @module=aws aws.region=us-east-2 http.request.header.amz_sdk_invocation_id=27671af2-e045-48ae-b313-b9b2e0265eef http.url=https://ec2.us-east-2.amazonaws.com/ net.peer.name=ec2.us-east-2.amazonaws.com http.method=POST http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=AKIA************NAPP/20260116/us-east-2/ec2/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date, Signature=*****\" http.request.header.content_type=application/x-www-form-urlencoded http.request.header.x_amz_date=20260116T235500Z tf_aws.sdk=aws-sdk-go-v2 tf_resource_type=aws_vpc tf_rpc=ReadResource timestamp=2026-01-16T15:55:00.858-0800\n2026-01-16T15:55:00.978-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Response Received: @module=aws\n  http.response.body=\n  | <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n  | <DescribeSecurityGroupsResponse xmlns=\"http://ec2.amazonaws.com/doc/2016-11-15/\">\n  |     <requestId>3487dde7-8be1-4798-a619-b6ea55ffaef8</requestId>\n  |     <securityGroupInfo>\n  |         <item>\n  |             <ownerId>redacted</ownerId>\n  |             <groupId>sg-02fe857f0e1355884</groupId>\n  |             <groupName>default</groupName>\n  |             <groupDescription>default VPC security group</groupDescription>\n  |             <vpcId>vpc-042dad1d9d9cb16be</vpcId>\n  |             <ipPermissions>\n  |                 <item>\n  |                     <ipProtocol>-1</ipProtocol>\n  |                     <groups>\n  |                         <item>\n  |                             <userId>redacted</userId>\n  |                             <groupId>sg-02fe857f0e1355884</groupId>\n  |                         </item>\n  |                     </groups>\n  |                     <ipRanges/>\n  |                     <ipv6Ranges/>\n  |                     <prefixListIds/>\n  |                 </item>\n  |             </ipPermissions>\n  |             <ipPermissionsEgress>\n  |                 <item>\n  |                     <ipProtocol>-1</ipProtocol>\n  |                     <groups/>\n  |                     <ipRanges>\n  |                         <item>\n  |                             <cidrIp>0.0.0.0/0</cidrIp>\n  |                         </item>\n  |                     </ipRanges>\n  |                     <ipv6Ranges/>\n  |                     <prefixListIds/>\n  |                 </item>\n  |             </ipPermissionsEgress>\n  |             <securityGroupArn>arn:aws:ec2:us-east-2:redacted:security-group/sg-02fe857f0e1355884</securityGroupArn>\n  |         </item>\n  |     </securityGroupInfo>\n  | </DescribeSecurityGroupsResponse>\n   http.response.header.cache_control=\"no-cache, no-store\" http.response.header.content_type=text/xml;charset=UTF-8 http.response.header.date=\"Fri, 16 Jan 2026 23:55:01 GMT\" rpc.service=EC2 @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 aws.region=us-east-2 http.duration=119 http.response.header.strict_transport_security=\"max-age=31536000; includeSubDomains\" http.response_content_length=1631 http.status_code=200 rpc.system=aws-api tf_aws.signing_region=\"\" http.response.header.server=AmazonEC2 rpc.method=DescribeSecurityGroups tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=ec24ec7c-82f2-a249-9afb-dfd156a958e9 tf_resource_type=aws_vpc http.response.header.x_amzn_requestid=3487dde7-8be1-4798-a619-b6ea55ffaef8 tf_aws.sdk=aws-sdk-go-v2 tf_rpc=ReadResource timestamp=2026-01-16T15:55:00.978-0800\n2026-01-16T15:55:00.987-0800 [WARN]  Provider \"registry.terraform.io/hashicorp/aws\" produced an invalid plan for aws_vpc.this, but we are tolerating it because it is using the legacy plugin SDK.\n    The following problems may be the cause of any confusing errors from downstream operations:\n      - .ipv6_ipam_pool_id: planned value cty.StringVal(\"\") for a non-computed attribute\n      - .assign_generated_ipv6_cidr_block: planned value cty.False for a non-computed attribute\n      - .ipv6_netmask_length: planned value cty.NumberIntVal(0) for a non-computed attribute\n      - .tags: planned value cty.MapValEmpty(cty.String) for a non-computed attribute\n      - .enable_dns_support: planned value cty.True for a non-computed attribute\n      - .instance_tenancy: planned value cty.StringVal(\"default\") for a non-computed attribute\n2026-01-16T15:55:00.987-0800 [DEBUG] ReferenceTransformer: \"aws_lb_target_group.this\" references: []\naws_lb_target_group.this: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-2:redacted:targetgroup/tf-20260116233540295800000001/ccd551e472df66f0]\n2026-01-16T15:55:00.991-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Request Sent: http.request.header.content_type=application/x-www-form-urlencoded net.peer.name=elasticloadbalancing.us-east-2.amazonaws.com rpc.system=aws-api tf_rpc=ReadResource @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 http.method=POST rpc.method=DescribeTargetGroups rpc.service=\"Elastic Load Balancing v2\" tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws @module=aws aws.region=us-east-2 http.request.header.x_amz_date=20260116T235500Z tf_aws.sdk=aws-sdk-go-v2 tf_aws.signing_region=\"\" tf_req_id=cf459573-1a9e-36e4-b919-5584e3f300b7 tf_resource_type=aws_lb_target_group\n  http.request.body=\n  | Action=DescribeTargetGroups&TargetGroupArns.member.1=arn%3Aaws%3Aelasticloadbalancing%3Aus-east-2%3Aredacted%3Atargetgroup%2Ftf-20260116233540295800000001%2Fccd551e472df66f0&Version=2015-12-01\n   http.request.header.amz_sdk_invocation_id=ecc125cf-506f-4c18-8a9a-abe1f0486a9e http.request.header.amz_sdk_request=\"attempt=1; max=25\" http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=AKIA************NAPP/20260116/us-east-2/elasticloadbalancing/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date, Signature=*****\" http.request_content_length=196 http.url=https://elasticloadbalancing.us-east-2.amazonaws.com/ http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.14.3 (+https://www.terraform.io) terraform-provider-aws/6.28.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/linux lang/go#1.25.5 md/GOOS#linux md/GOARCH#amd64 api/elasticloadbalancingv2#1.54.5 m/C,n\" timestamp=2026-01-16T15:55:00.991-0800\n2026-01-16T15:55:01.266-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Response Received: tf_aws.signing_region=\"\" tf_provider_addr=registry.terraform.io/hashicorp/aws @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 aws.region=us-east-2 http.status_code=200 rpc.service=\"Elastic Load Balancing v2\" rpc.system=aws-api http.response.header.x_amzn_requestid=24a3f7d3-a43c-4486-bc69-5250cbbca032 tf_aws.sdk=aws-sdk-go-v2 tf_mux_provider=\"*schema.GRPCProviderServer\" tf_req_id=cf459573-1a9e-36e4-b919-5584e3f300b7 tf_resource_type=aws_lb_target_group tf_rpc=ReadResource http.duration=274 rpc.method=DescribeTargetGroups @module=aws\n  http.response.body=\n  | <DescribeTargetGroupsResponse xmlns=\"http://elasticloadbalancing.amazonaws.com/doc/2015-12-01/\">\n  |   <DescribeTargetGroupsResult>\n  |     <TargetGroups>\n  |       <member>\n  |         <HealthCheckEnabled>true</HealthCheckEnabled>\n  |         <TargetGroupArn>arn:aws:elasticloadbalancing:us-east-2:redacted:targetgroup/tf-20260116233540295800000001/ccd551e472df66f0</TargetGroupArn>\n  |         <HealthCheckTimeoutSeconds>6</HealthCheckTimeoutSeconds>\n  |         <HealthCheckPort>traffic-port</HealthCheckPort>\n  |         <TargetType>instance</TargetType>\n  |         <Matcher>\n  |           <HttpCode>200</HttpCode>\n  |         </Matcher>\n  |         <HealthCheckProtocol>HTTP</HealthCheckProtocol>\n  |         <TargetGroupName>tf-20260116233540295800000001</TargetGroupName>\n  |         <IpAddressType>ipv4</IpAddressType>\n  |         <HealthCheckPath>/a</HealthCheckPath>\n  |         <Protocol>TCP</Protocol>\n  |         <Port>80</Port>\n  |         <VpcId>vpc-042dad1d9d9cb16be</VpcId>\n  |         <HealthyThresholdCount>3</HealthyThresholdCount>\n  |         <HealthCheckIntervalSeconds>30</HealthCheckIntervalSeconds>\n  |         <LoadBalancerArns/>\n  |         <UnhealthyThresholdCount>3</UnhealthyThresholdCount>\n  |       </member>\n  |     </TargetGroups>\n  |   </DescribeTargetGroupsResult>\n  |   <ResponseMetadata>\n  |     <RequestId>24a3f7d3-a43c-4486-bc69-5250cbbca032</RequestId>\n  |   </ResponseMetadata>\n  | </DescribeTargetGroupsResponse>\n   http.response.header.content_type=text/xml http.response.header.date=\"Fri, 16 Jan 2026 23:55:01 GMT\" http.response_content_length=1345 timestamp=2026-01-16T15:55:01.266-0800\n2026-01-16T15:55:01.267-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Request Sent: http.url=https://elasticloadbalancing.us-east-2.amazonaws.com/ tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=cf459573-1a9e-36e4-b919-5584e3f300b7 http.request_content_length=195 http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.14.3 (+https://www.terraform.io) terraform-provider-aws/6.28.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/linux lang/go#1.25.5 md/GOOS#linux md/GOARCH#amd64 api/elasticloadbalancingv2#1.54.5 m/n\" rpc.method=DescribeTargetGroupAttributes tf_aws.signing_region=\"\" tf_rpc=ReadResource @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 aws.region=us-east-2 http.method=POST http.request.header.amz_sdk_request=\"attempt=1; max=25\" http.request.header.content_type=application/x-www-form-urlencoded net.peer.name=elasticloadbalancing.us-east-2.amazonaws.com tf_mux_provider=\"*schema.GRPCProviderServer\" tf_resource_type=aws_lb_target_group\n  http.request.body=\n  | Action=DescribeTargetGroupAttributes&TargetGroupArn=arn%3Aaws%3Aelasticloadbalancing%3Aus-east-2%3Aredacted%3Atargetgroup%2Ftf-20260116233540295800000001%2Fccd551e472df66f0&Version=2015-12-01\n   http.request.header.amz_sdk_invocation_id=3ef99872-1e40-4eda-9743-09d050e7c88c http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=AKIA************NAPP/20260116/us-east-2/elasticloadbalancing/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date, Signature=*****\" http.request.header.x_amz_date=20260116T235501Z rpc.service=\"Elastic Load Balancing v2\" rpc.system=aws-api tf_aws.sdk=aws-sdk-go-v2 @module=aws timestamp=2026-01-16T15:55:01.267-0800\n2026-01-16T15:55:01.357-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Response Received: http.duration=89 tf_aws.signing_region=\"\" tf_mux_provider=\"*schema.GRPCProviderServer\" tf_resource_type=aws_lb_target_group http.response.header.content_type=text/xml http.response.header.date=\"Fri, 16 Jan 2026 23:55:02 GMT\" http.response_content_length=2019 rpc.method=DescribeTargetGroupAttributes rpc.system=aws-api aws.region=us-east-2 http.status_code=200 tf_aws.sdk=aws-sdk-go-v2 tf_rpc=ReadResource @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 @module=aws\n  http.response.body=\n  | <DescribeTargetGroupAttributesResponse xmlns=\"http://elasticloadbalancing.amazonaws.com/doc/2015-12-01/\">\n  |   <DescribeTargetGroupAttributesResult>\n  |     <Attributes>\n  |       <member>\n  |         <Value>false</Value>\n  |         <Key>proxy_protocol_v2.enabled</Key>\n  |       </member>\n  |       <member>\n  |         <Value>off</Value>\n  |         <Key>target_group_health.unhealthy_state_routing.minimum_healthy_targets.percentage</Key>\n  |       </member>\n  |       <member>\n  |         <Value>300</Value>\n  |         <Key>deregistration_delay.timeout_seconds</Key>\n  |       </member>\n  |       <member>\n  |         <Value>source_ip</Value>\n  |         <Key>stickiness.type</Key>\n  |       </member>\n  |       <member>\n  |         <Value>0</Value>\n  |         <Key>target_health_state.unhealthy.draining_interval_seconds</Key>\n  |       </member>\n  |       <member>\n  |         <Value>off</Value>\n  |         <Key>target_group_health.dns_failover.minimum_healthy_targets.percentage</Key>\n  |       </member>\n  |       <member>\n  |         <Value>use_load_balancer_configuration</Value>\n  |         <Key>load_balancing.cross_zone.enabled</Key>\n  |       </member>\n  |       <member>\n  |         <Value>1</Value>\n  |         <Key>target_group_health.unhealthy_state_routing.minimum_healthy_targets.count</Key>\n  |       </member>\n  |       <member>\n  |         <Value>false</Value>\n  |         <Key>stickiness.enabled</Key>\n  |       </member>\n  |       <member>\n  |         <Value>true</Value>\n  |         <Key>preserve_client_ip.enabled</Key>\n  |       </member>\n  |       <member>\n  |         <Value>1</Value>\n  |         <Key>target_group_health.dns_failover.minimum_healthy_targets.count</Key>\n  |       </member>\n  |       <member>\n  |         <Value>true</Value>\n  |         <Key>target_health_state.unhealthy.connection_termination.enabled</Key>\n  |       </member>\n  |       <member>\n  |         <Value>false</Value>\n  |         <Key>deregistration_delay.connection_termination.enabled</Key>\n  |       </member>\n  |     </Attributes>\n  |   </DescribeTargetGroupAttributesResult>\n  |   <ResponseMetadata>\n  |     <RequestId>06d20052-46b1-44de-8f0c-538851284dad</RequestId>\n  |   </ResponseMetadata>\n  | </DescribeTargetGroupAttributesResponse>\n   http.response.header.x_amzn_requestid=06d20052-46b1-44de-8f0c-538851284dad rpc.service=\"Elastic Load Balancing v2\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=cf459573-1a9e-36e4-b919-5584e3f300b7 timestamp=2026-01-16T15:55:01.356-0800\n2026-01-16T15:55:01.358-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Request Sent: http.request_content_length=185 http.url=https://elasticloadbalancing.us-east-2.amazonaws.com/ tf_aws.signing_region=\"\" http.request.header.amz_sdk_invocation_id=46af1581-7263-4cf0-98dc-3fae0f45c8e6 http.request.header.authorization=\"AWS4-HMAC-SHA256 Credential=AKIA************NAPP/20260116/us-east-2/elasticloadbalancing/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date, Signature=*****\" net.peer.name=elasticloadbalancing.us-east-2.amazonaws.com rpc.service=\"Elastic Load Balancing v2\" rpc.system=aws-api tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=cf459573-1a9e-36e4-b919-5584e3f300b7\n  http.request.body=\n  | Action=DescribeTags&ResourceArns.member.1=arn%3Aaws%3Aelasticloadbalancing%3Aus-east-2%3Aredacted%3Atargetgroup%2Ftf-20260116233540295800000001%2Fccd551e472df66f0&Version=2015-12-01\n   http.request.header.x_amz_date=20260116T235501Z http.user_agent=\"APN/1.0 HashiCorp/1.0 Terraform/1.14.3 (+https://www.terraform.io) terraform-provider-aws/6.28.0 (+https://registry.terraform.io/providers/hashicorp/aws) aws-sdk-go-v2/1.41.0 ua/2.1 os/linux lang/go#1.25.5 md/GOOS#linux md/GOARCH#amd64 api/elasticloadbalancingv2#1.54.5 m/n\" tf_aws.sdk=aws-sdk-go-v2 @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 aws.region=us-east-2 http.request.header.amz_sdk_request=\"attempt=1; max=25\" http.request.header.content_type=application/x-www-form-urlencoded rpc.method=DescribeTags tf_resource_type=aws_lb_target_group tf_rpc=ReadResource @module=aws http.method=POST timestamp=2026-01-16T15:55:01.358-0800\n2026-01-16T15:55:01.444-0800 [DEBUG] provider.terraform-provider-aws_v6.28.0_x5: HTTP Response Received: tf_aws.sdk=aws-sdk-go-v2 http.duration=85 http.response.header.x_amzn_requestid=ac44bdd8-39fb-4c40-ab05-8389821049e0 http.status_code=200 rpc.method=DescribeTags rpc.service=\"Elastic Load Balancing v2\" rpc.system=aws-api tf_resource_type=aws_lb_target_group tf_rpc=ReadResource @caller=github.com/hashicorp/aws-sdk-go-base/v2@v2.0.0-beta.70/logging/tf_logger.go:45 http.response_content_length=505 @module=aws http.response.header.date=\"Fri, 16 Jan 2026 23:55:02 GMT\" tf_aws.signing_region=\"\" tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/aws tf_req_id=cf459573-1a9e-36e4-b919-5584e3f300b7 aws.region=us-east-2\n  http.response.body=\n  | <DescribeTagsResponse xmlns=\"http://elasticloadbalancing.amazonaws.com/doc/2015-12-01/\">\n  |   <DescribeTagsResult>\n  |     <TagDescriptions>\n  |       <member>\n  |         <ResourceArn>arn:aws:elasticloadbalancing:us-east-2:redacted:targetgroup/tf-20260116233540295800000001/ccd551e472df66f0</ResourceArn>\n  |         <Tags/>\n  |       </member>\n  |     </TagDescriptions>\n  |   </DescribeTagsResult>\n  |   <ResponseMetadata>\n  |     <RequestId>ac44bdd8-39fb-4c40-ab05-8389821049e0</RequestId>\n  |   </ResponseMetadata>\n  | </DescribeTagsResponse>\n   http.response.header.content_type=text/xml timestamp=2026-01-16T15:55:01.443-0800\n2026-01-16T15:55:01.449-0800 [ERROR] provider.terraform-provider-aws_v6.28.0_x5: Response contains error diagnostic: tf_req_id=3edfd738-749f-2d58-3edc-a7087ec97ebb tf_rpc=PlanResourceChange diagnostic_detail=\"\"\n  diagnostic_summary=\n  | Invalid Attribute Combination\n  | \n  | Attribute \"health_check[0].matcher\" cannot be specified when \"health_check[0].protocol\" is \"TCP\".\n  | \n  | Path: health_check[0].matcher\n   tf_proto_version=5.10 tf_resource_type=aws_lb_target_group @caller=github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/diag/diagnostics.go:58 @module=sdk.proto diagnostic_severity=ERROR tf_provider_addr=registry.terraform.io/hashicorp/aws timestamp=2026-01-16T15:55:01.449-0800\n2026-01-16T15:55:01.449-0800 [ERROR] vertex \"aws_lb_target_group.this\" error: Invalid Attribute Combination\n\nAttribute \"health_check[0].matcher\" cannot be specified when \"health_check[0].protocol\" is \"TCP\".\n\nPath: health_check[0].matcher\n2026-01-16T15:55:01.449-0800 [ERROR] vertex \"aws_lb_target_group.this (expand)\" error: Invalid Attribute Combination\n\nAttribute \"health_check[0].matcher\" cannot be specified when \"health_check[0].protocol\" is \"TCP\".\n\nPath: health_check[0].matcher\n2026-01-16T15:55:01.449-0800 [WARN]  Planning encountered errors, so plan is not applyable\n\nPlanning failed. Terraform encountered an error while generating this plan.\n\n\nError: Invalid Attribute Combination\n\nAttribute \"health_check[0].matcher\" cannot be specified when \"health_check[0].protocol\" is \"TCP\".\n\nPath: health_check[0].matcher\n\n  with aws_lb_target_group.this,\n  on main.tf line 5, in resource \"aws_lb_target_group\" \"this\":\n   5: resource \"aws_lb_target_group\" \"this\" {\n\n2026-01-16T15:55:01.526-0800 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2026-01-16T15:55:01.535-0800 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/6.28.0/linux_amd64/terraform-provider-aws_v6.28.0_x5 id=26766\n2026-01-16T15:55:01.535-0800 [DEBUG] provider: plugin exited\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\nI looked into this issue and found that removing `matcher` has no effect, since `matcher` is marked as `Optional` and `Computed`.\nUnder the current implementation, specifying an empty string (`\"\"`) can  **clear** `matcher` once it has been set,  instead of removing the argument.\n\nAlthough this issue for `matcher` can be resolved by setting an empty string, `path` has the same issue, and an empty string cannot currently be set because its validation does not allow empty values.\n\nTo address this, I will update the implementation to allow an empty string to be specified to unset `path` after it has been set.\nI will also update the documentation to describe this behavior.\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/elbv2"
      ],
      "created_at": "2026-01-17T00:00:34Z",
      "closed_at": "2026-01-21T13:46:32Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46011",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46017,
      "title": "[Bug] aws_subnet should force recreation when ipv6_cidr_block is changed, if assign_ipv6_address_on_creation is true",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nOpenTofu v1.11.2\non darwin_arm64\n+ provider registry.opentofu.org/hashicorp/aws v6.28.0\n+ provider registry.opentofu.org/tobotimus/toml v0.3.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n`aws_subnet`\n\n### Expected Behavior\n\nResource force recreation.\n\n### Actual Behavior\n\nModification fails with the error message:\n\n> \u2502 Error: disassociating EC2 Subnet (subnet-0b691188d60dcbbd8) IPv6 CIDR block (subnet-cidr-assoc-05f0cb81c20830980): operation error EC2: DisassociateSubnetCidrBlock, https response error StatusCode: 400, RequestID: c54cf6f2-5a15-42b6-a39c-3209160dbf1f, api error InvalidCidrBlock.InUse: The subnet IPv6 CIDR block with association ID subnet-cidr-assoc-05f0cb81c20830980 may not be disassociated, because its subnet has assign-ipv6-address-on-creation set to true.\n\nResource needs to be manually tainted or apply -replaced\n\n### Relevant Error/Panic Output\n\n> \u2502 Error: disassociating EC2 Subnet (subnet-0b691188d60dcbbd8) IPv6 CIDR block (subnet-cidr-assoc-05f0cb81c20830980): operation error EC2: DisassociateSubnetCidrBlock, https response error StatusCode: 400, RequestID: c54cf6f2-5a15-42b6-a39c-3209160dbf1f, api error InvalidCidrBlock.InUse: The subnet IPv6 CIDR block with association ID subnet-cidr-assoc-05f0cb81c20830980 may not be disassociated, because its subnet has assign-ipv6-address-on-creation set to true.\n\n### Sample Terraform Configuration\n\n```hcl\nresource \"aws_subnet\" \"ipv6_only_private\" {\n  for_each                                       = local.azs\n  vpc_id                                         = data.aws_vpc.main.id\n  availability_zone                              = each.key\n  ipv6_native                                    = true\n  ipv6_cidr_block                                = local.ipv6_only_private_ipv6_blocks[each.key]\n  assign_ipv6_address_on_creation                = true\n  enable_resource_name_dns_aaaa_record_on_launch = true\n  tags = {\n    Name = \"lightning-${tofu.workspace}-ipv6only-private-${each.key}\"\n  }\n}\n```\n\n### Steps to Reproduce\n\nTry and modify a ipv6_cidr_block when you have assign_ipv6_address_on_creation set to true.\n\n### Debug Logging\n\nShouldn't be needed for this\n\n### GenAI / LLM Assisted Development\n\nNo.\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/vpc"
      ],
      "created_at": "2026-01-18T04:18:25Z",
      "closed_at": "2026-01-20T16:15:28Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46017",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46052,
      "title": "Support `memory_size` > 10240 MB for aws_lambda_function when using Managed Instances",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.3\non linux_amd64\n+ provider registry.terraform.io/hashicorp/archive v2.7.1\n+ provider registry.terraform.io/hashicorp/aws v6.28.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_lambda_function`\n\n### Expected Behavior\n\nTerraform should allow `memory_size` up to **32768 MB** when the function\u2019s `compute_type` is effectively `ManagedInstances` (or in general), matching AWS API supported limits.\n\n### Actual Behavior\n\nTerraform validation refuses memory sizes above 10240 MB, preventing adoption of Lambda Managed Instances with higher memory and CPU.\n\n### Relevant Error/Panic Output\n\n```console\nError: expected memory_size to be in the range (128 - 10240), got 32768\n```\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\nresource \"aws_lambda_function\" \"example\" {\n  filename      = \"function.zip\"\n  function_name = \"example\"\n  role          = aws_iam_role.example.arn\n  handler       = \"index.handler\"\n  runtime       = \"nodejs20.x\"\n  memory_size   = 32768\n\n  publish = true\n\n  capacity_provider_config {\n    lambda_managed_instances_capacity_provider_config {\n      capacity_provider_arn = aws_lambda_capacity_provider.example.arn\n    }\n  }\n}\n\nresource \"aws_lambda_capacity_provider\" \"example\" {\n  name = \"example\"\n\n  vpc_config {\n    subnet_ids         = [aws_subnet.example.id]\n    security_group_ids = [aws_security_group.example.id]\n  }\n\n  permissions_config {\n    capacity_provider_operator_role_arn = aws_iam_role.example.arn\n  }\n}\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Apply or validate the configuration\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\nAWS API [docs](https://docs.aws.amazon.com/lambda/latest/api/API_FunctionConfiguration.html):\n- MemorySize valid range up to 32768 MB\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\nHi @bystepii \ud83d\udc4b \n\nthank  you for taking the time to report the issue!\n\nLet me update the validation of `memory_size` and documentation for this. \n\nI was only aware of the 10 GByte limitation, so I ran a small test to understand if we can get to the 32 GByte. \nBelow is the output of `aws lambda get-function --function-name example --region eu-central-1 --output json `.\n\n```shell\n{\n    \"Configuration\": {\n        \"FunctionName\": \"example\",\n        \"FunctionArn\": \"arn:aws:lambda:eu-central-1:<redacted>:function:example\",\n        \"Runtime\": \"nodejs22.x\",\n        \"Role\": \"arn:aws:iam::<redacted>:role/example_lambda_role\",\n        \"Handler\": \"index.handler\",\n        \"CodeSize\": 376,\n        \"Description\": \"\",\n        \"Timeout\": 3,\n        \"MemorySize\": 32768, # Here are the 32 GByte\n        \"LastModified\": \"2026-01-20T18:11:10.916+0000\",\n        \"CodeSha256\": \"+Jtk7FqGN9BBlgSZ2y4zWtqPFscPJYN0uRicx+sxVdQ=\",\n        \"Version\": \"$LATEST\",\n        \"TracingConfig\": {\n            \"Mode\": \"PassThrough\"\n        },\n        \"RevisionId\": \"49e5f55b-b2be-4b77-9284-35898167da3a\",\n        \"State\": \"ActiveNonInvocable\",\n        \"LastUpdateStatus\": \"Successful\",\n        \"PackageType\": \"Zip\",\n        \"Architectures\": [\n            \"x86_64\"\n        ],\n        \"EphemeralStorage\": {\n            \"Size\": 512\n        },\n        \"RuntimeVersionConfig\": {\n            \"RuntimeVersionArn\": \"arn:aws:lambda:eu-central-1::runtime:fc822b897c0f33df4df3bc8d3c18d7449cfa5d4f32cd596bcfb8080fdefbad43\"\n        },\n        \"LoggingConfig\": {\n            \"LogFormat\": \"JSON\",\n            \"ApplicationLogLevel\": \"INFO\",\n            \"SystemLogLevel\": \"INFO\",\n            \"LogGroup\": \"/aws/lambda/example\"\n        },\n        \"CapacityProviderConfig\": {\n            \"LambdaManagedInstancesCapacityProviderConfig\": {\n                \"CapacityProviderArn\": \"arn:aws:lambda:eu-central-1:<redacted>:capacity-provider:example\",\n                \"PerExecutionEnvironmentMaxConcurrency\": 1024,\n                \"ExecutionEnvironmentMemoryGiBPerVCpu\": 2.0\n            }\n        },\n        \"ConfigSha256\": \"kD3vOXWVjf3GwNp78cxAb4iZyt5fQD0JiA6i+VM5Qow=\"\n    },\n    \"Code\": {\n        \"RepositoryType\": \"S3\",\n        \"Location\": \"[...]\"\n    }\n}\n```\n\nPlease note, that I had issues using nodejs20.x as runtime. Based on [this docs](https://docs.aws.amazon.com/lambda/latest/dg/lambda-managed-instances-runtimes.html) following runtimes are supported\n\n* Java: Java 21 and later.\n* Python: Python 3.13 and later.\n* Node.js: Node.js 22 and later.\n* .NET: .NET 8 and later.\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/lambda"
      ],
      "created_at": "2026-01-20T14:21:04Z",
      "closed_at": "2026-01-22T13:36:27Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46052",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46054,
      "title": "EU Souvereign Cloud s3 general purpose bucket creation fails",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.3\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v6.28.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n```terraform\nresource \"aws_s3_bucket\" \"mybucket\" {\n  bucket = \"terraform-state-test-mybucket4711\"\n}\n```\n\n### Expected Behavior\n\nbucket is created\n\n### Actual Behavior\n\ncreation fails with api error\nIt does not matter whether more parameter (eg tags) are provided in the resource statement. aws_s3_bucket even fails with only a bucket name provided \n\n### Relevant Error/Panic Output\n\n```console\naws_s3_bucket.mybucket: Creating...\n\u2577\n\u2502 Error: listing tags for S3 (Simple Storage) Bucket (terraform-state-test-mybucket4711): operation error S3 Control: ListTagsForResource, https response error StatusCode: 405, RequestID: KVFCZGKTBRPDRAP4, HostID: Vk8hwOrmXZTfcAoH7lAFBKqNUSAOEVeLfN0P4umdE7vhEPbp2zfnuMRIO88w11pbS37cHlOjeKE=, api error MethodNotAllowed: The specified method is not allowed against this resource.\n\u2502\n\u2502   with aws_s3_bucket.mybucket,\n\u2502   on s3_test.tf line 3, in resource \"aws_s3_bucket\" \"mybucket\":\n\u2502    3: resource \"aws_s3_bucket\" \"mybucket\" {\n\u2502\n```\n\n### Sample Terraform Configuration\n\n```terraform\nprovider \"aws\" {\n  region = \"eusc-de-east-1\"\n}\n```\n\n### Steps to Reproduce\n\nterraform apply with any code creating a s3 bucket in eusc-de-east-1 aka aws partition aws-eusc.\n\n\n### Debug Logging\n\n```console\n2026-01-20T18:08:10.269+0100 [TRACE] dag/walk: upstream of \"root\" errored, so skipping\n2026-01-20T18:08:10.269+0100 [TRACE] statemgr.Filesystem: not making a backup, because the new snapshot is identical to the old\n2026-01-20T18:08:10.270+0100 [TRACE] statemgr.Filesystem: no state changes since last snapshot\n2026-01-20T18:08:10.270+0100 [TRACE] statemgr.Filesystem: writing snapshot at terraform.tfstate\n\u2577\n\u2502 Error: creating S3 Bucket (terraform-state-test-mybucket4711): operation error S3: CreateBucket, https response error StatusCode: 409, RequestID: 81J92YGRH2ZDQSA2, HostID: 9XDfaSXCW5PUAy2W4Sm2tmQULfO7VCYGtwVDDJHawgfMcg/uQIsjIOuNoUnRjbz8cTptPzMr1AA=, BucketAlreadyOwnedByYou: Your previous request to create the named bucket succeeded and you already own it.\n\u2502\n\u2502   with aws_s3_bucket.mybucket,\n\u2502   on s3_test.tf line 3, in resource \"aws_s3_bucket\" \"mybucket\":\n\u2502    3: resource \"aws_s3_bucket\" \"mybucket\" {\n\u2502\n\u2575\n2026-01-20T18:08:10.272+0100 [TRACE] statemgr.Filesystem: removing lock metadata file .terraform.tfstate.lock.info\n2026-01-20T18:08:10.273+0100 [TRACE] statemgr.Filesystem: unlocking terraform.tfstate using fcntl flock\n2026-01-20T18:08:10.274+0100 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n```\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/s3",
        "partition/aws-eusc"
      ],
      "created_at": "2026-01-20T17:08:52Z",
      "closed_at": "2026-01-23T18:36:56Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46054",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46106,
      "title": "aws_networkfirewall_firewall_policy: Invalid ARN validation for partner-managed stateful rule groups",
      "problem": "### Terraform and AWS Provider Version\n\n```console\nTerraform v1.14.3\non darwin_arm64\n+ provider registry.terraform.io/hashicorp/aws v6.28.0\n```\n\n### Affected Resource(s) or Data Source(s)\n\n* `aws_networkfirewall_firewall_policy`\n\n```hcl\nresource \"aws_networkfirewall_firewall_policy\" \"main\" {\n  name        = \"test-firewall-policy\"\n  description = \"Network firewall policy with partner-managed rule group\"\n\n  firewall_policy {\n    stateless_default_actions          = [\"aws:forward_to_sfe\"]\n    stateless_fragment_default_actions = [\"aws:forward_to_sfe\"]\n\n    stateful_engine_options {\n      rule_order              = \"STRICT_ORDER\"\n      stream_exception_policy = \"REJECT\"\n    }\n\n    stateful_rule_group_reference {\n      resource_arn = \"arn:aws:network-firewall:us-east-1:partner-managed:stateful-rulegroup/Trend-MalwareBlockStrictOrder\"\n      priority     = 1\n    }\n\n    policy_variables {\n      rule_variables {\n        key = \"HOME_NET\"\n        ip_set {\n          definition = [\"10.0.0.0/8\", \"172.16.0.0/12\", \"192.168.0.0/16\"]\n        }\n      }\n    }\n  }\n}\n```\n\n### Expected Behavior\n\nTerraform should accept ARNs with partner-managed as the account ID portion for AWS Network Firewall partner-managed stateful rule groups, as this is the format returned by AWS CLI and used in CloudFormation.\n\n### Actual Behavior\n\nTerraform rejects the ARN with a validation error:\n\nError: \"firewall_policy.0.stateful_rule_group_reference.0.resource_arn\" (arn:aws:network-firewall:us-east-1:partner-managed:stateful-rulegroup/Trend-MalwareBlockStrictOrder) is an invalid ARN: invalid account ID value (expecting to match regular expression: ^(aws|aws-managed|third-party|aws-marketplace|\\d{12}|cw.{10})$)\n\n  with aws_networkfirewall_firewall_policy.main,\n  on firewall.tf line 23, in resource \"aws_networkfirewall_firewall_policy\" \"main\":\n  23:     stateful_rule_group_reference {\n\n### Relevant Error/Panic Output\n\n\n\n\n### Sample Terraform Configuration\n\n<details open>\n<summary>Click to expand configuration</summary>\n\n```hcl\n\n```\n</details>\n\n\n### Steps to Reproduce\n\n1. Subscribe to a partner-managed Network Firewall rule group from AWS Marketplace (e.g., Trend Micro, Fortinet, etc.)\n\n2. Verify the ARN format using AWS CLI:\n\n```bash\naws network-firewall list-rule-groups --region us-east-1 --scope MANAGED --type STATEFUL --output json\n```\nOutput shows partner-managed rule groups with ARNs like:\n\n```json\n{\n    \"RuleGroups\": [\n        {\n            \"Name\": \"ThreatSignaturesPhishingActionOrder\",\n            \"Arn\": \"arn:aws:network-firewall:us-east-1:aws-managed:stateful-rulegroup/ThreatSignaturesPhishingActionOrder\",\n            \"VendorName\": \"AWS\"\n        },\n        {\n            \"Name\": \"LumenBLL-SevereMalwareDefaultOrder\",\n            \"Arn\": \"arn:aws:network-firewall:us-east-1:partner-managed:stateful-rulegroup/LumenBLL-SevereMalwareDefaultOrder\",\n            \"VendorName\": \"Lumen Technologies\"\n        },...\n```\n3. Attempt to reference this rule group in aws_networkfirewall_firewall_policy\n\n4. Run terraform plan\n\n5. Observe the validation error\n\n### Debug Logging\n\n<details open>\n<summary>Click to expand log output</summary>\n\n```console\n\n```\n</details>\n\n\n### GenAI / LLM Assisted Development\n\nn/a\n\n### Important Facts and References\n\n_No response_\n\n### Would you like to implement a fix?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "service/networkfirewall"
      ],
      "created_at": "2026-01-22T13:13:36Z",
      "closed_at": "2026-01-23T15:51:07Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46106",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46156,
      "title": "d/aws_dynamodb_table: `panic: Invalid address to set: []string{global_secondary_index, 0, key_schema}`",
      "problem": "```console\n% make testacc TESTARGS='-run=TestAccDynamoDBTableDataSource_' PKG=dynamodb ACCTEST_PARALLELISM=3\nmake: Verifying source code with gofmt...\n==> Checking that code complies with gofmt requirements...\nmake: Running acceptance tests on branch: \ud83c\udf3f d/aws_dynamodb_table.error \ud83c\udf3f...\nTF_ACC=1 go1.25.6 test ./internal/service/dynamodb/... -v -count 1 -parallel 3  -run=TestAccDynamoDBTableDataSource_ -timeout 360m -vet=off\n2026/01/26 08:13:14 Creating Terraform AWS Provider (SDKv2-style)...\n2026/01/26 08:13:14 Initializing Terraform AWS Provider (SDKv2-style)...\n=== RUN   TestAccDynamoDBTableDataSource_tags\n=== PAUSE TestAccDynamoDBTableDataSource_tags\n=== RUN   TestAccDynamoDBTableDataSource_tags_NullMap\n=== PAUSE TestAccDynamoDBTableDataSource_tags_NullMap\n=== RUN   TestAccDynamoDBTableDataSource_tags_EmptyMap\n=== PAUSE TestAccDynamoDBTableDataSource_tags_EmptyMap\n=== RUN   TestAccDynamoDBTableDataSource_tags_DefaultTags_nonOverlapping\n=== PAUSE TestAccDynamoDBTableDataSource_tags_DefaultTags_nonOverlapping\n=== RUN   TestAccDynamoDBTableDataSource_tags_IgnoreTags_Overlap_DefaultTag\n=== PAUSE TestAccDynamoDBTableDataSource_tags_IgnoreTags_Overlap_DefaultTag\n=== RUN   TestAccDynamoDBTableDataSource_tags_IgnoreTags_Overlap_ResourceTag\n=== PAUSE TestAccDynamoDBTableDataSource_tags_IgnoreTags_Overlap_ResourceTag\n=== RUN   TestAccDynamoDBTableDataSource_basic\n=== PAUSE TestAccDynamoDBTableDataSource_basic\n=== RUN   TestAccDynamoDBTableDataSource_onDemandThroughput\n=== PAUSE TestAccDynamoDBTableDataSource_onDemandThroughput\n=== RUN   TestAccDynamoDBTableDataSource_pointInTimeRecovery\n=== PAUSE TestAccDynamoDBTableDataSource_pointInTimeRecovery\n=== CONT  TestAccDynamoDBTableDataSource_tags\n=== CONT  TestAccDynamoDBTableDataSource_tags_IgnoreTags_Overlap_ResourceTag\n=== CONT  TestAccDynamoDBTableDataSource_tags_DefaultTags_nonOverlapping\n--- PASS: TestAccDynamoDBTableDataSource_tags (32.52s)\n=== CONT  TestAccDynamoDBTableDataSource_tags_IgnoreTags_Overlap_DefaultTag\n--- PASS: TestAccDynamoDBTableDataSource_tags_DefaultTags_nonOverlapping (32.75s)\n=== CONT  TestAccDynamoDBTableDataSource_tags_EmptyMap\n--- PASS: TestAccDynamoDBTableDataSource_tags_IgnoreTags_Overlap_ResourceTag (33.41s)\n=== CONT  TestAccDynamoDBTableDataSource_onDemandThroughput\n--- PASS: TestAccDynamoDBTableDataSource_tags_EmptyMap (31.56s)\n=== CONT  TestAccDynamoDBTableDataSource_pointInTimeRecovery\n--- PASS: TestAccDynamoDBTableDataSource_tags_IgnoreTags_Overlap_DefaultTag (31.79s)\n=== CONT  TestAccDynamoDBTableDataSource_basic\npanic: Invalid address to set: []string{\"global_secondary_index\", \"0\", \"key_schema\"}\n\ngoroutine 21536 [running]:\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*ResourceData).Set(0x14006c43e60, {0x1193b57c7, 0x16}, {0x11c1350a0, 0x1401502d6c8})\n\t/Users/kewbank/go/pkg/mod/github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource_data.go:341 +0x238\ngithub.com/hashicorp/terraform-provider-aws/internal/service/dynamodb.dataSourceTableRead({0x11fd60910, 0x14005122060}, 0x14006c43e60, {0x11f920080?, 0x14012ee3e00?})\n\t/Users/kewbank/src/github.com/hashicorp/terraform-provider-aws/internal/service/dynamodb/table_data_source.go:312 +0x600\ngithub.com/hashicorp/terraform-provider-aws/internal/provider/sdkv2.(*sdkProvider).initialize.wrapDataSource.(*wrappedDataSource).read.interceptedCRUDHandler[...].func23(0x14006c43e60, {0x11f920080, 0x14012ee3e00})\n\t/Users/kewbank/src/github.com/hashicorp/terraform-provider-aws/internal/provider/sdkv2/intercept.go:178 +0x480\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).read(0x11fd60910?, {0x11fd60910?, 0x14005b40a20?}, 0xd?, {0x11f920080?, 0x14012ee3e00?})\n\t/Users/kewbank/go/pkg/mod/github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource.go:861 +0x64\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).ReadDataApply(0x1400ccfd100, {0x11fd60910, 0x14005b40a20}, 0x14006c43cb0?, {0x11f920080, 0x14012ee3e00})\n\t/Users/kewbank/go/pkg/mod/github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource.go:1088 +0x124\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*GRPCProviderServer).ReadDataSource(0x140101926a8, {0x11fd60910?, 0x14005b40750?}, 0x140050bdef0)\n\t/Users/kewbank/go/pkg/mod/github.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/grpc_provider.go:1889 +0x544\ngithub.com/hashicorp/terraform-plugin-mux/tf5muxserver.(*muxServer).ReadDataSource(0x14009c1bb90, {0x11fd60910?, 0x140050bdf20?}, 0x140050bdef0)\n\t/Users/kewbank/go/pkg/mod/github.com/hashicorp/terraform-plugin-mux@v0.21.0/tf5muxserver/mux_server_ReadDataSource.go:36 +0x178\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/tf5server.(*server).ReadDataSource(0x14012b146e0, {0x11fd60910?, 0x140050bd710?}, 0x140085e2c30)\n\t/Users/kewbank/go/pkg/mod/github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/tf5server/server.go:736 +0x1b4\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/internal/tfplugin5._Provider_ReadDataSource_Handler({0x11f7d3060, 0x14012b146e0}, {0x11fd60910, 0x140050bd710}, 0x1400d21f900, 0x0)\n\t/Users/kewbank/go/pkg/mod/github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/tfplugin5/tfplugin5_grpc.pb.go:843 +0x1b8\ngoogle.golang.org/grpc.(*Server).processUnaryRPC(0x1400a5e9200, {0x11fd60910, 0x140050bd620}, 0x14010982cc0, 0x14003d8a9f0, 0x12e9fa470, 0x0)\n\t/Users/kewbank/go/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1431 +0xbd0\ngoogle.golang.org/grpc.(*Server).handleStream(0x1400a5e9200, {0x11fda6048, 0x14007c4b380}, 0x14010982cc0)\n\t/Users/kewbank/go/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1842 +0x858\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1()\n\t/Users/kewbank/go/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1061 +0x74\ncreated by google.golang.org/grpc.(*Server).serveStreams.func2 in goroutine 14386\n\t/Users/kewbank/go/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1072 +0x120\nFAIL\tgithub.com/hashicorp/terraform-provider-aws/internal/service/dynamodb\t78.832s\nFAIL\nmake: *** [testacc] Error 1\n```\n\nRelates https://github.com/hashicorp/terraform-provider-aws/pull/45357.",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "bug",
        "crash",
        "service/dynamodb"
      ],
      "created_at": "2026-01-26T13:17:02Z",
      "closed_at": "2026-01-26T15:33:24Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46156",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 27087,
      "title": "[Bug]: ElasticIP not found when creating NAT Gateway",
      "problem": "### Terraform Core Version\n\n1.0.11\n\n### AWS Provider Version\n\nv1.60.1-0.20220311191613-392d1c1db00c\n\n### Affected Resource(s)\n\naws_eip, aws_nat_gateway\n\n### Expected Behavior\n\nThe NAT gateway resource should wait for the EIP to be created first.\n\n### Actual Behavior\n\naws_nat_gateway fails with `InvalidElasticIpID.NotFound`\n\n### Relevant Error/Panic Output Snippet\n\n```shell\nlevel=info msg=Creating infrastructure resources...\r\nlevel=errorlevel=error msg=Error: error creating EC2 NAT Gateway: InvalidElasticIpID.NotFound: The elasticIp ID 'eipalloc-094ec9d0482d5b9f2' does not exist\r\nlevel=error msg= status code: 400, request id: 5223ac0c-77cb-4f29-adc8-4192e9fc3ef8level=error\r\nlevel=error msg=\u00a0 with module.vpc.aws_nat_gateway.nat_gw[0],\r\nlevel=error msg=\u00a0 on vpc/vpc-public.tf line 85, in resource \"aws_nat_gateway\" \"nat_gw\":\r\nlevel=error msg=\u00a0 85: resource \"aws_nat_gateway\" \"nat_gw\" {\r\nlevel=error\r\nlevel=error msg=failed to fetch Cluster: failed to generate asset \"Cluster\": failure applying terraform for \"cluster\" stage: failed to create cluster: failed to apply Terraform: exit status 1\r\nlevel=error\r\nlevel=error msg=Error: error creating EC2 NAT Gateway: InvalidElasticIpID.NotFound: The elasticIp ID 'eipalloc-094ec9d0482d5b9f2' does not exist\r\nlevel=error msg= status code: 400, request id: 5223ac0c-77cb-4f29-adc8-4192e9fc3ef8level=error\r\nlevel=error msg=\u00a0 with module.vpc.aws_nat_gateway.nat_gw[0],\r\nlevel=error msg=\u00a0 on vpc/vpc-public.tf line 85, in resource \"aws_nat_gateway\" \"nat_gw\":\r\nlevel=error msg=\u00a0 85: resource \"aws_nat_gateway\" \"nat_gw\" {\r\nlevel=error\r\nlevel=error\n```\n\n\n### Terraform Configuration Files\n\n```\r\nresource \"aws_eip\" \"nat_eip\" {\r\n  count = var.public_subnets == null ? length(var.availability_zones) : 0\r\n  vpc   = true\r\n\r\n  tags = merge(\r\n    {\r\n      \"Name\" = \"${var.cluster_id}-eip-${var.availability_zones[count.index]}\"\r\n    },\r\n    var.tags,\r\n  )\r\n\r\n  # Terraform does not declare an explicit dependency towards the internet gateway.\r\n  # this can cause the internet gateway to be deleted/detached before the EIPs.\r\n  # https://github.com/coreos/tectonic-installer/issues/1017#issuecomment-307780549\r\n  depends_on = [aws_internet_gateway.igw]\r\n}\r\n\r\nresource \"aws_nat_gateway\" \"nat_gw\" {\r\n  count = var.public_subnets == null ? length(var.availability_zones) : 0\r\n\r\n  allocation_id = aws_eip.nat_eip[count.index].id\r\n  subnet_id     = aws_subnet.public_subnet[count.index].id\r\n\r\n  tags = merge(\r\n    {\r\n      \"Name\" = \"${var.cluster_id}-nat-${var.availability_zones[count.index]}\"\r\n    },\r\n    var.tags,\r\n  )\r\n\r\n  # https://issues.redhat.com/browse/OCPBUGS-891\r\n  depends_on = [aws_eip.nat_eip, aws_subnet.public_subnet]\r\n}\r\n```\r\nNotice the `depends_on` clause added to the `aws_nat_gateway` to try to workaround the issue.\r\nFull configuration at: https://github.com/openshift/installer/blob/master/data/data/aws/cluster/vpc/vpc-public.tf\n\n### Steps to Reproduce\n\nterraform apply\n\n### Debug Output\n\n_No response_\n\n### Panic Output\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\nExample of a failed job: https://prow.ci.openshift.org/view/gs/origin-ci-test/logs/periodic-ci-openshift-multiarch-master-nightly-4.12-ocp-e2e-aws-ovn-heterogeneous/1577082540114579456\n\n### Would you like to implement a fix?\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/ec2",
        "stale",
        "service/vpc"
      ],
      "created_at": "2022-10-04T12:55:28Z",
      "closed_at": "2025-12-28T17:44:02Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/27087",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 46161,
      "title": "Allow specifying log groups for `aws_mwaa_environment` (bring your own log group)",
      "problem": "### Description\n\nIt is a bit annoying that the `aws_mwaa_environment` resource autocreates log groups with a specified name. This makes it difficult/annoying to fine-tune cloudwatch logging parameters. Yes I know we can create log groups with the same name beforehand to use them but it's a bit janky to do that. It would be nice if the logging_configuration block allowed for an existing log group to be specified so that this can be managed more elegantly.\n\n### Affected Resource(s) or Data Source(s)\n\naws_mwaa_environment\n\n### Potential Terraform Configuration\n\n```hcl\nresource \"aws_mwaa_environment\" \"example\" {\n  dag_s3_path        = \"dags/\"\n  execution_role_arn = aws_iam_role.example.arn\n  logging_configuration {\n    dag_processing_logs {\n      enabled   = true\n      log_level = \"DEBUG\"\n      log_group = aws_cloudwatch_log_group.dag_processing.arn\n    }\n\n    scheduler_logs {\n      enabled   = true\n      log_level = \"INFO\"\n      log_group = aws_cloudwatch_log_group.scheduler_logs.arn\n    }\n\n    task_logs {\n      enabled   = true\n      log_level = \"WARNING\"\n      log_group = aws_cloudwatch_log_group.task_logs.arn\n    }\n\n    webserver_logs {\n      enabled   = true\n      log_level = \"ERROR\"\n      log_group = aws_cloudwatch_log_group.web_server_logs.arn\n    }\n\n    worker_logs {\n      enabled   = true\n      log_level = \"CRITICAL\"\n      log_group = aws_cloudwatch_log_group.workers_logs.arn\n    }\n  }\n  name = \"example\"\n\n  network_configuration {\n    security_group_ids = [aws_security_group.example.id]\n    subnet_ids         = aws_subnet.private[*].id\n  }\n\n  source_bucket_arn = aws_s3_bucket.example.arn\n}\n```\n\n\n### References\n\n_No response_\n\n### Would you like to implement the enhancement?\n\nNo",
      "solution": "### Community Guidelines\n\nThis comment is added to every new Issue to provide quick reference to how the Terraform AWS Provider is maintained. Please review the information below, and thank you for contributing to the community that keeps the provider thriving! :rocket:\n\n#### Voting for Prioritization\n\n* Please vote on this Issue by adding a :+1: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original post to help the community and maintainers prioritize it.\n* Please see our [prioritization guide](https://hashicorp.github.io/terraform-provider-aws/prioritization/) for additional information on how the maintainers handle prioritization.\n* Please **do not** leave +1 or other comments that do not add relevant new information or questions; they generate extra noise for others following the Issue and do not help prioritize the request.\n\n### Volunteering to Work on This Issue\n\n* If you are interested in working on this issue, please leave a comment.\n* If this would be your first contribution, please review the [contribution guide](https://hashicorp.github.io/terraform-provider-aws/).\n* For new resources and data sources, use [skaff](https://hashicorp.github.io/terraform-provider-aws/skaff/) to generate scaffolding with comments detailing common expectations.\n\n\n\n---\n\n> [!WARNING]\n> This Issue has been closed, meaning that any additional comments are much easier for the maintainers to miss. Please assume that the maintainers will not see them.\n>\n> Ongoing conversations amongst community members are welcome, however, the issue will be locked after 30 days. Moving conversations to another venue, such as the [AWS Provider forum](https://discuss.hashicorp.com/c/terraform-providers/tf-aws/33), is recommended. If you have additional concerns, please open a new issue, referencing this one where needed.",
      "labels": [
        "enhancement",
        "upstream",
        "service/mwaa"
      ],
      "created_at": "2026-01-26T18:29:55Z",
      "closed_at": "2026-01-27T18:45:49Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/46161",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 20917,
      "title": "elasticache redis: autoscaling",
      "problem": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\nSince AWS announced autoscaling on elasticache-redis instances  [here](https://aws.amazon.com/about-aws/whats-new/2021/08/amazon-elasticache-redis/) on Aug 20, 2021 it would be awesome if we could profit from in on terraform\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n### New or Affected Resource(s)\r\n\r\n<!--- Please list the new or affected resources and data sources. --->\r\n\r\n* aws_elasticache_cluster\r\n\r\n### Potential Terraform Configuration\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n```hcl\r\n# Copy-paste your Terraform configurations here - for large Terraform configs,\r\n# please use a service like Dropbox and share a link to the ZIP file. For\r\n# security, you can also encrypt the files using our GPG public key.\r\n```\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation? For example:\r\n\r\n* https://aws.amazon.com/about-aws/whats-new/2018/04/introducing-amazon-ec2-fleet/\r\n--->\r\n\r\n* [https://aws.amazon.com/about-aws/whats-new/2021/08/amazon-elasticache-redis/](https://aws.amazon.com/about-aws/whats-new/2021/08/amazon-elasticache-redis/)\r\n",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/elasticache",
        "stale"
      ],
      "created_at": "2021-09-16T08:48:59Z",
      "closed_at": "2025-12-27T17:43:43Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/20917",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-aws",
      "issue_number": 34742,
      "title": "Fix state upgrade acceptance tests cases that check via `PlanOnly: true`",
      "problem": "The [upgrade to `github.com/hashicorp/terraform-plugin-testing@v1.6.0`](https://github.com/hashicorp/terraform-provider-aws/pull/34715) requires updating acceptance tests that verify state upgrades via a `PlanOnly: true` step.\r\nSee https://github.com/hashicorp/terraform-plugin-testing/issues/237.",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "tests",
        "technical-debt",
        "stale"
      ],
      "created_at": "2023-12-05T19:14:22Z",
      "closed_at": "2025-12-26T17:43:27Z",
      "url": "https://github.com/hashicorp/terraform-provider-aws/issues/34742",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31416,
      "title": "[DOC] Example Usage for azurerm_machine_learning_workspace is incorrect",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\nlatest\n\n### AzureRM Provider Version\n\nlatest\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_machine_learning_workspace\n\n### Terraform Configuration Files\n\n```hcl\nN/A\n```\n\n### Debug Output/Panic Output\n\n```shell\nN/A\n```\n\n### Expected Behaviour\n\n[Example Usage](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/machine_learning_workspace#example-usage)\nprovider \"azurerm\" {\n  features {}\n}\n\ndata \"azurerm_machine_learning_workspace\" \"existing\" {\n  name                = \"example-workspace\"\n  resource_group_name = \"example-resources\"\n}\n\noutput \"id\" {\n  value = **data**.azurerm_machine_learning_workspace.existing.id\n}\n\n### Actual Behaviour\n\n;data; is missing from the example\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\nhttps://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/machine_learning_workspace",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "documentation",
        "service/machine-learning",
        "v/4.x"
      ],
      "created_at": "2025-12-26T16:29:50Z",
      "closed_at": "2026-01-06T17:11:22Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31416",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30946,
      "title": "Cluster Recreated Instead of In-Place Upgrade When Changing Azure CNI to Cilium",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.11.4\n\n### AzureRM Provider Version\n\n4.50.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_kubernetes_cluster\n\n### Terraform Configuration Files\n\n```hcl\nnetwork_profile {\n    network_plugin    = \"azure\"\n    network_policy    = \"cilium\"\n    network_data_plane = \"cilium\"\n  }\n```\n\n### Debug Output/Panic Output\n\n```shell\n~ network_profile {\n    ~ ip_versions         = [\n        - \"IPv4\",\n      ] -> (known after apply)\n    ~ network_data_plane  = \"azure\" -> \"cilium\" # forces replacement\n    + network_mode        = (known after apply)\n    ~ network_policy      = \"azure\" -> \"cilium\" # forces replacement\n    + pod_cidr            = (known after apply)\n    ~ pod_cidrs           = [] -> (known after apply)\n    ~ service_cidrs       = [\n        - \"10.254.0.0/24\",\n      ] -> (known after apply)\n      # (6 unchanged attributes hidden)\n\n    ~ load_balancer_profile (known after apply)\n    - load_balancer_profile {\n        - backend_pool_type           = \"NodeIPConfiguration\" -> null\n        - effective_outbound_ips      = [] -> null\n        - idle_timeout_in_minutes     = 0 -> null\n        - managed_outbound_ip_count   = 0 -> null\n        - managed_outbound_ipv6_count = 0 -> null\n        - outbound_ip_address_ids     = [] -> null\n        - outbound_ip_prefix_ids      = [] -> null\n        - outbound_ports_allocated    = 0 -> null\n      }\n\nPlan: 1 to add, 0 to change, 1 to destroy.\n```\n\n### Expected Behaviour\n\nAccording to the official Microsoft documentation, the Azure CLI supports an in-place reimage when upgrading the dataplane to Cilium, without requiring full cluster deletion or recreation:\n\ud83d\udd17 https://learn.microsoft.com/en-us/azure/aks/upgrade-azure-cni?tabs=azure-cni#upgrade-dataplane-to-azure-cni-powered-by-cilium\n\nHowever, in the Terraform AzureRM provider, changing either network_data_plane or network_policy currently triggers a full cluster replacement due to the ForceNewIfChange(...) behavior.\n\n### Actual Behaviour\n\nCould you please share if and when in-place upgrade support for this change will be integrated into the azurerm provider?\nAlternatively, could you provide any details regarding the current roadmap or milestone for this functionality?\n\nThank you for your support and clarification.\n\nBest regards,\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/kubernetes-cluster",
        "v/4.x"
      ],
      "created_at": "2025-10-27T05:40:35Z",
      "closed_at": "2026-01-06T23:32:31Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30946",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31376,
      "title": "azurerm_container_app secret blocks rely on order of secrets, causing unnecessary updates",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.14.2\n\n### AzureRM Provider Version\n\n4.56.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_container_app\n\n### Terraform Configuration Files\n\n```hcl\nmodule \"container_app\" {\n  source                       = \"../\"\n  container_app_name           = local.container_app_name\n  resource_group_name          = azurerm_resource_group.rg.name\n  container_app_environment_id = azurerm_container_app_environment.container_app_environment.id\n  tags                         = var.tags\n  containers = [\n    {\n      name   = \"examplecontainerapp\"\n      cpu    = 0.25\n      memory = \"0.5Gi\"\n    }\n  ]\n  ingress = {\n    target_port      = 80\n    external_enabled = true\n    traffic_weight = [\n      {\n        latest_revision = true\n        percentage      = 100\n      }\n    ]\n    ip_security_restrictions = [\n      {\n        action           = \"Allow\"\n        name             = \"Allow_All\"\n        ip_address_range = \"0.0.0.0/0\"\n      }\n    ]\n  }\n  secrets = [\n    {\n      name                = \"container-app-secret-name-1\"\n      identity            = \"System\"\n      key_vault_secret_id = \"https://${var.key_vault_name}.vault.azure.net/secrets/secret-name-1\"\n    },\n    {\n      name                = \"container-app-secret-name-2\"\n      identity            = \"System\"\n      key_vault_secret_id = \"https://${var.key_vault_name}.vault.azure.net/secrets/secret-name-2\"\n    }\n  ]\n  revision_mode = \"Single\"\n}\n\n\n//// Below is example module code. Issue happens when you modify any part of the secrets list/map\nresource \"azurerm_container_app\" \"container_app\" {\n  name                         = var.container_app_name\n  container_app_environment_id = var.container_app_environment_id\n  resource_group_name          = var.resource_group_name\n  tags                         = var.tags\n\n  workload_profile_name  = var.workload_profile_name\n  revision_mode          = var.revision_mode\n  max_inactive_revisions = var.max_inactive_revisions\n  template {\n    dynamic \"init_container\" {\n      for_each = var.init_container[*]\n      content {\n        args    = init_container.value.args\n        command = init_container.value.command\n        cpu     = init_container.value.cpu\n        dynamic \"env\" {\n          for_each = init_container.value.env\n          content {\n            name        = env.value.name\n            secret_name = env.value.secret_name\n            value       = env.value.secret_name != null ? null : env.value.value\n          }\n        }\n        image             = init_container.value.image\n        memory            = init_container.value.memory\n        name              = init_container.value.name\n      }\n    }\n    dynamic \"container\" {\n      for_each = var.containers\n      content {\n        cpu               = container.value.cpu\n        ephemeral_storage = container.value.ephemeral_storage\n        image             = \"mcr.microsoft.com/k8se/quickstart:latest\"\n        memory = container.value.memory\n        name   = container.value.name\n      }\n    }\n    max_replicas = var.max_replicas\n    min_replicas = var.min_replicas\n  }\n\n  dynamic \"identity\" {\n    for_each = var.identity[*]\n    content {\n      type         = identity.value.type\n      identity_ids = identity.value.identity_ids\n    }\n  }\n \n  dynamic \"secret\" {\n    for_each = var.secrets\n    content {\n      name                = secret.value.name\n      identity            = secret.value.identity\n      key_vault_secret_id = secret.value.identity != null ? secret.value.key_vault_secret_id : null\n      value               = secret.value.key_vault_secret_id == null ? secret.value.value : null\n    }\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\n//// The following is the plan output when removing a single secret from the secrets list\n  # module.admin_container_app.azurerm_container_app.container_app will be updated in-place\n  ~ resource \"azurerm_container_app\" \"container_app\" {\n        id                            = \"omitted\"\n        name                          = \"omitted\"\n        # (10 unchanged attributes hidden)\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      - secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n      + secret {\n          # At least one attribute in this block is (or was) sensitive,\n          # so its contents will not be displayed.\n        }\n        # (4 unchanged blocks hidden)\n    }\n```\n\n### Expected Behaviour\n\nPlan should show only 1 change - to remove the single secret\n\n### Actual Behaviour\n\nPlan shows 40 removals and 39 adds - effectively removing all secrets and replacing them with the same set minus 1 of them\n\n### Steps to Reproduce\n\nCreate/use a module for azurerm_container_app that uses a dynamic block with for_each loop for secret blocks. Pass in a list or map of secrets. Apply to create new infrastructure. Update secret list/map passed in to remove any single secret. Run plan. \n\n### Important Factoids\n\n_No response_\n\n### References\n\nMy guess is that there is ordering of the secret blocks created by the dynamic for_each loop, similar to what this post describes for a different provider: https://discuss.hashicorp.com/t/dynamic-task-foreach-order-changes/48699/2",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "duplicate",
        "service/container-apps",
        "v/4.x",
        "service/resource"
      ],
      "created_at": "2025-12-16T21:26:51Z",
      "closed_at": "2025-12-18T16:09:57Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31376",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31390,
      "title": "azurerm_mssql_managed_instance - storage_size_in_gb is limited to 16384 instead of 32768",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.10.5\n\n### AzureRM Provider Version\n\n4.57.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_mssql_managed_instance\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_mssql_managed_instance\" \"sqlmi\" {\n  name                = \"\"\n  resource_group_name = \"\"\n  location            = \"westus\"\n  \n  license_type       = \"BasePrice\"\n  sku_name           = \"GP_Gen5\"\n  storage_size_in_gb = 20480\n  vcores             = 32\n  \n}\n```\n\n### Debug Output/Panic Output\n\n```shell\n\u2577\n\u2502 Error: expected storage_size_in_gb to be in the range (32 - 16384), got 20480\n\u2502\n\u2502   with module.sql_managed_instance.azurerm_mssql_managed_instance.sqlmi,\n\u2502   on ..\\..\\..\\Modules\\sql-managed-instance\\v1.0\\main.tf line 8, in resource \"azurerm_mssql_managed_instance\" \"sqlmi\":\n\u2502    8:   storage_size_in_gb           = var.storage_size_in_gb\n\u2502\n\u2575\n```\n\n### Expected Behaviour\n\nIt should scale storage to 32768\n\n### Actual Behaviour\n\nError: expected storage_size_in_gb to be in the range (32 - 16384), got 20480\n\n### Steps to Reproduce\n\nBuild a SQL managed instance with 20480 GB of storage and it will fail.\n\n### Important Factoids\n\nAccording to Azure documentation, General Purpose Next-gen instances support up to 32,768 GB (32 TB). Verified in Azure Portal UI that maximum is 32768 GB.\n\n### References\n\n#17710\nhttps://learn.microsoft.com/en-us/azure/azure-sql/managed-instance/resource-limits",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/mssqlmanagedinstance",
        "v/4.x"
      ],
      "created_at": "2025-12-19T01:16:41Z",
      "closed_at": "2026-01-01T00:42:05Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31390",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31418,
      "title": "Support for node_provisioning_mode in azurerm_kubernetes_cluster (NAP is now GA)",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n- Please vote on this issue by adding a \ud83d\udc4d reaction to the original issue to help the community and maintainers prioritize this request\n- Please do not leave \"+1\" or \"me too\" comments, they generate extra noise for issue followers and do not help prioritize the request\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\n\n### Description\n\nNode Auto-Provisioning (NAP) for AKS is now **Generally Available** as of July 2025 ([announcement](https://azureaggregator.wordpress.com/2025/07/18/launched-generally-available-node-auto-provisioning-support-in-aks/)).\n\nThe previous issue #24503 was closed because NAP was in preview at the time. Now that it's GA and available in stable API versions, I'm requesting this feature be reconsidered.\n\nNAP (powered by Karpenter) automatically provisions optimal VM sizes based on pending pod requirements, providing significant cost savings through right-sizing and better bin-packing.\n\n### New or Affected Resource(s)/Data Source(s)\n\n- `azurerm_kubernetes_cluster`\n\n### Potential Terraform Configuration\n\n```hcl\nresource \"azurerm_kubernetes_cluster\" \"example\" {\n  name                = \"example-aks\"\n  location            = azurerm_resource_group.example.location\n  resource_group_name = azurerm_resource_group.example.name\n  dns_prefix          = \"example\"\n\n  default_node_pool {\n    name       = \"system\"\n    node_count = 1\n    vm_size    = \"Standard_D2s_v3\"\n    only_critical_addons_enabled = true\n  }\n\n  # New attribute for NAP\n  node_provisioning_mode = \"Auto\"  # or \"Manual\" (default)\n\n  identity {\n    type = \"SystemAssigned\"\n  }\n}\n```\n\n### References\n\n- [NAP GA Announcement](https://azureaggregator.wordpress.com/2025/07/18/launched-generally-available-node-auto-provisioning-support-in-aks/)\n- [Microsoft NAP Documentation](https://learn.microsoft.com/en-us/azure/aks/node-auto-provisioning)\n- [Azure REST API - managedClusters 2025-05-01](https://learn.microsoft.com/en-us/rest/api/aks/managed-clusters/create-or-update) - `nodeProvisioningProfile.mode`\n- Previous issue: #24503 (closed as \"not planned\" when NAP was preview)\n\n### Current Workaround\n\nUsing `azapi_update_resource` to enable NAP after cluster creation:\n\n```hcl\nresource \"azapi_update_resource\" \"nap\" {\n  type        = \"Microsoft.ContainerService/managedClusters@2025-05-01\"\n  resource_id = azurerm_kubernetes_cluster.example.id\n\n  body = {\n    properties = {\n      nodeProvisioningProfile = {\n        mode = \"Auto\"\n      }\n    }\n  }\n}\n```\n\nThis workaround is functional but adds complexity and requires managing two providers.",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/resource"
      ],
      "created_at": "2025-12-26T21:47:27Z",
      "closed_at": "2025-12-31T04:00:52Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31418",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31072,
      "title": "Importing logic app gives Error: `inputs` was nil for HTTP Trigger Trigger",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.11.4\n\n### AzureRM Provider Version\n\n4.47.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_logic_app_trigger_http_request\n\n### Terraform Configuration Files\n\n```hcl\n# also happens when using \"terraform import\" command instead of plan with import blocks\nimport {\n  id = \"/subscriptions/111-111-111/resourceGroups/my-rg/providers/Microsoft.Logic/workflows/reboot-when-unhealthy/triggers/When_an_HTTP_request_is_received\"\n  to = azurerm_logic_app_trigger_http_request.main\n}\nresource \"azurerm_logic_app_trigger_http_request\" \"main\" {\n  name = \"When_an_HTTP_request_is_received\"\n  logic_app_id = azurerm_logic_app_workflow.main.id\n\n  schema = jsonencode({\n  })\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nazurerm_logic_app_trigger_http_request.main: Refreshing state... [id=/subscriptions/redacted-subscription-id/resourceGroups/my-rg/providers/Microsoft.Logic/workflows/my-workflow/triggers/When_an_HTTP_request_is_received]\n2025-11-10T14:19:19.596-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] Preparing arguments for /subscriptions/redacted-subscription-id/resourceGroups/my-rg/providers/Microsoft.Logic/workflows/my-workflow: Trigger \"When_an_HTTP_request_is_received\"\n2025-11-10T14:19:19.596-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] Locking \"azurerm_logic_app.my-workflow\"\n2025-11-10T14:19:19.596-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] Locked \"azurerm_logic_app.my-workflow\"\n2025-11-10T14:19:19.596-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] AzureRM Request:\n2025-11-10T14:19:19.596-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: GET /subscriptions/redacted-subscription-id/resourceGroups/my-rg/providers/Microsoft.Logic/workflows/my-workflow?api-version=2019-05-01 HTTP/1.1\n2025-11-10T14:19:19.597-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Host: management.azure.com\n2025-11-10T14:19:19.602-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: User-Agent: HashiCorp/go-azure-sdk (Go-http-Client/1.1 workflows/2019-05-01) HashiCorp Terraform/1.11.4 (+https://www.terraform.io) terraform-provider-azurerm/dev pid-222c6c49-1b0a-5959-a213-6608f9eb8820\n2025-11-10T14:19:19.602-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Content-Type: application/json; charset=utf-8\n2025-11-10T14:19:19.603-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Ms-Correlation-Request-Id: 40322bc9-6aa9-34e5-c359-bce2ffbdb961\n2025-11-10T14:19:19.603-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Accept-Encoding: gzip\n2025-11-10T14:19:19.603-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe\n2025-11-10T14:19:19.603-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe\n2025-11-10T14:19:19.603-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] GET https://management.azure.com/subscriptions/redacted-subscription-id/resourceGroups/my-rg/providers/Microsoft.Logic/workflows/my-workflow?api-version=2019-05-01\n2025-11-10T14:19:19.979-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] AzureRM Response for https://management.azure.com/subscriptions/redacted-subscription-id/resourceGroups/my-rg/providers/Microsoft.Logic/workflows/my-workflow?api-version=2019-05-01:\n2025-11-10T14:19:19.979-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: HTTP/2.0 200 OK\n2025-11-10T14:19:19.979-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Content-Length: 2839\n2025-11-10T14:19:19.979-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Cache-Control: no-cache\n2025-11-10T14:19:19.979-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Content-Type: application/json; charset=utf-8\n2025-11-10T14:19:19.979-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Date: Mon, 10 Nov 2025 19:19:19 GMT\n2025-11-10T14:19:19.980-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Expires: -1\n2025-11-10T14:19:19.980-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Pragma: no-cache\n2025-11-10T14:19:19.980-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Strict-Transport-Security: max-age=31536000; includeSubDomains\n2025-11-10T14:19:19.980-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Vary: Accept-Encoding\n2025-11-10T14:19:19.980-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Cache: CONFIG_NOCACHE\n2025-11-10T14:19:19.980-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Content-Type-Options: nosniff\n2025-11-10T14:19:19.980-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Ms-Correlation-Request-Id: 40322bc9-6aa9-34e5-c359-bce2ffbdb961\n2025-11-10T14:19:19.980-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Ms-Ratelimit-Remaining-Subscription-Resource-Requests: 1099\n2025-11-10T14:19:19.980-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Ms-Request-Id: canadacentral:8bf33b5d-ee91-40a6-9405-289d0dbc58bf\n2025-11-10T14:19:19.980-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Ms-Routing-Request-Id: CANADACENTRAL:20251110T191919Z:eefebd46-54b6-42a9-8243-eacb6efe00b4\n2025-11-10T14:19:19.980-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Msedge-Ref: Ref A: E70103F363B9437A915416F8CC88675A Ref B: YTO221090812027 Ref C: 2025-11-10T19:19:19Z\n2025-11-10T14:19:19.980-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe\n2025-11-10T14:19:19.980-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: {\"properties\":{\"provisioningState\":\"Succeeded\",\"createdTime\":\"2025-10-07T14:28:32.0886077Z\",\"changedTime\":\"2025-11-10T18:50:44.4106686Z\",\"state\":\"Enabled\",\"version\":\"08584388062410663521\",\"accessEndpoint\":\"redacted\",\"definition\":{\"$schema\":\"https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#\",\"contentVersion\":\"1.0.0.0\",\"parameters\":{\"$connections\":{\"defaultValue\":{},\"type\":\"Object\"}},\"triggers\":{\"When_an_HTTP_request_is_received\":{\"type\":\"Request\",\"kind\":\"Http\"}},\"actions\":{\"Queue_a_new_build\":{\"runAfter\":{},\"type\":\"ApiConnection\",\"inputs\":{\"body\":{\"sourceBranch\":\"uat\"},\"host\":{\"connection\":{\"name\":\"@parameters('$connections')['visualstudioteamservices']['connectionId']\"}},\"method\":\"post\",\"path\":\"/@{encodeURIComponent('CKAN_DC')}/_apis/build/builds\",\"queries\":{\"account\":\"aafc\",\"buildDefId\":\"305\"}}}}},\"parameters\":{\"$connections\":{\"value\":{\"visualstudioteamservices\":{\"connectionId\":\"/subscriptions/redacted-subscription-id/resourceGroups/my-rg/providers/Microsoft.Web/connections/visualstudioteamservices\",\"connectionName\":\"visualstudioteamservices\",\"id\":\"/subscriptions/redacted-subscription-id/providers/Microsoft.Web/locations/canadacentral/managedApis/visualstudioteamservices\"}}}},\"endpointsConfiguration\":{\"workflow\":{\"outgoingIpAddresses\":[{\"address\":\"redacted\"},{\"address\":\"redacted\"},{\"address\":\"redacted\"},{\"address\":\"redacted\"},{\"address\":\"redactedaddress\":\"redacted\"},{\"address\":\"redacted\"},{\"address\":\"redacted\"},{\"address\":\"redactedaddress\":\"redacted\"}],\"accessEndpointIpAddresses\":[{\"address\":\"redacted\"},{\"address\":\"redacted\"},{\"address\":\"redactedaddress\":\"redacted\"},{\"address\":\"redacted\"},{\"address\":\"redacted\"},{\"address\":\"redactedaddress\":\"redacted\"}]},\"connector\":{\"outgoingIpAddresses\":[{\"address\":\"redacted\"},{\"address\":\"redacted\"},{\"address\":\"redacted/28\"},{\"address\":\"redacted/27\"},{\"address\":\"redacted/27\"},{\"address\":\"redacted/28\"},{\"address\":\"redacted\"},{\"address\":\"redacted\"}]}}},\"id\":\"/subscriptions/redacted-subscription-id/resourceGroups/my-rg/providers/Microsoft.Logic/workflows/my-workflow\",\"name\":\"my-workflow\",\"type\":\"Microsoft.Logic/workflows\",\"location\":\"canadacentral\",\"tags\":{}}\n2025-11-10T14:19:19.981-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] Unlocking \"azurerm_logic_app.my-workflow\"\n2025-11-10T14:19:19.981-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] Unlocked \"azurerm_logic_app.my-workflow\"\n2025-11-10T14:19:19.982-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] trigger type is Request\n2025-11-10T14:19:19.982-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] Preparing arguments for Logic App Workspace \"my-workflow\" (Resource Group \"my-rg\") trigger \"When_an_HTTP_request_is_received\"\n2025-11-10T14:19:19.982-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] Locking \"azurerm_logic_app.my-workflow\"\n2025-11-10T14:19:19.982-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] Locked \"azurerm_logic_app.my-workflow\"\n2025-11-10T14:19:19.982-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] AzureRM Request:\n2025-11-10T14:19:19.982-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: POST /subscriptions/redacted-subscription-id/resourceGroups/my-rg/providers/Microsoft.Logic/workflows/my-workflow/triggers/When_an_HTTP_request_is_received/listCallbackUrl?api-version=2019-05-01 HTTP/1.1\n2025-11-10T14:19:19.982-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Host: management.azure.com\n2025-11-10T14:19:19.982-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: User-Agent: HashiCorp/go-azure-sdk (Go-http-Client/1.1 workflowtriggers/2019-05-01) HashiCorp Terraform/1.11.4 (+https://www.terraform.io) terraform-provider-azurerm/dev pid-222c6c49-1b0a-5959-a213-6608f9eb8820\n2025-11-10T14:19:19.982-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Content-Length: 0\n2025-11-10T14:19:19.982-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Content-Type: application/json; charset=utf-8\n2025-11-10T14:19:19.983-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Ms-Correlation-Request-Id: 40322bc9-6aa9-34e5-c359-bce2ffbdb961\n2025-11-10T14:19:19.983-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Accept-Encoding: gzip\n2025-11-10T14:19:19.983-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe\n2025-11-10T14:19:19.983-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe\n2025-11-10T14:19:19.983-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] POST https://management.azure.com/subscriptions/redacted-subscription-id/resourceGroups/my-rg/providers/Microsoft.Logic/workflows/my-workflow/triggers/When_an_HTTP_request_is_received/listCallbackUrl?api-version=2019-05-01\n2025-11-10T14:19:20.258-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] AzureRM Response for https://management.azure.com/subscriptions/redacted-subscription-id/resourceGroups/my-rg/providers/Microsoft.Logic/workflows/my-workflow/triggers/When_an_HTTP_request_is_received/listCallbackUrl?api-version=2019-05-01:\n2025-11-10T14:19:20.259-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: HTTP/2.0 200 OK\n2025-11-10T14:19:20.259-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Content-Length: 622\n2025-11-10T14:19:20.259-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Cache-Control: no-cache\n2025-11-10T14:19:20.259-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Content-Type: application/json; charset=utf-8\n2025-11-10T14:19:20.258-0500 [ERROR] vertex \"import azurerm_logic_app_trigger_http_request.main result\" error: `inputs` was nil for HTTP Trigger Trigger (Subscription: \"redacted-subscription-id\"\nResource Group Name: \"my-rg\"\nWorkflow Name: \"my-workflow\"\nTrigger Name: \"When_an_HTTP_request_is_received\")\n2025-11-10T14:19:20.260-0500 [ERROR] vertex \"azurerm_logic_app_trigger_http_request.main (import id \\\"/subscriptions/redacted-subscription-id/resourceGroups/my-rg/providers/Microsoft.Logic/workflows/my-workflow/triggers/When_an_HTTP_request_is_received\\\")\" error: `inputs` was nil for HTTP Trigger Trigger (Subscription: \"redacted-subscription-id\"\nResource Group Name: \"my-rg\"\nWorkflow Name: \"my-workflow\"\nTrigger Name: \"When_an_HTTP_request_is_received\")\n2025-11-10T14:19:20.260-0500 [ERROR] vertex \"azurerm_logic_app_trigger_http_request.main (expand)\" error: `inputs` was nil for HTTP Trigger Trigger (Subscription: \"redacted-subscription-id\"\nResource Group Name: \"my-rg\"\nWorkflow Name: \"my-workflow\"\nTrigger Name: \"When_an_HTTP_request_is_received\")\n2025-11-10T14:19:20.259-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Date: Mon, 10 Nov 2025 19:19:19 GMT\n2025-11-10T14:19:20.261-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Expires: -1\n2025-11-10T14:19:20.261-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Pragma: no-cache\n2025-11-10T14:19:20.262-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Strict-Transport-Security: max-age=31536000; includeSubDomains\n2025-11-10T14:19:20.262-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Vary: Accept-Encoding\n2025-11-10T14:19:20.262-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Cache: CONFIG_NOCACHE\n2025-11-10T14:19:20.262-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Content-Type-Options: nosniff\n2025-11-10T14:19:20.262-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Ms-Correlation-Request-Id: 40322bc9-6aa9-34e5-c359-bce2ffbdb961\n2025-11-10T14:19:20.262-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Ms-Operation-Identifier: tenantId=9da98bb1-1857-4cc3-8751-9a49e35d24cd,objectId=2a66ec41-3646-4e92-8935-dadf5999b650/canadacentral/9ac1adc3-1347-4b26-9452-cca7b88cce12\n2025-11-10T14:19:20.267-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Ms-Ratelimit-Remaining-Subscription-Global-Writes: 2999\n2025-11-10T14:19:20.267-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Ms-Ratelimit-Remaining-Subscription-Writes: 199\n2025-11-10T14:19:20.268-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Ms-Request-Id: canadacentral:236bea88-0b16-42ab-8650-169bdc347abf\n2025-11-10T14:19:20.268-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Ms-Routing-Request-Id: CANADACENTRAL:20251110T191920Z:eabf3617-3d31-4c46-b637-a9e71d2d92ea\n2025-11-10T14:19:20.269-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: X-Msedge-Ref: Ref A: 5FCD1A6DBE3948DF8507E128A910E175 Ref B: YTO221100611025 Ref C: 2025-11-10T19:19:20Z\n2025-11-10T14:19:20.269-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe\n\u2577\n\u2502 Error: `inputs` was nil for HTTP Trigger Trigger (Subscription: \"redacted-subscription-id\"\n\u2502 Resource Group Name: \"my-rg\"\n\u2502 Workflow Name: \"my-workflow\"\n\u2502 Trigger Name: \"When_an_HTTP_request_is_received\")\n\u2502\n\u2502\n\u2575\n\n2025-11-10T14:19:20.269-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: {\"value\":\"https://prod-13.canadacentral.logic.azure.com:443/workflows/jkljkljkl/triggers/When_an_HTTP_request_is_received/paths/invoke?api-version=2019-05-01&sp=%2Ftriggers%2FWhen_an_HTTP_request_is_received%2Frun&sv=1.0&sig=abc\",\"method\":\"POST\",\"basePath\":\"https://prod-13.canadacentral.logic.azure.com/workflows/jkljkljkl/triggers/When_an_HTTP_request_is_received/paths/invoke\",\"queries\":{\"api-version\":\"2019-05-01\",\"sp\":\"/triggers/When_an_HTTP_request_is_received/run\",\"sv\":\"1.0\",\"sig\":\"abc123\"}}\n2025-11-10T14:19:20.271-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] Unlocking \"azurerm_logic_app.my-workflow\"\n2025-11-10T14:19:20.272-0500 [DEBUG] provider.terraform-provider-azurerm_v4.47.0_x5.exe: [DEBUG] Unlocked \"azurerm_logic_app.my-workflow\"\n2025-11-10T14:19:20.272-0500 [ERROR] provider.terraform-provider-azurerm_v4.47.0_x5.exe: Response contains error diagnostic:\n  diagnostic_summary=\n  | `inputs` was nil for HTTP Trigger Trigger (Subscription: \"redacted-subscription-id\"\n  | Resource Group Name: \"my-rg\"\n  | Workflow Name: \"my-workflow\"\n  | Trigger Name: \"When_an_HTTP_request_is_received\")\n   @caller=github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/diag/diagnostics.go:58 @module=sdk.proto diagnostic_severity=ERROR tf_proto_version=5.10 tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_req_id=0192c0d2-714a-4709-b7d8-3e27c9c2fbd7 tf_resource_type=azurerm_logic_app_trigger_http_request diagnostic_detail=\"\" tf_rpc=ReadResource timestamp=2025-11-10T14:19:20.257-0500\n2025-11-10T14:19:20.273-0500 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=\"rpc error: code = Unavailable desc = error reading from server: EOF\"\n2025-11-10T14:19:20.292-0500 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/azurerm/4.47.0/windows_amd64/terraform-provider-azurerm_v4.47.0_x5.exe id=45784\n2025-11-10T14:19:20.293-0500 [DEBUG] provider: plugin exited\n```\n\n### Expected Behaviour\n\nImport should succeed for http triggers which take no inputs.\n\n### Actual Behaviour\n\nImport failed when reading remote resource.\n\n### Steps to Reproduce\n\n1. Create a logic app\n2. Create an http trigger that takes no arguments\n3. Import the trigger\n\n### Important Factoids\n\n_No response_\n\n### References\n\nhttps://github.com/hashicorp/terraform-provider-azurerm/blob/550bd7da3f98d851f3894a2162cb263eb85d140a/internal/services/logic/logic_app_trigger_http_request_resource.go#L163",
      "solution": "Hi @TeamDman, thanks for opening the issue,\n\nCould you please confirm how did you create the trigger? without the `inputs` we can not read the `scheme` property, which is required.\nEven if the `schema` is empty, the response shall contains it as below\n```\n            \"triggers\": {\n                \"some-http-trigger\": {\n                    \"type\": \"Request\",\n                    \"kind\": \"Http\",\n                    \"inputs\": {\n                        \"schema\": {}\n                    }\n                }\n            },\n```\n\n---\n\nJust went into the portal, created a new logic app, created an http trigger using the designer view, and was able to reproduce the issue.\n\nHere's the code view of the new logic app that's also failing to import\n\n```json\n{\n    \"definition\": {\n        \"$schema\": \"https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#\",\n        \"contentVersion\": \"1.0.0.0\",\n        \"triggers\": {\n            \"When_an_HTTP_request_is_received\": {\n                \"type\": \"Request\",\n                \"kind\": \"Http\"\n            }\n        },\n        \"actions\": {},\n        \"outputs\": {},\n        \"parameters\": {\n            \"$connections\": {\n                \"type\": \"Object\",\n                \"defaultValue\": {}\n            }\n        }\n    },\n    \"parameters\": {\n        \"$connections\": {\n            \"type\": \"Object\",\n            \"value\": {}\n        }\n    }\n}\n```\n\n<img width=\"957\" height=\"273\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1e6f6b91-3320-4408-9096-c90311f0fc98\" />\n\n<img width=\"608\" height=\"403\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/2c3ca0d7-8f5d-4c21-8328-0c42c4afd8fb\" />\n\n<img width=\"3260\" height=\"1123\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/084cda64-4adf-4cfa-8242-775e71cf3c46\" />",
      "labels": [
        "bug",
        "service/logic",
        "v/4.x"
      ],
      "created_at": "2025-11-10T19:24:32Z",
      "closed_at": "2026-01-30T18:42:33Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31072",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 26778,
      "title": "Support for [Cassandra Managed Instance version]",
      "problem": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\r\n\r\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\n\n### Description\n\nThe azurerm_cosmosdb_cassandra_cluster resource only support version 3.11 and 4.0 while through the Azure API the version 4.1 already available.\r\nPlease add it to the supported version list. Even better (future proof) if the code can validate the available version through the API.\r\nError message:\r\n\r\n Error: expected version to be one of [\"3.11\" \"4.0\"], got 4.1\r\n\n\n### New or Affected Resource(s)/Data Source(s)\n\nazurerm_cosmosdb_cassandra_cluster\n\n### Potential Terraform Configuration\n\n```hcl\nresource \"azurerm_cosmosdb_cassandra_cluster\" \"acmi\" {\r\n  name                           = local.acmi_name\r\n  resource_group_name            = var.resource_group_name\r\n  location                       = var.region\r\n  delegated_management_subnet_id = var.delegated_management_subnet_id\r\n  default_admin_password         = data.azurerm_key_vault_secret.adminsecret.value\r\n  version                        = \"4.1\"\r\n}\n```\n\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/cosmosdb"
      ],
      "created_at": "2024-07-25T06:51:03Z",
      "closed_at": "2025-12-29T22:31:53Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/26778",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 10562,
      "title": "Autoscaling documentation example mentions 'frequency' but is nowhere explained and apply fails. Is it implemented?",
      "problem": "### Community Note\r\n\r\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or \"me too\" comments, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Terraform (and AzureRM Provider) Version\r\n\r\n1.40 and up to 2.47\r\n\r\n### Affected Resource(s)\r\n\r\nmonitor_autoscale_setting\r\n\r\n### Debug Output\r\n\r\nError: Unsupported argument\r\n\r\n  on tacx-core-apim.tf line 531, in resource \"azurerm_monitor_autoscale_setting\" \"autoscaleBasedOnSchedule\":\r\n 531:       frequency = \"Week\"\r\n\r\nAn argument named \"frequency\" is not expected here.\r\n\r\n### Expected Behaviour\r\n\r\nThe following piece of azurerm_monitor_autoscale_setting profile setting to be accepted:\r\n\r\n  recurrence {\r\n      frequency = \"Week\"\r\n      timezone  = \"W. Europe Standard Time\"\r\n      days      = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\"]\r\n      hours     = [21]\r\n      minutes   = [0]\r\n    }\r\n\r\n\r\n### Actual Behaviour\r\n\r\nAn argument named \"frequency\" is not expected here.\r\n\r\n### Steps to Reproduce\r\n\r\nUse this resource:\r\n\r\nresource \"azurerm_monitor_autoscale_setting\" \"autoscaleBasedOnSchedule\" {\r\n  name                = \"autoscaleBasedOnSchedule\"\r\n  resource_group_name = azurerm_resource_group.rg.name\r\n  location            = azurerm_resource_group.rg.location\r\n  target_resource_id  = azurerm_api_management.apim.id\r\n\r\n  profile {\r\n    name = \"Week days\"\r\n\r\n    capacity {\r\n      default = 1\r\n      minimum = 1\r\n      maximum = 1\r\n    }\r\n\r\n    recurrence {\r\n      frequency = \"Week\"\r\n      timezone  = \"W. Europe Standard Time\"\r\n      days      = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\"]\r\n      hours     = [21]\r\n      minutes   = [0]\r\n    }\r\n  }\r\n}\r\n",
      "solution": "Is there any news on this topic?\r\nMaybe it's fixed by a later version?\r\nAnyone?",
      "labels": [
        "enhancement",
        "documentation",
        "good first issue",
        "service/monitor"
      ],
      "created_at": "2021-02-12T10:51:21Z",
      "closed_at": "2026-01-27T19:33:31Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/10562",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 17575,
      "title": "can't use $Default azurerm_eventhub_consumer_group with latest azurerm",
      "problem": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Community Note\r\n\r\n<!--- Please keep this note for the community --->\r\n\r\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or \"me too\" comments, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n\r\n### Terraform Version\r\n\r\nv1.1.8\r\n\r\n### AzureRM Provider Version\r\n\r\n3.13.0\r\n\r\n### Affected Resource(s)/Data Source(s)\r\n\r\nazurerm_eventhub_consumer_group\r\n\r\n### Terraform Configuration Files\r\n\r\n```hcl\r\ndata \"azurerm_eventhub_consumer_group\" \"consumer_group\" {\r\n  name                = \"$Default\"\r\n  namespace_name      = data.azurerm_eventhub_namespace.eventhub_namespace.name\r\n  eventhub_name       = azurerm_eventhub.azurerm_eventhub.name\r\n  resource_group_name = azurerm_resource_group.rg\r\n}\r\n\r\n\r\nresource \"azurerm_kusto_eventgrid_data_connection\" \"eventhub_connection\" {\r\n  name                         = \"somename\"\r\n  resource_group_name          = azurerm_resource_group.rg\r\n  location                     = \"East US 2\"\r\n  cluster_name                 = \"clustername\"\r\n  database_name                = \"database_name\"\r\n  storage_account_id           = azurerm_storage_account.storage_account.id\r\n  eventhub_id                  = azurerm_eventhub.azurerm_eventhub.id\r\n  eventhub_consumer_group_name = data.azurerm_eventhub_consumer_group.consumer_group.name\r\n\r\n  table_name        = \"tablename\"         #(Optional)\r\n  mapping_rule_name = \"mapping_rule_name\" #(Optional)\r\n  data_format       = \"JSON\"             #(Optional)\r\n\r\n}\r\n```\r\n\r\n\r\n### Debug Output/Panic Output\r\n\r\n```shell\r\nError: invalid value for eventhub_consumer_group_name (The consumer group name can contain only letters, numbers, periods (.), hyphens (-),and underscores (_), up to 50 characters, and it must begin and end with a letter or number.)\r\n```\r\n\r\n\r\n### Expected Behaviour\r\n\r\nit was mentioned that this issue was resolved in earlier versions of azurerm but seems to be back \r\n\r\n### Actual Behaviour\r\n\r\n_No response_\r\n\r\n### Steps to Reproduce\r\n\r\n_No response_\r\n\r\n### Important Factoids\r\n\r\n_No response_\r\n\r\n### References\r\n\r\n_No response_",
      "solution": "Hi @ehsan1503 ,\r\n\r\nThanks for raising this issue, I noticed the value `$Default` cannot be used when trying to create the consumer group in azure potal neither. \r\n![image](https://user-images.githubusercontent.com/92154856/182312102-f9966473-e263-48e4-8283-f86ecc6d2222.png)\r\n\r\nwould you mind confirming from your side? Also, I noticed the restriction was introduced since 2021, so can you be more specific about `it was mentioned that this issue was resolved in earlier versions of azurerm but seems to be back`?\r\n\r\nThanks!",
      "labels": [
        "bug",
        "documentation",
        "service/event-hubs",
        "v/3.x"
      ],
      "created_at": "2022-07-10T06:57:50Z",
      "closed_at": "2026-01-22T23:14:35Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/17575",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31260,
      "title": "azurerm_bastion_host - time out",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\nhi all\n\ni have here always the same issue when i want create a azure bastion host, it always goes not further after 5min20sec. i have tried differ azurerm provider versions but i am not sure why it hangs here:\n\nazurerm_bastion_host.bastion: Creating...\nazurerm_bastion_host.bastion: Still creating... [00m10s elapsed]\nazurerm_bastion_host.bastion: Still creating... [00m20s elapsed]\nazurerm_bastion_host.bastion: Still creating... [00m30s elapsed]\nazurerm_bastion_host.bastion: Still creating... [00m40s elapsed]\nazurerm_bastion_host.bastion: Still creating... [00m50s elapsed]\nazurerm_bastion_host.bastion: Still creating... [01m00s elapsed]\nazurerm_bastion_host.bastion: Still creating... [01m10s elapsed]\nazurerm_bastion_host.bastion: Still creating... [01m20s elapsed]\nazurerm_bastion_host.bastion: Still creating... [01m30s elapsed]\nazurerm_bastion_host.bastion: Still creating... [01m40s elapsed]\nazurerm_bastion_host.bastion: Still creating... [01m50s elapsed]\nazurerm_bastion_host.bastion: Still creating... [02m00s elapsed]\nazurerm_bastion_host.bastion: Still creating... [02m10s elapsed]\nazurerm_bastion_host.bastion: Still creating... [02m20s elapsed]\nazurerm_bastion_host.bastion: Still creating... [02m30s elapsed]\nazurerm_bastion_host.bastion: Still creating... [02m40s elapsed]\nazurerm_bastion_host.bastion: Still creating... [02m50s elapsed]\nazurerm_bastion_host.bastion: Still creating... [03m00s elapsed]\nazurerm_bastion_host.bastion: Still creating... [03m10s elapsed]\nazurerm_bastion_host.bastion: Still creating... [03m20s elapsed]\nazurerm_bastion_host.bastion: Still creating... [03m30s elapsed]\nazurerm_bastion_host.bastion: Still creating... [03m40s elapsed]\nazurerm_bastion_host.bastion: Still creating... [03m50s elapsed]\nazurerm_bastion_host.bastion: Still creating... [04m00s elapsed]\nazurerm_bastion_host.bastion: Still creating... [04m10s elapsed]\nazurerm_bastion_host.bastion: Still creating... [04m20s elapsed]\nazurerm_bastion_host.bastion: Still creating... [04m30s elapsed]\nazurerm_bastion_host.bastion: Still creating... [04m40s elapsed]\nazurerm_bastion_host.bastion: Still creating... [04m50s elapsed]\nazurerm_bastion_host.bastion: Still creating... [05m00s elapsed]\nazurerm_bastion_host.bastion: Still creating... [05m10s elapsed]\nazurerm_bastion_host.bastion: Still creating... [05m20s elapsed]\n\nregards\nfranco\n\n### Terraform Version\n\n1.14.0\n\n### AzureRM Provider Version\n\n4.54.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_bastion_host\n\n### Terraform Configuration Files\n\n```hcl\n// NOTE: Create Azure Bastion Host (SKU Basic)\n\nresource \"azurerm_bastion_host\" \"bastion\" {\n  name                    = var.bastion_name\n  location                = data.azurerm_resource_group.istid.location\n  resource_group_name     = data.azurerm_resource_group.istid.name\n\n  ip_configuration {\n    name                  = \"IpConf\"\n    subnet_id             = azurerm_subnet.bastion_subnet.id\n    public_ip_address_id  = azurerm_public_ip.bastion_pip.id\n  }\n\n  tags = {\n    \"platformplane-name\"  = var.taginfo\n    \"platformplane-type\"  = var.tagtypepostgresbastion\n    \"platformplane-info\"  = var.tagtypepostgresinfo\n  } \n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nno output at the moment\n```\n\n### Expected Behaviour\n\n_No response_\n\n### Actual Behaviour\n\n_No response_\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "hi guys, sorry for the very late response! i have make all correct, the problem was, that i have in my gitlab space the enabled JWT Feature, after i disable it, it works normal without any problems. after 8 minutes i get a succeed message. the JWT Feature is in general a problem creator :)\n\nregards franco",
      "labels": [
        "question",
        "service/network",
        "v/4.x",
        "service/resource"
      ],
      "created_at": "2025-12-03T08:00:17Z",
      "closed_at": "2026-01-14T10:50:53Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31260",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31360,
      "title": "azurerm_pim_active_role_assignment trying to recreate a resource that already exists",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n### Terraform Version\n\n1.7.5\n\n### AzureRM Provider Version\n\n4.56.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_pim_active_role_assignment\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_pim_active_role_assignment\" \"this\" {\n  scope              = <SCOPE ID>\n  role_definition_id = <ROLE DEFINITION ID>\n  principal_id       = <GROUP OBJECT ID>\n  justification      = \".\"\n\n  schedule {\n    start_date_time = time_static.this.rfc3339\n    expiration {\n        duration_days = 0\n      }\n    }\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nA resource with the ID \"/subscriptions/XXXX|/subscriptions/XXXX/providers/Microsoft.Authorization/roleDefinitions/XXXX|XXXX\" already exists - to be managed via Terraform this resource needs to be imported into the State.\n```\n\n### Expected Behaviour\n\n_No response_\n\n### Actual Behaviour\n\nStarting on 12th December, our terraform workflow suddenly started failing with errors like:\n\n```\nA resource with the ID \"/subscriptions/XXXX|/subscriptions/XXXX/providers/Microsoft.Authorization/roleDefinitions/XXXX|XXXX\" already exists - to be managed via Terraform this resource needs to be imported into the State.\n```\n\nfor some `azurerm_pim_active_role_assignment` resources.\n\nThe initial run showed 3 existing assignments (out of probably 100+) in the plan as \"to be created\". Over the course of the last few days, the plan has been showing more and more (now 20+). There have been no changes to the configuration.\n\nWe can't work out what links the assignments that the provider is failing to find. It seems to be unrelated to the time they were created. They are all permanent active assignments. I've checked that I can find the role assignment schedules, schedule instances, and schedule requests via the API, so I'm not sure why the provider isn't picking them up.\n\nThe issue looks very similar to https://github.com/hashicorp/terraform-provider-azurerm/issues/23111 but that issue was supposedly resolved.\n\nAdding an import block, the plan shows changes that force replacements for all of the resources except one (??) that fails with `Cannot import non-existent remote object` (despite, again, me being able to query the api for it myself). The diffs for the imported assignments vary for each resource but seem to relate to different combinations of the `schedule.start_date_time`, `schedule.expiration`, and `justification` fields - again, there has been no change to the configuration on the Terraform side or in the Azure portal.\n\nManually deleting the assignment in the portal & then running tf apply seems to successfully recreate it, and it disappears from subsequent plans, but that's not a particularly satisfactory solution.\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I've been investigating a bit more. I can see `was not found - removing from state` logs in the debug logs, which makes me think that:\n\n1. The step to [search for the role assignment schedule](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/internal/services/authorization/pim_active_role_assignment_resource.go#L374) is returning nil.\n2. Terraform therefore marks the assignment as gone and removes it from the state\n3. Terraform tries to create a new assignment and fails due to it already existing\n\nI don't understand why (1) is failing in the provider. It looks like the api call is maybe returning `{\"value\":[]}` (the logs aren't super clear). My best guess is that there is something like a rate limiting error that we've hit, since:\n\n- The issue started with no changes to the config\n- I can run the same API query locally and find the schedules\n- There seems to be no pattern to which assignments it can't find\n \nHowever, I would expect that to raise a 429 error rather than returning an empty schedules list, so I'm not sure.\n\nIt's worth saying we do see\n\n```\n\u2502 Error: retrieving Scoped Role Assignment Schedule Request (Scope: \"/subscriptions/XXXX\"\n\u2502 Role Assignment Schedule Request Name: \"XXXX\"): unexpected status 429 (429 Too Many Requests) with response: Too Many Requests\n```\n\nsemi-regularly, so it seems reasonable that we might expect to see something similar for the schedules API.\n\nAn extra piece of evidence that suggests some transient issue in retrieving schedules: I manually edited the state file to add the removed state back in for an assignment that was marked missing, and the subsequent run found it successfully.\n\n---\n\nHi @teowa, yeah I definitely agree those are the lines responsible for removing it. With trace logs enabled, I can see examples like:\n\n```\n2025-12-18T12:39:51.9147412Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: [DEBUG] AzureRM Response for https://management.azure.com/subscriptions/<MY_SUB_ID>/providers/Microsoft.Authorization/roleAssignmentSchedules?%24filter=%28principalId+eq+%27<MY_GROUP_OBJECT_ID>%27%29&api-version=2020-10-01: \n2025-12-18T12:39:51.9150817Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: HTTP/2.0 200 OK\n2025-12-18T12:39:51.9152317Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: Content-Length: 12\n2025-12-18T12:39:51.9155180Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: Access-Control-Allow-Headers: content-Type, accept, origin, X-Requested-With, Authorization, name, x-ms-client-session-id, accept-language, x-ms-client-request-id, x-ms-effective-locale, x-ms-command-name\n2025-12-18T12:39:51.9158440Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: Access-Control-Allow-Methods: POST, PUT, DELETE, GET, OPTIONS, PATCH\n2025-12-18T12:39:51.9160446Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: Access-Control-Allow-Origin: *\n2025-12-18T12:39:51.9162103Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: Cache-Control: private\n2025-12-18T12:39:51.9163849Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: Content-Type: application/json; charset=utf-8\n2025-12-18T12:39:51.9165783Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: Date: Thu, 18 Dec 2025 12:39:51 GMT\n2025-12-18T12:39:51.9167054Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: Mspimslice: PROD\n2025-12-18T12:39:51.9168964Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: Strict-Transport-Security: max-age=31536000; includeSubDomains\n2025-12-18T12:39:51.9170585Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: X-Aspnet-Version: 4.0.30319\n2025-12-18T12:39:51.9172001Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: X-Cache: CONFIG_NOCACHE\n2025-12-18T12:39:51.9173401Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: X-Content-Type-Options: nosniff\n2025-12-18T12:39:51.9175013Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: X-Ms-Client-Request-Id: <CLIENT_REQUEST_ID>\n2025-12-18T12:39:51.9177018Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: X-Ms-Correlation-Request-Id: <CORRELATION_REQUEST_ID>\n2025-12-18T12:39:51.9179988Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: X-Ms-Operation-Identifier: appId=***,tenantId=<TENANT_ID>,objectId=<OBJECT_ID>\n2025-12-18T12:39:51.9182421Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: X-Ms-Ratelimit-Remaining-Subscription-Global-Reads: 3749\n2025-12-18T12:39:51.9184142Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: X-Ms-Ratelimit-Remaining-Subscription-Reads: 249\n2025-12-18T12:39:51.9185986Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: X-Ms-Request-Id: <REQUEST_ID>\n2025-12-18T12:39:51.9187788Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: X-Ms-Routing-Request-Id: <ROUTING_REQUEST_ID>\n2025-12-18T12:39:51.9189889Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: X-Msedge-Ref: Ref A: <REF_A> Ref B: <REF_B> Ref C: 2025-12-18T12:39:50Z\n2025-12-18T12:39:51.9191314Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5\n2025-12-18T12:39:51.9192233Z 2025-12-18T12:39:51.914Z [DEBUG] provider.terraform-provider-azurerm_v4.27.0_x5: {\"value\":[]}\n2025-12-18T12:39:51.9195138Z 2025-12-18T12:39:51.914Z [INFO]  provider.terraform-provider-azurerm_v4.27.0_x5: [INFO] [DEBUG] PIM Role Assignment: (Principal Id \"<MY_GROUP_OBJECT_ID>\" / Scope \"/subscriptions/<MY_SUB_ID>\" / Role Definition Id \"/subscriptions/<MY_SUB_ID>/providers/Microsoft.Authorization/roleDefinitions/<ROLE_DEF_ID>\") was not found - removing from state\n```\n\nThis only started happening on Dec 12th. I can query that endpoint myself, and it returns a non-empty list. Different runs of the same workflow will also return a non-empty list. All of which implies that there is a transient and intermittent issue with the `roleAssignmentSchedules` endpoint that means it occasionally returns `{\"value\": []}` instead of the real value.\n\nI am so baffled why this might be the case, and my only possible theory was that somewhere either the provider/the client/the endpoint itself is hitting an error and not handling it properly. I've raised an support request with Microsoft directly too (\ud83d\ude43), but either way if the issue persists it breaks the \"read\" logic for this provider.\n\n---\n\n@nimmyarjith We got an update from Microsoft yesterday. They said this was an internal ARM issue, and they have now deleted the bad FrontdoorWeb instances. It appears to be fixed for us (although I had to re-import all of the pim_active_role_assignment resources that had been removed from the state).\n\nGoing to close this issue, since Microsoft have confirmed it was an internal problem & they appear to have fixed it.",
      "labels": [
        "bug",
        "service/authorization",
        "upstream/microsoft/blocking-api-issue",
        "v/4.x"
      ],
      "created_at": "2025-12-15T14:19:51Z",
      "closed_at": "2026-01-14T09:37:16Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31360",
      "comments_count": 6
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31406,
      "title": "`azurerm_key_vault` - enable_rbac_authorization",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.12.2\n\n### AzureRM Provider Version\n\n4.37.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_key_vault\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_key_vault\" \"main\" {\n  name                      = var.key_vault_name\n  location                  = var.location\n  resource_group_name       = var.resource_group_name\n  tenant_id                 = var.tenant_id\n  sku_name                  = \"standard\"\n  rbac_authorization_enabled   = true\n  purge_protection_enabled  = true\n```\n\n### Debug Output/Panic Output\n\n```shell\nC:\\hostedtoolcache\\windows\\terraform\\1.12.2\\x64\\terraform.exe plan -out D:\\a\\_temp/current-plan -detailed-exitcode\n\u2577\n\u2502 Error: Unsupported argument\n\u2502 \n\u2502   on .terraform\\modules\\asyncfunction\\kv.tf line 8, in resource \"azurerm_key_vault\" \"main\":\n\u2502    8:   rbac_authorization_enabled   = true\n\u2502 \n\u2502 An argument named \"rbac_authorization_enabled\" is not expected here.\n\u2575\n\n##[error]Terraform command 'plan' failed with exit code '1'.\n##[error]\u2577\n\u2502 Error: Unsupported argument\n\u2502 \n\u2502   on .terraform\\modules\\asyncfunction\\kv.tf line 8, in resource \"azurerm_key_vault\" \"main\":\n\u2502    8:   rbac_authorization_enabled   = true\n\u2502 \n\u2502 An argument named \"rbac_authorization_enabled\" is not expected here.\n\u2575\n```\n\n### Expected Behaviour\n\n_No response_\n\n### Actual Behaviour\n\n_No response_\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "Closing based on the response above and no further response from the issue author",
      "labels": [
        "question",
        "service/key-vault",
        "v/4.x"
      ],
      "created_at": "2025-12-22T14:30:14Z",
      "closed_at": "2026-01-20T16:31:25Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31406",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31548,
      "title": "azurerm_databricks_workspace error with public_network_access_enabled",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.11.0\n\n### AzureRM Provider Version\n\n4.57.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_databricks_workspace\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_databricks_workspace\" \"dbk\" {\n  for_each = var.dbk_workspace\n\n  sku                                   = \"premium\"\n  public_network_access_enabled         = each.value.public_network_access_enabled\n  network_security_group_rules_required = \"NoAzureDatabricksRules\"\n...\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nError: updating Workspace (Subscription: \"XXX\"\n\u2502 Resource Group Name: \"XXX\"\n\u2502 Workspace Name: \"XXX\"): polling after CreateOrUpdate: polling failed: the Azure API returned the following error:\n\u2502 \n\u2502 Status: \"WorkspaceUpdateFailed\"\n\u2502 Code: \"\"\n\u2502 Message: \"Unexpected HTTP status code '412'.\"\n\u2502 Activity Id: \"\"\n\u2502 \n\u2502 ---\n\u2502 \n\u2502 API Response:\n\u2502 \n\u2502 ----[start]----\n\u2502 {\n\u2502   \"status\": \"Failed\",\n\u2502   \"error\": {\n\u2502     \"code\": \"WorkspaceUpdateFailed\",\n\u2502     \"message\": \"Unexpected HTTP status code '412'.\"\n\u2502   }\n\u2502 }\n\u2502 -----[end]----\n```\n\n### Expected Behaviour\n\nWhen updating the value of public_network_access_enabled to true or false, i expect the deployment to apply this value correctly. \n\n### Actual Behaviour\n\nWhenever i update this value **\"public_network_access_enabled\"**, the first deployment output is the debug Output (just above) and the Databricks workspace change into \"failed state\". If i rerun with the exact same code, the second deployment works fine and apply the configuration properly and the Databricks Workspace change again in \"Healthy\"\n\n### Steps to Reproduce\n\nUse the terraform configuration file and update the value public_network_access_enabled\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "Hi @raphaeldeletoille , thanks for opening the issue. I've retried on my end, but it all seems fine to me. Here is my TF config:\n\n```Terraform\nresource \"azurerm_resource_group\" \"test\" {\n  name     = \"example-resources\"\n  location = \"West Europe\"\n}\n\nresource \"azurerm_virtual_network\" \"test\" {\n  name                = \"example-vnet\"\n  address_space       = [\"10.0.0.0/16\"]\n  location            = azurerm_resource_group.test.location\n  resource_group_name = azurerm_resource_group.test.name\n}\n\nresource \"azurerm_network_security_group\" \"test\" {\n  name                = \"example-nsg\"\n  location            = azurerm_resource_group.test.location\n  resource_group_name = azurerm_resource_group.test.name\n}\n\nresource \"azurerm_subnet\" \"public\" {\n  name                 = \"public-subnet\"\n  resource_group_name  = azurerm_resource_group.test.name\n  virtual_network_name = azurerm_virtual_network.test.name\n  address_prefixes     = [\"10.0.1.0/24\"]\n\n  delegation {\n    name = \"databricks-del-public\"\n    service_delegation {\n      name = \"Microsoft.Databricks/workspaces\"\n      actions = [\n        \"Microsoft.Network/virtualNetworks/subnets/join/action\",\n        \"Microsoft.Network/virtualNetworks/subnets/prepareNetworkPolicies/action\",\n        \"Microsoft.Network/virtualNetworks/subnets/unprepareNetworkPolicies/action\",\n      ]\n    }\n  }\n}\n\nresource \"azurerm_subnet\" \"private\" {\n  name                 = \"private-subnet\"\n  resource_group_name  = azurerm_resource_group.test.name\n  virtual_network_name = azurerm_virtual_network.test.name\n  address_prefixes     = [\"10.0.2.0/24\"]\n\n  delegation {\n    name = \"databricks-del-private\"\n    service_delegation {\n      name = \"Microsoft.Databricks/workspaces\"\n      actions = [\n        \"Microsoft.Network/virtualNetworks/subnets/join/action\",\n        \"Microsoft.Network/virtualNetworks/subnets/prepareNetworkPolicies/action\",\n        \"Microsoft.Network/virtualNetworks/subnets/unprepareNetworkPolicies/action\",\n      ]\n    }\n  }\n}\n\nresource \"azurerm_subnet_network_security_group_association\" \"public\" {\n  subnet_id                 = azurerm_subnet.public.id\n  network_security_group_id = azurerm_network_security_group.test.id\n}\n\nresource \"azurerm_subnet_network_security_group_association\" \"private\" {\n  subnet_id                 = azurerm_subnet.private.id\n  network_security_group_id = azurerm_network_security_group.test.id\n}\n\nresource \"azurerm_databricks_workspace\" \"test\" {\n  name                               = \"example-databrickworkspace\"\n  resource_group_name                = azurerm_resource_group.test.name\n  location                           = azurerm_resource_group.test.location\n  sku                                = \"premium\"\n  public_network_access_enabled      = false\n  network_security_group_rules_required = \"NoAzureDatabricksRules\"\n\n  custom_parameters {\n    virtual_network_id                                   = azurerm_virtual_network.test.id\n    public_subnet_name                                   = azurerm_subnet.public.name\n    private_subnet_name                                  = azurerm_subnet.private.name\n    public_subnet_network_security_group_association_id  = azurerm_subnet_network_security_group_association.public.id\n    private_subnet_network_security_group_association_id = azurerm_subnet_network_security_group_association.private.id\n    no_public_ip                                         = true\n  }\n}\n```\n\n---\n\nHi @jiaweitao001 thanks for your answer. \n\nIndeed i've tested your config in a sandbox and everything is working fine. Seems it is not an issue with the provider itself so i'll close this issue. I'll try to understand why i have this behavior on multiple environments as my TF Config looks very similar with yours. \n\nI'll add the root cause here if i am able to find out",
      "labels": [
        "question",
        "service/databricks",
        "v/4.x"
      ],
      "created_at": "2026-01-21T08:42:30Z",
      "closed_at": "2026-01-22T10:00:33Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31548",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31526,
      "title": "Support for AKS Gen 2 Windows Node Pools",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Description\n\nhttps://learn.microsoft.com/en-us/azure/aks/generation-2-vms?tabs=windows-node-pool#create-a-node-pool-with-a-gen-2-vm\n> By default, Windows Server 2022 uses the Gen 1 node image. If you want to use a Gen 2 node image, create a Windows node pool using the [az aks nodepool add](https://learn.microsoft.com/en-us/cli/azure/aks/nodepool#az-aks-nodepool-add) command with the --aks-custom-headers UseWindowsGen2VM=true custom header --aks-custom-headers UseWindowsGen2VM=true:\n\nCurrently we cannot opt in to Gen 2 node pools for Windows Server 2022, and create operations from Terraform fail with this error:\n\n```\n Status: \"BadRequest\"\n\u2502 Code: \"BadRequest\"\n\u2502 Message: \"Create or update VMSS <redacted> failed. The selected VM size 'Standard_D8ads_v6' cannot boot Hypervisor Generation '1'. If this was a Create operation please check that the Hypervisor Generation of the Image matches the Hypervisor Generation of the selected VM Size. If this was an Update operation please select a Hypervisor Generation '1' VM Size. For more information, see https://aka.ms/azuregen2vm\\nThe selected VM size 'Standard_D8ads_v6' cannot boot Hypervisor Generation '1'. If this was a Create operation please check that the Hypervisor Generation of the Image matches the Hypervisor Generation of the selected VM Size. If this was an Update operation please select a Hypervisor Generation '1' VM Size. For more information, see https://aka.ms/azuregen2vm\"\n\u2502 Activity Id: \"\"\n```\n\n### New or Affected Resource(s)/Data Source(s)\n\nazurerm_kubernetes_cluster_node_pool\n\n### Potential Terraform Configuration\n\n```hcl\n\n```\n\n### References\n\n_No response_",
      "solution": "Hi @cailyoung,\n\nCreating or migrating to a Gen 2 Windows node pool on AKS currently requires injecting the `UseWindowsGen2VM=true` custom header into the API request. Since the underlying SDK does not natively support this parameter, adding support for this in the azurerm provider would require significant custom middleware logic that deviates from the standard patterns.\n\nMy recommended solution is to use the `azapi_resource` resource, which fully supports custom headers.\n\nHere is a complete workaround:\n\n```hcl\nterraform {\n  required_providers {\n    azapi = {\n      source = \"azure/azapi\"\n    }\n    azurerm = {\n      source = \"hashicorp/azurerm\"\n    }\n  }\n}\n\nprovider \"azurerm\" {\n  features {}\n}\n\nprovider \"azapi\" {\n}\n\nresource \"azurerm_resource_group\" \"example\" {\n  name     = \"example-rg\"\n  location = \"East US\"\n}\n\nresource \"azurerm_kubernetes_cluster\" \"example\" {\n  name                = \"example-aks\"\n  location            = azurerm_resource_group.example.location\n  resource_group_name = azurerm_resource_group.example.name\n  dns_prefix          = \"example-aks\"\n\n  default_node_pool {\n    name       = \"default\"\n    node_count = 1\n    vm_size    = \"Standard_DS2_v2\"\n    upgrade_settings {\n      max_surge = \"10%\"\n    }\n  }\n\n  windows_profile {\n     admin_username = \"{your user name}\"\n     admin_password = \"{your admin password}\"\n  }\n\n  identity {\n    type = \"SystemAssigned\"\n  }\n}\n\n# Workaround using AzAPI to create a Gen 2 Windows Node Pool\nresource \"azapi_resource\" \"windows_gen2_node_pool\" {\n  type      = \"Microsoft.ContainerService/managedClusters/agentPools@2024-01-01\"\n  name      = \"gen2\"\n  parent_id = azurerm_kubernetes_cluster.example.id\n\n  # This header is the key to enabling Gen 2 VMs for Windows\n  headers = {\n    \"UseWindowsGen2VM\" = \"true\"\n  }\n\n  body = {\n    properties = {\n      # Ensure you pick a VM size that supports Gen 2\n      # (e.g. Standard_D4s_v3 or Standard_D2s_v5 depending on availability)\n      vmSize = \"Standard_D4s_v3\"\n      count  = 1\n      mode   = \"User\"\n      osType = \"Windows\"\n      osSKU  = \"Windows2022\"\n    }\n  }\n}\n```\n\nHope this unblocks you!",
      "labels": [
        "enhancement",
        "service/kubernetes-cluster"
      ],
      "created_at": "2026-01-19T02:35:23Z",
      "closed_at": "2026-01-22T04:58:33Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31526",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31226,
      "title": "azurerm_function_app_flex_consumption should support dotnet 10.0",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Description\n\nazurerm_function_app_flex_consumption should support dotnet 10,0 azurerm_function_app already supports this.\n\n### New or Affected Resource(s)/Data Source(s)\n\nazurerm_function_app_flex_consumption\n\n### Potential Terraform Configuration\n\n```hcl\n\n```\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/app-service"
      ],
      "created_at": "2025-12-01T11:27:32Z",
      "closed_at": "2025-12-22T13:58:57Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31226",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 28698,
      "title": "Add Support for Azure Network Security Perimeter",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Description\n\nAzure has introduced Network Security Perimeter (NSP), a new networking feature designed to provide a logical isolation boundary for Platform-as-a-Service (PaaS) resources such as Azure Storage, CosmosDB, and Azure SQL Database. This feature offers an alternative to Private Endpoints by restricting public access while allowing controlled exceptions via access rules.\n\nCurrently, Terraform users must rely on the AzAPI provider to provision and manage NSP resources. This approach is cumbersome due to the lack of native data sources and resources in the azurerm provider. Adding native support for NSP in azurerm would streamline deployment, improve usability, and align with other networking features already supported.\n\n### Why This Is Needed\n\nReduce Complexity: The current approach using AzAPI is cumbersome and requires manual data retrieval for referencing existing NSP resources.\n\nStandardization: Align with existing azurerm networking resources like Virtual WAN and Private Endpoints.\n\nImproved Terraform Support: Enhance usability and automation of NSP deployments within Terraform-managed environments.\n\n### References\n\n[Azure Network Security Perimeter Documentation](https://learn.microsoft.com/en-us/azure/networking)\n\n[Azure Resource Manager API for NSP](https://learn.microsoft.com/en-us/azure/networking/nsp-api)\n\n### Conclusion\n\nNative support for Azure Network Security Perimeter in the azurerm provider would greatly simplify infrastructure management for users looking to secure Azure PaaS resources. By introducing these Terraform resources and data sources, we can improve automation, reduce reliance on AzAPI, and bring feature parity with existing networking solutions.\n\nWould love to hear thoughts from the community and maintainers on the feasibility of implementing this!\n\n### New or Affected Resource(s)/Data Source(s)\n\nazurerm_network_security_perimeter\n\n### Potential Terraform Configuration\n\n```hcl\n### Proposed Resources\n\nNetwork Security Perimeter\n\n\nresource \"azurerm_network_security_perimeter\" \"main\" {\n  name                = \"nsp-foo\"\n  location            = \"westus\"\n  resource_group_name = \"rg-foo\"\n}\n\n\nNetwork Security Perimeter Profile\n\n\nresource \"azurerm_network_security_perimeter_profile\" \"profile1\" {\n  name                = \"nsp-foo-profile1\"\n  location            = \"westus\"\n  resource_group_name = \"rg-foo\"\n  perimeter_id        = azurerm_network_security_perimeter.main.id\n}\n\n\nNetwork Security Perimeter Access Rule\n\n\nresource \"azurerm_network_security_perimeter_profile_access_rule\" \"rule1\" {\n  name                = \"nsp-foo-rule1\"\n  location            = \"westus\"\n  resource_group_name = \"rg-foo\"\n  profile_id          = azurerm_network_security_perimeter_profile.profile1.id\n  direction           = \"Inbound\"\n  address_prefixes    = [\"10.45.0.0/16\"]\n}\n\n\nResource Association\n\n\nresource \"azurerm_network_security_perimeter_resource_association\" \"cosmosdb_association\" {\n  name                 = \"cosmosdb-nsp-link\"\n  resource_group_name  = \"rg-foo\"\n  perimeter_id         = azurerm_network_security_perimeter.main.id\n  resource_id          = azurerm_cosmosdb_account.main.id\n  access_mode          = \"Learning\"\n  profile_id           = azurerm_network_security_perimeter_profile.profile1.id\n}\n\n\n### Proposed Data Sources\n\nNetwork Security Perimeter\n\n\ndata \"azurerm_network_security_perimeter\" \"main\" {\n  name                = \"nsp-foo\"\n  resource_group_name = \"rg-foo\"\n}\n\n\nNetwork Security Perimeter Profile\n\n\ndata \"azurerm_network_security_perimeter_profile\" \"profile1\" {\n  perimeter_name      = \"nsp-foo\"\n  name                = \"nsp-foo-profile1\"\n  resource_group_name = \"rg-foo\"\n}\n```\n\n### References\n\n_No response_",
      "solution": "If you're looking for a way to implement NSP via Terraform, here's a working example using `azapi_resource` as a workaround until native support is available.\n\n_This setup works reliably for creating the NSP and all its association components.\nHowever, deletion is a hit or miss \u2014 sometimes requiring manual cleanup via Azure Portal._\n\nI used the guide [\"Terraforming the Perimeter: Locking Down Azure PaaS with Azure Network Security Perimeter\"](https://www.marktinderholt.com/azure/terraform/2025/02/05/network-security-perimeter.html) for reference.\n\nSetup Overview\n\n- 1x Network Security Perimeter\n- 1x NSP Profile\n- 2x Inbound Access Rules:\n  - One for a specific IP range\n  - One for a subscription\n- 1x Resource Association (Key Vault example using Learning mode)\n\nCode : \n```\nresource \"azapi_resource\" \"nsp\" {\n  type      = \"Microsoft.Network/networkSecurityPerimeters@2024-06-01-preview\"\n  name      = \"nsp-${var.env}-${var.region}\"\n  parent_id = azurerm_resource_group.main.id\n  location  = azurerm_resource_group.main.location\n  body      = {\n    properties = {}\n  }\n\n  response_export_values = [\"*\"]\n}\n\nresource \"azapi_resource\" \"nsp_profile\" {\n  type      = \"Microsoft.Network/networkSecurityPerimeters/profiles@2024-06-01-preview\"\n  name      = \"primary-profile\"\n  parent_id = azapi_resource.nsp.id\n  location  = azapi_resource.nsp.location\n  body      = {\n    properties = {}\n  }\n  response_export_values = [\"*\"]\n}\n\nresource \"azapi_resource\" \"access_rule_ip\" {\n  type      = \"Microsoft.Network/networkSecurityPerimeters/profiles/accessRules@2024-06-01-preview\"\n  name      = \"ip-access-rule\"\n  parent_id = azapi_resource.nsp_profile.id\n  location  = azapi_resource.nsp_profile.location\n  body      = {\n    properties = {\n      direction       = \"Inbound\"\n      addressPrefixes = [<allowed_ip_range>]\n    }\n  }\n  response_export_values = [\"*\"]\n}\n\nresource \"azapi_resource\" \"access_rule_subscription\" {\n  type      = \"Microsoft.Network/networkSecurityPerimeters/profiles/accessRules@2024-06-01-preview\"\n  name      = \"subscription-access-rule\"\n  parent_id = azapi_resource.nsp_profile.id\n  location  = azapi_resource.nsp_profile.location\n  body      = {\n    properties = {\n      direction = \"Inbound\"\n      subscriptions = [{\n        id = \"/subscriptions/<subscription_ID>\"\n      }]\n    }\n  }\n  response_export_values = [\"*\"]\n}\n\nresource \"azapi_resource\" \"resource_association\" {\n  type      = \"Microsoft.Network/networkSecurityPerimeters/resourceAssociations@2023-08-01-preview\"\n  name      = \"nsp-resource-association\"\n  location  = azapi_resource.nsp.location\n  parent_id = azapi_resource.nsp.id\n  body      = {\n    properties = {\n      accessMode = \"Learning\"\n      privateLinkResource = {\n        id = azurerm_key_vault.example.id\n      }\n      profile = {\n        id = azapi_resource.nsp_profile.id\n      }\n    }\n  }\n}\n```",
      "labels": [
        "new-resource",
        "new-data-source",
        "service/cosmosdb",
        "service/network"
      ],
      "created_at": "2025-02-05T15:32:17Z",
      "closed_at": "2026-01-21T16:39:46Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/28698",
      "comments_count": 14
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31359,
      "title": "docs: client_certificate_mode in windows_web_app references wrong attribute",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n-\n\n### AzureRM Provider Version\n\n-\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_windows_web_app\n\n### Terraform Configuration Files\n\n```hcl\n-\n```\n\n### Debug Output/Panic Output\n\n```shell\n-\n```\n\n### Expected Behaviour\n\nThe `client_certificate_mode` attribute description references `client_cert_enabled`,  which existed in a previous version of the `azurerm_app_service` resource. The correct attribute to reference is `client_certificate_enabled`.\n\n### Actual Behaviour\n\n_No response_\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "documentation",
        "good first issue",
        "service/app-service"
      ],
      "created_at": "2025-12-15T12:41:26Z",
      "closed_at": "2025-12-18T11:16:47Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31359",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 28328,
      "title": "Cannot Update Partition Count on a Dedicated Event Hub Cluster",
      "problem": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\r\n\r\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\n\n### Terraform Version\n\n1.9.6\n\n### AzureRM Provider Version\n\n4.14.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_eventhub\n\n### Terraform Configuration Files\n\n```hcl\nterraform {\r\n  required_providers {\r\n    azurerm = {\r\n      source = \"hashicorp/azurerm\"\r\n      version = \"4.14.0\"\r\n    }\r\n  }\r\n}\r\n\r\nprovider \"azurerm\" {\r\n  features {}\r\n  subscription_id = \"<subscription_id>\"\r\n}\r\n# Resource Group\r\nresource \"azurerm_resource_group\" \"eventhub_terraform_test\" {\r\n  name     = \"eventhub_terraform_test\"\r\n  location = \"Southeast Asia\"\r\n}\r\n\r\nresource \"azurerm_eventhub_cluster\" \"my-terraform-eventhub-cluster\" {\r\n  name                = \"my-terraform-eventhub-cluster\"\r\n  resource_group_name = azurerm_resource_group.eventhub_terraform_test.name\r\n  location            = azurerm_resource_group.eventhub_terraform_test.location\r\n  sku_name            = \"Dedicated_1\"\r\n}\r\n\r\nresource \"azurerm_eventhub_namespace\" \"my-namespace\" {\r\n  name                = \"my-terraform-eventhub-namespace\"\r\n  location            = azurerm_resource_group.eventhub_terraform_test.location\r\n  resource_group_name = azurerm_resource_group.eventhub_terraform_test.name\r\n  sku                 = \"Standard\"\r\n  capacity            = 1 # Required for standard namespace\r\n  dedicated_cluster_id = azurerm_eventhub_cluster.my-terraform-eventhub-cluster.id\r\n}\r\n\r\nresource \"azurerm_eventhub\" \"my-eh-instance\" {\r\n  name              = \"my-eh-01\"\r\n  namespace_id      = azurerm_eventhub_namespace.my-namespace.id\r\n  partition_count   = 3\r\n  message_retention = 1\r\n}\n```\n\n\n### Debug Output/Panic Output\n\n```shell\n\u2502 Error: `partition_count` cannot be changed unless the namespace sku is `Premium`\r\n\u2502\r\n\u2502   with azurerm_eventhub.my-eh-instance,\r\n\u2502   on eventhub.tf line 44, in resource \"azurerm_eventhub\" \"my-eh-instance\":\r\n\u2502   44: resource \"azurerm_eventhub\" \"my-eh-instance\" {\r\n\u2502\n```\n\n\n### Expected Behaviour\n\nEvent Hubs in dedicated clusters should have partition counts that can be modified after creation. Changing the partition counts for such event hubs work in the Azure Portal and via the Azure CLI:\r\n\r\nvia Azure CLI (works):\r\n```\r\naz eventhubs eventhub update \\\r\n  --resource-group eventhub_terraform_test \\\r\n  --namespace-name my-terraform-eventhub-namespace \\\r\n  --name my-eh-instance \\\r\n  --partition-count 4\r\n```\r\n\r\nvia Terraform (failure)\r\n```\r\nresource \"azurerm_eventhub\" \"my-eh-instance\" {\r\n  name              = \"my-eh-01\"\r\n  namespace_id      = azurerm_eventhub_namespace.my-namespace.id\r\n  partition_count   = 3\r\n  message_retention = 1\r\n}\r\n```\r\n\r\n**Expected Behavior**: Terraform should successfully update the `partition_count` for the Event Hub\r\n\r\nSupporting Notes:\r\nFor dedicated clusters, the \"Standard\" SKU must be used for the Event Hub instance. If Premium is specified, the following error appears:\r\n\r\n```\r\n\u2502 Namespace Name: \"my-namespace\"): performing CreateOrUpdate: unexpected status 400 (400 Bad Request) with error: PremiumOrBasicEHNamespacesNotSupportedOnDedicateEHCluster: Premium or Basic SKU Namespaces are not supported on Dedicated EventHub clusters. Please use Standard SKU instead.\r\n\u2502\r\n\u2502   with azurerm_eventhub_namespace.my-namespace,\r\n\u2502\r\n\u2502   with azurerm_eventhub_namespace.my-namespace,\r\n\u2502   on eventhub.tf line 36, in resource \"azurerm_eventhub_namespace\" \"my-namespace\":\r\n\u2502   36: resource \"azurerm_eventhub_namespace\" \"my-namespace\" {\r\n```\r\n\r\n\n\n### Actual Behaviour\n\nActual Behavior: Terraform fails with the error:\r\n\r\n`Error: 'partition_count' cannot be changed unless the namespace sku is 'Premium'`\n\n### Steps to Reproduce\n\n1. Use the sample TF file (modifying the namespace to be globally unique and using your subscription ID), and run `terraform apply`\r\n2. Update the partition_count of the Event Hub in the Terraform config file (e.g. change from 3 to 4)\r\n3. Re-run `terraform apply`\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "service/event-hubs",
        "v/4.x"
      ],
      "created_at": "2024-12-18T03:29:16Z",
      "closed_at": "2025-12-18T11:59:53Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/28328",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31155,
      "title": "[PRIVATE_ENDPOINT] Missing Resource Identity After Create",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\nHello,\n\nWhen trying to create a private endpoint resource, I get some errors :\n\n``` \n \u2502 Private Endpoint Name: \"x-monitor-aks-nodepool-private-endpoint-dev\"): performing CreateOrUpdate: unexpected status 400 (400 Bad Request) with error: InvalidRequestFormat: Cannot parse the request.\n\nMissing Resource Identity After Create: The Terraform provider unexpectedly returned no resource identity after having no errors in the resource create. This is always a problem with the provider and should be reported to the provider developer\n```\n\nTerraform returns an error, but the resources are created on Azure, which is very strange.\n\nHave there been any recent changes to the API SDK?\n\n### Terraform Version\n\nterraform : 1.13.5 / terragrunt : v0.93.9\n\n### AzureRM Provider Version\n\nversion = \"4.54.0\"\n\n### Affected Resource(s)/Data Source(s)\n\nhttps://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/private_endpoint\n\n### Terraform Configuration Files\n\nterragrunt part :\n\n```\n    \"${local.aks_name}-monitor-aks-nodepool-private-endpoint-dev\" = {\n      subnet_id = dependency.network.outputs.subnets[\"snet-nodepool-dev\"].id\n      private_service_connection = {\n        \"${local.aks_name}-monitor-aks-nodepool-private-service-dev\" = {\n          private_connection_resource_id = dependency.monitor_private_link_scopes.outputs.this[\"${local.monitor_private_link_scopes_aks_nodepool_dev_name}\"].id\n          subresource_names              = [\"azuremonitor\"]\n          is_manual_connection           = false\n        }\n      }\n      private_dns_zone_group = {\n        \"dns-group-x-azure-monitor-aks-nodepool-dev\" = {\n          private_dns_zone_ids = [\n            dependency.private_dns_zones.outputs.this[\"${local.azure_private_zone_name}\"].id,\n            dependency.private_dns_zones.outputs.this[\"privatelink.monitor.azure.com\"].id,\n            dependency.private_dns_zones.outputs.this[\"privatelink.oms.opinsights.azure.com\"].id,\n            dependency.private_dns_zones.outputs.this[\"privatelink.ods.opinsights.azure.com\"].id,\n            dependency.private_dns_zones.outputs.this[\"privatelink.agentsvc.azure.automation.net\"].id,\n            dependency.private_dns_zones.outputs.this[\"privatelink.agentsvc.azure.automation.net\"].id,\n            dependency.private_dns_zones.outputs.this[\"privatelink.westeurope.prometheus.monitor.azure.com\"].id,\n          ]\n        }\n      }\n      time_sleep_wait_duration = \"15s\"\n },\n\n```\n\nModule :\n\n```\nmodule \"tags\" {\n  source = \"../tags\"\n  tags   = var.tags\n}\n\nresource \"azurerm_private_endpoint\" \"this\" {\n  resource_group_name = var.resource_group_name\n\n  name      = var.name\n  location  = var.location\n  subnet_id = var.subnet_id\n\n  dynamic \"private_dns_zone_group\" {\n    for_each = var.private_dns_zone_group\n    content {\n      name                 = private_dns_zone_group.key\n      private_dns_zone_ids = private_dns_zone_group.value.private_dns_zone_ids\n    }\n  }\n\n  dynamic \"private_service_connection\" {\n    for_each = var.private_service_connection\n    content {\n      name                              = private_service_connection.key\n      is_manual_connection              = private_service_connection.value.is_manual_connection\n      private_connection_resource_id    = private_service_connection.value.private_connection_resource_id\n      private_connection_resource_alias = private_service_connection.value.private_connection_resource_alias\n      subresource_names                 = private_service_connection.value.subresource_names\n      request_message                   = private_service_connection.value.request_message\n    }\n  }\n\n  dynamic \"ip_configuration\" {\n    for_each = var.ip_configuration\n    content {\n      name               = ip_configuration.key\n      private_ip_address = ip_configuration.value.private_ip_address\n      subresource_name   = ip_configuration.value.subresource_name\n      member_name        = ip_configuration.value.member_name\n    }\n  }\n\n  tags = module.tags.this\n\n}\n\n## WORKAROUND: wait a couple of seconds before creating the private endpoint\nresource \"time_sleep\" \"wait\" {\n  create_duration = var.time_sleep_wait_duration\n  depends_on      = [azurerm_private_endpoint.this]\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\n13:48:39.223 STDERR terraform: \u2502 Error: creating Private Endpoint (Subscription: \"x\"\n13:48:39.223 STDERR terraform: \u2502 Resource Group Name: \"rg-x-dev\"\n13:48:39.223 STDERR terraform: \u2502 Private Endpoint Name: \"x-monitor-aks-nodepool-private-endpoint-dev\"): performing CreateOrUpdate: unexpected status 400 (400 Bad Request) with error: InvalidRequestFormat: Cannot parse the request.\n13:48:39.223 STDERR terraform: \u2502 \n13:48:39.223 STDERR terraform: \u2502   with module.private_endpoints[\"x-monitor-aks-nodepool-private-endpoint-dev\"].azurerm_private_endpoint.this,\n13:48:39.223 STDERR terraform: \u2502   on ../../modules/private_endpoint/main.tf line 6, in resource \"azurerm_private_endpoint\" \"this\":\n13:48:39.223 STDERR terraform: \u2502    6: resource \"azurerm_private_endpoint\" \"this\" {\n13:48:39.224 STDERR terraform: \u2502 \n13:48:39.224 STDERR terraform: \u2575\n13:48:39.224 STDERR terraform: \u2577\n13:48:39.224 STDERR terraform: \u2502 Error: Missing Resource Identity After Create: The Terraform provider unexpectedly returned no resource identity after having no errors in the resource create. This is always a problem with the provider and should be reported to the provider developer\n13:48:39.224 STDERR terraform: \u2502 \n13:48:39.224 STDERR terraform: \u2502   with module.private_endpoints[\"x-monitor-aks-nodepool-private-endpoint-dev\"].azurerm_private_endpoint.this,\n13:48:39.224 STDERR terraform: \u2502   on ../../modules/private_endpoint/main.tf line 6, in resource \"azurerm_private_endpoint\" \"this\":\n13:48:39.224 STDERR terraform: \u2502    6: resource \"azurerm_private_endpoint\" \"this\" {\n13:48:39.224 STDERR terraform: \u2502 \n13:48:39.224 STDERR terraform: \u2575\n```\n\n### Expected Behaviour\n\n_No response_\n\n### Actual Behaviour\n\n_No response_\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_\n",
      "solution": "Hello @jiaweitao001 and @sreallymatt \n\nI still have the problem, but this time only on the following subresources :\n\n- azuremonitor\n- prometheusMetrics\n\n---\n\nHi @HujinoKun, could you provide a small reproducible config for these, as well as:\n\n- the error output in its entirety\n- the Terraform command you're running\n- the output of `terraform version`\n\nThat'll help us with troubleshooting the issue\n\n---\n\n> Hi [@HujinoKun](https://github.com/HujinoKun), could you provide a small reproducible config for these, as well as:\n> \n>     * the error output in its entirety\n> \n>     * the Terraform command you're running\n> \n>     * the output of `terraform version`\n> \n> \n> That'll help us with troubleshooting the issue\n\nHello,\n\nYou can use the same information as the following issue and these resources https://github.com/hashicorp/terraform-provider-azurerm/issues/31155#issuecomment-3584539399",
      "labels": [
        "bug",
        "service/network",
        "v/4.x"
      ],
      "created_at": "2025-11-20T13:16:26Z",
      "closed_at": "2025-12-02T19:00:56Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31155",
      "comments_count": 13
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 27433,
      "title": "azurerm_log_analytics_cluster_customer_managed_key incompatibility with azurerm_key_vault_managed_hardware_security_module_key",
      "problem": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Community Note\r\n\r\n<!--- Please keep this note for the community --->\r\n\r\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n\r\n### Terraform Version\r\n\r\n1.9.5\r\n\r\n### AzureRM Provider Version\r\n\r\n3.116.0\r\n\r\n### Affected Resource(s)/Data Source(s)\r\n\r\nazurerm_log_analytics_cluster_customer_managed_key\r\n\r\n### Terraform Configuration Files\r\n\r\n```hcl\r\nresource \"azurerm_log_analytics_cluster_customer_managed_key\" \"managed_key\" {\r\n  log_analytics_cluster_id = azurerm_log_analytics_cluster.cluster.id\r\n  key_vault_key_id         = \"https://example.managedhsm.azure.net/keys/example\"\r\n}\r\n```\r\n\r\n\r\n### Debug Output/Panic Output\r\n\r\n```shell\r\n\u2502 Error: parsing https://example.managedhsm.azure.net/keys/example\": internal-error: Managed HSM IDs are not supported as Key Vault Nested Items\r\n\r\n\r\n{\r\n\u2502   \"error\": {\r\n\u2502     \"code\": \"InvalidParameter\",\r\n\u2502     \"message\": \"'properties.associatedWorkspaces' is a read only property and cannot be set. Please refer to https://docs.microsoft.com/en-us/azure/azure-monitor/log-query/logs-dedicated-clusters#link-a-workspace-to-the-cluster for more information on how to associate a workspace to the cluster.'\"\r\n\u2502   }\r\n\u2502 }\r\n```\r\n\r\n\r\n### Expected Behaviour\r\n\r\nHSM key should be supported.\r\n\r\n### Actual Behaviour\r\n\r\nWe successfully encrypted the Log Analytics Cluster using a Key Vault key. However, we had to perform this process other way and then import it into Terraform, as attempting to create the encryption directly using the azurerm_log_analytics_cluster_customer_managed_key resource led to an issue with invalid parameters.\r\n\r\n### Steps to Reproduce\r\n\r\n_No response_\r\n\r\n### Important Factoids\r\n\r\n_No response_\r\n\r\n### References\r\n\r\nhttps://learn.microsoft.com/en-us/azure/azure-monitor/logs/customer-managed-keys",
      "solution": "Got the same issue when setting up a Key Vault key via `key_vault_key_id`.\r\n```\r\nresource \"azurerm_log_analytics_cluster_customer_managed_key\" \"example\" {\r\n  log_analytics_cluster_id = azapi_resource.law_dedicated_cluster.id\r\n  key_vault_key_id         = azurerm_key_vault_key.law_cmk.id\r\n}\r\n```\r\nResults in the following error.\r\n```\r\nazurerm_log_analytics_cluster_customer_managed_key.example: Creating...\r\n\u2577\r\n\u2502 Error: updating Customer Managed Key for Cluster (Subscription: \"[..]\"\r\n\u2502 Resource Group Name: \"[..]\"\r\n\u2502 Cluster Name: \"[..]\"): performing CreateOrUpdate: unexpected status 400 (400 Bad Request) with error: InvalidParameter: 'properties.associatedWorkspaces' is a read only property and cannot be set. Please refer to https://docs.microsoft.com/en-us/azure/azure-monitor/log-query/logs-dedicated-clusters#link-a-workspace-to-the-cluster for more information on how to associate a workspace to the cluster. Operation Id: '[..]'\r\n```\r\n----\r\nI enabled the `DEBUG` logs and it seems that the issue is raised at  [log_analytics_cluster_customer_managed_key_resource.go](https://github.com/hashicorp/terraform-provider-azurerm/blob/d3e2ccaaccf601bf38dcda60fa166bff78cc7019/internal/services/loganalytics/log_analytics_cluster_customer_managed_key_resource.go#L114C2-L116C3). The implementation requests the cluster resource by `log_analytics_cluster_id` and updates the response with the CMK properties. The updated cluster resource is sent via `PUT`, which results in the error message above.\r\n\r\nThe documentation [Update cluster with key identifier details](https://learn.microsoft.com/en-us/azure/azure-monitor/logs/customer-managed-keys?tabs=rest#update-cluster-with-key-identifier-details) suggests to use `PATCH` with key credentials only instead of `PUT`.\r\n\r\nTerraform version: v1.7.5\r\nAzureRM provider version: 3.104.0\r\n\r\nSince the error is not related to HSM key support, would it make sense to create a separate issue?\r\n\n\n---\n\nThe best workaround we have managed is using the azapi_resource_action on the azure/azapi provider due to the REST call requiring a PATCH method (as identified by @sschmeck ). Example uses provider version 1.3.0.\r\n\r\n```\r\nresource \"azapi_resource_action\" \"cluster_cmk\" {\r\n  type        = \"Microsoft.OperationalInsights/clusters@2023-09-01\"\r\n  resource_id = [CLUSTER_RESOURCE_ID]\r\n  method      = \"PATCH\"\r\n  body = jsonencode({\r\n    \"properties\" = {\r\n      \"keyVaultProperties\" : {\r\n        \"keyVaultUri\" : \"[KEY_VAULT_URI]\",\r\n        \"keyName\" : \"[KEY_NAME]\",\r\n        \"keyVersion\" : \"\"\r\n      }\r\n    }\r\n  })\r\n\r\n  depends_on = []\r\n}\r\n```\n\n---\n\nTo provide an update to this issue, the issue when creating using a key vault key has been resolved in #28862, I'll be opening another PR later on for HSM key support.",
      "labels": [
        "service/log-analytics",
        "v/3.x",
        "v/4.x"
      ],
      "created_at": "2024-09-19T11:03:34Z",
      "closed_at": "2025-12-17T15:27:10Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/27433",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30030,
      "title": "azurerm_data_protection_backup_vault_customer_managed_key - Managed HSM IDs are not supported as Key Vault Nested Items",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.12.2\n\n### AzureRM Provider Version\n\n4.34.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_data_protection_backup_vault_customer_managed_key\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_data_protection_backup_vault_customer_managed_key\" \"backup_vault_cmk_01\" {\n  data_protection_backup_vault_id = azurerm_data_protection_backup_vault.project01.id\n  key_vault_key_id                = azurerm_key_vault_managed_hardware_security_module.kv_hsm_key01.id\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nError: parsing \"https://xxxxxx.managedhsm.azure.net/keys/xxxxx\": internal-error: Managed HSM IDs are not supported as Key Vault Nested Items\n```\n\n### Expected Behaviour\n\nThe Key is properly parsed.\n\n### Actual Behaviour\n\nTerraform validation fails with the error \"it cannot parse managed hsm id as key_id\": internal-error: Managed HSM IDs are not supported as Key Vault Nested Items\".\nMicrosoft documentation says managed hsm key are supported: (https://learn.microsoft.com/en-us/azure/backup/encryption-at-rest-with-cmk-for-backup-vault)\n\n### Steps to Reproduce\n\nterraform plan\n\n### Important Factoids\n\n_No response_\n\n### References\n\nhttps://github.com/hashicorp/terraform-provider-azurerm/issues/25413\nhttps://github.com/hashicorp/terraform-provider-azurerm/pull/28679\nhttps://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/data_protection_backup_vault_customer_managed_key",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/managed-hsm",
        "service/data-protection",
        "v/4.x"
      ],
      "created_at": "2025-06-27T09:55:57Z",
      "closed_at": "2025-12-16T15:34:09Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30030",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 27436,
      "title": "azurerm_mssql_database - missing support for keys from a Managed HSM Key Vault",
      "problem": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\r\n\r\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\n\n### Terraform Version\n\n1.2.9\n\n### AzureRM Provider Version\n\n3.116.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_mssql_database\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_user_assigned_identity\" \"hsm_idn\" {\r\n  name                = \"hsm-idn\"\r\n  resource_group_name = \"resource_group_name\"\r\n  location            = \"location\"\r\n}\r\n\r\nresource \"azurerm_mssql_server\" \"server\" {\r\n  name                          = \"testdbserver\"\r\n  location                      = local.location\r\n  resource_group_name           = local.test_rg\r\n  version                       = \"12.0\"\r\n  administrator_login           = \"xxxx\"\r\n  administrator_login_password  = \"xxxx\"\r\n  minimum_tls_version           = \"1.2\"\r\n  public_network_access_enabled = false\r\n\r\n  identity {\r\n    type = \"SystemAssigned\"\r\n  }\r\n}\r\n\r\nresource \"azurerm_mssql_database\" \"db\" {\r\n  name           = \"testdb\"\r\n  server_id      = azurerm_mssql_server.server.id\r\n  license_type   = \"LicenseIncluded\"\r\n  collation      = \"SQL_Latin1_General_CP1_CI_AS\"\r\n  max_size_gb    = 1\r\n  read_scale     = false\r\n  zone_redundant = false\r\n  create_mode = \"Default\"\r\n  sku_name = \"Basic\"\r\n  transparent_data_encryption_enabled = true\r\n  transparent_data_encryption_key_vault_key_id = \"https://<hsm_id>.managedhsm.azure.net/keys/<key_name>/<key_version>\"\r\n  identity {\r\n    type = \"UserAssigned\"\r\n    identity_ids = [\r\n      azurerm_user_assigned_identity.hsm_idn.id\r\n    ]\r\n  }\r\n}\n```\n\n\n### Debug Output/Panic Output\n\n```shell\n\u2502 Error: parsing \"https://<hsm_id>.managedhsm.azure.net/keys/<key_name>/<key_version>\"\": internal-error: Managed HSM IDs are not supported as Key Vault Nested Items\n```\n\n\n### Expected Behaviour\n\nThe parameter `key_vault_key_id` should accept a value with \".managedhsm.\". Alternatively a new field should be added specifically for managed HSM KVs (e.g.  `managed_hsm_key_vault_key_id`).\n\n### Actual Behaviour\n\nThe error in Debug Output is thrown. \r\n\r\nIn the azurerm_mssql_database resource, the key vault id is passed to [keyvaultParser](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/internal/services/mssql/mssql_database_resource.go#L442) \u2192 the parser explicitly [checks](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/internal/services/keyvault/parse/nested_item.go#L120-#L122) for `.managedhsm.` in the id . If it exists, the error experienced is thrown.\r\n\n\n### Steps to Reproduce\n\nRun a `terraform apply`\n\n### Important Factoids\n\nNo\n\n### References\n\nSimilar issues have already been raised / completed previously for other resource types.\r\n- https://github.com/hashicorp/terraform-provider-azurerm/issues/21470\r\n- https://github.com/hashicorp/terraform-provider-azurerm/issues/22977\r\n- https://github.com/hashicorp/terraform-provider-azurerm/issues/26392\r\n- https://github.com/hashicorp/terraform-provider-azurerm/issues/26357\r\n- https://github.com/hashicorp/terraform-provider-azurerm/issues/26338",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/mssql",
        "v/3.x"
      ],
      "created_at": "2024-09-19T15:22:50Z",
      "closed_at": "2025-12-16T18:05:45Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/27436",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30604,
      "title": "Updating tags on Azure Key Vault forces replacement of key_vault_id in azurerm_key_vault_key Terraform resource",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.11.2\n\n### AzureRM Provider Version\n\n4.41.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_key_vault, azurerm_key_vault_key\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_key_vault\" \"example\" {\n  name                = \"example-vault\"\n  location            = var.location\n  resource_group_name = var.resource_group_name\n  tags                = var.tags\n  # other config\n}\n\nlocals {\n  key_vault_id = var.use_existing_vault ? data.azurerm_key_vault.example.id : azurerm_key_vault.example.id\n}\n\nresource \"azurerm_key_vault_key\" \"example\" {\n  name         = \"example-key\"\n  key_vault_id = local.key_vault_id\n  # other config\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nNone\n```\n\n### Expected Behaviour\n\nTerraform should update the Key Vault tags in-place without affecting the Key Vault Key resource, since the Key Vault's ID does not change.\n\n### Actual Behaviour\n\nTerraform detects a change in key_vault_id on the azurerm_key_vault_key resource and forces replacement of the Key Vault Key, even though the Key Vault itself is not replaced.\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "Hi @rohit3d2003 , thanks for reaching out. I couldn't reproduce the issue. \n\nFollowing is my configuration\n\n```\nprovider \"azurerm\" {\n  features {\n    key_vault {\n      purge_soft_delete_on_destroy    = true\n      recover_soft_deleted_key_vaults = true\n    }\n  }\n}\ndata \"azurerm_client_config\" \"current\" {}\nresource \"azurerm_resource_group\" \"example\" {\n  location = \"eastus\"\n  name     = \"lucia-keyvault-tag-rg\"\n}\nresource \"azurerm_key_vault\" \"example\" {\n  name                        = \"examplekeyvault-lucia\"\n  location                    = azurerm_resource_group.example.location\n  resource_group_name         = azurerm_resource_group.example.name\n  enabled_for_disk_encryption = true\n  tenant_id                   = data.azurerm_client_config.current.tenant_id\n  soft_delete_retention_days  = 7\n  purge_protection_enabled    = false\n\n  sku_name = \"standard\"\n\n  access_policy {\n    tenant_id = data.azurerm_client_config.current.tenant_id\n    object_id = data.azurerm_client_config.current.object_id\n\n    key_permissions = [\n      \"Create\",\n      \"Delete\",\n      \"Get\",\n      \"Purge\",\n      \"Recover\",\n      \"Update\",\n      \"GetRotationPolicy\",\n      \"SetRotationPolicy\"\n    ]\n\n    secret_permissions = [\n      \"Set\",\n    ]\n  }\n\n  tags = {\n    \"source\" = \"luciatftest-1\"\n  }\n}\n\nlocals {\n  key_vault_id = azurerm_key_vault.example.id\n}\n\nresource \"azurerm_key_vault_key\" \"example\" {\n  name         = \"example-key\"\n  key_vault_id = local.key_vault_id\n  key_type     = \"RSA\"\n  key_size     = 2048\n\n  key_opts = [\n    \"decrypt\",\n    \"encrypt\",\n    \"sign\",\n    \"unwrapKey\",\n    \"verify\",\n    \"wrapKey\",\n  ]\n  \n  rotation_policy {\n    automatic {\n        time_before_expiry = \"P30D\"\n    }\n\n    expire_after         = \"P90D\"\n    notify_before_expiry = \"P29D\"\n  }\n}\n```\n\nUpdate tags don't affect `azurerm_key_vault_key` resource.\n\n```\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\n  ~ update in-place\n\nTerraform will perform the following actions:\n\n  # azurerm_key_vault.example will be updated in-place\n  ~ resource \"azurerm_key_vault\" \"example\" {\n        id                              = \"/subscriptions/***/resourceGroups/lucia-keyvault-tag-rg/providers/Microsoft.KeyVault/vaults/examplekeyvault-lucia\"\n        name                            = \"examplekeyvault-lucia\"\n      ~ tags                            = {\n          ~ \"source\" = \"luciatftest\" -> \"luciatftest-1\"\n        }\n        # (13 unchanged attributes hidden)\n\n        # (1 unchanged block hidden)\n    }\n\nPlan: 0 to add, 1 to change, 0 to destroy.\n```\n\nI'm wondering if there's a change in `var.use_existing_vault` causing the replacement for your case. Could you please provide a minimal configuration to help reproduce it? Thanks!",
      "labels": [
        "service/key-vault",
        "v/4.x"
      ],
      "created_at": "2025-09-11T14:40:35Z",
      "closed_at": "2026-01-15T16:25:29Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30604",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31300,
      "title": "azurerm_role_assignment: Scoped Role Assignment (Key Vault Secret, Certificate, Key) not possible",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.14.1\n\n### AzureRM Provider Version\n\n4.55.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_role_assignment\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_role_assignment\" \"this_secret\" {\n  principal_id         = \"REDACTED\"\n  scope                = \"/subscriptions/REDACTED/resourceGroups/REDACTED/Microsoft.KeyVault/vaults/REDACTED/secrets/REDACTED\"\n  role_definition_name = \"Key Vault Secrets User\"\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nmodule.app_registrations.azurerm_role_assignment.this_secret[\"REDACTED\"]: Creating...\n\u2577\n\u2502 Error: listing role definitions: unexpected status 400 (400 Bad Request) with error: InvalidApiVersionParameter: The api-version '2022-05-01-preview' is invalid. The supported versions are '2025-04-01,2025-03-01,2024-10-01-preview,2024-11-01,2024-08-01,2024-07-01,2024-06-01-preview,2024-03-01,2023-07-01,2023-07-01-preview,2023-03-01-preview,2022-12-01,2022-11-01-preview,2022-09-01,2022-06-01,2022-05-01,2022-03-01-preview,2022-01-01,2021-04-01,2021-01-01,2020-10-01,2020-09-01,2020-08-01,2020-07-01,2020-06-01,2020-05-01,2020-01-01,2019-11-01,2019-10-01,2019-09-01,2019-08-01,2019-07-01,2019-06-01,2019-05-10,2019-05-01,2019-03-01,2018-11-01,2018-09-01,2018-08-01,2018-07-01,2018-06-01,2018-05-01,2018-02-01,2018-01-01,2017-12-01,2017-08-01,2017-06-01,2017-05-10,2017-05-01,2017-03-01,2016-09-01,2016-07-01,2016-06-01,2016-02-01,2015-11-01,2015-01-01,2014-04-01-preview,2014-04-01,2014-01-01,2013-03-01,2014-02-26,2014-04'.\n\u2502 \n\u2502   with module.app_registrations.azurerm_role_assignment.this_secret[\"REDACTED\"],\n\u2502   on .terraform/modules/app_registrations/main.keyvaultsecrets.tf line 145, in resource \"azurerm_role_assignment\" \"this_secret\":\n\u2502  145: resource \"azurerm_role_assignment\" \"this_secret\" {\n```\n\n### Expected Behaviour\n\nPlan output is correct\n\n```output\n  # module.app_registrations.azurerm_role_assignment.this_secret[\"REDACTED\"] will be created\n  + resource \"azurerm_role_assignment\" \"this_secret\" {\n      + condition_version                = (known after apply)\n      + id                               = (known after apply)\n      + name                             = (known after apply)\n      + principal_id                     = \"REDACTED\"\n      + principal_type                   = (known after apply)\n      + role_definition_id               = (known after apply)\n      + role_definition_name             = \"Key Vault Secrets User\"\n      + scope                            = \"/subscriptions/REDACTED/resourceGroups/REDACTED/Microsoft.KeyVault/vaults/REDACTED/secrets/REDACTED\"\n      + skip_service_principal_aad_check = (known after apply)\n    }\n```\n\nand so the deployment should work as well. The same assignment can be created manually though. This is the exported JSON from Azure Portal:\n```json\n[\n    {\n        \"RoleAssignmentId\": \"REDACTED\",\n        \"Scope\": \"/subscriptions/REDACTED/resourceGroups/REDACTED/providers/Microsoft.KeyVault/vaults/REDACTED/secrets/REDACTED\",\n        \"DisplayName\": \"REDACTED\",\n        \"SignInName\": \"REDACTED\",\n        \"RoleDefinitionName\": \"Key Vault Secrets User\",\n        \"RoleDefinitionId\": \"/subscriptions/REDACTED/providers/Microsoft.Authorization/roleDefinitions/4633458b-17de-408a-b874-0445c86b69e6\",\n        \"ObjectId\": \"REDACTED\",\n        \"ObjectType\": \"User\",\n        \"RoleAssignmentDescription\": \"\",\n        \"ConditionVersion\": \"\",\n        \"Condition\": \"\"\n    }\n]\n```\n\n### Actual Behaviour\n\nThe resource cannot be applied\n\n### Steps to Reproduce\n\nterraform plan theplan.tfplan # correct output\nterraform apply theplan.tfplan # error\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "Hi @nyanhp , thanks for opening the issue. Could you please provide us a reproducible TF config so we can investigate further?\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "service/authorization",
        "v/4.x"
      ],
      "created_at": "2025-12-05T08:37:28Z",
      "closed_at": "2025-12-15T15:59:59Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31300",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 27717,
      "title": "azurerm_data_factory changes and corrupts customer_managed_key_id implicitly",
      "problem": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\r\n\r\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\n\n### Terraform Version\n\n1.3.9\n\n### AzureRM Provider Version\n\n4.6.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_data_factory \n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_data_factory\" \"adf\" {\r\n  name                = var.adf_name\r\n  location            = var.location\r\n  resource_group_name = var.rgname\r\n  tags                = var.tags\r\n  lifecycle {\r\n    ignore_changes = [customer_managed_key_id, public_network_enabled, github_configuration, global_parameter]\r\n  }\r\n  identity {\r\n    type = \"SystemAssigned\"\r\n  }\r\n}\n```\n\n\n### Debug Output/Panic Output\n\n```shell\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\r\n  ~ update in-place\r\n\r\nTerraform will perform the following actions:\r\n\r\n  # module.adf_ams[\"bdaa-poc-ha-adf-dev-ams\"].azurerm_data_factory.adf will be updated in-place\r\n  ~ resource \"azurerm_data_factory\" \"adf\" {\r\n        id                              = \"/subscriptions/76f909fb-a085-4e06-9837-20b44085be49/resourceGroups/rg-bdaa-poc-ha-dev-ams/providers/Microsoft.DataFactory/factories/bdaa-poc-ha-adf-dev-ams\"\r\n        name                            = \"bdaa-poc-ha-adf-dev-ams\"\r\n      ~ tags                            = {\r\n          + \"extratag\"       = \"extra\"\r\n            # (10 unchanged elements hidden)\r\n        }\r\n        # (5 unchanged attributes hidden)\r\n\r\n        # (9 unchanged blocks hidden)\r\n    }\r\n\r\nPlan: 0 to add, 1 to change, 0 to destroy.\r\n\r\nDo you want to perform these actions?\r\n  Terraform will perform the actions described above.\r\n  Only 'yes' will be accepted to approve.\r\n\r\n  Enter a value: yes\r\n\r\n2024-10-21T17:20:08.968+0200 [WARN]  Provider \"registry.terraform.io/hashicorp/azurerm\" produced an invalid plan for module.adf_ams[\"bdaa-poc-ha-adf-dev-ams\"].azurerm_data_factory.adf, but we are tolerating it because it is using the legacy plugin SDK.\r\n    The following problems may be the cause of any confusing errors from downstream operations:\r\n      - .customer_managed_key_identity_id: planned value cty.StringVal(\"\") for a non-computed attribute\r\n      - .managed_virtual_network_enabled: planned value cty.False for a non-computed attribute\r\n      - .purview_id: planned value cty.StringVal(\"\") for a non-computed attribute\r\n      - .identity[0].identity_ids: planned value cty.SetValEmpty(cty.String) for a non-computed attribute\r\nmodule.adf_ams[\"bdaa-poc-ha-adf-dev-ams\"].azurerm_data_factory.adf: Modifying... [id=/subscriptions/76f909fb-a085-4e06-9837-20b44085be49/resourceGroups/rg-bdaa-poc-ha-dev-ams/providers/Microsoft.DataFactory/factories/bdaa-poc-ha-adf-dev-ams]\r\n2024-10-21T17:20:12.797+0200 [ERROR] provider.terraform-provider-azurerm_v4.6.0_x5.exe: Response contains error diagnostic: @caller=github.com/hashicorp/terraform-plugin-go@v0.23.0/tfprotov5/internal/diag/diagnostics.go:58 diagnostic_detail= tf_req_id=8aa0a672-bb11-253c-6a39-0\r\n818aa034a45 tf_resource_type=azurerm_data_factory tf_rpc=ApplyResourceChange @module=sdk.proto diagnostic_severity=ERROR diagnostic_summary=\"parsing \"\": parsing \"\": cannot parse an empty string\" tf_proto_version=5.6 tf_provider_addr=registry.terraform.io/hashicorp/azurerm time\r\nstamp=2024-10-21T17:20:12.797+0200\r\n2024-10-21T17:20:12.800+0200 [ERROR] vertex \"module.adf_ams[\\\"bdaa-poc-ha-adf-dev-ams\\\"].azurerm_data_factory.adf\" error: parsing \"\": parsing \"\": cannot parse an empty string\r\n\u2577\r\n\u2502 Error: parsing \"\": parsing \"\": cannot parse an empty string\r\n\u2502\r\n\u2502   with module.adf_ams[\"bdaa-poc-ha-adf-dev-ams\"].azurerm_data_factory.adf,\r\n\u2502   on ..\\..\\..\\modules\\datafactory\\ha-adf\\adf.tf line 2, in resource \"azurerm_data_factory\" \"adf\":\r\n\u2502    2: resource \"azurerm_data_factory\" \"adf\" {\n```\n\n\n### Expected Behaviour\n\nChanging tags in datafactory resource should not corrupt and break terraform code\n\n### Actual Behaviour\n\nAfter tag changes, customer_managed_key_id is changed in the Datafactory resource itself where an extra slash is added. This non intended and non-authorized change corrupts the whole deployment\n\n### Steps to Reproduce\n\nIn a Datafactory resource that has Key Encription enabled just change the tags (add a new tag) and then terraform apply.\n\n### Important Factoids\n\nnothing special, tested with West Eruope and North Europe\n\n### References\n\nNot that I have found",
      "solution": "Hi @pw595 can you please provide more detailed instruction to reproduce the problem. I've tried the following:\r\n\r\n1. Deploy a terraform config you pasted above\r\n2. Create a \"Vault access policy\" key vault from portal, generate a new key\r\n3. Assign permission for the data factory to be able to read keys from the key vault\r\n4. Via portal -> data factory -> add a Customer managed key URL\r\n\r\nI'm stuck at the last step above, I got `\"Operation failed. Data Factory Managed Identity doesn't have access to customer managed key vault.\"` error despite having assigned the required permission in keyvault\n\n---\n\n@pw595 I can reproduce the problem now after referring to https://learn.microsoft.com/en-us/azure/data-factory/enable-customer-managed-key.\r\n\r\nI confirm this is a bug in `azurerm_data_factory` resource where `customer_managed_key_identity_id` property is required when `customer_managed_key_id` is provided. This contradicts the REST API doc where identity is clearly marked as optional:\r\n\r\n> User assigned identity to use to authenticate to customer's key vault. If not provided Managed Service Identity will be used.\r\n\r\nhttps://learn.microsoft.com/en-us/rest/api/datafactory/factories/create-or-update?view=rest-datafactory-2018-06-01&tabs=HTTP#encryptionconfiguration\r\n\r\nWe will need to create a bugfix PR for this, but meanwhile can you confirm if supplying `customer_managed_key_identity_id` is possible for your situation?\r\n\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "service/data-factory",
        "v/4.x"
      ],
      "created_at": "2024-10-21T15:21:59Z",
      "closed_at": "2025-12-15T17:19:16Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/27717",
      "comments_count": 8
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 13863,
      "title": "azurerm_log_analytics_data_export_rule provide an option to define an Event Hub to export more than 10 tables at once",
      "problem": "### Community Note\r\n\r\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or \"me too\" comments, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n### Terraform (and AzureRM Provider) Version\r\nTerraform v1.0.9\r\non windows_amd64\r\n\r\n### Affected Resource(s)\r\n\r\n* `azurerm_log_analytics_data_export_rule`\r\n\r\n### Terraform Configuration Files\r\n\r\n### Panic Output\r\n\r\n![image](https://user-images.githubusercontent.com/26201510/138508330-b4605174-3f7a-4f00-8ad9-ec2b50bd09d3.png)\r\n\r\n\r\n### Expected Behaviour\r\n\r\nAzure Log Analytics data export rule supports pointing to an Event HUB to export more than 10 tables at once. Currently azurerm_log_analytics_data_export_rule doesn't have an option to specify an Event HUB.\r\n\r\n### Actual Behaviour\r\n\r\n![image](https://user-images.githubusercontent.com/26201510/138508330-b4605174-3f7a-4f00-8ad9-ec2b50bd09d3.png)\r\n\r\n### Steps to Reproduce\r\n\r\nRun the following:\r\n\r\nresource \"azurerm_log_analytics_data_export_rule\" \"data_export\" { \r\n  name                    = \"evh-xxxxxxxx\"\r\n  resource_group_name     = \"rg-xxxxxxxxx\"\r\n  workspace_resource_id   = \"/subscriptions/xxxxxxxxxxx/resourceGroups/xxxxxxxxxx/providers/Microsoft.OperationalInsights/workspaces/law-xxxxxxxxx\"\r\n  destination_resource_id = \"/subscriptions/xxxxxxxxxxx/resourceGroups/xxxxxxxxxx/providers/Microsoft.EventHub/namespaces/xxxxxxxx/xxxxxxxxxxx\"\r\n  table_names = [\r\n    \"AzureActivity\",\r\n    \"AddonAzureBackupAlerts\",\r\n    \"AddonAzureBackupJobs\",\r\n    \"AddonAzureBackupPolicy\",\r\n    \"AddonAzureBackupProtectedInstance\",\r\n    \"AddonAzureBackupStorage\",\r\n    \"Alert\",\r\n    \"AppCenterError\",\r\n    \"AppServiceAppLogs\",\r\n    \"AppServiceAuditLogs\",\r\n    \"AppServiceConsoleLogs\",\r\n    \"AppServiceFileAuditLogs\",\r\n    \"AppServiceHTTPLogs\",\r\n    \"AppServiceIPSecAuditLogs\",\r\n    \"AppServicePlatformLogs\",\r\n    \"AzureDiagnostics\",\r\n    \"AzureMetrics\",\r\n    \"CommonSecurityLog\",\r\n    \"ComputerGroup\",\r\n    \"ConfigurationChange\",\r\n    \"ConfigurationData\",\r\n    \"ContainerImageInventory\",\r\n    \"ContainerInventory\",\r\n    \"ContainerLog\",\r\n    \"ContainerLogV2\",\r\n    \"ContainerNodeInventory\",\r\n    \"ContainerRegistryLoginEvents\",\r\n    \"ContainerRegistryRepositoryEvents\",\r\n    \"ContainerServiceLog\",\r\n    \"CoreAzureBackup\",\r\n    \"Event\",\r\n    \"FunctionAppLogs\",\r\n    \"Heartbeat\",\r\n    \"InsightsMetrics\",\r\n    \"KubeEvents\",\r\n    \"KubeHealth\",\r\n    \"KubeMonAgentEvents\",\r\n    \"KubeNodeInventory\",\r\n    \"KubePVInventory\",\r\n    \"KubePodInventory\",\r\n    \"KubeServices\",\r\n    \"LinuxAuditLog\",\r\n    \"Operation\",\r\n    \"Perf\",\r\n    \"ProtectionStatus\",\r\n    \"RequiredUpdate\",\r\n    \"SecureScoreControls\",\r\n    \"SecureScores\",\r\n    \"SecurityAlert\",\r\n    \"SecurityBaseline\",\r\n    \"SecurityBaselineSummary\",\r\n    \"SecurityDetection\",\r\n    \"SecurityNestedRecommendation\",\r\n    \"SecurityRecommendation\",\r\n    \"SecurityRegulatoryCompliance\",\r\n    \"SqlAtpStatus\",\r\n    \"SqlVulnerabilityAssessmentResult\",\r\n    \"SqlVulnerabilityAssessmentScanStatus\",\r\n    \"StorageBlobLogs\",\r\n    \"StorageFileLogs\",\r\n    \"StorageQueueLogs\",\r\n    \"StorageTableLogs\",\r\n    \"Syslog\",\r\n    \"SysmonEvent\",\r\n    \"Update\",\r\n    \"UpdateAgent\",\r\n    \"UpdateRunProgress\",\r\n    \"UpdateSummary\",\r\n    \"Usage\",\r\n    \"W3CIISLog\",\r\n    \"WindowsFirewall\",\r\n    \"SecurityEvent\"\r\n  ]\r\n  enabled = true\r\n}",
      "solution": "It looks like this was fixed with #19868 and shipped with v3.39.0 of the provider",
      "labels": [
        "bug",
        "good first issue",
        "service/log-analytics"
      ],
      "created_at": "2021-10-22T19:02:19Z",
      "closed_at": "2026-01-14T23:57:01Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/13863",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31427,
      "title": "Data Source `azurerm_container_registry.admin_password` is not marked sensitive",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n\n\n### Terraform Version\n\n1.14.3\n\n### AzureRM Provider Version\n\n4.57.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_container_registry\n\n### Terraform Configuration Files\n\n```hcl\ndata \"azurerm_container_registry\" \"my_registry\" {\n  name                = \"myregistry\"\n  resource_group_name = \"rg-test\"\n}\n\n# This works (i.e not obfuscated)\noutput \"password\" {\n  value = data.azurerm_container_registry.my_registry.admin_password\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nN/A\n```\n\n### Expected Behaviour\n\nThe `admin_password` output in the `azurerm_container_registry` should be marked sensitive to prevent it from showing up in CI.\n\n### Actual Behaviour\n\nThe `admin_password` is displayed in clear text\n\n### Steps to Reproduce\n\n1. Use a data block to fetch the outputs of an `azurerm_container_registry`\n2. Output the `admin_password` and observe that it's not obfuscated\n\n### Important Factoids\n\n_No response_\n\n### References\n\nhttps://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/container_registry",
      "solution": "I think the problem (and thus the fix) is that the data source is not marked sensitive [here](https://github.com/hashicorp/terraform-provider-azurerm/blob/a71bbd5bd4b923369d5e69d4136f3b9bd2c8c57a/internal/services/containers/container_registry_data_source.go#L106-L109), [whereas the resource is](https://github.com/hashicorp/terraform-provider-azurerm/blob/a71bbd5bd4b923369d5e69d4136f3b9bd2c8c57a/internal/services/containers/container_registry_resource.go#L132-L136).",
      "labels": [
        "bug",
        "service/container-registry",
        "v/4.x"
      ],
      "created_at": "2025-12-30T20:20:53Z",
      "closed_at": "2026-01-13T00:11:09Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31427",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 29100,
      "title": "Support for vaulted backup in azurerm_backup_policy_file_share",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Description\n\nazurerm_backup_policy_file_share does not support the new vaulted backup tier, and defaults to using snapshot\n\nThe policy can be manually changed to Vault-Standard as a workaround. Note that switching to vaulted tier appears to apply the daily/weekly/monthly/yearly retention settings to the vault, and a new _retain snapshots for x day(s)_ setting is exposed.\n\n### Snapshot tier\n![Image](https://github.com/user-attachments/assets/0b39c41d-ce66-4923-ad6e-6fa6c34e3150)\n\n### Vaulted tier\n![Image](https://github.com/user-attachments/assets/23ff1d8d-90f4-4746-b7d2-c4ef757571e5)\n\nPlease could you add support for this, thanks!\n\n### New or Affected Resource(s)/Data Source(s)\n\nazurerm_backup_policy_file_share\n\n### Potential Terraform Configuration\n\n```hcl\nresource \"azurerm_backup_policy_file_share\" \"policy\" {\n  name                = \"testrecovery-vault-policy\"\n  resource_group_name = azurerm_resource_group.example.name\n  recovery_vault_name = azurerm_recovery_services_vault.example.name\n\n  timezone = \"UTC\"\n\n  backup {\n    frequency = \"Daily\"\n    time      = \"23:00\"\n  }\n\n  retention_daily {\n    count = 10\n  }\n\n  retention_weekly {\n    count    = 7\n    weekdays = [\"Sunday\", \"Wednesday\", \"Friday\", \"Saturday\"]\n  }\n\n  retention_monthly {\n    count    = 7\n    weekdays = [\"Sunday\", \"Wednesday\"]\n    weeks    = [\"First\", \"Last\"]\n  }\n\n  retention_yearly {\n    count    = 7\n    weekdays = [\"Sunday\"]\n    weeks    = [\"Last\"]\n    months   = [\"January\"]\n  }\n\n  backup_tier = \"vault-standard\"\n  snapshot_retention_days = 5\n\n}\n```\n\n### References\n\nhttps://learn.microsoft.com/en-us/azure/backup/backup-azure-files?tabs=recovery-services-vault#configure-the-backup\n",
      "solution": "Is there any workaround for this? Copilot states that if I configure monthly and yearly retention that it will automatically set the backup tier to Vault-Standard but that just doesn't happen. It's always the Snapshot. I've checked the azapi provider but it's not available there either.\n\n---\n\n> Is there any workaround for this? Copilot states that if I configure monthly and yearly retention that it will automatically set the backup tier to Vault-Standard but that just doesn't happen. It's always the Snapshot. I've checked the azapi provider but it's not available there either.\n\n@zlovcevic \nI guess we found the \"vibe coder\" xD\n`Azure/azapi` does support everything Azure (ARM) is capable of on day one.\nI just needed to get this feature delivered and implemented an `azapi` solution:\n\n`variables.tf`\n\n```yaml\nvariable \"files_policies\" {\n  description = \"Map of Files backup policies keyed by a name you can reference later.\"\n  type = map(object({\n    frequency : string # Daily | Hourly\n    # interval : number  # 4,6,8,12 (only for Hourly)\n    time : string                # HH:MM (24h, CET)\n    snapshots : optional(number) # null or 1..30\n    days : number                # 7..9999\n    weeks : optional(number)     # null or 1..5163\n    # months : optional(number)    # null or 1..1188\n    # years : optional(number)     # null or 1..99\n  }))\n  validation {\n    condition = alltrue([\n      for p in values(var.files_policies) :\n      contains([\"Daily\"], p.frequency)\n      # contains([\"Hourly\", \"Daily\"], p.frequency)\n    ])\n    error_message = \"frequency must be 'Daily'.\"\n    # error_message = \"frequency must be 'Daily' or 'Hourly'.\"\n  }\n\n  validation {\n    condition = alltrue([\n      for p in values(var.files_policies) :\n      (p.frequency != \"Hourly\" && can(regex(\"^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$\", p.time)))\n    ])\n    error_message = \"time must be HH:MM (24h, CET).\"\n  }\n\n  validation {\n    condition = alltrue([\n      for p in values(var.files_policies) :\n      # (p.frequency != \"Hourly\" || (p.interval == 4 || p.interval == 6 || p.interval == 8 || p.interval == 12)) &&\n      (p.snapshots == null || (p.snapshots >= 1 && p.snapshots <= 30)) &&\n      (p.days == null || (p.days >= 7 && p.days <= 9999)) &&\n      (p.weeks == null || (p.weeks >= 1 && p.weeks <= 5163))\n      # &&\n      # (p.months == null || (p.months >= 1 && p.months <= 1188)) &&\n      # (p.years == null || (p.years >= 1 && p.years <= 99))\n    ])\n    error_message = \"Retention counts must be null or between a supported range.\"\n  }\n}\n\n```\n\n`policy.tf`\n\n```yaml\nresource \"azapi_resource\" \"backup_policy_file_share\" {\n  for_each = var.files_policies\n\n  name                      = \"files-${each.key}\"\n  type                      = \"Microsoft.RecoveryServices/vaults/backupPolicies@2025-08-01\"\n  schema_validation_enabled = false\n  parent_id                 = azurerm_recovery_services_vault.this.id\n  location                  = var.location\n  body = {\n    properties = {\n      policyType           = \"V2\"\n      timeZone             = \"W. Europe Standard Time\"\n      backupManagementType = \"AzureStorage\"\n      workLoadType         = \"AzureFileShare\"\n      backup_tier          = \"vault-standard\"\n\n      schedulePolicy = {\n        schedulePolicyType   = \"SimpleSchedulePolicy\"\n        scheduleRunFrequency = each.value.frequency\n        scheduleRunTimes     = [\"2025-09-25T${each.value.time}:00Z\"]\n      }\n      vaultRetentionPolicy = {\n        vaultRetention = {\n          retentionPolicyType = \"LongTermRetentionPolicy\"\n          dailySchedule = {\n            retentionTimes = [\"2025-09-25T${each.value.time}:00Z\"]\n            retentionDuration = {\n              count        = each.value.days\n              durationType = \"Days\"\n            }\n          }\n          weeklySchedule = each.value.weeks != null ? {\n            daysOfTheWeek  = [\"Sunday\"]\n            retentionTimes = [\"2025-09-25T${each.value.time}:00Z\"]\n            retentionDuration = {\n              count = each.value.weeks\n            durationType = \"Weeks\" }\n          } : null\n          monthlySchedule = null\n          yearlySchedule  = null\n        }\n        snapshotRetentionInDays = each.value.snapshots != null ? each.value.snapshots : 1\n      }\n    }\n  }\n}\n\noutput \"files_policy_ids\" {\n  description = \"Map of Files policy IDs keyed by the policy name (the map key).\"\n  value       = { for k, p in azapi_resource.backup_policy_file_share : k => p.id }\n}\n```\n\nOnly supports the daily schedule and daily/daily+weekly retention for now but will update this command when I implement the rest finished.\n\nAnd will also try to test the PR locally and maybe leave a review soon.",
      "labels": [
        "enhancement",
        "service/recovery-services"
      ],
      "created_at": "2025-03-18T11:22:04Z",
      "closed_at": "2026-01-12T16:54:00Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/29100",
      "comments_count": 8
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30190,
      "title": "Support for node_provisioning_profile in Kubernetes Cluster (Node Auto Provisioning)",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Description\n\nAn earlier issue for this was closed (https://github.com/hashicorp/terraform-provider-azurerm/issues/24503) due to the API being unstable, however node provisioning profile was made stable in the AKS API 2025-05-01. Additionally the AKS team marked node autoprovisioning as GA approved last week, with a few bug fixes to rollout this month: https://github.com/Azure/AKS/issues/2442#issuecomment-3053209785\n\n### New or Affected Resource(s)/Data Source(s)\n\nazurerm_kubernetes_cluster\n\n### Potential Terraform Configuration\n\n```hcl\nresource \"azurerm_kubernetes_cluster\" \"example\" {\n  node_provisioning_profile {\n    mode  = \"Auto\"\n    default_node_pool = \"Auto\"\n  }\n  [...]\n}\n```\n\n### References\n\nhttps://learn.microsoft.com/en-us/azure/aks/node-autoprovision",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/kubernetes-cluster"
      ],
      "created_at": "2025-07-18T17:15:27Z",
      "closed_at": "2025-12-12T16:39:09Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30190",
      "comments_count": 6
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 29444,
      "title": "segmentation violation while deploying an azurerm_linux_function_app",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.11.4\n\n### AzureRM Provider Version\n\n4.27.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_linux_function_app\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_linux_function_app\" \"onevision-billing-function-app\" {\n  name                = \"some-name\"\n  resource_group_name = azurerm_resource_group.rg.name\n  location            = azurerm_resource_group.rg.location\n\n  storage_account_name       = azurerm_storage_account.my-storage.name\n  storage_account_access_key = azurerm_storage_account.my-storage.primary_access_key\n  service_plan_id            = azurerm_service_plan.my-billing-plan.id\n\n  public_network_access_enabled = true\n  virtual_network_subnet_id     = azurerm_subnet.subnet.id\n\n  site_config {\n    always_on = true\n    application_stack {\n      python_version = \"3.12\"\n    }\n  }\n\n  app_settings = {\n    \"WEBSITE_RUN_FROM_PACKAGE\"              = \"1\"\n    \"APPINSIGHTS_INSTRUMENTATIONKEY\"        = azurerm_application_insights.my-app-insights.instrumentation_key\n    \"APPLICATIONINSIGHTS_CONNECTION_STRING\" = azurerm_application_insights.my-app-insights.connection_string\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x18 pc=0x4d04b4f]\n\ngoroutine 300 [running]:\ngithub.com/hashicorp/terraform-provider-azurerm/internal/services/appservice.(*LinuxFunctionAppResource).Read.LinuxFunctionAppResource.Read.func1({0x89bffb0, 0xc000ed71f0}, {0xc00233b208, {0x89c3938, 0xc000283e60}, 0xc0037a3e00, 0x0, {0x89c41b8, 0xdba6b00}})\n  github.com/hashicorp/terraform-provider-azurerm/internal/services/appservice/linux_function_app_resource.go:744 +0xbef\ngithub.com/hashicorp/terraform-provider-azurerm/internal/sdk.(*ResourceWrapper).Resource.func3({0x89bffb0, 0xc000ed71f0}, 0x89a6cb0?, {0x7113bc0?, 0xc00233b208?})\n  github.com/hashicorp/terraform-provider-azurerm/internal/sdk/wrapper_resource.go:69 +0x145\ngithub.com/hashicorp/terraform-provider-azurerm/internal/sdk.(*ResourceWrapper).Resource.(*ResourceWrapper).diagnosticsWrapper.diagnosticsWrapper.func11({0x89bffb0?, 0xc000ed71f0?}, 0x45d964b800?, {0x7113bc0?, 0xc00233b208?})\n  github.com/hashicorp/terraform-provider-azurerm/internal/sdk/wrapper_resource.go:188 +0x59\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).read(0xc000111d00, {0x89bff08, 0xc003a7aba0}, 0xc0037a3e00, {0x7113bc0, 0xc00233b208})\n  github.com/hashicorp/terraform-plugin-sdk/v2@v2.36.1/helper/schema/resource.go:855 +0x119\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).RefreshWithoutUpgrade(0xc000111d00, {0x89bff08, 0xc003a7aba0}, 0xc003f12270, {0x7113bc0, 0xc00233b208})\n  github.com/hashicorp/terraform-plugin-sdk/v2@v2.36.1/helper/schema/resource.go:1149 +0x53a\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*GRPCProviderServer).ReadResource(0xc000a0f368, {0x89bff08?, 0xc003a7aae0?}, 0xc003a6a380)\n  github.com/hashicorp/terraform-plugin-sdk/v2@v2.36.1/helper/schema/grpc_provider.go:739 +0x6c5\ngithub.com/hashicorp/terraform-plugin-mux/tf5muxserver.(*muxServer).ReadResource(0xc00085cd80, {0x89bff08?, 0xc003a7a810?}, 0xc003a6a380)\n  github.com/hashicorp/terraform-plugin-mux@v0.17.0/tf5muxserver/mux_server_ReadResource.go:35 +0x190\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/tf5server.(*server).ReadResource(0xc00084e3c0, {0x89bff08?, 0xc003a7a030?}, 0xc000ed6cb0)\n  github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/tf5server/server.go:784 +0x2f3\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/internal/tfplugin5._Provider_ReadResource_Handler({0x7fbdc00, 0xc00084e3c0}, {0x89bff08, 0xc003a7a030}, 0xc0037a3900, 0x0)\n  github.com/hashicorp/terraform-plugin-go@v0.26.0/tfprotov5/internal/tfplugin5/tfplugin5_grpc.pb.go:575 +0x1a9\ngoogle.golang.org/grpc.(*Server).processUnaryRPC(0xc001c84000, {0x89bff08, 0xc003a55f50}, 0xc003931e00, 0xc001a5fbf0, 0xdb73088, 0x0)\n  google.golang.org/grpc@v1.69.4/server.go:1392 +0xfbe\ngoogle.golang.org/grpc.(*Server).handleStream(0xc001c84000, {0x89c3ea8, 0xc001c8a1a0}, 0xc003931e00)\n  google.golang.org/grpc@v1.69.4/server.go:1802 +0xb88\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1()\n  google.golang.org/grpc@v1.69.4/server.go:1030 +0x7f\ncreated by google.golang.org/grpc.(*Server).serveStreams.func2 in goroutine 23\n  google.golang.org/grpc@v1.69.4/server.go:1041 +0x11d\n\nError: The terraform-provider-azurerm_v4.27.0_x5 plugin crashed!\n\nThis is always indicative of a bug within the plugin. It would be immensely\nhelpful if you could report the crash with the plugin's maintainers so that it\ncan be fixed. The output above should help diagnose the issue.\n```\n\n### Expected Behaviour\n\nAn RBAC role / permission is missing in my case, and usually the azurerm provider tells which permission is missing. I am expecting to have a message telling which permission is missing, rather than this panic output.\n\n### Actual Behaviour\n\nPanic output, very likely because the service principal running the terraform deployment is missing a permission. When provided with Owner role, the deployment succeeds. When provided with the bare minimum permissions, it throws this panic output. I'd be grateful if someone could tell which permissions are required. Currently, it has at least the following permissions:\n\n    \"Microsoft.Insights/components/read\",\n    \"Microsoft.Insights/components/write\",\n    \"Microsoft.Insights/components/delete\",\n     \"Microsoft.OperationalInsights/workspaces/read\",\n    \"Microsoft.OperationalInsights/workspaces/sharedkeys/read\",\n    \"Microsoft.Resources/subscriptions/resourcegroups/read\",\n    \"Microsoft.Resources/subscriptions/resourcegroups/write\",\n    \"Microsoft.Resources/subscriptions/resourcegroups/delete\",\n    \"Microsoft.Web/serverFarms/read\",\n    \"Microsoft.Web/serverFarms/write\",\n    \"Microsoft.Web/serverFarms/delete\",\n    \"Microsoft.Web/sites/read\",\n    \"Microsoft.Web/sites/write\",\n    \"Microsoft.Web/sites/delete\",\n    \"Microsoft.Web/sites/config/write\",\n    \"Microsoft.Web/sites/config/read\",\n    \"Microsoft.Web/sites/config/delete\",\n    \"Microsoft.Web/sites/config/list/action\",\n \nIt is also a Storage Blob Data Contributor and a Storage Account Contributor.\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "crash",
        "service/storage",
        "service/app-service",
        "service/application-insights",
        "service/network",
        "v/4.x"
      ],
      "created_at": "2025-04-29T04:32:31Z",
      "closed_at": "2025-12-12T20:05:51Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/29444",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 28032,
      "title": "The attribute `storage_share_id` of `azurerm_storage_share_directory` expects to use a domain suffix of \"core.windows.net\". ",
      "problem": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\r\n\r\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\n\n### Terraform Version\n\n1.9.8\n\n### AzureRM Provider Version\n\n4.9.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_storage_share_directory\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_resource_group\" \"example\" {\r\n  name     = \"azuretest\"\r\n  location = \"West Europe\"\r\n}\r\n\r\nresource \"azurerm_storage_account\" \"example\" {\r\n  name                     = \"jp9bvl33r8hmgkg\"\r\n  resource_group_name      = azurerm_resource_group.example.name\r\n  location                 = azurerm_resource_group.example.location\r\n  account_tier             = \"Standard\"\r\n  account_replication_type = \"LRS\"\r\n}\r\n\r\nresource \"azurerm_storage_share\" \"example\" {\r\n  name                 = \"sharename\"\r\n  storage_account_id = azurerm_storage_account.example.id\r\n  quota                = 50\r\n}\r\n\r\nresource \"azurerm_storage_share_directory\" \"example\" {\r\n  name             = \"example\"\r\n  storage_share_id = azurerm_storage_share.example.id\r\n}\n```\n\n\n### Debug Output/Panic Output\n\n```shell\n\u2577\r\n\u2502 Error: parsing account \"/subscriptions/[...]/resourceGroups/azuretest/providers/Microsoft.Storage/storageAccounts/jp9bvl33r8hmgkg/fileServices/default/shares/sharename\": expected the account \"\" to use a domain suffix of \"core.windows.net\"\r\n\u2502 \r\n\u2502   with azurerm_storage_share_directory.example,\r\n\u2502   on main.tf line 24, in resource \"azurerm_storage_share_directory\" \"example\":\r\n\u2502   24:   storage_share_id = azurerm_storage_share.example.id\r\n\u2502 \r\n\u2575\n```\n\n\n### Expected Behaviour\n\nTerraform should create a directory named `example` in `sharename` storage share.\n\n### Actual Behaviour\n\n`terraform apply` fails, and the directory is not created.\r\n\r\n_Note that it works when using the deprecated attribute `storage_account_name` on the `azurerm_storage_share`:_\r\n```tf\r\nresource \"azurerm_storage_share\" \"example\" {\r\n  name                 = \"sharename\"\r\n  storage_account_name = azurerm_storage_account.example.name\r\n  quota                = 50\r\n}\r\n```\n\n### Steps to Reproduce\n\nterraform init\r\nterraform apply\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "Issue still persists in `v4.23.0`\n\n**Workaround**: use `azurerm_storage_share.share_name.url` instead of `azurerm_storage_share.share_name.id`, as mentioned by @mwsutherland here: https://github.com/hashicorp/terraform-provider-azurerm/issues/28032#issuecomment-2532714404\n\n---\n\nI had a look at this, there's a couple of things going on. The ID returned by `azurerm_storage_share` is inconstant and will differ depending on how the storage is referenced e.g. \n\n`storage_account_name returns` https://satm4yf186.file.core.windows.net/test\n\n`storage_account_id` returns /subscriptions/315f6d79-*-7bca65469540/resourceGroups/test-tm4yf186/providers/Microsoft.Storage/storageAccounts/satm4yf186/fileServices/default/shares/test\n\nDownstream of this when you interpolate this ID into of `storage_share_id` into `azurerm_storage_share_directory` it\u2019s expecting the `https://satm4yf186.file.core.windows.net/test` format. To test this I've a hacky workaround [here](https://github.com/eltimmo/terraform-provider-azurerm/blob/24b3bc5d31b5721ea956f2e4527e1da71ea287be/internal/services/storage/storage_share_directory_resource.go#L79). \n\n@jackofallops can we have a steer on what the format of the ID should be, I am happy to look at fixing this just need some direction. \n\n\n\n---\n\n@jackofallops \n\nStill happens with 4.54.0, at least when using azurerm_storage_share as a data source to create a directory\n```\ndata \"azurerm_storage_account\" \"stg\" {\n  name                = var.storageAccountName\n  resource_group_name = data.azurerm_resource_group.shared.name\n}\ndata \"azurerm_storage_share\" \"share\" {\n  name               = var.storageShareName\n  storage_account_id = data.azurerm_storage_account.stg.id\n}\nresource \"azurerm_storage_share_directory\" \"app-storage\" {\n  name              = local.appName\n  storage_share_id  = data.azurerm_storage_share.share.id\n}\n```\nI guess the problem might be that azurerm_storage_share data source doesn't expose the .url property like the resource does so currently we are forced to use .id and that fails. NOTE: The storage account is behind a private endpoint with public access completely disabled.\n```\n\u2502 Error: parsing account \"/subscriptions/***/resourceGroups/***/providers/Microsoft.Storage/storageAccounts/***/fileServices/default/shares/***\": expected the account \"\" to use a domain suffix of \"core.windows.net\"\n\u2502\n\u2502   with module.aca-apps[\"poc-site\"].azurerm_storage_share_directory.app-storage,\n\u2502   on ../../***/modules/***/main.tf line 91, in resource \"azurerm_storage_share_directory\" \"app-storage\":\n\u2502   91:   storage_share_id  = data.azurerm_storage_share.share.id\n```\n",
      "labels": [
        "bug",
        "service/storage",
        "v/4.x"
      ],
      "created_at": "2024-11-15T08:56:21Z",
      "closed_at": "2025-11-19T15:50:43Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/28032",
      "comments_count": 28
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31326,
      "title": "azurerm_container_app_environment_certificate doesn't work with only a certificate_blob_base64",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\nAfter upgrading azurerm from 4.54.0 to 4.55.0 the `azurerm_container_app_environment_certificate` doesn't work anymore when providing a `certificate_blob_base64`\n\n### Terraform Version\n\n1.14.1\n\n### AzureRM Provider Version\n\n4.55.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_container_app_environment_certificate\n\n### Terraform Configuration Files\n\n```hcl\nmain.tf\nlocals {\n  location = \"Switzerland North\"\n  sub_id   = \"<your-subscription-id>\"\n\n  cloudflare_email = \"<your-cloudflare-email>\" # For the dns challenge\n  cloudflare_api_key = \"<your-clouflare-key>\"\n\n  tags = {\n  }\n}\n\nprovider \"azurerm\" {\n  features {}\n  subscription_id                 = local.sub_id\n  resource_provider_registrations = \"none\"\n}\n\nprovider \"acme\" {\n  server_url = \"https://acme-v02.api.letsencrypt.org/directory\"\n}\n\nresource \"acme_registration\" \"reg\" {\n  email_address = \"azurerm-issue-demo@email.com\"\n}\n\n\nresource \"azurerm_resource_group\" \"rg\" {\n  name     = \"azurerm-issue-demo-rg\"\n  location = local.location\n  tags     = local.tags\n}\n\nresource \"acme_certificate\" \"certificate\" {\n  account_key_pem    = acme_registration.reg.account_key_pem\n  common_name        = \"azurerm-issue-demo.duckdns.org\"\n  key_type           = \"P256\"\n  min_days_remaining = 60\n\n  dns_challenge {\n    provider = \"cloudflare\"\n    config = {\n      CF_API_EMAIL = local.cloudflare_email\n      CF_API_KEY   = local.cloudflare_api_key\n    }\n  }\n  \n}\n\n\n\nresource \"azurerm_container_app_environment\" \"managed_environment\" {\n  name                = \"azurerm-issue-demo-acae\"\n  location            = local.location\n  resource_group_name = azurerm_resource_group.rg.name\n}\n\nresource \"random_id\" \"cert\" {\n  keepers = {\n    # Generate a new id each time the certificate is renewed\n    cert_data = acme_certificate.certificate.certificate_p12\n  }\n\n  byte_length = 4\n}\n\nresource \"azurerm_container_app_environment_certificate\" \"env_certificate\" {\n  name                         = \"azurerm-issue-demo-cert-${random_id.cert.hex}\"\n  container_app_environment_id = azurerm_container_app_environment.managed_environment.id\n  certificate_blob_base64      = random_id.cert.keepers.cert_data\n  certificate_password         = \"\"\n}\n\n\n\nversions.tf\nterraform {\n  required_version = \">= 1.0\"\n\n  required_providers {\n    azurerm = {\n      source = \"hashicorp/azurerm\"\n      version = \"4.55.0\"\n    }\n    acme = {\n      source = \"vancluever/acme\"\n      version = \"2.39.0\"\n    }\n    azapi = {\n      source  = \"Azure/azapi\"\n      version = \"2.8.0\"\n    }\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nI couldn't run yet the shortened example, and I can't share the full output due to company policy.\n\nI will update with the full output shortly, but it is something like this:\n\n\nin resource \"azurerm_container_app_environment_certificate\" \"env_certificate\":\n[...]\nCertificate Name: \"cert-name-4fa32a26\"): unexpected status 400\n\u2502 (400 Bad Request) with error: CertificateInvalidRequest: Invalid request\n\u2502 body for certificate 'cert-name-4fa32a26'. Must contain\n\u2502 'properties.value' or 'properties.certificateKeyVaultProperties'.\n```\n\n### Expected Behaviour\n\nCertificate created like it did with version <= 4.54.0\n\n### Actual Behaviour\n\nError: creating Certificate\n\nSee the Panic output\n\n### Steps to Reproduce\n\n1. terraform apply\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/container-apps",
        "v/4.x",
        "service/resource"
      ],
      "created_at": "2025-12-09T10:54:57Z",
      "closed_at": "2025-12-10T18:13:14Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31326",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 27739,
      "title": "azurerm_databricks_root_dbfs_customer_managed_key - missing support for keys from a Managed HSM Key Vault",
      "problem": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\r\n\r\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\n\n### Terraform Version\n\n1.6.1\n\n### AzureRM Provider Version\n\n3.116.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_databricks_root_dbfs_customer_managed_key\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_databricks_workspace_root_dbfs_customer_managed_key\" \"example\" {\r\n  workspace_id     = azurerm_databricks_workspace.example.id\r\n  key_vault_key_id = \"https://<hsm_id>.managedhsm.azure.net/keys/<key_name>/<key_version>\"\r\n}\n```\n\n\n### Debug Output/Panic Output\n\n```shell\nError: parsing \"https://XXX.managedhsm.azure.net/keys/KEY_NAME/KEY_VERSION\": internal-error: Managed HSM IDs are not supported as Key Vault Nested Items\n```\n\n\n### Expected Behaviour\n\nThe parameter `key_vault_key_id` should accept a value with `.managedhsm.`. Alternatively a new field should be added specifically for managed HSM KVs (e.g. `managed_hsm_key_vault_key_id`).\n\n### Actual Behaviour\n\nThe error in Debug Output is thrown\r\n\r\nIn the `azurerm_databricks_root_dbfs_customer_managed_key` resource, the key vault id is passed to a [keyvaultParser](https://github.com/hashicorp/terraform-provider-azurerm/blob/5a772a728bc92e13e1e608602cae114c7f168dd6/internal/services/databricks/databricks_root_dbfs_customer_managed_key_resource.go#L64)\r\n\u2192 the [parser](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/internal/services/keyvault/parse/nested_item.go#L120-#L122) explicitly checks for `.managedhsm.` in the id . If it exists, the error experienced is thrown.\n\n### Steps to Reproduce\n\nRun a terraform plan\n\n### Important Factoids\n\n_No response_\n\n### References\n\nhttps://github.com/hashicorp/terraform-provider-azurerm/issues/21470\r\nhttps://github.com/hashicorp/terraform-provider-azurerm/issues/22977\r\nhttps://github.com/hashicorp/terraform-provider-azurerm/issues/26392\r\nhttps://github.com/hashicorp/terraform-provider-azurerm/issues/26357\r\nhttps://github.com/hashicorp/terraform-provider-azurerm/issues/26338\r\nhttps://github.com/hashicorp/terraform-provider-azurerm/issues/27436\r\nhttps://github.com/hashicorp/terraform-provider-azurerm/issues/27738",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/databricks",
        "v/3.x"
      ],
      "created_at": "2024-10-23T13:14:11Z",
      "closed_at": "2025-12-11T17:50:36Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/27739",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 25896,
      "title": "azurerm_databricks_workspace_root_dbfs_customer_managed_key doesn't support versionless_id of CMK key",
      "problem": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\r\n\r\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or \"me too\" comments, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\n\n### Terraform Version\n\n1.8.2\n\n### AzureRM Provider Version\n\n3.102.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_databricks_workspace_root_dbfs_customer_managed_key\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_databricks_workspace_root_dbfs_customer_managed_key\" \"cmk\" {\r\n  workspace_id     = azurerm_databricks_workspace.this.id\r\n  key_vault_key_id = azurerm_key_vault_key.cmk_test.versionless_id\r\n}\n```\n\n\n### Debug Output/Panic Output\n\n```shell\nError: can not parse \"key_vault_key_id\" as a Key Vault Child resource id: expected a key vault versioned ID but no version information was found in: \"https://cmk-kv.vault.azure.net/keys/cmk-test\"\r\n\r\n  with azurerm_databricks_workspace_root_dbfs_customer_managed_key.cmk,\r\n  on databricks.tf line 49, in resource \"azurerm_databricks_workspace_root_dbfs_customer_managed_key\" \"cmk\":\r\n  49:   key_vault_key_id = azurerm_key_vault_key.cmk_test_environment.versionless_id\n```\n\n\n### Expected Behaviour\n\nAzure Databricks resource allows using versionless key to auto rotate keys when new key version is available. However, Terraform doesn't allows to do so.\n\n### Actual Behaviour\n\nTerraform plans fail with error.\n\n### Steps to Reproduce\n\n1.) Use `versionless_id` attribute of Key vault key in resource `azurerm_databricks_workspace_root_dbfs_customer_managed_key`.\r\n2.) Run `Terraform plan`\n\n### Important Factoids\n\n_No response_\n\n### References\n\nhttps://learn.microsoft.com/en-us/azure/storage/common/customer-managed-keys-overview#automatically-update-the-key-version",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/databricks",
        "v/3.x"
      ],
      "created_at": "2024-05-08T09:09:23Z",
      "closed_at": "2025-12-11T17:50:36Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/25896",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31316,
      "title": "Panic: Concurrent map write in storage/client",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\nI got the following crash:\n```\nStack trace from the terraform-provider-azurerm_v4.47.0_x5 plugin:\nfatal error: concurrent map writes\ngoroutine 9973 [running]:\ninternal/runtime/maps.fatal({0x854ed2e?, 0x8ce8290?})\n\truntime/panic.go:1058 +0x18\ngithub.com/hashicorp/terraform-provider-azurerm/internal/services/storage/client.(*AccountDetails).AccountKey(0xc004697c10, {0x8cec2d0, 0xc00418de30}, {{0x852dec2, 0x10}, 0xc003602210, 0xc00234fe68, 0xc00234fee8, 0xc00234fe90, 0xc00234fea8, ...})\n\tgithub.com/hashicorp/terraform-provider-azurerm/internal/services/storage/client/helpers.go:97 +0x398\ngithub.com/hashicorp/terraform-provider-azurerm/internal/services/storage/client.Client.configureDataPlane({{0x852dec2, 0x10}, 0xc003602210, 0xc00234fe68, _, _, _, _, _}, {0x8cec2d0, ...}, ...)\n\tgithub.com/hashicorp/terraform-provider-azurerm/internal/services/storage/client/data_plane.go:60 +0x1f7\ngithub.com/hashicorp/terraform-provider-azurerm/internal/services/storage/client.Client.QueuesDataPlaneClient({{0x852dec2, 0x10}, 0xc003602210, 0xc00234fe68, 0xc00234fee8, 0xc00234fe90, 0xc00234fea8, 0xc00234fec8, 0x0}, {0x8cec2d0, ...}, ...)\n\tgithub.com/hashicorp/terraform-provider-azurerm/internal/services/storage/client/data_plane.go:267 +0x257\ngithub.com/hashicorp/terraform-provider-azurerm/internal/services/storage.resourceStorageAccountFlatten({0x8cec2d0, 0xc00418de30}, 0xc004fa2510, {{0xc0001efa4f, 0x24}, {0xc0001efa83, 0x16}, {0xc0001efac6, 0x12}}, 0xc004067c80, ...)\n\tgithub.com/hashicorp/terraform-provider-azurerm/internal/services/storage/storage_account_resource.go:2328 +0x1f31\ngithub.com/hashicorp/terraform-provider-azurerm/internal/services/storage.resourceStorageAccountRead(0xc004fa2510, {0x7375b00, 0xc0031a4908})\n\tgithub.com/hashicorp/terraform-provider-azurerm/internal/services/storage/storage_account_resource.go:2079 +0x391\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).read(0x8cec228?, {0x8cec228?, 0xc0032a8900?}, 0xd?, {0x7375b00?, 0xc0031a4908?})\n\tgithub.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource.go:854 +0x15f\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).RefreshWithoutUpgrade(0xc001da1700, {0x8cec228, 0xc0032a8900}, 0xc00556b860, {0x7375b00, 0xc0031a4908})\n\tgithub.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource.go:1162 +0x52a\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*GRPCProviderServer).ReadResource(0xc000b9e090, {0x8cec228?, 0xc0032a8840?}, 0xc005c45d10)\n\tgithub.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/grpc_provider.go:915 +0xb6d\ngithub.com/hashicorp/terraform-plugin-mux/tf5muxserver.(*muxServer).ReadResource(0xc001958750, {0x8cec228?, 0xc0032a8210?}, 0xc005c45d10)\n\tgithub.com/hashicorp/terraform-plugin-mux@v0.21.0/tf5muxserver/mux_server_ReadResource.go:35 +0x190\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/tf5server.(*server).ReadResource(0xc001c561e0, {0x8cec228?, 0xc003e0d740?}, 0xc00418d730)\n\tgithub.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/tf5server/server.go:862 +0x2f3\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/internal/tfplugin5._Provider_ReadResource_Handler({0x82eab00, 0xc001c561e0}, {0x8cec228, 0xc003e0d740}, 0xc005b96380, 0x0)\n\tgithub.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/tfplugin5/tfplugin5_grpc.pb.go:753 +0x1a9\ngoogle.golang.org/grpc.(*Server).processUnaryRPC(0xc000364400, {0x8cec228, 0xc003e0d6b0}, 0xc0033fec00, 0xc001803200, 0xe06a6f8, 0x0)\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1431 +0x1036\ngoogle.golang.org/grpc.(*Server).handleStream(0xc000364400, {0x8cf02b8, 0xc00183eea0}, 0xc0033fec00)\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1842 +0xb88\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1()\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1061 +0x7f\ncreated by google.golang.org/grpc.(*Server).serveStreams.func2 in goroutine 68\n\tgoogle.golang.org/grpc@v1.75.1/server.go:1072 +0x11d\n```\n\nSeems very related to #28274\n\n### Terraform Version\n\n1.5.5\n\n### AzureRM Provider Version\n\nv4.47.0_x5\n\n### Affected Resource(s)/Data Source(s)\n\n?\n\n### Terraform Configuration Files\n\n```hcl\nNot provided. Too much config.\n```\n\n### Debug Output/Panic Output\n\n```shell\nNo debug logs\n```\n\n### Expected Behaviour\n\nNo crash\n\n### Actual Behaviour\n\nCrash\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "crash",
        "service/storage",
        "v/4.x"
      ],
      "created_at": "2025-12-08T08:58:12Z",
      "closed_at": "2025-12-10T15:13:01Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31316",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31327,
      "title": "`azurerm_virtual_network_gateway` not support SKU `ErGwScale`",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.12.2\n\n### AzureRM Provider Version\n\n4.55.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_virtual_network_gateway\n\n### Terraform Configuration Files\n\n```hcl\ndata \"azurerm_subnet\" \"gw-subnet\" {\n  name                 = \"GatewaySubnet\"\n  resource_group_name  = \"my-rg-name\"\n  virtual_network_name = \"my-vnet-name\"\n}\n\nresource \"azurerm_public_ip\" \"pip-transit\" {\n  name                 = \"my-ip\"\n  resource_group_name  = \"my-rg-name\"\n  location             = \"my-location\"\n  sku                  = \"Standard\"\n  sku_tier             = \"Regional\"\n  ddos_protection_mode = \"VirtualNetworkInherited\"\n  allocation_method    = \"Static\"\n  ip_version           = \"IPv4\"\n  zones                = [\"1\", \"2\", \"3\"]\n}\n\nresource \"azurerm_virtual_network_gateway\" \"vng-transit\" {\n  name                = \"my-gateway\"\n  location            = \"my-location\"\n  resource_group_name = \"my-rg-name\"\n  sku                 = \"ErGwScale\"\n  type                = \"ExpressRoute\"\n  active_active       = false\n  vpn_type            = \"PolicyBased\"\n\n  remote_vnet_traffic_enabled = false\n  virtual_wan_traffic_enabled = false\n\n\n  ip_configuration {\n    name                          = \"default\"\n    public_ip_address_id          = azurerm_public_ip.pip-transit.id\n    private_ip_address_allocation = \"Dynamic\"\n    subnet_id                     = data.azurerm_subnet.gw-subnet.id\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\n\u2502 Error: expected sku to be one of [\"Basic\"], got ErGwScale\n\u2502\n\u2502   with azurerm_virtual_network_gateway.vng-transit,\n\u2502   on main.tf line 22, in resource \"azurerm_virtual_network_gateway\" \"vng-transit\":\n\u2502   22:   sku                 = var.vng_sku\n\u2502\n\u2575\n\u2577\n\u2502 Error: expected sku to be one of [\"Basic\" \"Standard\" \"HighPerformance\" \"VpnGw1\" \"VpnGw2\" \"VpnGw3\" \"VpnGw1AZ\" \"VpnGw2AZ\" \"VpnGw3AZ\"], got ErGwScale\n\u2502\n\u2502   with azurerm_virtual_network_gateway.vng-transit,\n\u2502   on main.tf line 22, in resource \"azurerm_virtual_network_gateway\" \"vng-transit\":\n\u2502   22:   sku                 = var.vng_sku\n\u2502\n\u2575\n\u2577\n\u2502 Error: expected sku to be one of [\"VpnGw2\" \"VpnGw3\" \"VpnGw4\" \"VpnGw5\" \"VpnGw2AZ\" \"VpnGw3AZ\" \"VpnGw4AZ\" \"VpnGw5AZ\"], got ErGwScale\n\u2502\n\u2502   with azurerm_virtual_network_gateway.vng-transit,\n\u2502   on main.tf line 22, in resource \"azurerm_virtual_network_gateway\" \"vng-transit\":\n\u2502   22:   sku                 = var.vng_sku\n\u2502\n\u2575\n\u2577\n\u2502 Error: expected sku to be one of [\"Standard\" \"HighPerformance\" \"UltraPerformance\" \"ErGw1AZ\" \"ErGw2AZ\" \"ErGw3AZ\"], got ErGwScale\n\u2502\n\u2502   with azurerm_virtual_network_gateway.vng-transit,\n\u2502   on main.tf line 22, in resource \"azurerm_virtual_network_gateway\" \"vng-transit\":\n\u2502   22:   sku                 = var.vng_sku\n```\n\n### Expected Behaviour\n\nTerraform must create a scalable ExpressRoute gateway. See https://learn.microsoft.com/en-us/azure/expressroute/expressroute-howto-scalable-portal.\n\n### Actual Behaviour\n\nTeraform encountered an error, to validate the sku.\n\n### Steps to Reproduce\n\nterraform plan\n\n### Important Factoids\n\n_No response_\n\n### References\n\nhttps://learn.microsoft.com/en-us/azure/expressroute/expressroute-howto-scalable-portal",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/network",
        "v/4.x"
      ],
      "created_at": "2025-12-09T16:13:55Z",
      "closed_at": "2025-12-09T18:34:09Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31327",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31311,
      "title": "4.55.0 broke azurerm_storage_blob_inventory_policy",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.15.0-alpha20251203\n\n### AzureRM Provider Version\n\n4.55.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_storage_blob_inventory_policy\n\n### Terraform Configuration Files\n\n```hcl\nterraform {\n  required_version = \">= 1.7.0\"\n  required_providers {\n    azurerm = {\n      source  = \"hashicorp/azurerm\"\n      version = \"= 4.55.0\"\n    }\n  }\n}\n....\nresource \"azurerm_storage_blob_inventory_policy\" \"this\" {\n    storage_account_id = azurerm_storage_account.sa[\"xxxxxxxyyyyyyabc\"].id\n  rules {\n    name                   = \"weekly-blob-inventory\"\n    storage_container_name = \"weekly-blob-inventory\"\n    format                 = \"Csv\"\n    schedule               = \"Weekly\"\n    scope                  = \"Blob\"\n    schema_fields = [\n      \"Name\",\n      \"Last-Modified\",\n    ]\n    filter {blob_types = [\"blockBlob\"]}\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nrun \"testing-inventory-policy-enabled\"... fail\n\u2577\n\u2502 Error: setting `name` in resource identity: Invalid address to set: []string{\"name\"}\n\u2502\n\u2502   with azurerm_storage_blob_inventory_policy.this[\"saeleradeveustfmodul\"],\n\u2502   on inventory_policy.tf line 80, in resource \"azurerm_storage_blob_inventory_policy\" \"this\":\n\u2502   80: resource \"azurerm_storage_blob_inventory_policy\" \"this\" {\n\u2502\n```\n\n### Expected Behaviour\n\ninventory should be created , it was withversion 4.54.0\n\n### Actual Behaviour\n\n_No response_\n\n### Steps to Reproduce\n\ntry example from https://registry.terraform.io/providers/hashicorp/azurerm/4.55.0/docs/resources/storage_blob_inventory_policy with provider version 4.55.0 to reproduce fail.\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/storage",
        "v/4.x"
      ],
      "created_at": "2025-12-06T15:24:58Z",
      "closed_at": "2025-12-08T19:04:08Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31311",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 26098,
      "title": "azurerm_postgresql_flexible_server public_network_access_enabled error when not set",
      "problem": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\r\n\r\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or \"me too\" comments, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\n\n### Terraform Version\n\n1.5.4\n\n### AzureRM Provider Version\n\nv3.105.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_postgresql_flexible_server\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_postgresql_flexible_server\" \"main\" {\r\n  name                   = local.azure_name\r\n  location               = data.azurerm_resource_group.main[0].location\r\n  resource_group_name    = data.azurerm_resource_group.main[0].name\r\n  version                = var.server_version\r\n  administrator_login    = local.database_username\r\n  administrator_password = local.database_password\r\n  create_mode            = \"Default\"\r\n  storage_mb             = var.azure_storage_mb\r\n  sku_name               = var.azure_sku_name\r\n  delegated_subnet_id    = data.azurerm_subnet.main[0].id\r\n  private_dns_zone_id    = data.azurerm_private_dns_zone.main[0].id\r\n...\r\n}\n```\n\n\n### Debug Output/Panic Output\n\n```shell\nTerraform will perform the following actions:\r\n\r\n  # module.postgres.azurerm_postgresql_flexible_server.main[0] will be updated in-place\r\n  ~ resource \"azurerm_postgresql_flexible_server\" \"main\" ***\r\n        id                            = \"xxx\"\r\n        name                          = \"xxx\"\r\n      ~ public_network_access_enabled = false -> true\r\n        tags                          = xxx\r\n        ***\r\n        # (15 unchanged attributes hidden)\r\n\r\n        # (1 unchanged block hidden)\r\n    ***\r\n\r\nPlan: 0 to add, 1 to change, 0 to destroy.\r\nmodule.postgres.azurerm_postgresql_flexible_server.main[0]: Modifying... [id=xxx]\r\n\u2577\r\n\u2502 Error: updating Flexible Server (Subscription: \"***\"\r\n\u2502 Resource Group Name: \"xxx\"\r\n\u2502 Flexible Server Name: \"xxx\"): performing Update: unexpected status 400 (400 Bad Request) with error: ConflictingPublicNetworkAccessAndVirtualNetworkConfiguration: Conflicting configuration is detected between Public Network Access and Virtual Network arguments. Public Network Access is not supported along with Virtual Network feature.\r\n\u2502 \r\n\u2502   with module.postgres.azurerm_postgresql_flexible_server.main[0],\r\n\u2502   on .terraform/modules/postgres/aks/postgres/resources.tf line 39, in resource \"azurerm_postgresql_flexible_server\" \"main\":\r\n\u2502   39: resource \"azurerm_postgresql_flexible_server\" \"main\" ***\r\n\u2502 \r\n\u2575\r\nReleasing state lock. This may take a few moments...\n```\n\n\n### Expected Behaviour\n\nAs mentioned in https://github.com/hashicorp/terraform-provider-azurerm/pull/25812\r\n> 1. Create the resource with `delegated_subnet_id` and `private_dns_zone_id` without `public_network_access_enabled` using old AzureRM version -> Upgrade to new AzureRM version -> Run `tf plan` when `public_network_access_enabled` isn't set in the tf config -> No TF difference occurs.\n\n### Actual Behaviour\n\n`plan` shows the value of `public_network_access_enabled` will be changed to the new default\r\nThen `apply` fails\n\n### Steps to Reproduce\n\nRun terraform apply with v3.104.2 successfully\r\nUpgrade to v3.105.0\r\nRun terraform plan: it shows a difference\r\nRun terraform plan: it fails\n\n### Important Factoids\n\n_No response_\n\n### References\n\nhttps://github.com/hashicorp/terraform-provider-azurerm/pull/25812",
      "solution": "Now you need to explicitly pass `public_network_access_enabled = false` to you `azurerm_postgresql_flexible_server` if you are assigning a VNet configuration to your DB instance.\r\n`public_network_access_enabled` defaults to true\n\n---\n\nHello everyone! Is there any expected time for resolution on this? We can't integrate Postgre Flexible Server in a \"Hub and Spoke\" topology with a Service Endpoint due to it's limitation that it doesn't support communication over peered networks. It has to be with a Private Endpoint instead, because the server has to be on a spoke network. Seems like this Microsoft documentation is not accurate and is misleading so far: https://learn.microsoft.com/en-us/azure/postgresql/flexible-server/concepts-networking-private-link \r\nHope this is getting resolved soon.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "service/postgresql",
        "v/3.x"
      ],
      "created_at": "2024-05-24T13:54:13Z",
      "closed_at": "2025-12-09T20:51:59Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/26098",
      "comments_count": 10
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30315,
      "title": "Changing 'public_network_access_enabled' on a subnet forces destructive change instead of in-place update",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.12.2\n\n### AzureRM Provider Version\n\n4.27.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_subnet\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_resource_group\" \"example\" {\n  name     = \"example-rg\"\n  location = \"UK South\"\n}\nresource \"azurerm_virtual_network\" \"example\" {\n  name                = \"example-vnet\"\n  address_space       = [\"10.0.0.0/16\"]\n  location            = azurerm_resource_group.example.location\n  resource_group_name = azurerm_resource_group.example.name\n}\nresource \"azurerm_subnet\" \"example\" {\n  name                 = \"example-subnet\"\n  resource_group_name  = azurerm_resource_group.example.name\n  virtual_network_name = azurerm_virtual_network.example.name\n  address_prefixes     = [\"10.0.1.0/24\"]\n  # default_outbound_access_enabled = false\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\n# azurerm_subnet.example must be replaced\n-/+ resource \"azurerm_subnet\" \"example\" {\n      ~ default_outbound_access_enabled                = true -> false # forces replacement\n      ~ enforce_private_link_endpoint_network_policies = false -> (known after apply)\n      ~ enforce_private_link_service_network_policies  = false -> (known after apply)\n      ~ id                                             = \"/subscriptions/X/resourceGroups/example-rg/providers/Microsoft.Network/virtualNetworks/example-vnet/subnets/example-subnet\" -> (known after apply)\n        name                                           = \"example-subnet\"\n      ~ private_endpoint_network_policies              = \"Enabled\" -> (known after apply)\n      ~ private_endpoint_network_policies_enabled      = true -> (known after apply)\n      ~ private_link_service_network_policies_enabled  = true -> (known after apply)\n      - service_endpoint_policy_ids                    = [] -> null\n      - service_endpoints                              = [] -> null\n        # (3 unchanged attributes hidden)\n    }\n```\n\n### Expected Behaviour\n\nChanging public_network_access_enabled from its default (true) to false should apply in-place without forcing resource recreation.\n\n### Actual Behaviour\n\nTerraform plans to destroy and recreate the subnet, which is unnecessary and would disrupt existing production infrastructure. This contradicts the Azure portal behaviour, where the public network access setting can be changed in-place without requiring the subnet to be recreated.\n\n### Steps to Reproduce\n\n1. Create an azurerm_subnet without public_network_access_enabled set.\n2. Apply.\n3. Add public_network_access_enabled = false to the resource.\n4. Run terraform plan.\n\n### Important Factoids\n\n_No response_\n\n### References\n\nhttps://registry.terraform.io/providers/hashicorp/Azurerm/latest/docs/resources/virtual_network#default_outbound_access_enabled-1",
      "solution": "Hi @danielfears thanks for raising this issue. I've tried to reproduce this but based on the simple example you've provided, it is doing a in-place update on my side.\nLooking at your plan, I can see some deprecated fields being computed? Specifically `enforce_private_link_endpoint_network_policies`,`enforce_private_link_service_network_policies` and private_endpoint_network_policies_enabled were deprecated by v4.x\nThis exact issue seemed to have been fixed in v4.9.0 https://github.com/hashicorp/terraform-provider-azurerm/issues/27848 and I know you mentioned that you are using v4.27.0 but could you double check the version of azurerm you are using?\n\n\n\n---\n\n> Hi [@danielfears](https://github.com/danielfears) thanks for raising this issue. I've tried to reproduce this but based on the simple example you've provided, it is doing a in-place update on my side. Looking at your plan, I can see some deprecated fields being computed? Specifically `enforce_private_link_endpoint_network_policies`,`enforce_private_link_service_network_policies` and private_endpoint_network_policies_enabled were deprecated by v4.x This exact issue seemed to have been fixed in v4.9.0 [#27848](https://github.com/hashicorp/terraform-provider-azurerm/issues/27848) and I know you mentioned that you are using v4.27.0 but could you double check the version of azurerm you are using?\n\nI can confirm it was a versioning issue and will go ahead and close this now, thank you :)\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/network",
        "v/4.x"
      ],
      "created_at": "2025-08-05T09:07:22Z",
      "closed_at": "2025-09-05T09:33:24Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30315",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30364,
      "title": "azurerm_container_group subnet id is missing leading / from data.azurerm_subnet",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\nv1.12.2\n\n### AzureRM Provider Version\n\n~> 4.0.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_container_group, azurerm_subnet\n\n### Terraform Configuration Files\n\n```hcl\n# main.tf\nmodule \"container_group\" {\n  source = \"module/container_group\"\n  ...\n}\n\n# module/container_group/main.tf\ndata \"azurerm_subnet\" \"acg_subnet\" {\n  name                 = var.subnet_name\n  virtual_network_name = var.vnet_name\n  resource_group_name  = var.rg_name\n}\n\noutput \"acg\" {\n  value = azurerm_container_group.acg\n}\n\noutput \"subnet\" {\n  value = data.azurerm_subnet.acg_subnet\n}\n\nresource \"azurerm_container_group\" \"acg\" {\n  name                = \"acg\"\n  ...\n  subnet_ids          = [data.azurerm_subnet.acg_subnet.id]\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nterraform apply:\nmodule.container_group.azurerm_container_group.acg must be replaced\nresource \"azurerm_container_group\" \"acg\" {\nsubnet_ids = [ # forces replacement\n  - \"/subscriptions/ABC-XYZ/resourceGroups/TEST-RG/providers/Microsoft.Network/virtualNetworks/VNET-RUN/subnets/SUBNETRUN\",\n  + \"/subscriptions/abc-xyz/resourceGroups/test-rg/providers/Microsoft.Network/virtualNetworks/vnet-run/subnets/subnetrun\",\n]\n....\n\u2502 Error: parsing subnet id \"SUBSCRIPTIONS/ABC-XYZ/RESOURCEGROUPS/TEST-RG/PROVIDERS/MICROSOFT.NETWORK/VIRTUALNETWORKS/VNET-RUN/SUBNETS/SUBNETRUN\": parsing \"SUBSCRIPTIONS/ABC-XYZ/RESOURCEGROUPS/TEST-RG/PROVIDERS/MICROSOFT.NETWORK/VIRTUALNETWORKS/VNET-RUN/SUBNETS/SUBNETRUN\": parsing segment \"subscriptions\": parsing the Subnet ID: the segment at position 0 didn't match\n\u2502 \n\u2502 Expected a Subnet ID that matched:\n\u2502 \n\u2502 > /subscriptions/12345678-1234-9876-4563-123456789012/resourceGroups/example-resource-group/providers/Microsoft.Network/virtualNetworks/virtualNetworksValue/subnets/subnetValue\n\u2502 \n\u2502 However this value was provided:\n\u2502 \n\u2502 > SUBSCRIPTIONS/ABC-XYZ/RESOURCEGROUPS/TEST-RG/PROVIDERS/MICROSOFT.NETWORK/VIRTUALNETWORKS/VNET-RUN/SUBNETS/SUBNETRUN\n\u2502 \n\u2502 The parsed Resource ID was missing a value for the segment at position 0\n\u2502 (which should be the literal value \"subscriptions\").\n```\n\n### Expected Behaviour\n\nterraform apply should not run into a problem with the subnet\n\n### Actual Behaviour\n\nIt seems that terraform is parsing the subnet ID from `data.azurerm_subnet` sometimes without a leading `/`.\n\nI testet the problem with different versions of the azurerm provider between:\n3.100.x -> 4.38.0\n\nWhen I check the outputs in the terraform console:\n\n`module.container_group.azurerm_subnet`:\n```\n...\n\"id\" = \"/subscriptions/abc-xyz/resourceGroups/test-rg/providers/Microsoft.Network/virtualNetworks/vnet-run/subnets/subnetrun\",\n...\n```\n\n`module.container_group.azurerm_container_group`\n```\n...\n\"subnet_ids\" = toset([\n    \"/subscriptions/ABC-XYZ/resourceGroups/TEST-RG/providers/Microsoft.Network/virtualNetworks/VNET-RUN/subnets/SUBNETRUN\",\n  ]),\n...\n```\n\nBoth IDs look correct to me (apart from the casing), and both have a leading `/`.\nHowever, somewhere in the process a version of the subnet ID without the leading `/` appears, even though the subnet is read from `data.azurerm_subnet`.\n\nAlso the statefile has the leading `/` in the relevant ids, I\u2019m not sure where this missing leading slash comes from. Could this be a bug in how terraform or the azurerm provider normalizes the ID?\n\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\nlocation: westeurope\n\n### References\n\n_No response_",
      "solution": "Hi @Electrofenster , I have tried to reproduce the issue by using module patterns and data source as described\n\n```\n  # module.container_group.azurerm_container_group.acg must be replaced\n-/+ resource \"azurerm_container_group\" \"acg\" {\n      ~ subnet_ids                  = [ # forces replacement\n          - \"/subscriptions/***/resourceGroups/test-rg/providers/Microsoft.Network/virtualNetworks/vnet-run/subnets/subnetrun\",\n          + \"/subscriptions/***/resourceGroups/test-rg/providers/Microsoft.Network/virtualNetworks/VNET-RUN/subnets/subnetrun\",\n        ]\n\nmodule.container_group.azurerm_container_group.acg: Creation complete after 38s [id=/subscriptions/***/resourceGroups/TEST-RG/providers/Microsoft.ContainerInstance/containerGroups/acg]\n\nApply complete! Resources: 1 added, 1 changed, 1 destroyed.\n```\n\nBut mine is successful. Could you please provide minimal configuration files to help reproduce the issue? Thanks!\n\n---\n\nHi @QixiaLu thanks for your reply. \nAfter I tried the same in a new resource group with the same module today, I can't reproduce this bug.\n\nAfter debugging the problematic resource, I just found the problem:\n`az container show --resource-group MY-PROBLEMATIC-RESOURCE-GROUP --name MY-PROBLEMATIC-RESOURCE-ACG | jq .subnetIds` outputs:\n```json\n[\n  {\n    \"id\": \"SUBSCRIPTIONS/ABC-XYZ/RESOURCEGROUPS/TEST-RG/PROVIDERS/MICROSOFT.NETWORK/VIRTUALNETWORKS/VNET-RUN/SUBNETS/SUBNETRUN\",\n    \"name\": \"subnetrun\"\n  }\n]\n```\n\nso there is the missing leading /. I think while destroying the resource the validation failed to delete the connection between the subnet and the acg so the error gets fired.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/network",
        "v/4.x"
      ],
      "created_at": "2025-08-11T13:39:36Z",
      "closed_at": "2025-08-14T06:44:14Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30364",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30406,
      "title": "New Network Security Group validation is treating null as a provided value..",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.12.2\n\n### AzureRM Provider Version\n\n4.40.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_network_security_rule\n\n### Terraform Configuration Files\n\n```hcl\nThe functionality operated as expected in azurerm version 4.37; however, errors have been observed starting from version 4.38 through to the latest version 4.40.\n\n\nresource \"azurerm_network_security_rule\" \"rules\" {\n  for_each                    = local.rules\n  resource_group_name         = var.resource_group_name\n  network_security_group_name = azurerm_network_security_group.nsg.name\n\n  name                                       = each.value.name\n  priority                                   = each.value.priority\n  direction                                  = title(each.value.direction)\n  access                                     = each.value.access\n  protocol                                   = title(each.value.protocol)\n  source_port_range                          = each.value.src_ports == [\"*\"] ? join(\",\", each.value.src_ports) : null\n  source_port_ranges                         = each.value.src_ports != [\"*\"] ? each.value.src_ports : null\n  destination_port_range                     = each.value.dst_ports == [\"*\"] ? join(\",\", each.value.dst_ports) : null\n  destination_port_ranges                    = each.value.dst_ports != [\"*\"] ? each.value.dst_ports : null\n  source_address_prefix                      = length(regexall(\"(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9])[.]){3}(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9]))\", join(\",\", each.value.src_ips))) <= 0 ? join(\",\", each.value.src_ips) : null\n  source_address_prefixes                    = length(regexall(\"(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9])[.]){3}(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9]))\", join(\",\", each.value.src_ips))) > 0 ? each.value.src_ips : null\n  source_application_security_group_ids      = try(each.value.src_asgs, null)\n  destination_address_prefix                 = length(regexall(\"(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9])[.]){3}(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9]))\", join(\",\", each.value.dst_ips))) <= 0 ? join(\",\", each.value.dst_ips) : null\n  destination_address_prefixes               = length(regexall(\"(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9])[.]){3}(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9]))\", join(\",\", each.value.dst_ips))) > 0 ? each.value.dst_ips : null\n  destination_application_security_group_ids = try(each.value.dst_asgs, null)\n  description                                = try(each.value.description, null)\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nexample error in question (3 copies for each source/destination):\n\u2577\n\u2502 Error: Invalid combination of arguments\n\u2502 \n\u2502   with module.solution.module.nsgs[\"nsg-aks-kc-test-01\"].azurerm_network_security_rule.rules[\"allow-aks-api-out-1194\"],\n\u2502   on ../modules/network/nsg/nsg.tf line 155, in resource \"azurerm_network_security_rule\" \"rules\":\n\u2502  155:   source_address_prefix                      = length(regexall(\"(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9])[.]){3}(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9]))\", join(\",\", each.value.src_ips))) <= 0 ? join(\",\", each.value.src_ips) : null\n\u2502 \n\u2502 \"source_address_prefix\": only one of `source_address_prefix,source_address_prefixes,source_application_security_group_ids` can be specified, but `source_address_prefix,source_application_security_group_ids` were specified.\n\u2575\n\u2577\n\u2502 Error: Invalid combination of arguments\n\u2502 \n\u2502   with module.solution.module.nsgs[\"nsg-aks-kc-test-01\"].azurerm_network_security_rule.rules[\"allow-aks-api-out-1194\"],\n\u2502   on ../modules/network/nsg/nsg.tf line 156, in resource \"azurerm_network_security_rule\" \"rules\":\n\u2502  156:   source_address_prefixes                    = length(regexall(\"(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9])[.]){3}(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9]))\", join(\",\", each.value.src_ips))) > 0 ? each.value.src_ips : null\n\u2502 \n\u2502 \"source_address_prefixes\": only one of `source_address_prefix,source_address_prefixes,source_application_security_group_ids` can be specified, but `source_address_prefix,source_application_security_group_ids` were specified.\n\u2575\n\u2577\n\u2502 Error: Invalid combination of arguments\n\u2502 \n\u2502   with module.solution.module.nsgs[\"nsg-aks-kc-test-01\"].azurerm_network_security_rule.rules[\"allow-aks-api-out-1194\"],\n\u2502   on ../modules/network/nsg/nsg.tf line 157, in resource \"azurerm_network_security_rule\" \"rules\":\n\u2502  157:   source_application_security_group_ids      = try(each.value.src_asgs, null)\n\u2502 \n\u2502 \"source_application_security_group_ids\": only one of `source_address_prefix,source_address_prefixes,source_application_security_group_ids` can be specified, but `source_address_prefix,source_application_security_group_ids` were specified.\n\u2575\n\u2577\n\u2502 Error: Invalid combination of arguments\n\u2502 \n\u2502   with module.solution.module.nsgs[\"nsg-aks-kc-test-01\"].azurerm_network_security_rule.rules[\"allow-aks-api-out-1194\"],\n\u2502   on ../modules/network/nsg/nsg.tf line 158, in resource \"azurerm_network_security_rule\" \"rules\":\n\u2502  158:   destination_address_prefix                 = length(regexall(\"(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9])[.]){3}(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9]))\", join(\",\", each.value.dst_ips))) <= 0 ? join(\",\", each.value.dst_ips) : null\n\u2502 \n\u2502 \"destination_address_prefix\": only one of `destination_address_prefix,destination_address_prefixes,destination_application_security_group_ids` can be specified, but `destination_address_prefix,destination_application_security_group_ids` were specified.\n\u2575\n\u2577\n\u2502 Error: Invalid combination of arguments\n\u2502 \n\u2502   with module.solution.module.nsgs[\"nsg-aks-kc-test-01\"].azurerm_network_security_rule.rules[\"allow-aks-api-out-1194\"],\n\u2502   on ../modules/network/nsg/nsg.tf line 159, in resource \"azurerm_network_security_rule\" \"rules\":\n\u2502  159:   destination_address_prefixes               = length(regexall(\"(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9])[.]){3}(([2]([0-4][0-9]|[5][0-5])|[0-1]?[0-9]?[0-9]))\", join(\",\", each.value.dst_ips))) > 0 ? each.value.dst_ips : null\n\u2502 \n\u2502 \"destination_address_prefixes\": only one of `destination_address_prefix,destination_address_prefixes,destination_application_security_group_ids` can be specified, but `destination_address_prefix,destination_application_security_group_ids` were specified.\n\u2575\n\u2577\n\u2502 Error: Invalid combination of arguments\n\u2502 \n\u2502   with module.solution.module.nsgs[\"nsg-aks-kc-test-01\"].azurerm_network_security_rule.rules[\"allow-aks-api-out-1194\"],\n\u2502   on ../modules/network/nsg/nsg.tf line 160, in resource \"azurerm_network_security_rule\" \"rules\":\n\u2502  160:   destination_application_security_group_ids = try(each.value.dst_asgs, null)\n\u2502 \n\u2502 \"destination_application_security_group_ids\": only one of `destination_address_prefix,destination_address_prefixes,destination_application_security_group_ids` can be specified, but `destination_address_prefix,destination_application_security_group_ids` were\n\u2502 specified.\n\u2575\n```\n\n### Expected Behaviour\n\nValidation should treat null values as unset as that is the only method to have dynamic modules in terraform where attributes vary.\n\n### Actual Behaviour\n\nValidation fails with null values present\n\n### Steps to Reproduce\n\nCreate an NSG rule with 1 of the mentioned attributes set to a valid value and the other 2 to null, validation fails.\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "Hi @QixiaLu \n\nAs a result of additional testing, I confirmed that the error does not occur when the values for the \"azurerm_network_security_rule\" resource are explicitly determined in advance. Accordingly, I resolved the issue by updating my module to ensure the intended parameters are identified ahead of time before being passed to \"azurerm_network_security_rule\".\n\nThanks\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/network",
        "v/4.x"
      ],
      "created_at": "2025-08-16T11:41:54Z",
      "closed_at": "2025-08-22T07:40:13Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30406",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30544,
      "title": "azurerm_orchestrated_virtual_machine_scale_set Incompatible with the Specialized VM Images. OsProfile Issue.",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.13.1\n\n### AzureRM Provider Version\n\n4.42.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_orchestrated_virtual_machine_scale_set\n\n### Terraform Configuration Files\n\n```hcl\n# =============================================================================\n# AZURE ORCHESTRATED VM SCALE SET MODULE\n# =============================================================================\n# \n# ISSUE REPORT: Specialized Images Compatibility with VMSS\n# \n# PROBLEM DESCRIPTION:\n# This module demonstrates a fundamental incompatibility between Azure specialized \n# images and Virtual Machine Scale Sets (VMSS) when using the Terraform Azure provider.\n#\n# ERROR ENCOUNTERED:\n# Error: Parameter 'osProfile' is not allowed.\n# \n# ROOT CAUSE:\n# 1. Azure specialized images retain OS configuration from source VM and don't allow \n#    OS profile modifications (admin credentials, etc.)\n# 2. Terraform Azure provider automatically attempts to add OS profile for Windows VMs\n# 3. This creates an unresolvable conflict between Azure's restrictions and Terraform's requirements\n#\n# TESTED CONFIGURATIONS:\n# - Terraform v1.13.1 (latest)\n# - Azure Provider v4.42.0 (latest) \n# - azurerm_orchestrated_virtual_machine_scale_set (Flexible orchestration)\n# - azurerm_windows_virtual_machine_scale_set (Legacy)\n# - Individual azurerm_windows_virtual_machine resources\n#\n# WORKAROUNDS TESTED:\n# - Removing sku_name: Creates basic VMSS but without networking/OS configuration\n# - Removing source_image_id: Works but defeats the purpose of using specialized images\n# - Empty OS profile blocks: Still triggers the error\n# - Different resource types: All require admin credentials for Windows VMs\n#\n# EXPECTED BEHAVIOR:\n# Terraform should allow creation of VMSS with specialized images without requiring\n# OS profile configuration, similar to how Azure Portal and ARM templates handle this.\n#\n# =============================================================================\n\n# Basic Orchestrated VM Scale Set Container\n# NOTE: This works only when sku_name and source_image_id are removed\n# but then we lose the ability to configure VMs with our specialized images\nresource \"azurerm_orchestrated_virtual_machine_scale_set\" \"main\" {\n  name                        = var.vmss_name\n  resource_group_name         = var.resource_group_name\n  location                    = var.location\n  platform_fault_domain_count = 1\n\n  # VM Configuration - CAUSES OS PROFILE ERROR WITH SPECIALIZED IMAGES\n  # When these are included, Azure throws: \"Parameter 'osProfile' is not allowed\"\n  sku_name      = var.vm_size                    # \u274c Triggers OS profile requirement\n  source_image_id = var.image_version_id         # \u274c Specialized image + OS profile conflict\n  instances     = var.initial_instance_count\n\n  priority = \"Regular\"\n\n  # OS Disk Configuration - WORKS FINE\n  os_disk {\n    storage_account_type = \"Premium_LRS\"\n    caching              = \"ReadWrite\"\n  }\n\n  # Network Interface Configuration - WORKS FINE\n  network_interface {\n    name                          = var.nic_name\n    primary                       = true\n    enable_accelerated_networking = var.accelerated_networking_enabled\n\n    ip_configuration {\n      name      = \"internal\"\n      primary   = true\n      subnet_id = var.subnet_id\n\n      # Application Gateway Integration - WORKS FINE\n      application_gateway_backend_address_pool_ids = var.app_gateway_backend_pool_id != null && var.app_gateway_backend_pool_id != \"\" ? [var.app_gateway_backend_pool_id] : []\n    }\n  }\n\n  tags = var.tags\n}\n\n# Note: Using Uniform orchestration mode - no individual VM resources needed\n# All VMs are managed by the azurerm_orchestrated_virtual_machine_scale_set resource above\n\n\n# Network Security Group for the VMSS\nresource \"azurerm_network_security_group\" \"vmss\" {\n  count               = var.nsg_rules != null ? 1 : 0\n  name                = \"${var.vmss_name}-nsg\"\n  resource_group_name = var.resource_group_name\n  location            = var.location\n\n  dynamic \"security_rule\" {\n    for_each = var.nsg_rules\n    content {\n      name                       = security_rule.key\n      priority                   = security_rule.value.priority\n      direction                  = security_rule.value.direction\n      access                     = security_rule.value.access\n      protocol                   = security_rule.value.protocol\n      source_port_range          = security_rule.value.source_port_range\n      destination_port_range     = security_rule.value.destination_port_range\n      source_address_prefix      = security_rule.value.source_address_prefix\n      destination_address_prefix = security_rule.value.destination_address_prefix\n    }\n  }\n\n  tags = var.tags\n}\n# Associate NSG with subnet if NSG rules are provided\nresource \"azurerm_subnet_network_security_group_association\" \"vmss\" {\n  count                     = var.nsg_rules != null ? 1 : 0\n  subnet_id                 = var.subnet_id\n  network_security_group_id = azurerm_network_security_group.vmss[0].id\n}\n\n# Autoscale Settings\n# resource \"azurerm_monitor_autoscale_setting\" \"vmss\" {\n#   count               = var.scaling_mode == \"Autoscaling\" ? 1 : 0\n#   name                = \"${var.vmss_name}-autoscale\"\n#   resource_group_name = var.resource_group_name\n#   location            = azurerm_orchestrated_virtual_machine_scale_set.main.location\n#   target_resource_id  = azurerm_orchestrated_virtual_machine_scale_set.main.id\n\n#   profile {\n#     name = \"defaultProfile\"\n\n#     capacity {\n#       default = var.initial_instance_count\n#       minimum = var.min_instance_count\n#       maximum = var.max_instance_count\n#     }\n\n#     rule {\n#       metric_trigger {\n#         metric_name        = \"Percentage CPU\"\n#         metric_resource_id = azurerm_orchestrated_virtual_machine_scale_set.main.id\n#         time_grain        = \"PT1M\"\n#         statistic         = \"Average\"\n#         time_window       = \"PT10M\"\n#         time_aggregation  = \"Average\"\n#         operator          = \"GreaterThan\"\n#         threshold         = 70\n#       }\n\n#       scale_action {\n#         direction = \"Increase\"\n#         type      = \"ChangeCount\"\n#         value    = \"1\"\n#         cooldown = \"PT1M\"\n#       }\n#     }\n\n#     rule {\n#       metric_trigger {\n#         metric_name        = \"Percentage CPU\"\n#         metric_resource_id = azurerm_orchestrated_virtual_machine_scale_set.main.id\n#         time_grain        = \"PT1M\"\n#         statistic         = \"Average\"\n#         time_window       = \"PT10M\"\n#         time_aggregation  = \"Average\"\n#         operator          = \"LessThan\"\n#         threshold         = 30\n#       }\n\n#       scale_action {\n#         direction = \"Decrease\"\n#         type      = \"ChangeCount\"\n#         value    = \"1\"\n#         cooldown = \"PT5M\"\n#       }\n#     }\n#   }\n\n#   tags = var.tags\n# }\n```\n\n### Debug Output/Panic Output\n\n```shell\nmodule.vmss.azurerm_orchestrated_virtual_machine_scale_set.main: Creating...\n\u2577\n\u2502 Error: creating Orchestrated Virtual Machine Scale Set (Subscription: \"<Subscription-Id>\"\n\u2502 Resource Group Name: \"ABS\"\n\u2502 Virtual Machine Scale Set Name: \"test\"): performing CreateOrUpdate: unexpected status 400 (400 Bad Request) with error: InvalidParameter: Parameter 'osProfile' is not allowed.\n\u2502 \n\u2502   with module.vmss.azurerm_orchestrated_virtual_machine_scale_set.main,\n\u2502   on ../modules/vmss/main.tf line 5, in resource \"azurerm_orchestrated_virtual_machine_scale_set\" \"main\":\n\u2502    5: resource \"azurerm_orchestrated_virtual_machine_scale_set\" \"main\" {\n```\n\n### Expected Behaviour\n\n1) Terraform should allow creation of VMSS with specialized images without requiring\n2) OS profile configuration, similar to how Azure Portal and ARM templates handle this.\n\n### Actual Behaviour\n\n_No response_\n\n### Steps to Reproduce\n\n```\n$vmImage = Get-AzVM -Name $vmName -ResourceGroupName $rgName\n\nNew-AzGalleryImageVersion `\n   -GalleryImageDefinitionName \"Imagenew\" `\n   -GalleryImageVersionName $imageVersion `\n   -GalleryName \"Images\" `\n   -ResourceGroupName \"ABSPROD\" `\n   -Location \"Australia Central\" `\n   -TargetRegion @{Name='West Us';ReplicaCount=1;Location='Australia Central'}  `\n   -SourceImageVMId $vmImage.Id.ToString() \n```\n\n- Used above command to create the Specialized Images in Azure.\n- Use this resourced Id to create the Flexible VMSS\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/virtual-machine",
        "service/vmss",
        "service/network",
        "v/4.x"
      ],
      "created_at": "2025-09-03T20:14:14Z",
      "closed_at": "2025-11-19T16:08:08Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30544",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30567,
      "title": "\"The azurerm_network_watcher_flow_log resource was configured with the specified parameters, and both terraform plan and terraform apply completed successfully. However, the changes are not being reflected in the Azure portal.\"",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.5.7\n\n### AzureRM Provider Version\n\n4.30.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_network_watcher_flow_log\n\n### Terraform Configuration Files\n\n```hcl\n(In Parent)\nterraform {\n  required_version = \">=1.5.7\"\n\n  backend \"azurerm\" {}\n\n  required_providers {\n    azapi = {\n      source  = \"Azure/azapi\"\n      version = \"~> 1.0\"\n    }\n    azurerm = {\n      source  = \"hashicorp/azurerm\"\n      version = \"4.43.0\"\n    }\n    time = {\n      source  = \"hashicorp/time\"\n      version = \"~> 0.7\" \n    }\n  }\n}\n\nprovider \"azurerm\" {\n  features {}\n  subscription_id = var.env_id\n}\n\nmodule \"network_flow_log\" {\n  source               = \"../../modules/azurerm_network_watcher_flow_log\"\n  name                 = local.module_wide_name\n  network_watcher_name = \"NetworkWatcher_${var.primary_region}\"\n  rg_name              = \"NetworkWatcherRG\"\n  storage_account_id   = module.dls.id\n  target_resource_id   = module.vnet.id\n  \n  depends_on = [\n    module.vnet,\n    module.dls\n  ]\n}\n\n\n(In child)\nresource \"azurerm_network_watcher_flow_log\" \"nwfl\" {\n  name                      = \"nwfl-${var.name}\"\n  network_watcher_name      = var.network_watcher_name\n  resource_group_name       = var.rg_name\n  storage_account_id        = var.storage_account_id\n  target_resource_id        = var.target_resource_id\n  enabled                   = true\n  \n  retention_policy {\n    enabled = true\n    days    = 30\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\n(from terraform plan)\n# module.network_flow_log.azurerm_network_watcher_flow_log.nwfl will be updated in-place\n  ~ resource \"azurerm_network_watcher_flow_log\" \"nwfl\" {\n        id                        = \"/subscriptions/xxxx-x-x-xx-x-x-x-x-xxxx/resourceGroups/NetworkWatcherRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_westeurope/flowLogs/nwfl-testflowlog\"\n        name                      = \"nwfl-testflowlog\"\n        tags                      = {}\n      ~ target_resource_id        = \"/subscriptions/xxxx-x-x-xx-x-x-x-x-xxxx/resourceGroups/rg-resourcegroup/providers/Microsoft.Network/networkSecurityGroups/nsg-networksecurity\" -> \"/subscriptions/xxxx-x-x-xx-x-x-x-x-xxxx/resourceGroups/rg-resourcegroup/providers/Microsoft.Network/virtualNetworks/vnet-virtualnetwork\"\n        # (7 unchanged attributes hidden)\n\n        # (1 unchanged block hidden)\n    }\n\n(from terraform apply)\nmodule.network_flow_log.azurerm_network_watcher_flow_log.nwfl: Modifying... [id=/subscriptions/xxxx-x-x-xx-x-x-x-x-xxxx/resourceGroups/NetworkWatcherRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_westeurope/flowLogs/nwfl-testflowlog]\n```\n\n### Expected Behaviour\n\nThe configurational changes should reflect in the azure console. As it is showing in the terraform plan and apply.\n\n### Actual Behaviour\n\n\"Although the Terraform plan indicates the expected changes, these updates are not being reflected in the Azure portal, which continues to display the older configuration.\n\n\n### Steps to Reproduce\n\n\n\n\n### Important Factoids\n\n_No response_\n\n### References\n\nhttps://registry.terraform.io/providers/hashicorp/azurerm/4.30.0/docs/resources/network_watcher_flow_log",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/network",
        "v/4.x"
      ],
      "created_at": "2025-09-05T11:18:24Z",
      "closed_at": "2025-10-06T15:52:11Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30567",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30594,
      "title": "Bug in azurerm_dev_center",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\nA few days ago it was working fine to create Dev Center using azurerm 4.43.0, but now i get the following error (using the exact same code):\n\nError: creating Dev Center (Subscription: \"c3d693cb-a628-4425-a061-7e7c87dc0c70\"\n\u2502 Resource Group Name: \"rg-dev-devboxinfra-we\"\n\u2502 Dev Center Name: \"devcenter-dev-devbox-we-001\"): performing CreateOrUpdate: unexpected status 400 (400 Bad Request) with error: HttpRequestPayloadAPISpecValidationFailed: HTTP request payload failed validation against API specification with one or more errors. Please see details for more information.\n\u2502 \n\u2502   with azurerm_dev_center.devCenter,\n\u2502   on devbox.tf line 2, in resource \"azurerm_dev_center\" \"devCenter\":\n\u2502    2: resource \"azurerm_dev_center\" \"devCenter\" {\n\u2502 \n\u2502 creating Dev Center (Subscription: \"cxx693cb-a628-xxxx-a061-7e7cxxxc0c70\"\n\u2502 Resource Group Name: \"rg-dev-devboxinfra-we\"\n\u2502 Dev Center Name: \"devcenter-dev-devbox-we-001\"): performing CreateOrUpdate:\n\u2502 unexpected status 400 (400 Bad Request) with error:\n\u2502 HttpRequestPayloadAPISpecValidationFailed: HTTP request payload failed\n\u2502 validation against API specification with one or more errors. Please see\n\u2502 details for more information.\n\u2575\n\n##[error]Error: The process '/opt/hostedtoolcache/terraform/1.10.5/x64/terraform' failed with exit code 1\nFinishing: Terraform Apply\n\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.10.5\n\n### AzureRM Provider Version\n\n4.43.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_dev_center\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_dev_center\" \"devCenter\" {\n  name                              = \"devcenter-${var.env}-devbox-${var.location}-001\"\n  resource_group_name               = var.resource_group_name\n  location                          = var.location\n  project_catalog_item_sync_enabled = true\n  tags                              = local.tags\n  depends_on                        = [azurerm_resource_group.rg]\n\n  identity {\n    type = \"SystemAssigned\"\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nError: creating Dev Center (Subscription: \"c3d693cb-a628-4425-a061-7e7c87dc0c70\"\n\u2502 Resource Group Name: \"rg-dev-devboxinfra-we\"\n\u2502 Dev Center Name: \"devcenter-dev-devbox-we-001\"): performing CreateOrUpdate: unexpected status 400 (400 Bad Request) with error: HttpRequestPayloadAPISpecValidationFailed: HTTP request payload failed validation against API specification with one or more errors. Please see details for more information.\n\u2502 \n\u2502   with azurerm_dev_center.devCenter,\n\u2502   on devbox.tf line 2, in resource \"azurerm_dev_center\" \"devCenter\":\n\u2502    2: resource \"azurerm_dev_center\" \"devCenter\" {\n\u2502 \n\u2502 creating Dev Center (Subscription: \"cxx693cb-a628-xxxx-a061-7e7cxxxc0c70\"\n\u2502 Resource Group Name: \"rg-dev-devboxinfra-we\"\n\u2502 Dev Center Name: \"devcenter-dev-devbox-we-001\"): performing CreateOrUpdate:\n\u2502 unexpected status 400 (400 Bad Request) with error:\n\u2502 HttpRequestPayloadAPISpecValidationFailed: HTTP request payload failed\n\u2502 validation against API specification with one or more errors. Please see\n\u2502 details for more information.\n\u2575\n\n##[error]Error: The process '/opt/hostedtoolcache/terraform/1.10.5/x64/terraform' failed with exit code 1\nFinishing: Terraform Apply\n```\n\n### Expected Behaviour\n\n_No response_\n\n### Actual Behaviour\n\n_No response_\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/dev-center",
        "v/4.x"
      ],
      "created_at": "2025-09-10T06:36:45Z",
      "closed_at": "2025-09-10T11:40:32Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30594",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30640,
      "title": "terraform import not working",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.8.2\n\n### AzureRM Provider Version\n\n4.44.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_resource_group\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_resource_group\" \"resource_group\" {\n  name     = var.name\n  location = var.location\n}\n\nmodule \"resource_group\" {\n  source = \"../resource\"\n  for_each = { for rg in var.resource_group : rg.rg_name => rg }\n  name     = each.key\n  location = each.value.location\n}\n\nresource_group = [\n  {\n    rg_name  = \"abhishek-rg1\"\n    location = \"central india\"\n  }, \n   {\n    rg_name  = \"abhishek-rg2\"\n    location = \"central india\"\n  }, \n   {\n    rg_name  = \"abhishek-rg3\"\n    location = \"central india\"\n  }\n]\n```\n\n### Debug Output/Panic Output\n\n```shell\nPS C:\\Users\\abhis\\Desktop\\test-terraform\\module> terraform import module.resource_group[\"abhishek-rg1\"].azurerm_resource_group.resource_group /subscriptions/a49557de-1f56-4b57-b2c8-32441badadfb/resourceGroups/abhishek-rg1  \n\u2577\n\u2502 Error: Index value required\n\u2502\n\u2502   on <import-address> line 1:\n\u2502    1: module.resource_group[abhishek-rg1].azurerm_resource_group.resource_group\n\u2502\n\u2502 Index brackets must contain either a literal number or a literal string.\n\u2575\n\nFor information on valid syntax, see:\nhttps://www.terraform.io/docs/cli/state/resource-addressing.html\n```\n\n### Expected Behaviour\n\n_No response_\n\n### Actual Behaviour\n\n_No response_\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/resources",
        "v/4.x"
      ],
      "created_at": "2025-09-17T18:46:16Z",
      "closed_at": "2025-09-17T21:44:23Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30640",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30648,
      "title": "azurerm_backup_policy_vm ; policy_type ; An argument named \"policy_type\" is not expected here",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.13.2\n\n### AzureRM Provider Version\n\n4.44.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_backup_policy_vm\n\n### Terraform Configuration Files\n\n```hcl\ndata \"azurerm_backup_policy_vm\" \"vm_protection_policy1\" {\n  name                = var.protectionPolicyName\n  resource_group_name = local.recoveryServicesRGName[0]\n  recovery_vault_name = local.recoveryVaultName[0]\n  policy_type         = \"V2\"\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\n2025-09-18T12:22:31.0959570Z ##[section]Starting: Terraform Plan\n2025-09-18T12:22:31.0967633Z ==============================================================================\n2025-09-18T12:22:31.0967821Z Task         : PowerShell\n2025-09-18T12:22:31.0967918Z Description  : Run a PowerShell script on Linux, macOS, or Windows\n2025-09-18T12:22:31.0968058Z Version      : 2.259.0\n2025-09-18T12:22:31.0968165Z Author       : Microsoft Corporation\n2025-09-18T12:22:31.0968283Z Help         : https://docs.microsoft.com/azure/devops/pipelines/tasks/utility/powershell\n2025-09-18T12:22:31.0968471Z ==============================================================================\n2025-09-18T12:22:31.9657718Z Generating script.\n2025-09-18T12:22:32.0013362Z ========================== Starting Command Output ===========================\n2025-09-18T12:22:32.0248313Z ##[command]\"C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe\" -NoLogo -NoProfile -NonInteractive -ExecutionPolicy Unrestricted -Command \". 'D:\\a\\_temp\\45686727-1a63-4b49-83ea-0ffe87af1b3e.ps1'\"\n2025-09-18T12:22:34.5124193Z \u200c\u2577\u200c\n2025-09-18T12:22:34.5124956Z \u200c\u2502\u200c \u200cError: \u200cUnsupported argument\u200c\n2025-09-18T12:22:34.5126789Z \u200c\u2502\u200c \u200c\n2025-09-18T12:22:34.5131284Z \u200c\u2502\u200c \u200c  on VMProtectionPolicies.tf line 5, in data &quot;azurerm_backup_policy_vm&quot; &quot;vm_protection_policy1&quot;:\u200c\n2025-09-18T12:22:34.5132152Z \u200c\u2502\u200c \u200c   5:   \u200cpolicy_type\u200c         = &quot;V2&quot;\u200c\n2025-09-18T12:22:34.5133896Z \u200c\u2502\u200c \u200c\n2025-09-18T12:22:34.5134550Z \u200c\u2502\u200c \u200cAn argument named &quot;policy_type&quot; is not expected here.\u200c\n2025-09-18T12:22:34.5135437Z \u200c\u2575\u200c\n2025-09-18T12:22:34.8198735Z ##[error]PowerShell exited with code '1'.\n2025-09-18T12:22:34.8557087Z ##[section]Finishing: Terraform Plan\n```\n\n### Expected Behaviour\n\nI expected the resource to deploy with enhanced backup policy, which equates to the \"V2\" as per:-\n\nhttps://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/backup_policy_vm\n\n\n### Actual Behaviour\n\ndeployment partially completes but the TF apply fails with the above error.\n\n### Steps to Reproduce\n\nconfigure azurerm_backup_policy_vm to deploy an enhanced/V2 backup policy\n\n### Important Factoids\n\nThe code works for V1 for a V1 VM, omitting the policy_type, so defaulting to V1\n\n### References\n\nTF registry reference:\nhttps://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/backup_policy_vm,\nsee Argument Reference - policy_type",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/recovery-services",
        "v/4.x"
      ],
      "created_at": "2025-09-18T15:18:28Z",
      "closed_at": "2025-09-18T17:39:56Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30648",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30733,
      "title": "azurerm_log_analytics_workspace local_authentication_enabled default value not set",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.13.3\n\n### AzureRM Provider Version\n\n4.44.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_log_analytics_workspace\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_log_analytics_workspace\" \"main1\" {\n  name                         = \"log-01\"\n  location                     = \"WestEurope\"\n  resource_group_name          = \"rg-logs\"\n  sku                          = \"PerGB2018\"\n  internet_ingestion_enabled   = true\n  internet_query_enabled       = true\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nnone\n```\n\n### Expected Behaviour\n\n\"**disableLocalAuth**\" feature should be set to _false_ by default (since docs say that local_authentication_enabled defaults to true)\n\n```\n..\n  \"features\": {\n      \"legacy\": 0,\n      \"searchVersion\": 1,\n      \"enableLogAccessUsingOnlyResourcePermissions\": true,\n      \"disableLocalAuth\": false\n  }\n..\n```\n\n### Actual Behaviour\n\n```\n..\n  \"features\": {\n      \"legacy\": 0,\n      \"searchVersion\": 1,\n      \"enableLogAccessUsingOnlyResourcePermissions\": true,\n      \"disableLocalAuth\": true\n  }\n..\n```\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "Hi @Jezevecek, thanks for opening the issue.\n\nI tried with below version information but can not reproduce the issue:\n```\nTerraform v1.13.3\non linux_amd64\n+ provider registry.terraform.io/hashicorp/azurerm v4.46.0\n```\ncould you please upgrade your azurerm provider and try again?\n\nThanks!\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/log-analytics",
        "v/4.x"
      ],
      "created_at": "2025-09-29T17:12:48Z",
      "closed_at": "2025-10-10T19:42:40Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30733",
      "comments_count": 6
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30745,
      "title": "azurerm_service_plan sku_name casing changing in place every run",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.8.5\n\n### AzureRM Provider Version\n\n4.44.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_service_plan\n\n### Terraform Configuration Files\n\n```hcl\nprovider \"azurerm\" {\n  features {}\n}\n\nresource \"azurerm_resource_group\" \"example\" {\n  name     = \"example-resources\"\n  location = \"West Europe\"\n}\n\nresource \"azurerm_service_plan\" \"example\" {\n  name                = \"example\"\n  resource_group_name = azurerm_resource_group.example.name\n  location            = azurerm_resource_group.example.location\n  os_type             = \"Windows\"\n  sku_name            = \"I1mv2\"\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nCan provide if necessary.\n```\n\n### Expected Behaviour\n\nNo changes when NOT updating the azurerm_service_plan resource. \n\n### Actual Behaviour\n\n# azurerm_service_plan.plan will be updated in-place\n~ resource \"azurerm_service_plan\" \"plan\" {\n        id                = \"...\"\n        name          = \"example\"\n    ~ sku_name    = \"I1mV2\" -> \"I1mv2\"\n        tags             = {}\n        # (9 unchanged attributes hidden)\n  }\n\n### Steps to Reproduce\n\n1) Deploy an azurerm_service_plan with a sku_name of \"I1mv2\", \"I2mv2\", \"I3mv2\", \"I4mv2\", or \"I5mv2\"\n2) Trigger a new run after successful deployment\n\nThe sku_name attribute in the Azure Portal resource object is stored as \"size\": \"I1mV2\", instead of \"size\": \"I1mv2\", as both the terraform provider and azure documentation state. Therefore, each new successive run will update the service plan sku name to the lower case, per the provider, causing excess time and output.  \n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "@catriona-m I don't think there is, I'll raise one once validate the issue\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/app-service",
        "category/casing/resource-id",
        "v/4.x"
      ],
      "created_at": "2025-09-30T21:47:04Z",
      "closed_at": "2025-11-18T23:27:32Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30745",
      "comments_count": 6
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30788,
      "title": "retrieving `contact` for KeyVault: keyvault.BaseClient#GetCertificateContacts: Failure sending request: StatusCode=0 -- Original Error: context deadline exceeded",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.13.3\n\n### AzureRM Provider Version\n\n4.47.0\n\n### Affected Resource(s)/Data Source(s)\n\nmodule.key-vault.azurerm_key_vault.key-vault\n\n### Terraform Configuration Files\n\n```hcl\nlocals {\n  coriaID   = var.key_vault_for_rg == true ? element(split(\"-\", data.azurerm_resource_group.key-vault.name), 0) : element(split(\"-\", data.azurerm_subscription.current.display_name), 0)\n  env       = element(split(\"-\", data.azurerm_subscription.current.display_name), 2)\n  kv_suffix = var.key_vault_for_rg == true ? join(\"\", [var.key_vault_index, substr(md5(data.azurerm_resource_group.key-vault.id), 0, 4)]) : join(\"\", [var.key_vault_index, substr(md5(data.azurerm_subscription.current.id), 0, 4)])\n}\n\nresource \"azurerm_key_vault\" \"key-vault\" {\n  name                = var.key_vault_name == \"\" ? \"kv-${local.coriaID}-${local.region}-${lower(local.env)}-${local.kv_suffix}\" : var.key_vault_name\n  location            = var.key_vault_location == \"\" ? data.azurerm_resource_group.key-vault.location : var.key_vault_location\n  resource_group_name = data.azurerm_resource_group.key-vault.name\n  tenant_id           = data.azurerm_client_config.current.tenant_id\n\n  sku_name = var.key_vault_sku_name\n\n  enabled_for_deployment          = var.key_vault_enabled_for_deployment\n  enabled_for_disk_encryption     = var.key_vault_enabled_for_disk_encryption\n  enabled_for_template_deployment = var.key_vault_enabled_for_template_deployment\n  purge_protection_enabled        = var.key_vault_enable_purge_protection\n\n  tags = var.key_vault_tags\n\n  # This prevents the key-vault name from being changed after deployment and therefore replacement from name generating data sources (resourcegroupID/subscriptionID)\n  lifecycle {\n    ignore_changes = [\n      name,\n      tenant_id,\n      network_acls[0].virtual_network_subnet_ids\n    ]\n  }\n\n  network_acls {\n    default_action             = var.key_vault_network_acl_default_action\n    bypass                     = var.key_vault_network_acl_bypass\n    ip_rules                   = var.key_vault_network_acl_ip_rules\n    virtual_network_subnet_ids = var.key_vault_network_acl_virtual_network_subnet_ids\n  }\n}\n\nresource \"azurerm_resource_group\" \"rg1\" {\n  name     = \"013448-InfrastructureServices-gwc-prd-rg\"\n  location = \"GermanyWestCentral\"\n  tags     = merge(module.tags_013448.calculated_tags)\n}\n\n\nmodule \"key-vault\" {\n  source                                    = \"./Modules/key-vault\"\n  key_vault_name                            = \"\"\n  key_vault_for_rg                          = true\n  key_vault_index                           = \"01\"\n  key_vault_resource_group_name             = azurerm_resource_group.rg1.name\n  key_vault_location                        = azurerm_resource_group.rg1.location\n  key_vault_sku_name                        = \"premium\"\n  key_vault_enabled_for_deployment          = true\n  key_vault_enabled_for_disk_encryption     = true\n  key_vault_enabled_for_template_deployment = true\n  key_vault_enable_purge_protection         = true\n\n  key_vault_network_acl_ip_rules            = try(local.key_vault_acl_ip_rules.keyvault01-gwc, [, ])\n  \n  key_vault_tags                            = merge(module.tags_013448.calculated_tags)\n\n  depends_on = [azurerm_resource_group.rg1]\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nhttps://gist.github.com/DUANEFABIAN/7f45d4410089dbf76cd55e5eb9f98de8\n```\n\n### Expected Behaviour\n\nTerraform Plan should run without getting an error. Key Vault and other resources already exists\n\n\nThe configuration is on every KV in our environment the same and the issue only appears on a few \n\n\n### Actual Behaviour\n\n Error: retrieving `contact` for KeyVault: keyvault.BaseClient#GetCertificateContacts: Failure sending request: StatusCode=0 -- Original Error: context deadline exceeded\n\u2502 \n\u2502   with module.key-vault.azurerm_key_vault.key-vault,\n\u2502   on Modules/key-vault/key-vault.tf line 7, in resource \"azurerm_key_vault\" \"key-vault\":\n\u2502    7: resource \"azurerm_key_vault\" \"key-vault\" {\n\n### Steps to Reproduce\n\nterraform plan \n\n### Important Factoids\n\n_No response_\n\n### References\n\nhttps://github.com/hashicorp/terraform-provider-azurerm/issues/27575 issue should be resolved with azurerm version 4.x",
      "solution": "Issue solved:\n\nRootcause:\nKeyVault is using a Private Endpoint from a different network than the DevOps selfhosted agents (terraform) are placed in.\nThis leads to the Devops selhosted agents to look into the private DNS zone from his own network where no entry for the private endpoint is configured -> not working\n\nSolution:\nEnable on the Key Vault Private DNS Zone Link the \"Fallback to Internet\" option\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/key-vault",
        "service/authorization",
        "service/subscription",
        "v/4.x"
      ],
      "created_at": "2025-10-06T13:19:05Z",
      "closed_at": "2025-10-14T11:19:48Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30788",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30791,
      "title": "OUTDATED DOCUMENTATION azurerm_network_watcher_flow_log.target_resource_id",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.13.0\n\n### AzureRM Provider Version\n\n3.0.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_network_watcher_flow_log\n\n### Terraform Configuration Files\n\n```hcl\nterraform {\n  required_providers {\n    azurerm = {\n      source  = \"hashicorp/azurerm\"\n      version = \"~> 3.0\"\n    }\n    random = {\n      source  = \"hashicorp/random\"\n      version = \"~> 3.0\"\n    }\n  }\n}\n\nprovider \"azurerm\" {\n  features {}\n}\n\nresource \"azurerm_resource_group\" \"this\" {\n  name     = \"production-nwwatcher\"\n  location = \"westeurope\"\n}\n\nresource \"azurerm_network_watcher\" \"this\" {\n  name                = \"production-nwwatcher\"\n  location            = azurerm_resource_group.this.location\n  resource_group_name = azurerm_resource_group.this.name\n}\n\nresource \"azurerm_storage_account\" \"this\" {\n  name                = \"productionacctestsa\"\n  resource_group_name = azurerm_resource_group.this.name\n  location            = azurerm_resource_group.this.location\n\n  account_tier               = \"Standard\"\n  account_kind               = \"StorageV2\"\n  account_replication_type   = \"LRS\"\n  https_traffic_only_enabled = true\n}\n\nresource \"azurerm_log_analytics_workspace\" \"law_trafficanalytics_1\" {\n  name                = \"prod-law-trafficanalytics\"\n  location            = azurerm_resource_group.this.location\n  resource_group_name = azurerm_resource_group.this.name\n  sku                 = \"PerGB2018\"\n}\n\nresource \"azurerm_network_security_group\" \"nsg\" {\n  name                = \"prod-nsg\"\n  location            = azurerm_resource_group.this.location\n  resource_group_name = azurerm_resource_group.this.name\n}\n\nresource \"azurerm_network_watcher_flow_log\" \"this\" {\n  network_watcher_name = azurerm_network_watcher.this.name\n  resource_group_name  = azurerm_resource_group.this.name\n  name                 = \"prod-flow-log\"\n\n  target_resource_id = azurerm_network_security_group.nsg.id\n  storage_account_id = azurerm_storage_account.this.id\n  enabled            = true\n\n  retention_policy {\n    enabled = true\n    days    = 7\n  }\n\n  traffic_analytics {\n    enabled               = true\n    workspace_id          = azurerm_log_analytics_workspace.law_trafficanalytics_1.workspace_id\n    workspace_region      = azurerm_log_analytics_workspace.law_trafficanalytics_1.location\n    workspace_resource_id = azurerm_log_analytics_workspace.law_trafficanalytics_1.id\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\n---\n```\n\n### Expected Behaviour\n\n>terraform validate\nSuccess! The configuration is valid.\n\n### Actual Behaviour\n\n>terraform validate\n\u2577\n\u2502 Error: Missing required argument\n\u2502\n\u2502   on main.tf line 54, in resource \"azurerm_network_watcher_flow_log\" \"this\":\n\u2502   54: resource \"azurerm_network_watcher_flow_log\" \"this\" {\n\u2502\n\u2502 The argument \"network_security_group_id\" is required, but no definition was found.\n\u2575\n\u2577\n\u2502 Error: Unsupported argument\n\u2502\n\u2502   on main.tf line 59, in resource \"azurerm_network_watcher_flow_log\" \"this\":\n\u2502   59:   target_resource_id = azurerm_network_security_group.nsg.id\n\u2502\n\u2502 An argument named \"target_resource_id\" is not expected here.\n\n### Steps to Reproduce\n\nterraform validate\n\n### Important Factoids\n\n_No response_\n\n### References\n\nI know there\u2019s information that indirectly suggests using the network_security_group_id syntax in Terraform, but the documentation should be updated \ud83d\udde1\ufe0f ",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/storage",
        "service/log-analytics",
        "service/network",
        "v/3.x"
      ],
      "created_at": "2025-10-06T17:56:16Z",
      "closed_at": "2025-10-06T20:16:45Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30791",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30804,
      "title": "Changing `azurerm_kubernetes_cluster.identity.identity_ids` from one user-assigned identity resource ID to another user-assigned identity ID causes API server to become unreachable from within the cluster, but still reachable externally",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\nopentofu 1.10.0\n\n### AzureRM Provider Version\n\n3.116.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_kubernetes_cluster\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_kubernetes_cluster\" \"master_configuration\" {\n  # ...required fields\n  identity {\n    identity_ids = [\"/subscriptions/<sub_id>/resourceGroups/<rg_name>/providers/Microsoft.ManagedIdentity/userAssignedIdentities/<mid_name>\"]\n    type = \"UserAssigned\"\n  }\n}\n\nBoth the old MID and the new MID have the same RBAC roles applied at the same scopes, and both live in the same resource group which is a separate RG from the cluster's.\n\nWhen changing from the ID the cluster was created with to another ID, I can still reach the cluster from a peered virtual network via kubectl, and the Azure Portal reports the cluster state is successful, however we see several pods which depend on access to the Kubernetes API enter into CrashLoopBackoff and log errors about getting request timeouts to IP 172.16.0.1 (the in-cluster `kubernetes.default.svc` IP address)\n\nAfter changing back to the original MID that the cluster was created with, the problems go away and the pods that were crashing stop crashing.\n```\n\n### Debug Output/Panic Output\n\n```shell\nN/A\n```\n\n### Expected Behaviour\n\nThe identity update should not cause the API server to become unavailable within the cluster.\n\n### Actual Behaviour\n\nSome pods crashloop.\n\n### Steps to Reproduce\n\nSimply change the resource ID of the cluster's primary User-Assigned Managed Identity and run `terraform apply`, then check `kubectl get pods -A` output after the terraform run is finished.\n\n### Important Factoids\n\nWhen running `az aks update -g <rg name> --name <cluster name> --enable-managed-identity --assign-identity <identity resource ID>` the cluster is updated and all pods continue running as normal.\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/kubernetes-cluster",
        "v/3.x"
      ],
      "created_at": "2025-10-08T03:44:43Z",
      "closed_at": "2025-10-21T02:16:57Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30804",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30833,
      "title": "Azure Front Door Private Link not enabled via Terraform for Container Apps",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n**Description**\nWhen configuring an origin group in Azure Front Door (Standard/Premium SKU) with a Container App as the origin, the Private Link setting is not applied, even though the correct Terraform configuration is in place. The Azure Portal UI shows that Private Link is not enabled.\n\n**Expected Behavior**\nPrivate Link should be enabled for the origin in Azure Front Door when specified in Terraform, and the portal should reflect this setting.\n\n**Actual Behavior**\nThe portal shows that Private Link is not enabled, and the checkbox remains unchecked. A warning appears:\n\n\"Private endpoint connection is not supported when public network access of the managed environment of the selected Container App is enabled. Please disable the public network access first.\"\n\n\n**Terraform Configuration Snippet**\n\nresource \"azurerm_cdn_frontdoor_origin_group\" \"example\" {\n  name                = \"example-origin-group\"\n  cdn_frontdoor_profile_id = azurerm_cdn_frontdoor_profile.example.id\n  session_affinity_enabled = false\n\n  origin {\n    name                  = \"example-origin\"\n    host_name             = azurerm_container_app.example.latest_revision_fqdn\n    http_port             = 80\n    https_port            = 443\n    origin_type           = \"containerApp\"\n    private_link {\n      private_link_target_id = azurerm_container_app_environment.env.id\n      location               = local.location\n      target_type            = \"managedEnvironments\"\n    }\n  }\n}\n\n\n### Terraform Version\n\n1.10.0\n\n### AzureRM Provider Version\n\n4.47\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_cdn_frontdoor_origin\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_cdn_frontdoor_origin_group\" \"example\" {\n  name                = \"example-origin-group\"\n  cdn_frontdoor_profile_id = azurerm_cdn_frontdoor_profile.example.id\n  session_affinity_enabled = false\n\n  origin {\n    name                  = \"example-origin\"\n    host_name             = azurerm_container_app.example.latest_revision_fqdn\n    http_port             = 80\n    https_port            = 443\n    origin_type           = \"containerApp\"\n    private_link {\n      private_link_target_id = azurerm_container_app_environment.env.id\n      location               = local.location\n      target_type            = \"managedEnvironments\"\n    }\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nEvery thing is successful. \n\nazurerm_cdn_frontdoor_origin.example: Still creating... [11m30s elapsed]\nazurerm_cdn_frontdoor_origin.example: Still creating... [11m40s elapsed]\nazurerm_cdn_frontdoor_origin.example: Creation complete after 11m46s [id=/subscriptions/daff9bb9-a940-4751-b69a-4659402b6162/resourceGroups/Rg-sam/providers/Microsoft.Cdn/profiles/afd-test-01/originGroups/cae-origingroup/origins/cae-origin]\n\nApply complete! Resources: 7 added, 0 changed, 0 destroyed.\n\nOutputs:\n\ncontainer_app_url = \"con-app-01--1fou6al.happybeach-7ee3362e.westus3.azurecontainerapps.io\"\nPS C:\\EPAM\\LAB\\Terraform\\container_app_env>\n```\n\n### Expected Behaviour\n\n_No response_\n\n### Actual Behaviour\n\n<img width=\"1743\" height=\"896\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a42baff7-26ed-4254-8858-1d9a886de664\" />\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/cdn",
        "service/container-apps",
        "v/4.x"
      ],
      "created_at": "2025-10-12T16:21:19Z",
      "closed_at": "2025-10-13T09:29:43Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30833",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30866,
      "title": "azurerm_cdn_frontdoor_origin.private_link - error either 'private_link' or 'target_type' must be specified",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.13.1\n\n### AzureRM Provider Version\n\n4.48.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_cdn_frontdoor_origin\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_cdn_frontdoor_origin\" \"fd_origin\" {\n  for_each = var.azure_front_door\n\n  name                           = \"${var.customer}-${var.location_short}-${var.environment}-${each.value.application_name}-origin\"\n  cdn_frontdoor_origin_group_id  = azurerm_cdn_frontdoor_origin_group.origin_group[each.key].id\n  certificate_name_check_enabled = each.value.certificate_name_check_enabled\n  host_name                      = each.value.host_name\n  http_port                      = each.value.http_port\n  https_port                     = each.value.https_port\n  enabled                        = each.value.enabled\n  priority                       = each.value.priority\n  weight                         = each.value.weight\n  origin_host_header             = each.value.origin_host_header\n\n  private_link {\n    request_message        = \"Private link connection for ${each.value.application_name}\"\n    private_link_target_id = one([for plc in azurerm_application_gateway.network.private_link_configuration : plc.id if plc.name == \"pl\"])\n    location               = azurerm_resource_group.example.location\n\n  }\n\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\n\u2577\n\u2502 Error: either 'private_link' or 'target_type' must be specified\n\u2502\n\u2502   with azurerm_cdn_frontdoor_origin.fd_origin[\"rnd\"],\n\u2502   on afd.tf line 28, in resource \"azurerm_cdn_frontdoor_origin\" \"fd_origin\":\n\u2502   28: resource \"azurerm_cdn_frontdoor_origin\" \"fd_origin\" {\n```\n\n### Expected Behaviour\n\nCreate Front Door with private link connection on application gateway\n\n### Actual Behaviour\n\n_No response_\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/cdn",
        "service/network",
        "v/4.x"
      ],
      "created_at": "2025-10-15T13:33:33Z",
      "closed_at": "2025-10-20T08:51:55Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30866",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30870,
      "title": "Issue: Malformed UserAssignedIdentity Resource ID (incorrect \"resourceGroups\" segment) on creating azure service bus namespace",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\nTerraform v1.6.0\n\n### AzureRM Provider Version\n\nv4.39.0, v4.48.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_servicebus_namespace\n\n### Terraform Configuration Files\n\n```hcl\n# This is the main configuration file where Azure resources are defined\n# It contains the actual infrastructure as code declarations\n\nresource \"azurerm_resource_group\" \"rg\" {\n  name     = var.resource_group_name\n  location = var.location\n\n  tags = {\n    Environment = upper(var.environment),\n    ApplicationName = var.application_name\n    Temporary = upper(var.temporary)\n    Orchestration = \"Terraform\"\n  }\n}\n\nresource \"azurerm_servicebus_namespace\" \"servicebus\" {\n  name                = var.serbice_bus_name\n  location            = azurerm_resource_group.rg.location\n  resource_group_name = azurerm_resource_group.rg.name\n  sku                 = var.servicebus_sku\n  capacity = var.servicebus_sku == \"Premium\" ? var.capacity : 0\n\n  tags = azurerm_resource_group.rg.tags\n  local_auth_enabled = var.enable_local_auth\n  public_network_access_enabled = var.public_access\n  minimum_tls_version = var.min_tls_version\n\n  dynamic \"identity\" {\n    for_each = var.enable_identity ? [1]: []\n    content {\n      type         = length(var.identity_ids) > 0 ? \"UserAssigned\" : \"SystemAssigned\"\n      identity_ids = var.identity_ids \n    }\n  }\n}\n\n\n# This file defines all input variables for your Terraform configuration\n# Variables allow users to customize the deployment without modifying code\n\nvariable \"resource_group_name\" {\n  description = \"Name of the resource group\"\n  type        = string\n  default = \"test-sb-rg\"\n}\n\nvariable \"serbice_bus_name\" {\n  description = \"Name of the Service Bus Namespace\"\n  type        = string\n  default = \"test-sb-namespace\"\n}\n\nvariable \"location\" {\n  description = \"Azure region\"\n  type        = string\n  default = \"centralindia\"\n}\n\nvariable \"environment\" {\n  description = \"Environment tag\"\n  type        = string\n  default = \"DEV\"\n}\n\nvariable \"application_name\" {\n  description = \"Application name tag\"\n  type        = string\n  default    = \"devwithkrishna\"\n}\n\nvariable \"temporary\" {\n  description = \"temporary name tag\"\n  type        = string  \n  default = \"TRUE\"\n}\n\nvariable \"servicebus_sku\" {\n  description = \"Sku of the Service Bus Namespace\"\n  type        = string\n  default = \"Standard\"\n  validation {\n    condition = contains([\"Standard\", \"Premium\",\"Basic\"], var.servicebus_sku)\n    error_message = \"Service Bus SKU must be one of 'Standard', 'Premium', or 'Basic'.\"\n  }\n}\n\nvariable \"capacity\" {\n  description = \"Specifies the Capacity. Only for Premium SKU\"\n  type = string\n  default = \"2\"\n  validation {\n    condition = contains([\"1\",\"2\",\"4\",\"8\",\"16\"], var.capacity)\n    error_message = \"Premium Capacity values can be one of '1','2','4','8','16'\"\n  }\n}\n\nvariable \"enable_identity\" {\n  description = \"Enable System Assigned or user assigned Managed identity\"\n  type = bool\n  default = true\n}\n\nvariable \"identity_ids\" {\n  description = \"List of User assigned managed identity IDs\"\n  type = list(string)\n  default = [resource id here]\n\n}\n\nvariable \"enable_local_auth\" {\n  description = \"Whether or not SAS authentication is enabled for the Service Bus namespace\"\n  default = false\n  type    = bool\n}\n\nvariable \"public_access\" {\n  description = \"Is public network access enabled for the Service Bus Namespace\"\n  default = true\n  type = bool\n}\n\nvariable \"min_tls_version\" {\n  description = \"The minimum supported TLS version for this Service Bus Namespace\"\n  type = string\n  default = 1.2\n}\n\n# This file configures the Terraform providers and backend settings\n# It defines which providers are required and their version constraints\n\nterraform {\n  required_version = \">= 1.0\"\n\n  required_providers {\n    azurerm = {\n      source  = \"hashicorp/azurerm\"\n      version = \">= 4.0\"\n    }\n  }\n}\n\n\n# Configure the Azure provider\nprovider \"azurerm\" {\n  features {}  # Required block for Azure provider, can configure specific features here\n  \n  # TODO: Add authentication methods if not using Azure CLI/Environment variables\n  # subscription_id = var.subscription_id\n  # tenant_id       = var.tenant_id\n  # client_id       = var.client_id\n  # client_secret   = var.client_secret\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nterraform plan -out plan.out\n\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the\nfollowing symbols:\n  + create\n\nTerraform planned the following actions, but then encountered a problem:\n\n  # azurerm_resource_group.rg will be created\n  + resource \"azurerm_resource_group\" \"rg\" {\n      + id       = (known after apply)\n      + location = \"centralindia\"\n      + name     = \"test-sb-rg\"\n      + tags     = {\n          + \"ApplicationName\" = \"devwithkrishna\"\n          + \"Environment\"     = \"DEV\"\n          + \"Orchestration\"   = \"Terraform\"\n          + \"Temporary\"       = \"TRUE\"\n        }\n    }\n\nPlan: 1 to add, 0 to change, 0 to destroy.\n\nChanges to Outputs:\n  + resource_group_id   = (known after apply)\n  + resource_group_name = \"test-sb-rg\"\n  + resource_group_tags = {\n      + ApplicationName = \"devwithkrishna\"\n      + Environment     = \"DEV\"\n      + Orchestration   = \"Terraform\"\n      + Temporary       = \"TRUE\"\n    }\n\u2577\n\u2502 Error: parsing \"/subscriptions/e71149ssf-b946-d-subid/resourcegroups/ARCHITECTS-IDENTITY-RG/providers/Microsoft.ManagedIdentity/userAssignedIdentities/EXTERNAL-SECRETS-OPERATOR-MANAGEDIDENTITY\": parsing segment \"resourceGroups\": parsing the UserAssignedIdentity ID: the segment at position 2 didn't match\n\u2502\n\u2502 Expected a UserAssignedIdentity ID that matched:\n\u2502\n\u2502 > /subscriptions/12345678-1234-9876-4563-123456789012/resourceGroups/example-resource-group/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userAssignedIdentityValue\n\u2502\n\u2502 However this value was provided:\n\u2502\n\u2502 > /subscriptions/e71149ssf-b946-d-subid/resourcegroups/ARCHITECTS-IDENTITY-RG/providers/Microsoft.ManagedIdentity/userAssignedIdentities/EXTERNAL-SECRETS-OPERATOR-MANAGEDIDENTITY\n\u2502\n\u2502 The parsed Resource ID was missing a value for the segment at position 2\n\u2502 (which should be the literal value \"resourceGroups\").\n\u2502\n\u2502\n\u2502\n\u2502   with azurerm_servicebus_namespace.servicebus,\n\u2502   on main.tf line 16, in resource \"azurerm_servicebus_namespace\" \"servicebus\":\n\u2502   16: resource \"azurerm_servicebus_namespace\" \"servicebus\" {\n\u2502\n\u2575\nPS C:\\Users\\Krishnadhas N K\\Documents\\GitHub\\devwithkrishna\\terraform-azure-servicebus>\n```\n\n### Expected Behaviour\n\nTerraform is complaining about a mismatch between the resource id provided for the user-assigned managed identity and the actual identity copied from the Azure portal. expected behavior irrespective of casing; it should allow\n\n### Actual Behaviour\n\nDescription: The Azure provider failed to parse the user-assigned identity ID because the resource ID path segment for \"resourceGroups\" does not match the expected literal (casing/segment mismatch). Fix by using the exact Resource ID format (e.g. \"/subscriptions/<id>/resourceGroups/<name>/providers/Microsoft.ManagedIdentity/userAssignedIdentities/<identity>\") and verify subscription, resource group, and identity names.\n\n### Steps to Reproduce\n\nvariables.tf, providers.tf, main.tf are given run terraform init and plan (error on plan step itself)\n\n### Important Factoids\n\n_No response_\n\n### References\n\nhttps://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/servicebus_namespace#identity-1",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/service-bus",
        "v/4.x"
      ],
      "created_at": "2025-10-15T19:34:28Z",
      "closed_at": "2025-10-15T20:37:30Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30870",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30877,
      "title": "min_capacity not allowed for HS_S serverless after 4.48",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\nhttps://github.com/hashicorp/terraform-provider-azurerm/pull/30790#issuecomment-3402717184\n\n### Terraform Version\n\nlatest\n\n### AzureRM Provider Version\n\n4.48.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_mssql_database\n\n### Terraform Configuration Files\n\n```hcl\nsku            = \"HS_S_Gen5_2\",\n      min_capacity   = 0.5,\n```\n\n### Debug Output/Panic Output\n\n```shell\nError: 1 error occurred:\n\t* `min_capacity` should only be specified when using a serverless database\n```\n\n### Expected Behaviour\n\n_No response_\n\n### Actual Behaviour\n\n_No response_\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "This was resolved in #30856 and will be included in the next release\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/mssql",
        "v/4.x"
      ],
      "created_at": "2025-10-16T08:03:35Z",
      "closed_at": "2025-10-16T15:17:23Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30877",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30881,
      "title": "Unable to create external Entra ID group using azurerm_api_management_group",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.13.3\n\n### AzureRM Provider Version\n\n4.38.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_api_management_group\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_api_management_group\" \"developers\" {\n\n  name                = \"${var.application_name}-${var.environment_name}-developers\"\n  resource_group_name = azurerm_resource_group.main.name\n  api_management_name = azurerm_api_management.main.name\n  display_name        = \"Internal Development Team\"\n  description         = \"Allow developers to access the API Management Developer Portal\"\n  type                = \"external\"\n  external_id         = \"aad://${data.azuread_client_config.current.tenant_id}/groups/${azuread_group.developers.object_id}\"\n\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nFailed to query Azure Active Directory graph due to error: AADSTS100007: This request was received by an Azure AD regional authentication endpoint. Only managed identities and Microsoft internal service identities are supported. SN+I authentication is required. All others, send your request to login.microsoftonline.com: in MSAL avoid using\u00a0.WithAzureRegion(), in App Service, set REGION_NAME to null. Trace ID: f2b7a497\u201315cb-473c-8dd3\u2013527146b68301 Correlation ID: df15cfc8-d8a7\u20134c31-b8b7-f6056f648b87 Timestamp: 2025\u201310\u201316 15:20:14Z\n```\n\n### Expected Behaviour\n\nit should create the group in API Management which is pointing at an External Entra ID Group\n\n### Actual Behaviour\n\nit fails to create the group\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/api-management",
        "v/4.x"
      ],
      "created_at": "2025-10-16T15:31:52Z",
      "closed_at": "2025-10-16T15:35:38Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30881",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30943,
      "title": "Support for Microsoft Entra Authentication for Azure Managed Redis",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Description\n\nThanks @gerrytan  and @jackofallops for releasing azure managed redis in v4.50.0! It works great. We'd like to ask if we could get microsoft entra auth integration with TF so that we can embed managed identity and user / service principals\n\n### New or Affected Resource(s)/Data Source(s)\n\nazurerm_managed_redis\n\n### Potential Terraform Configuration\n\n```hcl\nazurerm_managed_redis {\nmicrosoft_entra_authentication {\nuser_assigned_identity = <id here>\nserviceprincipal = <id here>\n}\n```\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/redis"
      ],
      "created_at": "2025-10-24T20:39:52Z",
      "closed_at": "2025-10-24T20:40:14Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30943",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30965,
      "title": "`azurerm_managed_redis` fails intermittently with internal-error and unsupported API version (`2024-11-01`)",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.13.1\n\n### AzureRM Provider Version\n\n4.50.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_managed_redis\n\n### Terraform Configuration Files\n\n```hcl\nvariable \"redis_db_modules\" {\n  type = list(object({\n    name = string\n    args = string\n  }))\n}\n\nlocals {\n  module_names = [for module in var.redis_db_modules : module.name]\n}\n\nresource \"azurerm_managed_redis\" \"test\" {\n  name                = var.redis_name\n  resource_group_name = module.resource_group.rg.name\n  location            = module.resource_group.rg.location\n\n  # value: Balanced_B0\n  sku_name            = var.sku_name\n\n  default_database {\n    # value: EnterpriseCluster\n    clustering_policy = var.clustering_policy\n\n    client_protocol = \"Plaintext\"\n\n    # value = true\n    access_keys_authentication_enabled = var.access_keys_authentication_enabled\n\n    dynamic \"module\" {\n      for_each = var.redis_db_modules\n      content {\n        name = module.value.name\n        args = module.value.args\n      }\n    }\n\n    eviction_policy = contains(local.module_names, \"RediSearch\") ? \"NoEviction\" : var.eviction_policy\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nn/a\n```\n\n### Expected Behaviour\n\nTerraform should create the resource `Azure Managed Redis` with server status `Running - Balanced B0`\n\n### Actual Behaviour\n\n- The resource creation succeeds occasionally but fails randomly with internal-error.\n- The provider appears to query Azure using an unsupported API version (2024-11-01).\n\nI get that error : \n\n```bash\nError: creating Redis Enterprise (Subscription: \"********-****-****-****-************\"\nResource Group Name: \"rg-app-***-test-001-***-02\"\nRedis Enterprise Name: \"amr-***-test-westeurope-001-***-02\"): polling after Create: polling failed: the Azure API returned the following error:\n\nStatus: \"Unknown\"\nCode: \"internal-error\"\nMessage: \"Couldn't parse Azure API Response into a friendly error - please see the original HTTP Response for more details (and file a bug so we can fix this!).\"\nActivity Id: \"\"\n\n\n\u2502\n\u2502 ---\n\u2502\n\u2502 API Response:\n\u2502\n\u2502 ----[start]----\n\u2502\n\u2502{\n\u2502  \"id\": \"/subscriptions/********-****-****-****-************/providers/Microsoft.Cache/locations/West Europe/operationsStatus/9ed3e99b-c129-48a7-96ed-xxxxxxxxxxxxxxxx\",\n\u2502  \"name\": \"9ed3e99b-c129-48a7-96ed-xxxxxxxxxxxxxxxx\",\n\u2502  \"status\": \"Failed\",\n\u2502  \"startTime\": \"2025-10-28T08:16:45.2753207+00:00\",\n\u2502  \"endTime\": \"2025-10-28T08:18:53.6053314+00:00\"\n\u2502}\n\u2502\n\u2502 -----[end]-----\n\u2502\n\u2502\n\u2502   with azurerm_managed_redis.test,\n\u2502   on managed_redis.tf line 31, in resource \"azurerm_managed_redis\" \"test\":\n\u2502   31: resource \"azurerm_managed_redis\" \"test\" {\n\u2502\n\u2502 creating Redis Enterprise (Subscription: \"********-****-****-****-************\"\n\u2502 Resource Group Name: \"rg-app-***-test-001-***-02\"\n\u2502 Redis Enterprise Name: \"amr-***-test-westeurope-001-***-02\"): polling after Create: polling failed: the Azure API returned the following error:\n\u2502\n\u2502 Status: \"Unknown\"\n\u2502 Code: \"internal-error\"\n\u2502 Message: \"Couldn't parse Azure API Response into a friendly error - please see the original HTTP Response for more details (and file a bug so we can fix this!).\"\n\u2502 Activity Id: \"\"\n\u2502\n\u2502 ---\n\u2502\n\u2502 API Response:\n\u2502\n\u2502 ----[start]----\n\u2502{\n\u2502  \"id\": \"/subscriptions/********-****-****-****-************/providers/Microsoft.Cache/locations/West Europe/operationsStatus/9ed3e99b-c129-48a7-96ed-xxxxxxxxxxxxxxxx\",\n\u2502  \"name\": \"9ed3e99b-c129-48a7-96ed-xxxxxxxxxxxxxxxx\",\n\u2502  \"status\": \"Failed\",\n\u2502  \"startTime\": \"2025-10-28T08:16:45.2753207+00:00\",\n\u2502  \"endTime\": \"2025-10-28T08:18:53.6053314+00:00\"\n\u2502}\n\u2502 -----[end]-----\n\u2502\n```\n\nRunning the corresponding `az resource show` command shows :\n\n```bash\n\u276f az resource show --ids \"/subscriptions/********-****-****-****-************/providers/Microsoft.Cache/locations/West Europe/operationsStatus/9ed3e99b-c129-48a7-96ed-xxxxxxxxxxxxxxxx\"\n\n(None) The API version '2024-11-01' is not supported for selected resource type. Please use one of the supported API versions: 2020-04-01-preview, 2020-10-01-preview, 2021-02-01-preview, 2021-03-01, 2021-05-01, 2021-08-01, 2022-01-01, 2022-08-01-preview, 2022-11-01-previ\new, 2023-03-01-preview, 2023-07-01, 2099-06-01-preview, 2023-10-01-preview, 2023-11-01, 2024-02-01, 2024-03-01-preview, 2024-05-01-preview, 2024-06-01-preview, 2024-09-01-preview, 2024-10-01, 2025-05-01-preview, 2025-04-01, 2025-07-01, 2025-08-01-preview.\nCode: None\nMessage: The API version '2024-11-01' is not supported for selected resource type. Please use one of the supported API versions: 2020-04-01-preview, 2020-10-01-preview, 2021-02-01-preview, 2021-03-01, 2021-05-01, 2021-08-01, 2022-01-01, 2022-08-01-preview, 2022-11-01-pre\nview, 2023-03-01-preview, 2023-07-01, 2099-06-01-preview, 2023-10-01-preview, 2023-11-01, 2024-02-01, 2024-03-01-preview, 2024-05-01-preview, 2024-06-01-preview, 2024-09-01-preview, 2024-10-01, 2025-05-01-preview, 2025-04-01, 2025-07-01, 2025-08-01-preview.\n```\n\n### Steps to Reproduce\n\n1. Deploy the above configuration via terraform apply.\n2. The output : \n\n```bash\n  # azurerm_managed_redis.test will be created\n  + resource \"azurerm_managed_redis\" \"test\" {\n      + high_availability_enabled = true\n      + hostname                  = (known after apply)\n      + id                        = (known after apply)\n      + location                  = \"westeurope\"\n      + name                      = \"amr-***-test-westeurope-001-***-01\"\n      + resource_group_name       = \"rg-app-***-test-001-***-01\"\n      + sku_name                  = \"Balanced_B0\"\n\n      + default_database {\n          + access_keys_authentication_enabled = true\n          + client_protocol                    = \"Plaintext\"\n          + clustering_policy                  = \"EnterpriseCluster\"\n          + eviction_policy                    = \"NoEviction\"\n          + port                               = (known after apply)\n          + primary_access_key                 = (sensitive value)\n          + secondary_access_key               = (sensitive value)\n\n          + module {\n              + name    = \"RedisJSON\"\n              + version = (known after apply)\n                # (1 unchanged attribute hidden)\n            }\n          + module {\n              + name    = \"RediSearch\"\n              + version = (known after apply)\n                # (1 unchanged attribute hidden)\n            }\n          + module {\n              + args    = \"ERROR_RATE 0.20 INITIAL_SIZE 400\"\n              + name    = \"RedisBloom\"\n              + version = (known after apply)\n            }\n        }\n    }\n```\n\n### Important Factoids\n\nRunning in a Azure \"West Europe\"\n\n### References\n\n_No response_",
      "solution": "@yilas the unsupported API version error is unrelated to the problem. The '/operationsStatus/' endpoint is only used to poll the LRO (long-running operation) status and are not meant to be queried using `az resource show`.\n\nIf you want to query this endpoint manually, you can use `az rest -m GET -u <operation status URL>` instead.\n\nAs with the original error `Couldn't parse Azure API Response into a friendly error` I am unable to reproduce this. I was able to create a managed redis fine in West Europe.\n\nThis is most likely a backend error we need to investigate. I recommend you to [raise a support request](https://learn.microsoft.com/azure/azure-portal/supportability/how-to-create-azure-support-request), noting down the `x-ms-correlation-request-id:` response header for the internal server error and we can look it through our internal logs.\n\n---\n\nHello @gerrytan,\nThank you for your reply. It seems that the PR https://github.com/hashicorp/terraform-provider-azurerm/pull/30978 has resolved the issue. I still need to run a few tests, but it looks good so far.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/redis",
        "v/4.x"
      ],
      "created_at": "2025-10-28T08:55:23Z",
      "closed_at": "2025-11-11T13:34:55Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30965",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31094,
      "title": "Fix data factory repository updating/resetting",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.13.5\n\n### AzureRM Provider Version\n\n4.52.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_data_factory\n\n### Terraform Configuration Files\n\n```hcl\nTo reproduce, a data factory will need to be created under Terraform. DO NOT SPECIFY ANY REPOPSITORY INFORMATION. The data factory will then need to be manually linked to a repository (in my case, I targeted Azure DevOps).\n\nOnce that is complete, re-run terraform plan/apply. The plan will NOT include the removal of repository configuration, however, the configuration is removed on the data factory (ie, you need to manually re-link to the repository on the data factory).\n```\n\n### Debug Output/Panic Output\n\n```shell\nThere is no plan to remove any repository configuration. In fact, there should be no changes at all.\n```\n\n### Expected Behaviour\n\nThe repository configuration is noted to be changed in the plan.\n\n### Actual Behaviour\n\nThe change is not noted in the plan but the change is made.\n\n### Steps to Reproduce\n\nTo reproduce, a data factory will need to be created under Terraform. DO NOT SPECIFY ANY REPOPSITORY INFORMATION. The data factory will then need to be manually linked to a repository (in my case, I targeted Azure DevOps).\n\nOnce that is complete, re-run terraform plan/apply. The plan will NOT include the removal of repository configuration, however, the configuration is removed on the data factory (ie, you need to manually re-link to the repository on the data factory).\n\n### Important Factoids\n\nIn my configuration, vsts_configuration is actually set to be ignored in the life cycle but is not being ignored. This did work at one point.\n\n### References\n\n_No response_",
      "solution": "This occurred because we were using outdated Terraform tooling. Upgrading the tools fixed this issue. Closing.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/data-factory",
        "v/4.x"
      ],
      "created_at": "2025-11-13T16:26:54Z",
      "closed_at": "2025-11-13T17:12:06Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31094",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31097,
      "title": "Support for adding Terraform module to upgrade Spark 3.5 in Synapse",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Description\n\nHave several customers running on Synapse and would like to migrate to Spark 3.5 and they are using Terraform for all upgrades and deployments in Azure. \n\n### New or Affected Resource(s)/Data Source(s)\n\nazurerm_synapse_spark_pool\n\n### Potential Terraform Configuration\n\n```hcl\nresource \"azurerm_resource_group\" \"example\" {\n  name     = \"example-resources\"\n  location = \"West Europe\"\n}\n\nresource \"azurerm_storage_account\" \"example\" {\n  name                     = \"examplestorageacc\"\n  resource_group_name      = azurerm_resource_group.example.name\n  location                 = azurerm_resource_group.example.location\n  account_tier             = \"Standard\"\n  account_replication_type = \"LRS\"\n  account_kind             = \"StorageV2\"\n  is_hns_enabled           = \"true\"\n}\n\nresource \"azurerm_storage_data_lake_gen2_filesystem\" \"example\" {\n  name               = \"example\"\n  storage_account_id = azurerm_storage_account.example.id\n}\n\nresource \"azurerm_synapse_workspace\" \"example\" {\n  name                                 = \"example\"\n  resource_group_name                  = azurerm_resource_group.example.name\n  location                             = azurerm_resource_group.example.location\n  storage_data_lake_gen2_filesystem_id = azurerm_storage_data_lake_gen2_filesystem.example.id\n  sql_administrator_login              = \"sqladminuser\"\n  sql_administrator_login_password     = \"H@Sh1CoR3!\"\n\n  identity {\n    type = \"SystemAssigned\"\n  }\n}\n\nresource \"azurerm_synapse_spark_pool\" \"example\" {\n  name                 = \"example\"\n  synapse_workspace_id = azurerm_synapse_workspace.example.id\n  node_size_family     = \"MemoryOptimized\"\n  node_size            = \"Small\"\n  cache_size           = 100\n\n  auto_scale {\n    max_node_count = 50\n    min_node_count = 3\n  }\n\n  auto_pause {\n    delay_in_minutes = 15\n  }\n\n  library_requirement {\n    content  = <<EOF\nappnope==0.1.0\nbeautifulsoup4==4.6.3\nEOF\n    filename = \"requirements.txt\"\n  }\n\n  spark_config {\n    content  = <<EOF\nspark.shuffle.spill                true\nEOF\n    filename = \"config.txt\"\n  }\n\n  spark_version = <Change version to force an upgrade>\n\n  tags = {\n    ENV = \"Production\"\n  }\n}\n```\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/storage",
        "service/synapse",
        "service/resource"
      ],
      "created_at": "2025-11-13T19:32:38Z",
      "closed_at": "2025-11-14T00:25:45Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31097",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31263,
      "title": "azurerm_web_application_firewall_policy destruction marked as complete before its actually deleted",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.13.5\n\n### AzureRM Provider Version\n\n4.54.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_web_application_firewall_policy\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_web_application_firewall_policy\" \"this\" {\n  name                = \"waf_policy\"\n  resource_group_name = var.resource_group_name\n  location            = var.location\n\n  custom_rules {\n    name      = \"AllowAppcheckNG\"\n    priority  = 2\n    rule_type = \"MatchRule\"\n\n    match_conditions {\n      match_variables {\n        variable_name = \"RemoteAddr\"\n      }\n\n      operator           = \"IPMatch\"\n      negation_condition = false\n      match_values       = [\n        \"REDACTED\"\n      ]\n    }\n    action = \"Allow\"\n  }\n\n  custom_rules {\n    name      = \"AllowTenableWAS\"\n    priority  = 3\n    rule_type = \"MatchRule\"\n\n    match_conditions {\n      match_variables {\n        variable_name = \"RemoteAddr\"\n      }\n\n      operator           = \"IPMatch\"\n      negation_condition = false\n      match_values       = [\n        \"REDACTED\"\n      ]\n    }\n    action = \"Allow\"\n  }\n\n  policy_settings {\n    enabled            = true\n    mode               = \"Prevention\"\n    request_body_check = false\n  }\n\n  managed_rules {\n    managed_rule_set {\n      type    = \"OWASP\"\n      version = \"3.2\"\n\n      dynamic \"rule_group_override\" {\n        for_each = var.rule_group_override == null ? [] : var.rule_group_override\n        content {\n          rule_group_name = rule_group_override.value.rule_group_name\n\n          dynamic \"rule\" {\n            for_each = rule_group_override.value.rule == null ? [] : rule_group_override.value.rule\n            content {\n              id      = rule.value.id\n              enabled = rule.value.enabled\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nmodule.agic.azurerm_web_application_firewall_policy.this: Destroying... [id=/subscriptions/<subscription_id>/resourceGroups/npdomain-uksouth-domainsharednonprod-rg/providers/Microsoft.Network/applicationGatewayWebApplicationFirewallPolicies/waf_policy]\nmodule.agic.azurerm_public_ip.gateway: Destroying... [id=/subscriptions/<subscription_id>/resourceGroups/npdomain-uksouth-domainsharednonprod-rg/providers/Microsoft.Network/publicIPAddresses/npdomain-uksouth-domainsharednonprod-agw-ip]\nmodule.private_ip.azurerm_ssh_public_key.private_ip: Destruction complete after 0s\nmodule.agic.azurerm_web_application_firewall_policy.this: Still destroying... [id=/subscriptions/<subscription_id>...ApplicationFirewallPolicies/waf_policy, 00m10s elapsed]\nmodule.agic.azurerm_public_ip.gateway: Still destroying... [id=/subscriptions/<subscription_id>...ain-uksouth-domainsharednonprod-agw-ip, 00m10s elapsed]\nmodule.agic.azurerm_public_ip.gateway: Destruction complete after 10s\nmodule.agic.azurerm_web_application_firewall_policy.this: Destruction complete after 10s\nazurerm_role_assignment.gateway_secret: Destroying... [id=/subscriptions/<subscription_id>/resourceGroups/npdomain-uksouth-domainpermnonp-rg/providers/Microsoft.KeyVault/vaults/calastone-domainpermnonp/providers/Microsoft.Authorization/roleAssignments/<resource_id>]\nazurerm_role_assignment.gateway_secret: Destruction complete after 2s\nazurerm_user_assigned_identity.gateway: Destroying... [id=/subscriptions/<subscription_id>/resourceGroups/npdomain-uksouth-domainsharednonprod-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/npdomain-uksouth-domainsharednonprod-agw-id]\nazurerm_user_assigned_identity.gateway: Destruction complete after 3s\nazurerm_resource_group.this: Destroying... [id=/subscriptions/<subscription_id>/resourceGroups/npdomain-uksouth-domainsharednonprod-rg]\nazurerm_resource_group.this: Still destroying... [id=/subscriptions/<subscription_id>...pdomain-uksouth-domainsharednonprod-rg, 00m10s elapsed]\n\u2577\n\u2502 Error: deleting Resource Group \"npdomain-uksouth-domainsharednonprod-rg\": the Resource Group still contains Resources.\n\u2502 \n\u2502 Terraform is configured to check for Resources within the Resource Group when deleting the Resource Group - and\n\u2502 raise an error if nested Resources still exist to avoid unintentionally deleting these Resources.\n\u2502 \n\u2502 Terraform has detected that the following Resources still exist within the Resource Group:\n\u2502 \n\u2502 * `/subscriptions/<subscription_id>/resourceGroups/npdomain-uksouth-domainsharednonprod-rg/providers/Microsoft.Network/applicationGatewayWebApplicationFirewallPolicies/waf_policy`\n\u2502 \n\u2502 This feature is intended to avoid the unintentional destruction of nested Resources provisioned through some\n\u2502 other means (for example, an ARM Template Deployment) - as such you must either remove these Resources, or\n\u2502 disable this behaviour using the feature flag `prevent_deletion_if_contains_resources` within the `features`\n\u2502 block when configuring the Provider, for example:\n\u2502 \n\u2502 provider \"azurerm\" {\n\u2502   features {\n\u2502     resource_group {\n\u2502       prevent_deletion_if_contains_resources = false\n\u2502     }\n\u2502   }\n\u2502 }\n\u2502 \n\u2502 When that feature flag is set, Terraform will skip checking for any Resources within the Resource Group and\n\u2502 delete this using the Azure API directly (which will clear up any nested resources).\n```\n\n### Expected Behaviour\n\nTerraform should not have received \"Destruction complete\" response and start deleting the resource group before the resource is actually removed.\n\n### Actual Behaviour\n\nTerraform destroy failed to remove the resource group because the WAF policy still exist. You will be able to see the resource on Azure Portal for a short period of time after Terraform destroy failed, resource will be gone shortly after and subsequence terraform destroy run will be successful\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "This is due to eventual consistency on Azure's side when deleting resources and the endpoint the provider queries to determine whether there are still resources left in the resource group. Resolved by #31253 \n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/authorization",
        "service/network",
        "v/4.x",
        "service/resource"
      ],
      "created_at": "2025-12-03T12:24:59Z",
      "closed_at": "2025-12-03T15:21:28Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31263",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31250,
      "title": "Support for ConfigurationApi endpoint in api_management_custom_domain",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n### Description\n\n\napi_management_custom_domain and the hostname_configurations block in azurerm_api_management currently support the following endpoints:\n\n- developer_portal\n- management\n- portal\n- gateway\n- scm\n\nHowever, for an API Management instance with a self-hosted gateway, we also need to configure the ConfigurationApi endpoint. This forces us to use azapi instead of azurerm to configure the custom domains for our API management instance.\n\nPlease add support for the ConfigurationApi endpoint in azurerm.\n\n### New or Affected Resource(s)/Data Source(s)\n\napi_management_custom_domain, azurerm_api_management\n\n### Potential Terraform Configuration\n\n```hcl\nresource \"azurerm_api_management_custom_domain\" \"example\" {\n  api_management_id = azurerm_api_management.example.id\n\n  gateway {\n    host_name                = \"api.example.com\"\n    key_vault_certificate_id = azurerm_key_vault_certificate.example.versionless_secret_id\n  }\n\n  developer_portal {\n    host_name                = \"portal.example.com\"\n    key_vault_certificate_id = azurerm_key_vault_certificate.example.versionless_secret_id\n  }\n\n  configuration_api { # this block is new\n    host_name                = \"configapi.example.com\"\n    key_vault_certificate_id = azurerm_key_vault_certificate.example.versionless_secret_id\n  }\n}\n```\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "duplicate",
        "enhancement",
        "service/key-vault",
        "service/api-management"
      ],
      "created_at": "2025-12-02T07:28:30Z",
      "closed_at": "2025-12-02T07:31:28Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31250",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31221,
      "title": "Support for Flexible Server PostgreSQL Confidential SKU Names",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Description\n\nPlease add new SKU's to Regex-Test:\n[Here](https://github.com/hashicorp/terraform-provider-azurerm/blob/665308f99bf58163e2f5f008e2833fe2644478be/internal/services/postgres/validate/flexible_server_sku_name.go#L18)\n\nExample:\nGP_Standard_DC4ads_v5\n\nPossible SKU's from Region West Europe (Get it with _az postgres flexible-server list-skus -l westeurope -o table_)\n\nStandard_DC2eds_v5    GeneralPurpose   2        8 GiB     3750\nStandard_DC4eds_v5    GeneralPurpose   4        16 GiB    6400\nStandard_DC8eds_v5    GeneralPurpose   8        32 GiB    12800\nStandard_DC16eds_v5   GeneralPurpose   16       64 GiB    25600\nStandard_DC32eds_v5   GeneralPurpose   32       128 GiB   51200\nStandard_DC48eds_v5   GeneralPurpose   48       192 GiB   76800\nStandard_DC64eds_v5   GeneralPurpose   64       256 GiB   80000\nStandard_DC96eds_v5   GeneralPurpose   96       384 GiB   80000\nStandard_DC2ads_v5    GeneralPurpose   2        8 GiB     3750\nStandard_DC4ads_v5    GeneralPurpose   4        16 GiB    6400\nStandard_DC8ads_v5    GeneralPurpose   8        32 GiB    12800\nStandard_DC16ads_v5   GeneralPurpose   16       64 GiB    25600\nStandard_DC32ads_v5   GeneralPurpose   32       128 GiB   51200\nStandard_DC48ads_v5   GeneralPurpose   48       192 GiB   76800\nStandard_DC64ads_v5   GeneralPurpose   64       256 GiB   80000\nStandard_DC96ads_v5   GeneralPurpose   96       384 GiB   80000\nStandard_EC2eds_v5    MemoryOptimized  2        16 GiB    3750\nStandard_EC4eds_v5    MemoryOptimized  4        32 GiB    6400\nStandard_EC8eds_v5    MemoryOptimized  8        64 GiB    12800\nStandard_EC16eds_v5   MemoryOptimized  16       128 GiB   25600\nStandard_EC32eds_v5   MemoryOptimized  32       256 GiB   51200\nStandard_EC48eds_v5   MemoryOptimized  48       384 GiB   51200\nStandard_EC64eds_v5   MemoryOptimized  64       512 GiB   80000\nStandard_EC128eds_v5  MemoryOptimized  128      1024 GiB  80000\nStandard_EC2ads_v5    MemoryOptimized  2        16 GiB    3750\nStandard_EC4ads_v5    MemoryOptimized  4        32 GiB    6400\nStandard_EC8ads_v5    MemoryOptimized  8        64 GiB    12800\nStandard_EC16ads_v5   MemoryOptimized  16       128 GiB   25600\nStandard_EC20ads_v5   MemoryOptimized  20       160 GiB   32000\nStandard_EC32ads_v5   MemoryOptimized  32       256 GiB   51200\nStandard_EC48ads_v5   MemoryOptimized  48       384 GiB   76800\nStandard_EC64ads_v5   MemoryOptimized  64       512 GiB   80000\nStandard_EC96ads_v5   MemoryOptimized  96       768 GiB   80000\nStandard_EC96as_v5    MemoryOptimized  96       672 GiB   80000\n\n\n### New or Affected Resource(s)/Data Source(s)\n\nazurerm_postgresql_flexible_server\n\n### Potential Terraform Configuration\n\n```hcl\nresource \"azurerm_postgresql_flexible_server\" \"psql_postgresql_we\" {\n  name                   = \"xxx\"\n  resource_group_name    = xxx\n  location               = xxx\n  version                = \"17\"\n  administrator_login    = xxx\n  administrator_password = xxx\n  private_dns_zone_id    = xxx\n  delegated_subnet_id    = xxx\n  # zone                   = \"1\"\n  storage_mb             = 32768\n  storage_tier           = \"P6\"\n  auto_grow_enabled      = true\n  sku_name               = \"GP_Standard_DC4ads_v5\"\n}\n```\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/postgresql"
      ],
      "created_at": "2025-11-28T13:54:02Z",
      "closed_at": "2025-11-28T14:01:28Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31221",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31211,
      "title": "azurerm_network_watcher_flow_log",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.11.1\n\n### AzureRM Provider Version\n\n4.54.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_network_watcher_flow_log\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_network_watcher_flow_log\" \"vnet\" {\n\n  network_watcher_name = \"NetworkWatcher_${var.location}\"\n  resource_group_name  = \"NetworkWatcherRG\"\n  name                 = \"vnet-flow-logs\"\n\n  target_resource_id = azurerm_virtual_network.vnet.id\n  storage_account_id = azurerm_storage_account.container.id\n  enabled            = true\n\n  retention_policy {\n    enabled = true\n    days    = 0 # If you want to retain data forever and do not want to apply any retention policy, set retention (days) to 0.\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\n# azurerm_network_watcher_flow_log.vnet will be updated in-place\n  ~ resource \"azurerm_network_watcher_flow_log\" \"vnet\" {\n        id                        = \"/subscriptions/<SubscriptionID>/resourceGroups/NetworkWatcherRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_westeurope/flowLogs/vnet-flow-logs\"\n        name                      = \"vnet-flow-logs\"\n        # (8 unchanged attributes hidden)\n\n      ~ retention_policy {\n          ~ enabled = false -> true\n            # (1 unchanged attribute hidden)\n        }\n    }\n```\n\n### Expected Behaviour\n\nNo change.\n\n### Actual Behaviour\n\nWhen the number of days is set to 0 in the \"retention_policy\" block, Terraform \"disables\" the resources even it has no parameters to enable or disable the retention policy on Azure portal.\nSo when you run a new Terraform Plan, there is a change because in the state, the retention policy is \"disabled\" and the code wants to enable the retention.\n\n### Steps to Reproduce\n\n1. Terraform Plan\n2. Terraform Apply\n3. Terraform Plan\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/storage",
        "service/network",
        "v/4.x"
      ],
      "created_at": "2025-11-27T10:08:12Z",
      "closed_at": "2025-12-01T09:00:26Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31211",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31172,
      "title": "Azure application gateway fails deploy if PFX certificate encoded in base64 size is over 16K",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\nCreation of ssl certificate within Azure application gateway fails all the time. It is producing error message that the base64 string of PFX certificate data is too big. Its size cannot exceed 16K. However, my certificate base64 content is only 8K.\n\nIt is also a strange that why is there any certificate size limitation as per if the certificate contains CA certificates, then the size can exceed 16K easily.\n\nIf I already have a running application gateway, I can upload manually the same certificate. So the problem is not with certificate itself.\n\n```\n**During Azure application gateway ssl certificate installation fails continously with error: \nApplication Gateway Name: \"<name>\"): performing CreateOrUpdate: unexpected status 400 (400 Bad Request) with error: ApplicationGatewaySslCertificateDataTooBig: Data too big for certificate /subscriptions/<subscription_id>/resourceGroups/<rg_name>/providers/Microsoft.Network/applicationGateways/<name>/sslCertificates/<cert_name>. Max data length supported is 16384.**\n```\n\n\n\n### Terraform Version\n\n1.14.0\n\n### AzureRM Provider Version\n\n4.54.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_application_gateway\n\n### Terraform Configuration Files\n\n```hcl\nReading content from key vault (storing PFX certificate as b64 string in secrets, and password of cert as well):\n**terraform**\ndata \"azurerm_key_vault_secret\" \"cert-pw\" {\n    key_vault_id = var.key-vault-id\n    name = \"appgw-cert-password\"\n}\n\ndata \"azurerm_key_vault_secret\" \"cert-b64\" {\n    key_vault_id = var.key-vault-id\n    name = \"appgw-cert-secured\"\n}\n\nmodule \"appgw-public-ip\" {\n    source = \"../../../modules/Azure/azure-public-ip\"\n    location = var.location\n    resourcegroup-name = var.resourcegroup-name\n    sku = \"Standard\"\n    name = \"${local.appgw-name}-pip\"\n}\n\nmodule \"user-assigned-identity\" {\n  source = \"../../../modules/Azure/azure-user-assigned-identity\"\n  location = var.location\n  resource-group = var.resourcegroup-name\n  name = \"uid-${local.appgw-name}\"\n}\n\nmodule \"uid-kv-permission\" {\n    depends_on = [ module.user-assigned-identity ]\n    source = \"../../../modules/Azure/azure-role-assignment\"\n    principal-id = module.user-assigned-identity.principal-id\n    role-name = \"Key Vault Certificate User\"\n    scope = var.key-vault-id\n}\n\nmodule \"uid-kv-permission-secret\" {\n    depends_on = [ module.user-assigned-identity ]\n    source = \"../../../modules/Azure/azure-role-assignment\"\n    principal-id = module.user-assigned-identity.principal-id\n    role-name = \"Key Vault Secrets User\"\n    scope = var.key-vault-id\n}\n\nresource \"azurerm_application_gateway\" \"appgw\" {\n    name = local.appgw-name\n    location = var.location\n    identity {\n        type = \"UserAssigned\"\n      identity_ids = [ module.user-assigned-identity.object-id ]\n    }\n    resource_group_name = var.resourcegroup-name\n  sku {\n    capacity = 1\n    name = \"Standard_v2\"\n    tier = \"Standard_v2\"\n  }\n  http_listener {\n    host_name = \"<mydomain>\"\n    name = \"https-listener\"\n    protocol = \"Https\"\n    require_sni = true\n    ssl_certificate_name = \"https-certificate\"\n    frontend_port_name = \"https\"\n    frontend_ip_configuration_name = \"public\"\n  }\n\n  ssl_certificate {\n    data = data.azurerm_key_vault_secret.cert-b64.value\n    password = data.azurerm_key_vault_secret.cert-pw.value\n    name = \"https-certificate\"\n  }\n\n  backend_address_pool {\n    name = \"pool-${var.backend-app.name}\"\n    fqdns = [ var.backend-app.url ]\n  }\n\n  backend_address_pool {\n    name = \"pool-${var.frontend-app.name}\"\n    fqdns = [ var.frontend-app.url ]\n  }\n\n  backend_http_settings {\n     name = \"https-${var.frontend-app.name}\"\n     pick_host_name_from_backend_address = true\n    protocol = \"Https\"\n    port = 443\n    path = \"/\"\n    cookie_based_affinity = \"Disabled\"\n  }\n\n  backend_http_settings {\n     name = \"https-${var.backend-app.name}-api\"\n     pick_host_name_from_backend_address = true\n    protocol = \"Https\"\n    port = 443\n    path = \"/api\"\n    cookie_based_affinity = \"Disabled\"\n  }\n\n    backend_http_settings {\n     name = \"https-${var.backend-app.name}-socketio\"\n     pick_host_name_from_backend_address = true\n    protocol = \"Https\"\n    port = 443\n    path = \"/socket.io\"\n    cookie_based_affinity = \"Disabled\"\n  }\n  frontend_port {\n    name = \"https\"\n    port = 443\n  }\n\n  gateway_ip_configuration {\n    name = \"default\"\n    subnet_id = var.subnet-id\n  }\n\n  request_routing_rule {\n    name = \"https-rule\"\n    rule_type = \"PathBasedRouting\"\n    http_listener_name = \"https-listener\"\n    priority = 100\n    url_path_map_name = \"default-map\"\n  }\n\n  url_path_map {\n    name = \"default-map\"\n    default_backend_address_pool_name = \"pool-${var.frontend-app.name}\"\n    default_backend_http_settings_name = \"https-${var.frontend-app.name}\"\n    path_rule {\n      backend_address_pool_name = \"pool-${var.backend-app.name}\"\n      backend_http_settings_name = \"https-${var.backend-app.name}-api\"\n      name = \"api-backend-rule\"\n      paths = [\"/api/*\"]\n    }\n\n    path_rule {\n      backend_address_pool_name = \"pool-${var.backend-app.name}\"\n      backend_http_settings_name = \"https-${var.backend-app.name}-socketio\"\n      name = \"socketio-backend-rule\"\n      paths = [\"/socketio/*\"]\n    }\n\n  }\n\n  frontend_ip_configuration {\n    name = \"public\"\n    public_ip_address_id = module.appgw-public-ip.public-ip-id\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nApplication Gateway Name: \"<name>\"): performing CreateOrUpdate: unexpected status 400 (400 Bad Request) with error: ApplicationGatewaySslCertificateDataTooBig: Data too big for certificate /subscriptions/<subscription_id>/resourceGroups/<rg_name>/providers/Microsoft.Network/applicationGateways/<name>/sslCertificates/<cert_name>. Max data length supported is 16384\n```\n\n### Expected Behaviour\n\nThe provider module should let use any size of PFX certificate with base64 format, and should check its size properly.\n\n### Actual Behaviour\n\nApplication Gateway Name: \"<name>\"): performing CreateOrUpdate: unexpected status 400 (400 Bad Request) with error: ApplicationGatewaySslCertificateDataTooBig: Data too big for certificate /subscriptions/<subscription_id>/resourceGroups/<rg_name>/providers/Microsoft.Network/applicationGateways/<name>/sslCertificates/<cert_name>. Max data length supported is 16384\n\n### Steps to Reproduce\n\n1. put a pfx certificate and its password into key vault as a secret (in base64 encoded)\n2. during deployment read these values as data\n3. giving these values to the resource module or to resource \n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question",
        "service/key-vault",
        "service/network",
        "v/4.x"
      ],
      "created_at": "2025-11-22T11:11:42Z",
      "closed_at": "2025-11-23T12:33:31Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31172",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31115,
      "title": "Unable to attach a second data disk to an Azure VM in East Asia",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\nv1.9.8\n\n### AzureRM Provider Version\n\nv4.51.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_windows_virtual_machine, azurerm_managed_disk, azurerm_virtual_machine_data_disk_attachment\n\n### Terraform Configuration Files\n\n```hcl\nWe have the same issue in East Asia like described here:\nhttps://github.com/hashicorp/terraform-provider-azurerm/issues/29423\n\nIt is not possible to attach more than one data disk to a virtual machine in East Asia via IaC.\nWe opened a support case by Microsoft and they told us that we need to open an issue here and provide them the issue number.\n```\n\n### Debug Output/Panic Output\n\n```shell\nResource Group Name: \"**********\"\nVirtual Machine Name: \"**********\") with Disk \"*********-sap01\": performing CreateOrUpdate: unexpected status 400 (400 Bad Request) with error: InvalidParameter: Property 'dataDisk.diskIOPSReadWrite' can be enabled only on VMs in a Virtual Machine Scale Set. \n##[error]updating Virtual Machine (Subscription: \"*************\"\nResource Group Name: \"***********\"\nVirtual Machine Name: \"***********\") with Disk \"********-shared01\": performing CreateOrUpdate: unexpected status 400 (400 Bad Request) with error: InvalidParameter: Property 'dataDisk.diskIOPSReadWrite' can be enabled only on VMs in a Virtual Machine Scale Set.\n```\n\n### Expected Behaviour\n\nSuccessfully attach all created disks.\n\n### Actual Behaviour\n\nOne data disk will be attached successfully, all others will fail.\n\nerror: InvalidParameter: Property 'dataDisk.diskIOPSReadWrite' can be enabled only on VMs in a Virtual Machine Scale Set.\n\n### Steps to Reproduce\n\nThe same steps like described here:\nhttps://github.com/hashicorp/terraform-provider-azurerm/issues/29423\n\n### Important Factoids\n\nRunning in East Asia\n\n### References\n\n_No response_",
      "solution": "Hi @RHOKRONES , it seems this was an Azure API issue, but from my testing, the problem looks resolved. Could you please try again and let me know if the issue persists?\n\nYou can see my testing configuration below:\n\n<details>\n\n```hcl\nprovider \"azurerm\" {\n  features {}\n}\n\nvariable \"prefix\" {\n  default = \"example\"\n}\n\nlocals {\n  vm_name = \"${var.prefix}-vm\"\n}\n\nresource \"azurerm_resource_group\" \"example\" {\n  name     = \"${var.prefix}-resources\"\n  location = \"east asia\"\n}\n\nresource \"azurerm_virtual_network\" \"main\" {\n  name                = \"${var.prefix}-network\"\n  address_space       = [\"10.0.0.0/16\"]\n  location            = azurerm_resource_group.example.location\n  resource_group_name = azurerm_resource_group.example.name\n}\n\nresource \"azurerm_subnet\" \"internal\" {\n  name                 = \"internal\"\n  resource_group_name  = azurerm_resource_group.example.name\n  virtual_network_name = azurerm_virtual_network.main.name\n  address_prefixes     = [\"10.0.2.0/24\"]\n}\n\nresource \"azurerm_network_interface\" \"main\" {\n  name                = \"${var.prefix}-nic\"\n  location            = azurerm_resource_group.example.location\n  resource_group_name = azurerm_resource_group.example.name\n\n  ip_configuration {\n    name                          = \"internal\"\n    subnet_id                     = azurerm_subnet.internal.id\n    private_ip_address_allocation = \"Dynamic\"\n  }\n}\n\nresource \"azurerm_virtual_machine\" \"example\" {\n  name                  = local.vm_name\n  location              = azurerm_resource_group.example.location\n  resource_group_name   = azurerm_resource_group.example.name\n  network_interface_ids = [azurerm_network_interface.main.id]\n  vm_size               = \"Standard_F2\"\n\n  storage_image_reference {\n    publisher = \"Canonical\"\n    offer     = \"0001-com-ubuntu-server-jammy\"\n    sku       = \"22_04-lts\"\n    version   = \"latest\"\n  }\n\n  storage_os_disk {\n    name              = \"myosdisk1\"\n    caching           = \"ReadWrite\"\n    create_option     = \"FromImage\"\n    managed_disk_type = \"Standard_LRS\"\n  }\n\n  os_profile {\n    computer_name  = local.vm_name\n    admin_username = \"testadmin\"\n    admin_password = \"Password1234!\"\n  }\n\n  os_profile_linux_config {\n    disable_password_authentication = false\n  }\n}\n\nresource \"azurerm_managed_disk\" \"example\" {\n  name                 = \"${local.vm_name}-disk1\"\n  location             = azurerm_resource_group.example.location\n  resource_group_name  = azurerm_resource_group.example.name\n  storage_account_type = \"Standard_LRS\"\n  create_option        = \"Empty\"\n  disk_size_gb         = 10\n}\n\nresource \"azurerm_virtual_machine_data_disk_attachment\" \"example\" {\n  managed_disk_id    = azurerm_managed_disk.example.id\n  virtual_machine_id = azurerm_virtual_machine.example.id\n  lun                = \"10\"\n  caching            = \"ReadWrite\"\n}\n\nresource \"azurerm_virtual_machine_data_disk_attachment\" \"example2\" {\n  managed_disk_id    = azurerm_managed_disk.example2.id\n  virtual_machine_id = azurerm_virtual_machine.example.id\n  lun                = \"11\"\n  caching            = \"ReadWrite\"\n}\n\n</details>\n\nresource \"azurerm_managed_disk\" \"example2\" {\n  name                 = \"${local.vm_name}-disk2\"\n  location             = azurerm_resource_group.example.location\n  resource_group_name  = azurerm_resource_group.example.name\n  storage_account_type = \"Standard_LRS\"\n  create_option        = \"Empty\"\n  disk_size_gb         = 10\n}\n```\n\n---\n\nHi @teowa,\n\nthank you for your response.\n\nThe attachment of both disks is working as expected, but only for `storage_account_type` \"Standard_LRS\". The problem persists for `storage_account_type` \"PremiumV2_LRS\".\n\nFirst disk can be attached, second one fails with `unexpected status 400 (400 Bad Request) with error: InvalidParameter: Property 'dataDisk.diskIOPSReadWrite' can be enabled only on VMs in a Virtual Machine Scale Set.`\n\nUpdated Example for Reproduction:\n```\nprovider \"azurerm\" {\n  features {}\n}\n\nvariable \"prefix\" {\n  default = \"example\"\n}\n\nlocals {\n  vm_name = \"${var.prefix}-vm\"\n}\n\nresource \"azurerm_resource_group\" \"example\" {\n  name     = \"${var.prefix}-resources\"\n  location = \"east asia\"\n}\n\nresource \"azurerm_virtual_network\" \"main\" {\n  name                = \"${var.prefix}-network\"\n  address_space       = [\"10.0.0.0/16\"]\n  location            = azurerm_resource_group.example.location\n  resource_group_name = azurerm_resource_group.example.name\n}\n\nresource \"azurerm_subnet\" \"internal\" {\n  name                 = \"internal\"\n  resource_group_name  = azurerm_resource_group.example.name\n  virtual_network_name = azurerm_virtual_network.main.name\n  address_prefixes     = [\"10.0.2.0/24\"]\n}\n\nresource \"azurerm_network_interface\" \"main\" {\n  name                = \"${var.prefix}-nic\"\n  location            = azurerm_resource_group.example.location\n  resource_group_name = azurerm_resource_group.example.name\n\n  ip_configuration {\n    name                          = \"internal\"\n    subnet_id                     = azurerm_subnet.internal.id\n    private_ip_address_allocation = \"Dynamic\"\n  }\n}\n\nresource \"azurerm_virtual_machine\" \"example\" {\n  name                  = local.vm_name\n  location              = azurerm_resource_group.example.location\n  resource_group_name   = azurerm_resource_group.example.name\n  network_interface_ids = [azurerm_network_interface.main.id]\n  vm_size               = \"Standard_D2s_v3\"\n  zones                 = [\"2\"]\n\n  storage_image_reference {\n    publisher = \"Canonical\"\n    offer     = \"0001-com-ubuntu-server-jammy\"\n    sku       = \"22_04-lts\"\n    version   = \"latest\"\n  }\n\n  storage_os_disk {\n    name              = \"myosdisk1\"\n    caching           = \"ReadWrite\"\n    create_option     = \"FromImage\"\n    managed_disk_type = \"Premium_LRS\"\n  }\n\n  os_profile {\n    computer_name  = local.vm_name\n    admin_username = \"testadmin\"\n    admin_password = \"Password1234!\"\n  }\n\n  os_profile_linux_config {\n    disable_password_authentication = false\n  }\n}\n\nresource \"azurerm_managed_disk\" \"example\" {\n  name                 = \"${local.vm_name}-disk1\"\n  location             = azurerm_resource_group.example.location\n  resource_group_name  = azurerm_resource_group.example.name\n  storage_account_type = \"PremiumV2_LRS\"\n  create_option        = \"Empty\"\n  disk_size_gb         = 10\n  zone                 = \"2\"\n}\n\nresource \"azurerm_virtual_machine_data_disk_attachment\" \"example\" {\n  managed_disk_id    = azurerm_managed_disk.example.id\n  virtual_machine_id = azurerm_virtual_machine.example.id\n  lun                = \"10\"\n  caching            = \"None\"\n}\n\n\nresource \"azurerm_managed_disk\" \"example2\" {\n  name                 = \"${local.vm_name}-disk2\"\n  location             = azurerm_resource_group.example.location\n  resource_group_name  = azurerm_resource_group.example.name\n  storage_account_type = \"PremiumV2_LRS\"\n  create_option        = \"Empty\"\n  disk_size_gb         = 10\n  zone                 = \"2\"\n}\n\nresource \"azurerm_virtual_machine_data_disk_attachment\" \"example2\" {\n  managed_disk_id    = azurerm_managed_disk.example2.id\n  virtual_machine_id = azurerm_virtual_machine.example.id\n  lun                = \"11\"\n  caching            = \"None\"\n}\n```\n\n---\n\nHi @teowa ,\ntoday the deployment worked without any issues even in the productive environment.\nThank you for solving the issue.",
      "labels": [
        "question",
        "service/virtual-machine",
        "v/3.x",
        "v/4.x"
      ],
      "created_at": "2025-11-17T11:33:56Z",
      "closed_at": "2025-11-21T08:44:15Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31115",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 28811,
      "title": "Support for Azure Virtual Network Manager Group with Subnet members",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Description\n\nThe following resources do not support subnet members : \nazurerm_network_manager_network_group\nazurerm_network_manager_static_member\n\nWhereas in the UI it's supported.\n\n### New or Affected Resource(s)/Data Source(s)\n\nazurerm_network_manager_network_group, azurerm_network_manager_static_member\n\n### Potential Terraform Configuration\n\n```hcl\nadd the following argument in azurerm_network_manager_network_group : \ntype = string (can be \"Subnet\" or \"VirtualNetwork\", defaults to \"VirtualNetwork\")\n\nor create a separate resource azurerm_network_manager_subnet_network_group\nsame suggestion for azurerm_network_manager_static_member\n```\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/network"
      ],
      "created_at": "2025-02-19T07:22:02Z",
      "closed_at": "2025-12-05T17:27:56Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/28811",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31044,
      "title": "Support for OpenAI to AIServices upgrade in `azurerm_cognitive_account`",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n### Description\n\n\nAs per the [documentation](https://learn.microsoft.com/en-us/azure/ai-foundry/how-to/upgrade-azure-openai?tabs=bicep), an upgrade option is available to convert an existing Azure OpenAI resource (kind=`OpenAI`) to an Azure AI Foundry resource (kind=`AIServices`). This allows user to keep the existing Azure OpenAI endpoint, state of work, and security configuration, without the need of creating an new Azure AI Foundry resource.\n\nHowever, this option is currently missing in `azurerm_cognitive_account` resource. Trying this upgrade using terraform results in force replacement. \n\n<img width=\"702\" height=\"686\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/3a884aea-c19d-4d2d-9214-a65c23ecb9d8\" />\n\n### Expected Behaviour\n\nThe `OpenAI` to `AIServices` upgrade should be in-place update instead of force replacement as shown below.\n\n<img width=\"1014\" height=\"264\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/7bb46b78-4c12-4338-9925-253a83846c75\" />\n\n### Business Requirements\n\n- [ ] Cognitive account of kind `OpenAI` can be upgraded in-place to kind `AIServices`.\n- [ ] The upgrade can also be rolled-back, i.e., the upgraded `AIServices` account can be changed back to `OpenAI` in-place.\n- [ ] This upgrade option only applies to `OpenAI`. Other kind of cognitive accounts except `OpenAI` can't be upgraded to `AIServices`.\n\n### New or Affected Resource(s)/Data Source(s)\n\nazurerm_cognitive_account\n\n### Potential Terraform Configuration\n\n```hcl\nThe following azapi configuration can be used to test this:\n\n\nterraform {\n  required_providers {\n    azapi = {\n      source  = \"Azure/azapi\"\n      version = \"~>2.5\"\n    }\n    azurerm = {\n      source  = \"hashicorp/azurerm\"\n      version = \"~>3.0\"\n    }\n  }\n}\n\nprovider \"azurerm\" {\n  features {}\n}\n\nprovider \"azapi\" {\n}\n\n# Resource Group\nresource \"azapi_resource\" \"resource_group\" {\n  type      = \"Microsoft.Resources/resourceGroups@2021-04-01\"\n  name      = \"rg-ap-cog-${random_string.suffix.result}\"\n  location  = var.location\n  \n  body = {\n    properties = {}\n  }\n}\n\n# Random string for unique naming\nresource \"random_string\" \"suffix\" {\n  length  = 6\n  special = false\n  upper   = false\n}\n\n# Azure Cognitive Services Account\nresource \"azapi_resource\" \"cognitive_account\" {\n  type      = \"Microsoft.CognitiveServices/accounts@2025-06-01\"\n  name      = \"cognitive-${random_string.suffix.result}\"\n  location  = var.location\n  parent_id = azapi_resource.resource_group.id\n\n  body = {\n    kind = \"AIServices\"\n    properties = {\n      customSubDomainName = \"cognitive-${random_string.suffix.result}\"\n      publicNetworkAccess = \"Enabled\"\n      networkAcls = {\n        defaultAction = \"Allow\"\n      }\n      allowProjectManagement = true\n    }\n    sku = {\n      name = var.sku_name\n    }\n  }\n  identity {\n    type = \"SystemAssigned\"\n  }\n\n  tags = var.tags\n}\n\n# ADA Model Deployment\nresource \"azapi_resource\" \"ada_deployment\" {\n  type      = \"Microsoft.CognitiveServices/accounts/deployments@2025-06-01\"\n  name      = \"text-embedding-ada-002\"\n  parent_id = azapi_resource.cognitive_account.id\n\n  body = {\n    properties = {\n      model = {\n        format  = \"OpenAI\"\n        name    = \"text-embedding-ada-002\"\n        version = \"1\"\n      }\n      raiPolicyName = \"Microsoft.Default\"\n    }\n    sku = {\n      name     = \"Standard\"\n      capacity = 10\n    }\n  }\n}\n\n# Variables\nvariable \"location\" {\n  description = \"Azure region for resources\"\n  type        = string\n  default     = \"East US\"\n}\n\nvariable \"sku_name\" {\n  description = \"SKU name for the OpenAI account\"\n  type        = string\n  default     = \"S0\"\n}\n\nvariable \"tags\" {\n  description = \"Tags to apply to resources\"\n  type        = map(string)\n  default = {\n    Environment = \"Development\"\n    Project     = \"OpenAI-Migration\"\n  }\n}\n```\n\n### References\n\nI will be creating a PR for this change.",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/cognitive-services"
      ],
      "created_at": "2025-11-06T00:29:13Z",
      "closed_at": "2025-12-05T17:51:53Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31044",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 30813,
      "title": "Support for PostgreSQL flexible Server 18",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.10.6\n\n### AzureRM Provider Version\n\n4.47.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_flexible_serber\n\n### Terraform Configuration Files\n\n```hcl\nprovider \"azurerm\" {\n  features {}\n}\n\nresource \"azurerm_resource_group\" \"example\" {\n  name     = \"example-resources\"\n  location = \"West Europe\"\n}\n\nresource \"azurerm_virtual_network\" \"example\" {\n  name                = \"example-vn\"\n  location            = azurerm_resource_group.example.location\n  resource_group_name = azurerm_resource_group.example.name\n  address_space       = [\"10.0.0.0/16\"]\n}\n\nresource \"azurerm_subnet\" \"example\" {\n  name                 = \"example-sn\"\n  resource_group_name  = azurerm_resource_group.example.name\n  virtual_network_name = azurerm_virtual_network.example.name\n  address_prefixes     = [\"10.0.2.0/24\"]\n  service_endpoints    = [\"Microsoft.Storage\"]\n  delegation {\n    name = \"fs\"\n    service_delegation {\n      name = \"Microsoft.DBforMySQL/flexibleServers\"\n      actions = [\n        \"Microsoft.Network/virtualNetworks/subnets/join/action\",\n      ]\n    }\n  }\n}\n\nresource \"azurerm_private_dns_zone\" \"example\" {\n  name                = \"example.mysql.database.azure.com\"\n  resource_group_name = azurerm_resource_group.example.name\n}\n\nresource \"azurerm_private_dns_zone_virtual_network_link\" \"example\" {\n  name                  = \"exampleVnetZone.com\"\n  private_dns_zone_name = azurerm_private_dns_zone.example.name\n  virtual_network_id    = azurerm_virtual_network.example.id\n  resource_group_name   = azurerm_resource_group.example.name\n}\n\nresource \"azurerm_mysql_flexible_server\" \"example\" {\n  name                   = \"example-fs\"\n  resource_group_name    = azurerm_resource_group.example.name\n  location               = azurerm_resource_group.example.location\n  administrator_login    = \"psqladmin\"\n  administrator_password = \"H@Sh1CoR3!\"\n  version                = 18\n  backup_retention_days  = 7\n  delegated_subnet_id    = azurerm_subnet.example.id\n  private_dns_zone_id    = azurerm_private_dns_zone.example.id\n  sku_name               = \"GP_Standard_D2ds_v4\"\n\n  depends_on = [azurerm_private_dns_zone_virtual_network_link.example]\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\n\u2502 Error: expected version to be one of [\"15\" \"14\" \"11\" \"16\" \"13\" \"12\" \"17\"], got 18\n\u2502 \n\u2502   with azurerm_postgresql_flexible_server.postgresServer,\n\u2502   on data.tf line 38, in resource \"azurerm_postgresql_flexible_server\" \"postgresServer\":\n\u2502   38:   version                       = \"18\"\n```\n\n### Expected Behaviour\n\nPostgreSQL 18 is out and [azure supports it](https://learn.microsoft.com/en-us/azure/postgresql/flexible-server/concepts-supported-versions).\n\nI'd therefore also expect terraform to create / update the resource, when choosing version 18.\n\n### Actual Behaviour\n\nFails - doesn't accept version 18.\n\n### Steps to Reproduce\n\nRun the example above\n\n### Important Factoids\n\n_No response_\n\n### References\n\nWhat are the plans to support version 18? I see version 17 got supported a few weeks ago - whereas the release date for PostgreSQL was in September 2024, i.e. about a year ago.",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/dns",
        "service/postgresql",
        "service/mysql",
        "preview",
        "service/network",
        "v/4.x"
      ],
      "created_at": "2025-10-09T13:55:24Z",
      "closed_at": "2025-12-04T15:46:42Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/30813",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31201,
      "title": "When deleting an `azurerm_data_protection_backup_vault` with its resource group, Azure reports the resource group isn't empty",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.13.5\n\n### AzureRM Provider Version\n\n4.54.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_data_protection_backup_vault\n\n### Terraform Configuration Files\n\n```hcl\nterraform {\n  required_providers {\n    azurerm = {\n      source = \"registry.terraform.io/hashicorp/azurerm\"\n    }\n  }\n}\n\nprovider \"azurerm\" {\n  features {}\n}\n\nresource \"azurerm_resource_group\" \"test\" {\n  name     = \"acctest-dataprotection-251122161058142591\"\n  location = \"Canada Central\"\n}\n\nresource \"azurerm_data_protection_backup_vault\" \"test\" {\n  name                = \"acctest-dbv-251122161058142591\"\n  resource_group_name = azurerm_resource_group.test.name\n  location            = azurerm_resource_group.test.location\n  datastore_type      = \"VaultStore\"\n  redundancy          = \"LocallyRedundant\"\n}\n\nresource \"azurerm_data_protection_backup_policy_blob_storage\" \"test\" {\n  name                                   = \"acctest-dbp-251122161058142591\"\n  vault_id                               = azurerm_data_protection_backup_vault.test.id\n  operational_default_retention_duration = \"P30D\"\n  vault_default_retention_duration       = \"P7D\"\n  backup_repeating_time_intervals        = [\"R/2024-05-08T11:30:00+00:00/P1W\"]\n\n  retention_rule {\n    name     = \"Monthly\"\n    priority = 15\n    life_cycle {\n      duration        = \"P6M\"\n      data_store_type = \"VaultStore\"\n    }\n    criteria {\n      days_of_month = [1, 2, 0]\n    }\n  }\n\n  retention_rule {\n    name     = \"Daily\"\n    priority = 25\n    life_cycle {\n      duration        = \"P7D\"\n      data_store_type = \"VaultStore\"\n    }\n    criteria {\n      days_of_week           = [\"Thursday\"]\n      months_of_year         = [\"November\"]\n      weeks_of_month         = [\"First\"]\n      scheduled_backup_times = [\"2024-05-08T02:30:00Z\"]\n    }\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nError: deleting Resource Group \"acctest-dataprotection-251122161058142591\": the Resource Group still contains Resources.\n\nTerraform is configured to check for Resources within the Resource Group when deleting the Resource Group - and\nraise an error if nested Resources still exist to avoid unintentionally deleting these Resources.\n\nTerraform has detected that the following Resources still exist within the Resource Group:\n\n* `/subscriptions/<sub_id>/resourceGroups/acctest-dataprotection-251122161058142591/providers/Microsoft.DataProtection/BackupVaults/acctest-dbv-251122161058142591`\n\nThis feature is intended to avoid the unintentional destruction of nested Resources provisioned through some\nother means (for example, an ARM Template Deployment) - as such you must either remove these Resources, or\ndisable this behaviour using the feature flag `prevent_deletion_if_contains_resources` within the `features`\nblock when configuring the Provider, for example:\n\nprovider \"azurerm\" {\n  features {\n    resource_group {\n      prevent_deletion_if_contains_resources = false\n    }\n  }\n}\n\nWhen that feature flag is set, Terraform will skip checking for any Resources within the Resource Group and\ndelete this using the Azure API directly (which will clear up any nested resources).\n\nMore information on the `features` block can be found in the documentation:\nhttps://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/guides/features-block\n```\n\n### Expected Behaviour\n\nWhen deleting/destroying the configuration, deletion should succeed.\n\n### Actual Behaviour\n\nSee error.\n\nI have been working on some stuff in the provider (see: #31107, #31170, #31109) and something has changed in the past couple of weeks. Acceptance tests that were passing are now failing any time an `azurerm_data_protection_backup_vault` is used with the attached error.\n\nLooking at the logs, we see:\n\n```bash\n2025-11-26T15:35:17.649Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: [DEBUG] AzureRM Request: \n2025-11-26T15:35:17.649Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: DELETE /subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251122161058142591/providers/Microsoft.DataProtection/backupVaults/acctest-dbv-251122161058142591/backupPolicies/acctest-dbp-251122161058142591?api-version=2024-04-01 HTTP/1.1\n2025-11-26T15:35:17.649Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Host: management.azure.com\n2025-11-26T15:35:17.649Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: User-Agent: HashiCorp/go-azure-sdk (Go-http-Client/1.1 backuppolicies/2024-04-01) HashiCorp Terraform/1.13.5 (+https://www.terraform.io) terraform-provider-azurerm/dev pid-222c6c49-1b0a-5959-a213-6608f9eb8820\n2025-11-26T15:35:17.649Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Content-Type: application/json; charset=utf-8\n2025-11-26T15:35:17.649Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Correlation-Request-Id: 5ac9623b-e6b7-c56d-5db5-efd7fa090c7c\n2025-11-26T15:35:17.649Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Accept-Encoding: gzip\n2025-11-26T15:35:17.649Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5\n2025-11-26T15:35:17.649Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5\n2025-11-26T15:35:17.649Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: [DEBUG] DELETE https://management.azure.com/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251122161058142591/providers/Microsoft.DataProtection/backupVaults/acctest-dbv-251122161058142591/backupPolicies/acctest-dbp-251122161058142591?api-version=2024-04-01\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: [DEBUG] AzureRM Response for https://management.azure.com/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251122161058142591/providers/Microsoft.DataProtection/backupVaults/acctest-dbv-251122161058142591/backupPolicies/acctest-dbp-251122161058142591?api-version=2024-04-01: \n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: HTTP/2.0 200 OK\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Cache-Control: no-cache\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Date: Wed, 26 Nov 2025 15:35:17 GMT\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Expires: -1\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Pragma: no-cache\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Strict-Transport-Security: max-age=31536000; includeSubDomains\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Cache: CONFIG_NOCACHE\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Content-Type-Options: nosniff\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Correlation-Request-Id: 5ac9623b-e6b7-c56d-5db5-efd7fa090c7c\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Operation-Identifier: appId=bcdae85a-6fc4-45f7-abf0-1cbdd6bd015a,tenantId=<tenant_guid>,objectId=b788ac66-1dbc-4744-9f03-6f6585727daf/canadacentral/9e5b6d9c-9556-43a0-805f-b2c8a6c839e1\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Ratelimit-Remaining-Subscription-Resource-Requests: 799\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Request-Id: 33a32246-212e-44ed-a0e7-09db768ff931\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Routing-Request-Id: CANADACENTRAL:20251126T153517Z:33a32246-212e-44ed-a0e7-09db768ff931\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Msedge-Ref: Ref A: 7A6D0B569AAA4F20A8BF44E47BF5AF0C Ref B: CO6AA3150217039 Ref C: 2025-11-26T15:35:16Z\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Content-Length: 0\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5\n2025-11-26T15:35:17.363Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5\n2025-11-26T15:35:17.366Z [DEBUG] State storage *statemgr.Filesystem declined to persist a state snapshot\n2025-11-26T15:35:17.367Z [INFO]  Starting apply for azurerm_data_protection_backup_vault.test\n2025-11-26T15:35:17.367Z [DEBUG] azurerm_data_protection_backup_vault.test: applying the planned Delete change\n2025-11-26T15:35:17.368Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: [DEBUG] AzureRM Request: \n2025-11-26T15:35:17.368Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: DELETE /subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251122161058142591/providers/Microsoft.DataProtection/backupVaults/acctest-dbv-251122161058142591?api-version=2024-04-01 HTTP/1.1\n2025-11-26T15:35:17.368Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Host: management.azure.com\n2025-11-26T15:35:17.368Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: User-Agent: HashiCorp/go-azure-sdk (Go-http-Client/1.1 backupvaults/2024-04-01) HashiCorp Terraform/1.13.5 (+https://www.terraform.io) terraform-provider-azurerm/dev pid-222c6c49-1b0a-5959-a213-6608f9eb8820\n2025-11-26T15:35:17.368Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Content-Type: application/json; charset=utf-8\n2025-11-26T15:35:17.368Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Correlation-Request-Id: 5ac9623b-e6b7-c56d-5db5-efd7fa090c7c\n2025-11-26T15:35:17.368Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Accept-Encoding: gzip\n2025-11-26T15:35:17.368Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5\n2025-11-26T15:35:17.368Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5\n***2025-11-26T15:35:17.368Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: [DEBUG] DELETE https://management.azure.com/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251122161058142591/providers/Microsoft.DataProtection/backupVaults/acctest-dbv-251122161058142591?api-version=2024-04-01\n2025-11-26T15:35:18.023Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: [DEBUG] AzureRM Response for https://management.azure.com/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251122161058142591/providers/Microsoft.DataProtection/backupVaults/acctest-dbv-251122161058142591?api-version=2024-04-01: ***\n2025-11-26T15:35:18.023Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: HTTP/2.0 202 Accepted\n2025-11-26T15:35:18.023Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Azure-Asyncoperation: https://management.azure.com/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251122161058142591/providers/Microsoft.DataProtection/locations/canadacentral/operationStatus/N2VlNTJiOWItOGNlMi00NGJiLThlODgtOGFlMmM2MmVlYzQyOzBlYjM5MGI5LTJiZjgtNDNhOS04MDAyLTc2YTIwOWRhMzQyNg==?api-version=2024-04-01&t=638997681179231706&c=MIIHpTCCBo2gAwIBAgITfwY2O9Fi5lSmLyOBKgAEBjY70TANBgkqhkiG9w0BAQsFADBEMRMwEQYKCZImiZPyLGQBGRYDR0JMMRMwEQYKCZImiZPyLGQBGRYDQU1FMRgwFgYDVQQDEw9BTUUgSW5mcmEgQ0EgMDIwHhcNMjUxMDIwMDQxMjEwWhcNMjYwNDE4MDQxMjEwWjBAMT4wPAYDVQQDEzVhc3luY29wZXJhdGlvbnNpZ25pbmdjZXJ0aWZpY2F0ZS5tYW5hZ2VtZW50LmF6dXJlLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMHQm7ZXwmvz3bp_tBu0ZYNZMpMcRUJSHrld-E9b4RqS0ymmswmhM267lbAI2oCZNI82E4DZNNZApPYz9GqZQ2OYxE0G0E_dyvstulti8jSM29pm5HiR_hxNyzt_q0uSnmqQnWuxQMco30qz4XjZaQkJNBATBraJWnioUZtMKhrbXrMOMral9bW_6ba5EqNlc3iBHJ8x7dblRrVcao1gyCk1mEXz9vR8Ut0wZ-KLWuSUcbcS7CPzUuSYQ1eJdym4YYAqEQQM1z40lpqT6OlbqRLu3DC5dN2NbGHUPkHODMhUbKY3RnwHKdrKQbuDk16nRBjl2ZML6kXZGz_BMd-elV0CAwEAAaOCBJIwggSOMCcGCSsGAQQBgjcVCgQaMBgwCgYIKwYBBQUHAwEwCgYIKwYBBQUHAwIwPQYJKwYBBAGCNxUHBDAwLgYmKwYBBAGCNxUIhpDjDYTVtHiE8Ys-hZvdFs6dEoFghfmRS4WsmTQCAWQCAQcwggHaBggrBgEFBQcBAQSCAcwwggHIMGYGCCsGAQUFBzAChlpodHRwOi8vY3JsLm1pY3Jvc29mdC5jb20vcGtpaW5mcmEvQ2VydHMvQkwyUEtJSU5UQ0EwMS5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwMig0KS5jcnQwVgYIKwYBBQUHMAKGSmh0dHA6Ly9jcmwxLmFtZS5nYmwvYWlhL0JMMlBLSUlOVENBMDEuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3J0MFYGCCsGAQUFBzAChkpodHRwOi8vY3JsMi5hbWUuZ2JsL2FpYS9CTDJQS0lJTlRDQTAxLkFNRS5HQkxfQU1FJTIwSW5mcmElMjBDQSUyMDAyKDQpLmNydDBWBggrBgEFBQcwAoZKaHR0cDovL2NybDMuYW1lLmdibC9haWEvQkwyUEtJSU5UQ0EwMS5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwMig0KS5jcnQwVgYIKwYBBQUHMAKGSmh0dHA6Ly9jcmw0LmFtZS5nYmwvYWlhL0JMMlBLSUlOVENBMDEuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3J0MB0GA1UdDgQWBBQ7Uo6SICZvdsfQb4hxJfOTmnlMAzAOBgNVHQ8BAf8EBAMCBaAwggE1BgNVHR8EggEsMIIBKDCCASSgggEgoIIBHIZCaHR0cDovL2NybC5taWNyb3NvZnQuY29tL3BraWluZnJhL0NSTC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsMS5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsMi5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsMy5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsNC5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JsMIGdBgNVHSAEgZUwgZIwDAYKKwYBBAGCN3sBATBmBgorBgEEAYI3ewICMFgwVgYIKwYBBQUHAgIwSh5IADMAMwBlADAAMQA5ADIAMQAtADQAZAA2ADQALQA0AGYAOABjAC0AYQAwADUANQAtADUAYgBkAGEAZgBmAGQANQBlADMAMwBkMAwGCisGAQQBgjd7AwIwDAYKKwYBBAGCN3sEAjAfBgNVHSMEGDAWgBSuecJrXSWIEwb2BwnDl3x7l48dVTAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDQYJKoZIhvcNAQELBQADggEBADp-OzkMAESDX27pXk3NL5_uU6RuCBkTjHnVxyWwp89arbWDWeL0FNU75N4hZMsK4FU9oUeatHrGk09j6u3o6qgzbyH7vWX9v5ijaUpNPeacRaMTpWvVZZLg6AERFF7oiplb-vCmLHZTMYbJH6dZI35unEEDgzD9n8QhuMBQ8dXhS145FHrAVc9nnNB25FQt29UfdpwrVFPQuEkgwKKCG8Qy5VDtGnceMRw2bnDwtYNngCgVmd2cPtwgizpflj_F8NURyxhnrQvuOwCkQavcJTq5RSXgEp3U471r3TZoEkKrAmcNF3Fyz5M0gOv6EQmdHg-lLMeFUmOVsXvWTlMjQQw&s=YC83G4a6zcjU2dgw2kDabvtmu2xewfIug3530qMZNxhghH06OrATrpHPWdPMIUWygd8oARliuzvsCLRv9EUetHefcrnRoSayylkNbAwsUkkLx7YgW-xG01LXe97xdXV4UGuDKqVwPaeDOKDKzfmfCF5cIyq0_IjRCzgmX67-85J-4URURwgvfZG7NO0IezW2VMCP1hZR6Bm_BlPrxFoHwHl00FaxzbtxY-X0hqgLE8iykLlTUbtzwE1den-qD9vk7eHqoA9ysnerRGzfb5r7YJPIthx6UL2MdmOV19z2OorfJQrPLakFgzhHecGpysRFvboL7w_IRWgesp75HCeqJQ&h=rCTIowGUVmzGdZvW-kz_Fkn6yRHFrrk7wKdtttqY-m4\n2025-11-26T15:35:18.023Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Cache-Control: no-cache\n2025-11-26T15:35:18.023Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Date: Wed, 26 Nov 2025 15:35:17 GMT\n2025-11-26T15:35:18.023Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Expires: -1\n2025-11-26T15:35:18.023Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Location: https://management.azure.com/subscriptions/<sub_guid>/providers/Microsoft.DataProtection/locations/canadacentral/operationResults/N2VlNTJiOWItOGNlMi00NGJiLThlODgtOGFlMmM2MmVlYzQyOzBlYjM5MGI5LTJiZjgtNDNhOS04MDAyLTc2YTIwOWRhMzQyNg==?api-version=2024-04-01&t=638997681179387901&c=MIIHpTCCBo2gAwIBAgITfwY2O9Fi5lSmLyOBKgAEBjY70TANBgkqhkiG9w0BAQsFADBEMRMwEQYKCZImiZPyLGQBGRYDR0JMMRMwEQYKCZImiZPyLGQBGRYDQU1FMRgwFgYDVQQDEw9BTUUgSW5mcmEgQ0EgMDIwHhcNMjUxMDIwMDQxMjEwWhcNMjYwNDE4MDQxMjEwWjBAMT4wPAYDVQQDEzVhc3luY29wZXJhdGlvbnNpZ25pbmdjZXJ0aWZpY2F0ZS5tYW5hZ2VtZW50LmF6dXJlLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMHQm7ZXwmvz3bp_tBu0ZYNZMpMcRUJSHrld-E9b4RqS0ymmswmhM267lbAI2oCZNI82E4DZNNZApPYz9GqZQ2OYxE0G0E_dyvstulti8jSM29pm5HiR_hxNyzt_q0uSnmqQnWuxQMco30qz4XjZaQkJNBATBraJWnioUZtMKhrbXrMOMral9bW_6ba5EqNlc3iBHJ8x7dblRrVcao1gyCk1mEXz9vR8Ut0wZ-KLWuSUcbcS7CPzUuSYQ1eJdym4YYAqEQQM1z40lpqT6OlbqRLu3DC5dN2NbGHUPkHODMhUbKY3RnwHKdrKQbuDk16nRBjl2ZML6kXZGz_BMd-elV0CAwEAAaOCBJIwggSOMCcGCSsGAQQBgjcVCgQaMBgwCgYIKwYBBQUHAwEwCgYIKwYBBQUHAwIwPQYJKwYBBAGCNxUHBDAwLgYmKwYBBAGCNxUIhpDjDYTVtHiE8Ys-hZvdFs6dEoFghfmRS4WsmTQCAWQCAQcwggHaBggrBgEFBQcBAQSCAcwwggHIMGYGCCsGAQUFBzAChlpodHRwOi8vY3JsLm1pY3Jvc29mdC5jb20vcGtpaW5mcmEvQ2VydHMvQkwyUEtJSU5UQ0EwMS5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwMig0KS5jcnQwVgYIKwYBBQUHMAKGSmh0dHA6Ly9jcmwxLmFtZS5nYmwvYWlhL0JMMlBLSUlOVENBMDEuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3J0MFYGCCsGAQUFBzAChkpodHRwOi8vY3JsMi5hbWUuZ2JsL2FpYS9CTDJQS0lJTlRDQTAxLkFNRS5HQkxfQU1FJTIwSW5mcmElMjBDQSUyMDAyKDQpLmNydDBWBggrBgEFBQcwAoZKaHR0cDovL2NybDMuYW1lLmdibC9haWEvQkwyUEtJSU5UQ0EwMS5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwMig0KS5jcnQwVgYIKwYBBQUHMAKGSmh0dHA6Ly9jcmw0LmFtZS5nYmwvYWlhL0JMMlBLSUlOVENBMDEuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3J0MB0GA1UdDgQWBBQ7Uo6SICZvdsfQb4hxJfOTmnlMAzAOBgNVHQ8BAf8EBAMCBaAwggE1BgNVHR8EggEsMIIBKDCCASSgggEgoIIBHIZCaHR0cDovL2NybC5taWNyb3NvZnQuY29tL3BraWluZnJhL0NSTC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsMS5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsMi5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsMy5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsNC5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JsMIGdBgNVHSAEgZUwgZIwDAYKKwYBBAGCN3sBATBmBgorBgEEAYI3ewICMFgwVgYIKwYBBQUHAgIwSh5IADMAMwBlADAAMQA5ADIAMQAtADQAZAA2ADQALQA0AGYAOABjAC0AYQAwADUANQAtADUAYgBkAGEAZgBmAGQANQBlADMAMwBkMAwGCisGAQQBgjd7AwIwDAYKKwYBBAGCN3sEAjAfBgNVHSMEGDAWgBSuecJrXSWIEwb2BwnDl3x7l48dVTAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDQYJKoZIhvcNAQELBQADggEBADp-OzkMAESDX27pXk3NL5_uU6RuCBkTjHnVxyWwp89arbWDWeL0FNU75N4hZMsK4FU9oUeatHrGk09j6u3o6qgzbyH7vWX9v5ijaUpNPeacRaMTpWvVZZLg6AERFF7oiplb-vCmLHZTMYbJH6dZI35unEEDgzD9n8QhuMBQ8dXhS145FHrAVc9nnNB25FQt29UfdpwrVFPQuEkgwKKCG8Qy5VDtGnceMRw2bnDwtYNngCgVmd2cPtwgizpflj_F8NURyxhnrQvuOwCkQavcJTq5RSXgEp3U471r3TZoEkKrAmcNF3Fyz5M0gOv6EQmdHg-lLMeFUmOVsXvWTlMjQQw&s=lHhcK-tIwYl8ehED7l0MmafuxvugEuQZv2oSQVXCk3chpvCoaJ-Jbyisyotm6ZlxU1hp0GHmqRfp4ZThH6xzGGI0IsFBnHNScbDn7nRzDS__x5cqZ_s9srx5hxBu-5cWOJaMv6RNOt51y9ZFeHkl5ViU32GWV00WNhoRY9ssIEs1mZaRLWsO3m7xOlkJjiCyNlxDRn0IICLdQ9mKamuI4JsT38oe8gAtOjURxKuxR7GlfPQwTLUDdrp2HVJalFz3dc0EycEF3J7xy2C0Us7_BMT0kQ1UuTZkC6jsO16hxEiXlF5s1q64wogf5nsro6bl5MV-lNW21_3xGwiRLvTr2g&h=qozxhN_oD09JKmskWmFZuZ8iDHnFxfVcEXlHhcfRa-A\n2025-11-26T15:35:18.023Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Pragma: no-cache\n2025-11-26T15:35:18.023Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Retry-After: 30\n2025-11-26T15:35:18.023Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Strict-Transport-Security: max-age=31536000; includeSubDomains\n2025-11-26T15:35:18.023Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Cache: CONFIG_NOCACHE\n2025-11-26T15:35:18.023Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Content-Type-Options: nosniff\n2025-11-26T15:35:18.024Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Correlation-Request-Id: 5ac9623b-e6b7-c56d-5db5-efd7fa090c7c\n2025-11-26T15:35:18.024Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Operation-Identifier: appId=bcdae85a-6fc4-45f7-abf0-1cbdd6bd015a,tenantId=<tenant_guid>,objectId=b788ac66-1dbc-4744-9f03-6f6585727daf/canadacentral/5e1651b0-7e4e-4e92-809a-dbf01a288a58\n2025-11-26T15:35:18.024Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Ratelimit-Remaining-Subscription-Resource-Requests: 799\n2025-11-26T15:35:18.024Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Request-Id: 92865673-91f5-47a7-b708-d2c7f9ce6b00\n2025-11-26T15:35:18.024Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Routing-Request-Id: CANADACENTRAL:20251126T153517Z:92865673-91f5-47a7-b708-d2c7f9ce6b00\n2025-11-26T15:35:18.024Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Msedge-Ref: Ref A: 76CCC32D963A482A856B4B14E2102856 Ref B: CO6AA3150217047 Ref C: 2025-11-26T15:35:17Z\n2025-11-26T15:35:18.024Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Content-Length: 0\n2025-11-26T15:35:18.024Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5\n2025-11-26T15:35:18.024Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5\n2025-11-26T15:35:18.026Z [DEBUG] State storage *statemgr.Filesystem declined to persist a state snapshot\n2025-11-26T15:35:18.027Z [INFO]  Starting apply for azurerm_resource_group.test\n2025-11-26T15:35:18.027Z [DEBUG] azurerm_resource_group.test: applying the planned Delete change\n2025-11-26T15:35:28.037Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: [DEBUG] AzureRM Request: \n2025-11-26T15:35:28.037Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: GET /subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251122161058142591/resources?%24expand=provisioningState&%24top=10&api-version=2023-07-01 HTTP/1.1\n2025-11-26T15:35:28.037Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Host: management.azure.com\n2025-11-26T15:35:28.037Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: User-Agent: HashiCorp/go-azure-sdk (Go-http-Client/1.1 resourcegroups/2023-07-01) HashiCorp Terraform/1.13.5 (+https://www.terraform.io) terraform-provider-azurerm/dev pid-222c6c49-1b0a-5959-a213-6608f9eb8820\n2025-11-26T15:35:28.037Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Accept: application/json; charset=utf-8; IEEE754Compatible=false\n2025-11-26T15:35:28.037Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Content-Type: application/json; charset=utf-8\n2025-11-26T15:35:28.037Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Odata-Maxversion: 4.0\n2025-11-26T15:35:28.037Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Odata-Version: 4.0\n2025-11-26T15:35:28.037Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Accept-Encoding: gzip\n2025-11-26T15:35:28.037Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5\n2025-11-26T15:35:28.037Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5\n2025-11-26T15:35:28.037Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: [DEBUG] GET https://management.azure.com/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251122161058142591/resources?%24expand=provisioningState&%24top=10&api-version=2023-07-01\n2025-11-26T15:35:28.419Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: [DEBUG] AzureRM Response for https://management.azure.com/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251122161058142591/resources?%24expand=provisioningState&%24top=10&api-version=2023-07-01: \n2025-11-26T15:35:28.419Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: HTTP/2.0 200 OK\n2025-11-26T15:35:28.419Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Content-Length: 391\n2025-11-26T15:35:28.419Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Cache-Control: no-cache\n2025-11-26T15:35:28.419Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Content-Type: application/json; charset=utf-8\n2025-11-26T15:35:28.419Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Date: Wed, 26 Nov 2025 15:35:27 GMT\n2025-11-26T15:35:28.419Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Expires: -1\n2025-11-26T15:35:28.419Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Pragma: no-cache\n2025-11-26T15:35:28.419Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: Strict-Transport-Security: max-age=31536000; includeSubDomains\n2025-11-26T15:35:28.419Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Cache: CONFIG_NOCACHE\n2025-11-26T15:35:28.419Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Content-Type-Options: nosniff\n2025-11-26T15:35:28.419Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Correlation-Request-Id: 618e9f92-634f-4f70-ae1e-a8e6a845e1b7\n2025-11-26T15:35:28.420Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Ratelimit-Remaining-Subscription-Global-Reads: 3749\n2025-11-26T15:35:28.420Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Ratelimit-Remaining-Subscription-Reads: 249\n2025-11-26T15:35:28.420Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Request-Id: 618e9f92-634f-4f70-ae1e-a8e6a845e1b7\n2025-11-26T15:35:28.420Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Ms-Routing-Request-Id: CANADACENTRAL:20251126T153527Z:618e9f92-634f-4f70-ae1e-a8e6a845e1b7\n2025-11-26T15:35:28.420Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: X-Msedge-Ref: Ref A: A5119D553EE64D6AB37EF864611EBBC0 Ref B: MWH011020806042 Ref C: 2025-11-26T15:35:27Z\n2025-11-26T15:35:28.420Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5\n2025-11-26T15:35:28.420Z [DEBUG] provider.terraform-provider-azurerm_v4.54.0_x5: {\"value\":[{\"id\":\"/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251122161058142591/providers/Microsoft.DataProtection/BackupVaults/acctest-dbv-251122161058142591\",\"name\":\"acctest-dbv-251122161058142591\",\"type\":\"Microsoft.DataProtection/BackupVaults\",\"location\":\"canadacentral\",\"identity\":{\"type\":\"None\"},\"provisioningState\":\"Succeeded\",\"tags\":{}}]}\n2025-11-26T15:35:28.420Z [ERROR] provider.terraform-provider-azurerm_v4.54.0_x5: Response contains error diagnostic: tf_proto_version=5.10 tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_req_id=dbf23961-08fa-4c92-2146-0ccf4a10f2dd tf_resource_type=azurerm_resource_group @caller=github.com/hashicorp/terraform-plugin-go@v0.29.0/tfprotov5/internal/diag/diagnostics.go:58 @module=sdk.proto diagnostic_detail=\"\" diagnostic_severity=ERROR\n  diagnostic_summary=\n  | deleting Resource Group \"acctest-dataprotection-251122161058142591\": the Resource Group still contains Resources.\n  | \n  | Terraform is configured to check for Resources within the Resource Group when deleting the Resource Group - and\n  | raise an error if nested Resources still exist to avoid unintentionally deleting these Resources.\n  | \n  | Terraform has detected that the following Resources still exist within the Resource Group:\n  | \n  | * `/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251122161058142591/providers/Microsoft.DataProtection/BackupVaults/acctest-dbv-251122161058142591`\n  | \n  | This feature is intended to avoid the unintentional destruction of nested Resources provisioned through some\n  | other means (for example, an ARM Template Deployment) - as such you must either remove these Resources, or\n  | disable this behaviour using the feature flag `prevent_deletion_if_contains_resources` within the `features`\n  | block when configuring the Provider, for example:\n  | \n  | provider \"azurerm\" {\n  |   features {\n  |     resource_group {\n  |       prevent_deletion_if_contains_resources = false\n  |     }\n  |   }\n  | }\n  | \n  | When that feature flag is set, Terraform will skip checking for any Resources within the Resource Group and\n  | delete this using the Azure API directly (which will clear up any nested resources).\n  | \n  | More information on the `features` block can be found in the documentation:\n  | https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/guides/features-block\n   tf_rpc=ApplyResourceChange timestamp=2025-11-26T15:35:28.420Z\n\n```\n\nNote the `202 Accepted` response from Azure to delete the vault.\n\nThere's actually a bug here which I can submit a PR for; [this line](https://github.com/hashicorp/terraform-provider-azurerm/blob/005c4496c5df57f6ff66b1f29cb9956b28ad4256/internal/services/dataprotection/data_protection_backup_vault_resource.go#L296) and the few after it should actually be:\n\n```golang\nif err := client.DeleteThenPoll(ctx, *id); err != nil {\n\treturn fmt.Errorf(\"deleting DataProtection BackupVault (%q): %+v\", id, err)\n}\n```\n\n(e.g., the method should be `DeleteThenPoll`, not `Delete`); HOWEVER, even when making that change and trying again, this fails.\n\nLogs from a run using that change:\n\n```bash\nDELETE /subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251125213904888367/providers/Microsoft.DataProtection/backupVaults/acctest-dbv-251125213904888367?api-version=2024-04-01 HTTP/1.1\nHost: management.azure.com\nUser-Agent: HashiCorp/go-azure-sdk (Go-http-Client/1.1 backupvaults/2024-04-01) HashiCorp Terraform/1.13.5 (+https://www.terraform.io) terraform-provider-azurerm/acc pid-222c6c49-1b0a-5959-a213-6608f9eb8820\nContent-Type: application/json; charset=utf-8\nX-Ms-Correlation-Request-Id: 909b11be-8d7c-7deb-e98e-e2ff08be4143\nAccept-Encoding: gzip\n\n\n2025/11/25 21:40:14 [DEBUG] DELETE https://management.azure.com/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251125213904888367/providers/Microsoft.DataProtection/backupVaults/acctest-dbv-251125213904888367?api-version=2024-04-01\n2025/11/25 21:40:14 [DEBUG] AzureRM Response for https://management.azure.com/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251125213904888367/providers/Microsoft.DataProtection/backupVaults/acctest-dbv-251125213904888367?api-version=2024-04-01: \nHTTP/2.0 202 Accepted\nAzure-Asyncoperation: https://management.azure.com/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251125213904888367/providers/Microsoft.DataProtection/locations/canadacentral/operationStatus/NDA1ODVhNWEtYjk3Ny00ZmI5LTlhYWYtNjIwNTI3ODJiYjFkO2VjMDcwOWE2LWRmOTktNDUxZi1iMDA4LWQ4MDQxYjdlNWI4Nw==?api-version=2024-04-01&t=638997036148195543&c=MIIHpTCCBo2gAwIBAgITfwY2O9Fi5lSmLyOBKgAEBjY70TANBgkqhkiG9w0BAQsFADBEMRMwEQYKCZImiZPyLGQBGRYDR0JMMRMwEQYKCZImiZPyLGQBGRYDQU1FMRgwFgYDVQQDEw9BTUUgSW5mcmEgQ0EgMDIwHhcNMjUxMDIwMDQxMjEwWhcNMjYwNDE4MDQxMjEwWjBAMT4wPAYDVQQDEzVhc3luY29wZXJhdGlvbnNpZ25pbmdjZXJ0aWZpY2F0ZS5tYW5hZ2VtZW50LmF6dXJlLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMHQm7ZXwmvz3bp_tBu0ZYNZMpMcRUJSHrld-E9b4RqS0ymmswmhM267lbAI2oCZNI82E4DZNNZApPYz9GqZQ2OYxE0G0E_dyvstulti8jSM29pm5HiR_hxNyzt_q0uSnmqQnWuxQMco30qz4XjZaQkJNBATBraJWnioUZtMKhrbXrMOMral9bW_6ba5EqNlc3iBHJ8x7dblRrVcao1gyCk1mEXz9vR8Ut0wZ-KLWuSUcbcS7CPzUuSYQ1eJdym4YYAqEQQM1z40lpqT6OlbqRLu3DC5dN2NbGHUPkHODMhUbKY3RnwHKdrKQbuDk16nRBjl2ZML6kXZGz_BMd-elV0CAwEAAaOCBJIwggSOMCcGCSsGAQQBgjcVCgQaMBgwCgYIKwYBBQUHAwEwCgYIKwYBBQUHAwIwPQYJKwYBBAGCNxUHBDAwLgYmKwYBBAGCNxUIhpDjDYTVtHiE8Ys-hZvdFs6dEoFghfmRS4WsmTQCAWQCAQcwggHaBggrBgEFBQcBAQSCAcwwggHIMGYGCCsGAQUFBzAChlpodHRwOi8vY3JsLm1pY3Jvc29mdC5jb20vcGtpaW5mcmEvQ2VydHMvQkwyUEtJSU5UQ0EwMS5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwMig0KS5jcnQwVgYIKwYBBQUHMAKGSmh0dHA6Ly9jcmwxLmFtZS5nYmwvYWlhL0JMMlBLSUlOVENBMDEuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3J0MFYGCCsGAQUFBzAChkpodHRwOi8vY3JsMi5hbWUuZ2JsL2FpYS9CTDJQS0lJTlRDQTAxLkFNRS5HQkxfQU1FJTIwSW5mcmElMjBDQSUyMDAyKDQpLmNydDBWBggrBgEFBQcwAoZKaHR0cDovL2NybDMuYW1lLmdibC9haWEvQkwyUEtJSU5UQ0EwMS5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwMig0KS5jcnQwVgYIKwYBBQUHMAKGSmh0dHA6Ly9jcmw0LmFtZS5nYmwvYWlhL0JMMlBLSUlOVENBMDEuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3J0MB0GA1UdDgQWBBQ7Uo6SICZvdsfQb4hxJfOTmnlMAzAOBgNVHQ8BAf8EBAMCBaAwggE1BgNVHR8EggEsMIIBKDCCASSgggEgoIIBHIZCaHR0cDovL2NybC5taWNyb3NvZnQuY29tL3BraWluZnJhL0NSTC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsMS5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsMi5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsMy5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsNC5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JsMIGdBgNVHSAEgZUwgZIwDAYKKwYBBAGCN3sBATBmBgorBgEEAYI3ewICMFgwVgYIKwYBBQUHAgIwSh5IADMAMwBlADAAMQA5ADIAMQAtADQAZAA2ADQALQA0AGYAOABjAC0AYQAwADUANQAtADUAYgBkAGEAZgBmAGQANQBlADMAMwBkMAwGCisGAQQBgjd7AwIwDAYKKwYBBAGCN3sEAjAfBgNVHSMEGDAWgBSuecJrXSWIEwb2BwnDl3x7l48dVTAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDQYJKoZIhvcNAQELBQADggEBADp-OzkMAESDX27pXk3NL5_uU6RuCBkTjHnVxyWwp89arbWDWeL0FNU75N4hZMsK4FU9oUeatHrGk09j6u3o6qgzbyH7vWX9v5ijaUpNPeacRaMTpWvVZZLg6AERFF7oiplb-vCmLHZTMYbJH6dZI35unEEDgzD9n8QhuMBQ8dXhS145FHrAVc9nnNB25FQt29UfdpwrVFPQuEkgwKKCG8Qy5VDtGnceMRw2bnDwtYNngCgVmd2cPtwgizpflj_F8NURyxhnrQvuOwCkQavcJTq5RSXgEp3U471r3TZoEkKrAmcNF3Fyz5M0gOv6EQmdHg-lLMeFUmOVsXvWTlMjQQw&s=Gy3HbeitOfeFITPVEWhFCh8lOv_Q0p7AUG1YEjfwWnV3HEuCw6oTTtS0aYI5CQ89K0l5VJgxxJ-Jd80jJxbUql7YINBCYHCu4PCh3LS_Bbns-K_cj7Mpxf_uirsFWMurciYkJfkFYzKK16AfAJNA1q-DDVEnD8NiIO-uDzUNep_1pfwhMnc4n63YNFZY8RRs535KQ3lU4Y183-tzI-t937tEjTdyqS2wi39AK9n-u-J2956uSOmKe9h37cI--N9G4lxyEPQS19BKGjafFaYj9MPgZgYn_H_24KGKNcMknDCsAg3mM6OF-qcPY3xjCIDCTE7S4fWRNVDd0VlmrsArYw&h=_mri9de9euc_DjE-0qHvJT4QdcYJIEt2LrPkKcKCHqk\nCache-Control: no-cache\nDate: Tue, 25 Nov 2025 21:40:14 GMT\nExpires: -1\nLocation: https://management.azure.com/subscriptions/<sub_guid>/providers/Microsoft.DataProtection/locations/canadacentral/operationResults/NDA1ODVhNWEtYjk3Ny00ZmI5LTlhYWYtNjIwNTI3ODJiYjFkO2VjMDcwOWE2LWRmOTktNDUxZi1iMDA4LWQ4MDQxYjdlNWI4Nw==?api-version=2024-04-01&t=638997036148351494&c=MIIHpTCCBo2gAwIBAgITfwY2O9Fi5lSmLyOBKgAEBjY70TANBgkqhkiG9w0BAQsFADBEMRMwEQYKCZImiZPyLGQBGRYDR0JMMRMwEQYKCZImiZPyLGQBGRYDQU1FMRgwFgYDVQQDEw9BTUUgSW5mcmEgQ0EgMDIwHhcNMjUxMDIwMDQxMjEwWhcNMjYwNDE4MDQxMjEwWjBAMT4wPAYDVQQDEzVhc3luY29wZXJhdGlvbnNpZ25pbmdjZXJ0aWZpY2F0ZS5tYW5hZ2VtZW50LmF6dXJlLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMHQm7ZXwmvz3bp_tBu0ZYNZMpMcRUJSHrld-E9b4RqS0ymmswmhM267lbAI2oCZNI82E4DZNNZApPYz9GqZQ2OYxE0G0E_dyvstulti8jSM29pm5HiR_hxNyzt_q0uSnmqQnWuxQMco30qz4XjZaQkJNBATBraJWnioUZtMKhrbXrMOMral9bW_6ba5EqNlc3iBHJ8x7dblRrVcao1gyCk1mEXz9vR8Ut0wZ-KLWuSUcbcS7CPzUuSYQ1eJdym4YYAqEQQM1z40lpqT6OlbqRLu3DC5dN2NbGHUPkHODMhUbKY3RnwHKdrKQbuDk16nRBjl2ZML6kXZGz_BMd-elV0CAwEAAaOCBJIwggSOMCcGCSsGAQQBgjcVCgQaMBgwCgYIKwYBBQUHAwEwCgYIKwYBBQUHAwIwPQYJKwYBBAGCNxUHBDAwLgYmKwYBBAGCNxUIhpDjDYTVtHiE8Ys-hZvdFs6dEoFghfmRS4WsmTQCAWQCAQcwggHaBggrBgEFBQcBAQSCAcwwggHIMGYGCCsGAQUFBzAChlpodHRwOi8vY3JsLm1pY3Jvc29mdC5jb20vcGtpaW5mcmEvQ2VydHMvQkwyUEtJSU5UQ0EwMS5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwMig0KS5jcnQwVgYIKwYBBQUHMAKGSmh0dHA6Ly9jcmwxLmFtZS5nYmwvYWlhL0JMMlBLSUlOVENBMDEuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3J0MFYGCCsGAQUFBzAChkpodHRwOi8vY3JsMi5hbWUuZ2JsL2FpYS9CTDJQS0lJTlRDQTAxLkFNRS5HQkxfQU1FJTIwSW5mcmElMjBDQSUyMDAyKDQpLmNydDBWBggrBgEFBQcwAoZKaHR0cDovL2NybDMuYW1lLmdibC9haWEvQkwyUEtJSU5UQ0EwMS5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwMig0KS5jcnQwVgYIKwYBBQUHMAKGSmh0dHA6Ly9jcmw0LmFtZS5nYmwvYWlhL0JMMlBLSUlOVENBMDEuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3J0MB0GA1UdDgQWBBQ7Uo6SICZvdsfQb4hxJfOTmnlMAzAOBgNVHQ8BAf8EBAMCBaAwggE1BgNVHR8EggEsMIIBKDCCASSgggEgoIIBHIZCaHR0cDovL2NybC5taWNyb3NvZnQuY29tL3BraWluZnJhL0NSTC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsMS5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsMi5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsMy5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JshjRodHRwOi8vY3JsNC5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDIoNCkuY3JsMIGdBgNVHSAEgZUwgZIwDAYKKwYBBAGCN3sBATBmBgorBgEEAYI3ewICMFgwVgYIKwYBBQUHAgIwSh5IADMAMwBlADAAMQA5ADIAMQAtADQAZAA2ADQALQA0AGYAOABjAC0AYQAwADUANQAtADUAYgBkAGEAZgBmAGQANQBlADMAMwBkMAwGCisGAQQBgjd7AwIwDAYKKwYBBAGCN3sEAjAfBgNVHSMEGDAWgBSuecJrXSWIEwb2BwnDl3x7l48dVTAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDQYJKoZIhvcNAQELBQADggEBADp-OzkMAESDX27pXk3NL5_uU6RuCBkTjHnVxyWwp89arbWDWeL0FNU75N4hZMsK4FU9oUeatHrGk09j6u3o6qgzbyH7vWX9v5ijaUpNPeacRaMTpWvVZZLg6AERFF7oiplb-vCmLHZTMYbJH6dZI35unEEDgzD9n8QhuMBQ8dXhS145FHrAVc9nnNB25FQt29UfdpwrVFPQuEkgwKKCG8Qy5VDtGnceMRw2bnDwtYNngCgVmd2cPtwgizpflj_F8NURyxhnrQvuOwCkQavcJTq5RSXgEp3U471r3TZoEkKrAmcNF3Fyz5M0gOv6EQmdHg-lLMeFUmOVsXvWTlMjQQw&s=QKhrZbVUj5FTTOZsx5-IbNVBO9CyDjKoAxTQDI_K_6DS_oCeKNPamUsPwh6cEPaJdnfbDba4WtcGICrcYNDHWbLHrBMi9vquVUMsYofCR1Ws9uW2E2O9AdST8uiYaoguW-y2CsYnaWKytgtu-XGNjtt-sh8uiy7dfIlX4fyUA8QieYSEKJP5ql3d2ZdA2bhzCkfQzuTVR5Xa4_GpxYOCcmgnU3_RmvvtoEG6_ecwdE95qqsBH6ShLQekWLl0IUO1-91nmQ9LHLEK3_TaDuQk71-pC5fxnwBF5_Pfm5hbnaDK6uULMVhZagoF6rvUrLN0UXsA-nZjRnV9L8BjP_xiqA&h=UNrOuCMQjzZZrclJWVc0a1vEhEPK4PyYqbAJXlo7Idk\nPragma: no-cache\nRetry-After: 30\nStrict-Transport-Security: max-age=31536000; includeSubDomains\nX-Cache: CONFIG_NOCACHE\nX-Content-Type-Options: nosniff\nX-Ms-Correlation-Request-Id: 909b11be-8d7c-7deb-e98e-e2ff08be4143\nX-Ms-Operation-Identifier: appId=bcdae85a-6fc4-45f7-abf0-1cbdd6bd015a,tenantId=110fbd73-ac4a-4c62-8ca5-810aec218cd8,objectId=b788ac66-1dbc-4744-9f03-6f6585727daf/canadacentral/8067a637-c1d1-4e45-b370-b38a2e73a941\nX-Ms-Ratelimit-Remaining-Subscription-Resource-Requests: 799\nX-Ms-Request-Id: 71ea4e88-481a-462d-b65c-5f53a147223f\nX-Ms-Routing-Request-Id: CANADACENTRAL:20251125T214014Z:71ea4e88-481a-462d-b65c-5f53a147223f\nX-Msedge-Ref: Ref A: 708EA0D7E3644DD2861CEC0E74638F8F Ref B: CO6AA3150220039 Ref C: 2025-11-25T21:40:14Z\nContent-Length: 0\n\n\n2025/11/25 21:40:24 [DEBUG] AzureRM Request: \nGET /subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251125213904888367/providers/Microsoft.DataProtection/backupVaults/acctest-dbv-251125213904888367?api-version=2024-04-01 HTTP/1.1\nHost: management.azure.com\nUser-Agent: HashiCorp/go-azure-sdk (Go-http-Client/1.1 backupvaults/2024-04-01) HashiCorp Terraform/1.13.5 (+https://www.terraform.io) terraform-provider-azurerm/acc pid-222c6c49-1b0a-5959-a213-6608f9eb8820\nAccept: application/json; charset=utf-8; IEEE754Compatible=false\nContent-Type: application/json; charset=utf-8\nOdata-Maxversion: 4.0\nOdata-Version: 4.0\nX-Ms-Correlation-Request-Id: 909b11be-8d7c-7deb-e98e-e2ff08be4143\nAccept-Encoding: gzip\n\n\n2025/11/25 21:40:24 [DEBUG] GET https://management.azure.com/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251125213904888367/providers/Microsoft.DataProtection/backupVaults/acctest-dbv-251125213904888367?api-version=2024-04-01\n2025/11/25 21:40:25 [DEBUG] AzureRM Response for https://management.azure.com/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251125213904888367/providers/Microsoft.DataProtection/backupVaults/acctest-dbv-251125213904888367?api-version=2024-04-01: \nHTTP/2.0 404 Not Found\nContent-Length: 218\nCache-Control: no-cache\nContent-Language: en-US\nContent-Type: application/json\nDate: Tue, 25 Nov 2025 21:40:25 GMT\nExpires: -1\nPragma: no-cache\nStrict-Transport-Security: max-age=31536000; includeSubDomains\nX-Cache: CONFIG_NOCACHE\nX-Content-Type-Options: nosniff\nX-Ms-Correlation-Request-Id: 909b11be-8d7c-7deb-e98e-e2ff08be4143\nX-Ms-Error-Code: UserErrorGenericResourceNotFound\nX-Ms-Ratelimit-Remaining-Subscription-Resource-Requests: 1099\nX-Ms-Request-Id: fd688d94-344c-4540-999f-c8ad7119f519\nX-Ms-Routing-Request-Id: CANADACENTRAL:20251125T214025Z:fd688d94-344c-4540-999f-c8ad7119f519\nX-Msedge-Ref: Ref A: 74813081516B42EDA36D9AC17A730787 Ref B: CO6AA3150219019 Ref C: 2025-11-25T21:40:25Z\n\n{\"error\":{\"code\":\"UserErrorGenericResourceNotFound\",\"message\":\"Azure resource does not exist. Please make sure required resources exist. If the issue persists, contact Microsoft support.\",\"target\":null,\"details\":null}}\n2025-11-25T21:40:25.387Z [TRACE] sdk.helper_schema: Called downstream: tf_rpc=ApplyResourceChange tf_resource_type=azurerm_data_protection_backup_vault tf_req_id=db9771df-1470-97d0-3a46-2acf456fc331 tf_mux_provider=\"*schema.GRPCProviderServer\" tf_provider_addr=registry.terraform.io/hashicorp/azurerm\n2025-11-25T21:40:25.387Z [TRACE] sdk.proto: Received downstream response: diagnostic_error_count=0 tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_proto_version=5.10 tf_req_id=db9771df-1470-97d0-3a46-2acf456fc331 tf_rpc=ApplyResourceChange tf_resource_type=azurerm_data_protection_backup_vault diagnostic_warning_count=0 tf_req_duration_ms=11227\n2025-11-25T21:40:25.387Z [TRACE] sdk.proto: Served request: tf_resource_type=azurerm_data_protection_backup_vault tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_proto_version=5.10 tf_req_id=db9771df-1470-97d0-3a46-2acf456fc331 tf_rpc=ApplyResourceChange\n2025-11-25T21:40:25.390Z [TRACE] sdk.proto: Received request: tf_rpc=UpgradeResourceState tf_resource_type=azurerm_resource_group tf_req_id=69c2b00b-9791-7bef-374f-16c12e1f615a tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_proto_version=5.10\n2025-11-25T21:40:25.390Z [TRACE] sdk.proto: Sending request downstream: tf_resource_type=azurerm_resource_group tf_req_id=69c2b00b-9791-7bef-374f-16c12e1f615a tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_proto_version=5.10 tf_rpc=UpgradeResourceState\n2025-11-25T21:40:25.390Z [TRACE] sdk.mux: calling downstream server: tf_rpc=UpgradeResourceState tf_mux_provider=\"*schema.GRPCProviderServer\"\n2025-11-25T21:40:25.390Z [TRACE] sdk.helper_schema: Upgrading JSON state: tf_req_id=69c2b00b-9791-7bef-374f-16c12e1f615a tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_mux_provider=\"*schema.GRPCProviderServer\" tf_rpc=UpgradeResourceState tf_resource_type=azurerm_resource_group\n2025-11-25T21:40:25.390Z [TRACE] sdk.proto: Received downstream response: tf_req_duration_ms=0 diagnostic_error_count=0 tf_rpc=UpgradeResourceState tf_resource_type=azurerm_resource_group tf_req_id=69c2b00b-9791-7bef-374f-16c12e1f615a tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_proto_version=5.10 diagnostic_warning_count=0\n2025-11-25T21:40:25.390Z [TRACE] sdk.proto: Served request: tf_req_id=69c2b00b-9791-7bef-374f-16c12e1f615a tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_proto_version=5.10 tf_rpc=UpgradeResourceState tf_resource_type=azurerm_resource_group\n2025-11-25T21:40:25.390Z [TRACE] sdk.proto: Received request: tf_rpc=ApplyResourceChange tf_resource_type=azurerm_resource_group tf_proto_version=5.10 tf_req_id=a6ac521f-783f-8884-e726-edc8d0fde017 tf_provider_addr=registry.terraform.io/hashicorp/azurerm\n2025-11-25T21:40:25.390Z [TRACE] sdk.proto: Sending request downstream: tf_provider_addr=registry.terraform.io/hashicorp/azurerm tf_rpc=ApplyResourceChange tf_resource_type=azurerm_resource_group tf_proto_version=5.10 tf_req_id=a6ac521f-783f-8884-e726-edc8d0fde017\n2025-11-25T21:40:25.390Z [TRACE] sdk.mux: calling downstream server: tf_rpc=ApplyResourceChange tf_mux_provider=\"*schema.GRPCProviderServer\"\n2025-11-25T21:40:25.390Z [TRACE] sdk.helper_schema: Calling downstream: tf_mux_provider=\"*schema.GRPCProviderServer\" tf_req_id=a6ac521f-783f-8884-e726-edc8d0fde017 tf_resource_type=azurerm_resource_group tf_rpc=ApplyResourceChange tf_provider_addr=registry.terraform.io/hashicorp/azurerm\n2025/11/25 21:40:35 [DEBUG] AzureRM Request: \nGET /subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251125213904888367/resources?%24expand=provisioningState&%24top=10&api-version=2023-07-01 HTTP/1.1\nHost: management.azure.com\nUser-Agent: HashiCorp/go-azure-sdk (Go-http-Client/1.1 resourcegroups/2023-07-01) HashiCorp Terraform/1.13.5 (+https://www.terraform.io) terraform-provider-azurerm/acc pid-222c6c49-1b0a-5959-a213-6608f9eb8820\nAccept: application/json; charset=utf-8; IEEE754Compatible=false\nContent-Type: application/json; charset=utf-8\nOdata-Maxversion: 4.0\nOdata-Version: 4.0\nAccept-Encoding: gzip\n\n\n2025/11/25 21:40:35 [DEBUG] GET https://management.azure.com/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251125213904888367/resources?%24expand=provisioningState&%24top=10&api-version=2023-07-01\n2025/11/25 21:40:35 [DEBUG] AzureRM Response for https://management.azure.com/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251125213904888367/resources?%24expand=provisioningState&%24top=10&api-version=2023-07-01: \nHTTP/2.0 200 OK\nContent-Length: 391\nCache-Control: no-cache\nContent-Type: application/json; charset=utf-8\nDate: Tue, 25 Nov 2025 21:40:35 GMT\nExpires: -1\nPragma: no-cache\nStrict-Transport-Security: max-age=31536000; includeSubDomains\nX-Cache: CONFIG_NOCACHE\nX-Content-Type-Options: nosniff\nX-Ms-Correlation-Request-Id: 94e07c01-5242-4c8e-a06c-a85aa482f64c\nX-Ms-Ratelimit-Remaining-Subscription-Global-Reads: 3749\nX-Ms-Ratelimit-Remaining-Subscription-Reads: 249\nX-Ms-Request-Id: 94e07c01-5242-4c8e-a06c-a85aa482f64c\nX-Ms-Routing-Request-Id: CANADACENTRAL:20251125T214035Z:94e07c01-5242-4c8e-a06c-a85aa482f64c\nX-Msedge-Ref: Ref A: 12DFA3540C3C486880C80828FD3F190A Ref B: CO6AA3150217027 Ref C: 2025-11-25T21:40:35Z\n\n{\"value\":[{\"id\":\"/subscriptions/<sub_guid>/resourceGroups/acctest-dataprotection-251125213904888367/providers/Microsoft.DataProtection/BackupVaults/acctest-dbv-251125213904888367\",\"name\":\"acctest-dbv-251125213904888367\",\"type\":\"Microsoft.DataProtection/BackupVaults\",\"location\":\"canadacentral\",\"identity\":{\"type\":\"None\"},\"provisioningState\":\"Succeeded\",\"tags\":{}}]}\n```\n\nNote that Azure responds with a `202 Accepted` as before, but now the provider waits 10 seconds and polls to see if the resource is gone (hooray!), Azure replies with a `404` (so it's gone right?) but then the subsequent call to the `/resources?$expand=provisioningState&$top=10&api-version=2023-07-01` API replies with the vault resource continuing to exist.\n\nA subsequent `terraform destroy` succeeds in destroying the RG and indeed if you look in the portal there's nothing in that RG after a bit.\n\nSo the question is, what's changed?\n\nAnd/or, can we do something in the code, when we know there's something weird like this occurring with the backend API, that forces a certain number of polling cycles (say, 3) no matter what before continuing?\n\n### Steps to Reproduce\n\n1. `terraform apply`\n2. `terraform destroy` \n\n### Important Factoids\n\n_No response_\n\n### References\n\nSee above.",
      "solution": "Thanks @djryanj  for opening this issue. I can reproduce it locally.\n\nThis is caused by the eventual consistency lag between what resource group sees and the actual resource's deletion state. We do have a function that if resource group finds leftover resources, retry for 10 minutes before error out. However, there's an issue after we upgrade the SDK which makes it only check once. Hashicorp engineers are currently actively looking into this to find possible solutions.\n\nSince this is a quite general issue across various resources, we won't include a standalone fix for this resource specifically. \n\nMeanwhile, you could temporarily opt out `prevent_deletion_if_contains_resources` as stated in the error message.\n\n---\n\nHi @djryanj , thanks for your effort to put this PR (#31202 ). I just had a look. Unfortunately, it won't address this issue. Because the problem is not the `azurerm_data_protecton_backup_vault` isn't deleted successfully, but the resource group thinks it hasn't been deleted yet. \n\nSince this issue is not limited to one resource and there's already a broad effort to find a solution, we won't add a workaround temporarily. Thanks for your understanding!\n\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "tests",
        "service/data-protection",
        "v/4.x",
        "service/resource"
      ],
      "created_at": "2025-11-26T15:55:36Z",
      "closed_at": "2025-12-03T15:06:16Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31201",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31219,
      "title": "Datasource \"azurerm_ssh_public_key\" eats \"EOT\"",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.13.5\n\n### AzureRM Provider Version\n\n3.117.1\n\n### Affected Resource(s)/Data Source(s)\n\ndata azurerm_ssh_public_key\n\n### Terraform Configuration Files\n\n```hcl\ndata \"azurerm_ssh_public_key\" \"sshkey\" {\n  name                = var.lnxpublickey\n  resource_group_name = var.adminrg\n}\n\noutput debug {\n   value=azurerm_ssh_public_key.sshkey.public_key\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\n- debug = \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCoXZDjzXrupOx8qjgN5MjmQEthuAsrKXc5o1SEXWlShLVZz4+ZMAjDlXRwZ1iQ9U435mR4ucFZpe2Rbris9HbSH6Yzh0uRBycyxqiQ0DGNmEumY5ktBHk3q4OOm2z8SL70st/Cc58rMd+N7AQwgx8SBUMNhh+UFR0mNLZWDfLhkU0k4TWLm93DrRTirGGzMrHq+yru6qAUqOv9j++izF9ux+o6TfPfAyJ35gGV+31DdrebALCHYoT47BvBSr94nwZ3Hg8u+LuTe5VqwY/+MiFD76Dzf8XJSE7sjDNAaM56o9KR2zImi5SxPgd1GJGCu1tJvqVFaNcpx/ORFxNJI1fvq0X37+5fpfz5D90Zv04efcB1oVAZCFFsgHbcXSYKlUt+qmcllUJpXmKtBqAnETFWBZa7cnPjvZpTjCmJWsoGz0x6xLf15QttKwvWSy9agNUefWnKQKZfQjRh3R/QVz/b2aKa8mh3P/IHty7P+o+vzQNlabFTQwcyZTjOTEiT3Q+k6DoWA9D9nqtM6XrngBIEcsyYpv8i4tgYdnTvynO5gUBtjJKlOxbf8sZ95tpaeTuo77U+9bqszVyTMXn4JEeG9PnCmRVXWugkuPXWH1I5jQPARuopeG/zeQYzbVyrSECyRdzNeTpZP9sz7tBLqf21OyJPzEOFlRZb7kWWhaQ==\"\n```\n\n### Expected Behaviour\n\nGet the public key as stored in azure\n\n### Actual Behaviour\n\nIf the public key contains the sequence \"EOT\" this is missing\n\n### Steps to Reproduce\n\n* Add in Azure a valid public containing EOT, for example\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCoXZDjzXrupOx8qjgN5MjmQEthuAsrKXc5o1SEXWlShLVZz4+ZMAjDlXRwZ1iQ9U435mR4ucFZpe2Rbris9HbSH6Yzh0uRBycyxqiQ0DGNmEumY5ktBHk3q4OOm2z8SL70stEOT/Cc58rMd+N7AQwgx8SBUMNhh+UFR0mNLZWDfLhkU0k4TWLm93DrRTirGGzMrHq+yru6qAUqOv9j++izF9ux+o6TfPfAyJ35gGV+31DdrebALCHYoT47BvBSr94nwZ3Hg8u+LuTe5VqwY/+MiFD76Dzf8XJSE7sjDNAaM56o9KR2zImi5SxPgd1GJGCu1tJvqVFaNcpx/ORFxNJI1fvq0X37+5fpfz5D90Zv04efcB1oVAZCFFsgHbcXSYKlUt+qmcllUJpXmKtBqAnETFWBZa7cnPjvZpTjCmJWsoGz0x6xLf15QttKwvWSy9agNUefWnKQKZfQjRh3R/QVz/b2aKa8mh3P/IHty7P+o+vzQNlabFTQwcyZTjOTEiT3Q+k6DoWA9D9nqtM6XrngBIEcsyYpv8i4tgYdnTvynO5gUBtjJKlOxbf8sZ95tpaeTuo77U+9bqszVyTMXn4JEeG9PnCmRVXWugkuPXWH1I5jQPARuopeG/zeQYzbVyrSECyRdzNeTpZP9sz7tBLqf21OyJPzEOFlRZb7kWWhaQ==\n* Query it with the data azurerm_ssh_public_key statement\n* Result is\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCoXZDjzXrupOx8qjgN5MjmQEthuAsrKXc5o1SEXWlShLVZz4+ZMAjDlXRwZ1iQ9U435mR4ucFZpe2Rbris9HbSH6Yzh0uRBycyxqiQ0DGNmEumY5ktBHk3q4OOm2z8SL70st/Cc58rMd+N7AQwgx8SBUMNhh+UFR0mNLZWDfLhkU0k4TWLm93DrRTirGGzMrHq+yru6qAUqOv9j++izF9ux+o6TfPfAyJ35gGV+31DdrebALCHYoT47BvBSr94nwZ3Hg8u+LuTe5VqwY/+MiFD76Dzf8XJSE7sjDNAaM56o9KR2zImi5SxPgd1GJGCu1tJvqVFaNcpx/ORFxNJI1fvq0X37+5fpfz5D90Zv04efcB1oVAZCFFsgHbcXSYKlUt+qmcllUJpXmKtBqAnETFWBZa7cnPjvZpTjCmJWsoGz0x6xLf15QttKwvWSy9agNUefWnKQKZfQjRh3R/QVz/b2aKa8mh3P/IHty7P+o+vzQNlabFTQwcyZTjOTEiT3Q+k6DoWA9D9nqtM6XrngBIEcsyYpv8i4tgYdnTvynO5gUBtjJKlOxbf8sZ95tpaeTuo77U+9bqszVyTMXn4JEeG9PnCmRVXWugkuPXWH1I5jQPARuopeG/zeQYzbVyrSECyRdzNeTpZP9sz7tBLqf21OyJPzEOFlRZb7kWWhaQ==\n\nYou see, the key is 3 chars shorter, EOT is missing\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "v/3.x"
      ],
      "created_at": "2025-11-28T11:46:42Z",
      "closed_at": "2025-12-03T18:17:09Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31219",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31200,
      "title": "Storage account: \"waiting for the Data Plane\" ... \" Missing Resource Identity After Create\"",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.14.0\n\n### AzureRM Provider Version\n\n4.52.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_storage_account\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_storage_account\" \"backend\" {\n  name                     = local.storage_account_name\n  resource_group_name      = azurerm_resource_group.backend.name\n  location                 = azurerm_resource_group.backend.location\n  account_kind             = \"StorageV2\"\n  account_tier             = \"Standard\"\n  account_replication_type = \"ZRS\"\n\n  default_to_oauth_authentication = true\n  min_tls_version                 = \"TLS1_2\"\n  shared_access_key_enabled       = false\n  public_network_access_enabled   = false\n  allow_nested_items_to_be_public = false\n\n  network_rules {\n    default_action = \"Deny\"\n  }\n\n  blob_properties {\n    versioning_enabled = true\n\n    delete_retention_policy {\n      days = 30\n    }\n\n    container_delete_retention_policy {\n      days = 30\n    }\n  }\n\n  share_properties {\n    retention_policy {\n      days = 30\n    }\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nmodule.tfstate_backend.azurerm_storage_account.backend: Creating...\nmodule.tfstate_backend.azurerm_storage_account.backend: Still creating... [00m10s elapsed]\nmodule.tfstate_backend.azurerm_storage_account.backend: Still creating... [00m20s elapsed]\nmodule.tfstate_backend.azurerm_storage_account.backend: Still creating... [00m30s elapsed]\n\u2577\n\u2502 Error: waiting for the Data Plane for Storage Account (Subscription: \"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\"\n\u2502 Resource Group Name: \"RESOURCE_GROUP_NAME\"\n\u2502 Storage Account Name: \"STORAGE_ACCOUNT_NAME\") to become available: waiting for the Blob Service to become available: polling failed: executing request: unexpected status 403 (403 Key based authentication is not permitted on this storage account.) with KeyBasedAuthenticationNotPermitted: Key based authentication is not permitted on this storage account.\n\u2502 RequestId:90f9c75e-e01e-0004-5f83-5e3009000000\n\u2502 Time:2025-11-26T03:17:14.6485251Z\n\u2502 \n\u2502   with module.tfstate_backend.azurerm_storage_account.backend,\n\u2502   on ../../modules/iac-tfmodule-backend/storage.tf line 7, in resource \"azurerm_storage_account\" \"backend\":\n\u2502    7: resource \"azurerm_storage_account\" \"backend\" {\n\u2502 \n\u2575\n\u2577\n\u2502 Error: Missing Resource Identity After Create: The Terraform provider unexpectedly returned no resource identity after having no errors in the resource create. This is always a problem with the provider and should be reported to the provider developer\n\u2502 \n\u2502   with module.tfstate_backend.azurerm_storage_account.backend,\n\u2502   on ../../modules/iac-tfmodule-backend/storage.tf line 7, in resource \"azurerm_storage_account\" \"backend\":\n\u2502    7: resource \"azurerm_storage_account\" \"backend\" {\n\u2502 \n\u2575\n```\n\n### Expected Behaviour\n\nCreation completed\n\n### Actual Behaviour\n\nApply crashed\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n- Maybe related: #31155 \n- Maybe related: #27840 ",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "waiting-response",
        "service/storage",
        "v/4.x",
        "service/resource"
      ],
      "created_at": "2025-11-26T15:53:12Z",
      "closed_at": "2025-12-02T19:00:57Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31200",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31141,
      "title": "Support for .net 10 in azurerm_linux_web_app",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Description\n\nYou can update to 10 manually but not via Terraform\n\n`Error: expected site_config.0.application_stack.0.dotnet_version to be one of [\"3.1\" \"5.0\" \"6.0\" \"7.0\" \"8.0\" \"9.0\"], got 10.0`\n\n### New or Affected Resource(s)/Data Source(s)\n\nazurerm_linux_web_app\n\n### Potential Terraform Configuration\n\n```hcl\napplication_stack {\n  dotnet_version = 10\n}\n```\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "service/app-service"
      ],
      "created_at": "2025-11-19T14:46:55Z",
      "closed_at": "2025-11-19T16:57:26Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31141",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31131,
      "title": "function_app_hybrid_connection_resource doesn't allow import when app service plan is Elastic, but works on creation",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.13.5\n\n### AzureRM Provider Version\n\n4.53.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm.function_app_hybrid_connection_resource\n\n### Terraform Configuration Files\n\n```hcl\ndoesn't matter, only happens during import\n```\n\n### Debug Output/Panic Output\n\n```shell\nError: unsupported plan type. Hybrid Connections are not supported on Consumption or Elastic service plans\n```\n\n### Expected Behaviour\n\nIt should allow Elastic plans during import\n\n### Actual Behaviour\n\nIt blows up for Elastic Plans\n\n### Steps to Reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\nhttps://github.com/hashicorp/terraform-provider-azurerm/blob/42b59122a16a835e64da22e313fcc3cab85b1128/internal/services/appservice/function_app_hybrid_connection_resource.go#L351C52-L351C53",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/functions",
        "v/4.x"
      ],
      "created_at": "2025-11-18T22:22:37Z",
      "closed_at": "2025-11-19T19:05:37Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31131",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31057,
      "title": "Multiple Arguments not correct in Dynatrace_monitor resource",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.10\n\n### AzureRM Provider Version\n\n4.51\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_dynatrace_monitor\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_dynatrace_monitor\" \"dynatrace\" {\n  name                     = \"dyn-${var.team}-${var.environment}-weu-${var.instance_number}\"\n  resource_group_name      = azurerm_resource_group.dynatrace.name\n  location                 = \"westeurope\"\n  monitoring_enabled       = true\n  marketplace_subscription = \"Active\"\n  tags                     = local.dynatracetags\n\n  identity {\n    type = \"SystemAssigned\"\n  }\n\n  user {\n    first_name   = \"AZURE\"\n    last_name    = \"DYNATRACE\"\n    email        = \"azure.dynatrace@xxxxxx.xxx\"\n    #phone_number = \"12345678\"   # Mandatory field but should not be needed\n    #country      = \"westeurope\" # Mandatory field but should not be needed\n  }\n\n  plan {\n    usage_type = \"COMMITTED\"\n    billing_cycle = \"MONTHLY\" # Should also allow YEARLY\n    plan = \"dynatrace_platform_subscription@xxxxxxxxxx\"\n  }\n  environment_properties {\n    environment_info {\n      environment_id = local.dynatrace_environment\n    }\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nRequired attribute \"phone_number\" not specified: An attribute named \"phone_number\" is required here\nRequired attribute \"country\" not specified: An attribute named \"country\" is required here\n\n\u2502 Error: expected plan.0.billing_cycle to be one of [\"MONTHLY\" \"WEEKLY\"], got YEARLY\n\u2502 \n\u2502   with azurerm_dynatrace_monitor.dynatrace,\n\u2502   on dynatrace.tf line 37, in resource \"azurerm_dynatrace_monitor\" \"dynatrace\":\n\u2502   37:     billing_cycle = \"YEARLY\" # Should also allow YEARLY but this causes a diff on each apply\n```\n\n### Expected Behaviour\n\n- The arguments phone_number and country should be optional and not mandatory. \n- The argument billing_cycle should also accept YEARLY in the Enum (next to the WEEKLY and MONTHLY values)\n\nI think that the Errors are in the dynatrace_monitor_resource.go file:\n```\n\t\t\t\t\t\"billing_cycle\": {\n\t\t\t\t\t\tType:     pluginsdk.TypeString,\n\t\t\t\t\t\tOptional: true,\n\t\t\t\t\t\tValidateFunc: validation.StringInSlice([]string{\n\t\t\t\t\t\t\t\"MONTHLY\",\n\t\t\t\t\t\t\t\"WEEKLY\",\n```\nand\n```\n\t\t\"user\": {\n\t\t\tType:     pluginsdk.TypeList,\n\t\t\tRequired: true,\n\t\t\tForceNew: true,\n\t\t\tMaxItems: 1,\n\t\t\tElem: &pluginsdk.Resource{\n\t\t\t\tSchema: map[string]*pluginsdk.Schema{\n\t\t\t\t\t\"country\": {\n\t\t\t\t\t\tType:         pluginsdk.TypeString,\n\t\t\t\t\t\tRequired:     true,\n\t\t\t\t\t\tValidateFunc: validation.StringIsNotEmpty,\n\t\t\t\t\t},\n\n\t\t\t\t\t\"email\": {\n\t\t\t\t\t\tType:         pluginsdk.TypeString,\n\t\t\t\t\t\tRequired:     true,\n\t\t\t\t\t\tValidateFunc: validate.EmailAddress,\n\t\t\t\t\t},\n\n\t\t\t\t\t\"first_name\": {\n\t\t\t\t\t\tType:         pluginsdk.TypeString,\n\t\t\t\t\t\tRequired:     true,\n\t\t\t\t\t\tValidateFunc: validation.StringIsNotEmpty,\n\t\t\t\t\t},\n\n\t\t\t\t\t\"last_name\": {\n\t\t\t\t\t\tType:         pluginsdk.TypeString,\n\t\t\t\t\t\tRequired:     true,\n\t\t\t\t\t\tValidateFunc: validation.StringIsNotEmpty,\n\t\t\t\t\t},\n\n\t\t\t\t\t\"phone_number\": {\n\t\t\t\t\t\tType:         pluginsdk.TypeString,\n\t\t\t\t\t\tRequired:     true,\n\t\t\t\t\t\tValidateFunc: validation.StringIsNotEmpty,\n\t\t\t\t\t},\n```\n\n### Actual Behaviour\n\nThe resource will fail because the missing phone_number and country fields and also because the billing_cycle contains something else then \"WEEKLY\" or \"MONTHLY\"\n\nBelow is a screenshot of the arguments of one of our Dynatrace monitor resources showing it has no phone number and country filled-in and that the billing cycle is set on YEARLY\n<img width=\"980\" height=\"549\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1360bccc-b10d-46e3-8eda-690daa5dad0b\" />\n\n### Steps to Reproduce\n\nterraform plan/apply\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "Hi @frisoklm , thanks for raising the issue. Could you please clarify which API version you are using when indicating that `billing_cycle` can be set to `YEARLY` and that `phone_number` and `country` are optional? I'll double check with the service team to make sure it is aligned with the currently API TF is using. Thank you.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "v/4.x",
        "service/dynatrace",
        "service/resource"
      ],
      "created_at": "2025-11-07T14:06:46Z",
      "closed_at": "2025-11-11T10:50:54Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31057",
      "comments_count": 5
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31056,
      "title": "Optional Filtering tag is mandatory in Dynatrace_tag_rules",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\n1.10\n\n### AzureRM Provider Version\n\n4.51\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_dynatrace_tag_rules\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_dynatrace_tag_rules\" \"dynatrace_tag_rules\" {\n  name       = \"default\"\n  monitor_id = azurerm_dynatrace_monitor.dynatrace.id\n\n  log_rule {\n    send_azure_active_directory_logs_enabled = false\n    send_activity_logs_enabled               = false\n    send_subscription_logs_enabled           = true\n  }\n\n  metric_rule {\n    sending_metrics_enabled = true\n  }\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nToo few blocks specified for \"filtering_tag\": At least 1 block(s) are expected for \"filtering_tag\"Terraform\n```\n\n### Expected Behaviour\n\nIt should be possible to create the azurerm_dynatrace_tag_rules resource without having the filtering_tag block inside the log_rule or metric_rule.\n\nIn the documentation is also stated as optional:\n\n> The log_rule block supports the following:\n> \n> [send_azure_active_directory_logs_enabled](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/dynatrace_tag_rules#send_azure_active_directory_logs_enabled-2) - (Optional) Send Azure Active Directory logs. The default value is false.\n> \n> [send_activity_logs_enabled](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/dynatrace_tag_rules#send_activity_logs_enabled-2) - (Optional) Send Activity logs. The default value is false.\n> \n> [send_subscription_logs_enabled](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/dynatrace_tag_rules#send_subscription_logs_enabled-2) - (Optional) Send Subscription logs. The default value is false.\n> \n> [filtering_tag](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/dynatrace_tag_rules#filtering_tag-3) - **(Optional)** Filtering tag for the log rule. A filtering_tag block as defined below.\n\n\n\nI think that the Error is in the dynatrace_tag_rules_resource.go file:\n\t\t\t\t\t\"filtering_tag\": {\n\t\t\t\t\t\tType:     pluginsdk.TypeList,\n\t\t\t\t\t\t**Required: true,\n\t\t\t\t\t\tMinItems: 1,**\n\t\t\t\t\t\tElem: &pluginsdk.Resource{\n\n### Actual Behaviour\n\nThe creation of the azurerm_dynatrace_tag_rules resource fails becasue the filtering_tag block is mandatory instead of optional.\n\n### Steps to Reproduce\n\nJust run the (default) code from above config \n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "v/4.x",
        "service/dynatrace"
      ],
      "created_at": "2025-11-07T13:23:38Z",
      "closed_at": "2025-11-10T21:06:44Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31056",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-azurerm",
      "issue_number": 31041,
      "title": "traffic_view_enabled keeps reverting true to false",
      "problem": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Community Note\n\n<!--- Please keep this note for the community --->\n\n* Please vote on this issue by adding a :thumbsup: [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n* Please do not leave comments along the lines of \"+1\", \"me too\" or \"any updates\", they generate extra noise for issue followers and do not help prioritize the request\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment and review the [contribution guide](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/contributing/README.md) to help.\n\n<!--- Thank you for keeping this note for the community --->\n\n\n### Terraform Version\n\nOpenTofu v1.10.3\n\n### AzureRM Provider Version\n\n4.51.0\n\n### Affected Resource(s)/Data Source(s)\n\nazurerm_traffic_manager_profile\n\n### Terraform Configuration Files\n\n```hcl\nresource \"azurerm_traffic_manager_profile\" \"tm_profile\" {\n  name                   = \"my-tm\"\n  resource_group_name    = \"my-rg\n  traffic_routing_method = \"Priority\"\n  traffic_view_enabled   = false # then set to true\n\n  dns_config {\n    relative_name = \"my-tm\"\n    ttl           = 500\n  }\n  monitor_config {\n    port = 443\n    protocol = \"HTTPS\"\n    path = \"/\"\n\n  }\n\n\n}\n```\n\n### Debug Output/Panic Output\n\n```shell\nn/a\n```\n\n### Expected Behaviour\n\n\nShould be able to enable/disable the traffic view at will. Seems like enable works, but does not disable. \n\n### Actual Behaviour\n\nDid not actually disable the traffic view\n\n### Steps to Reproduce\n\nCreate a traffic manager and set `traffic_view_enabled` to true and apply. Then set it to false and apply. It will show and apply the change successfully, but the change on the Azure side does not seem to process, the view still seems to be enabled later. \n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/traffic-manager",
        "v/4.x"
      ],
      "created_at": "2025-11-05T18:02:45Z",
      "closed_at": "2025-12-03T17:07:01Z",
      "url": "https://github.com/hashicorp/terraform-provider-azurerm/issues/31041",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25690,
      "title": "cloudfunctions2 - unable to specify direct_vpc_network_interface",
      "problem": "### Community Note\n\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request.\n* Please do not leave _+1_ or _me too_ comments, they generate extra noise for issue followers and do not help prioritize the request.\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment.\n* If an issue is assigned to a user, that user is claiming responsibility for the issue.\n* Customers working with a Google Technical Account Manager or Customer Engineer can ask them to [reach out internally](https://github.com/hashicorp/terraform-provider-google/wiki/Customer-Contact#raising-gcp-internal-issues-with-the-provider-development-team) to expedite investigation and resolution of this issue.\n\n\n### Terraform Version & Provider Version(s)\n\nTerraform v1.13.4\non AMD64\n+ provider registry.terraform.io/hashicorp/google v7.14.1\n+ provider registry.terraform.io/hashicorp/google-beta v7.14.1\n\n\n### Affected Resource(s)\n\ngoogle_cloudfunctions2_function\n\n### Terraform Configuration\n\n```tf\nresource \"google_cloudfunctions2_function\" \"function\" {\n  provider = google-beta\n  name = \"function-v2\"\n  location = \"us-central1\"\n  description = \"a new function\"\n\n  build_config {\n    runtime = \"nodejs20\"\n    entry_point = \"helloHttp\"  # Set the entry point\n    source {\n    storage_source {\n        bucket = google_storage_bucket.bucket.name\n        object = google_storage_bucket_object.object.name\n      }\n    }\n  }\n\n  service_config {\n    max_instance_count  = 1\n    available_memory    = \"256M\"\n    timeout_seconds     = 60\n    direct_vpc_network_interface {\n      network = \"default\"\n      subnetwork = \"default\"\n      tags = [\"tag1\", \"tag2\"]\n    }\n    direct_vpc_egress = \"VPC_EGRESS_ALL_TRAFFIC\"\n  }\n}\n```\n\n\n### Debug Output\n\nError: Unsupported block type\n\u2502 \n\u2502   on main.tf line 75, in resource \"google_cloudfunctions2_function\" \"cloud_functions_app\":\n\u2502   75:     \"direct_vpc_network_interface\" {\n\u2502 \n\u2502 Blocks of type \"direct_vpc_network_interface\" are not expected here.\n\n### Expected Behavior\n\nterraform apply works\n\n### Actual Behavior\n\nUnsupported block type error\n\n### Steps to reproduce\n\n1. `terraform apply`\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "service/cloudfunctions",
        "forward/review"
      ],
      "created_at": "2026-01-06T17:32:02Z",
      "closed_at": "2026-01-06T17:45:44Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25690",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25032,
      "title": "Add PSC Automation Config Attributes to `google_vertex_ai_index_endpoint`",
      "problem": "### Community Note\n\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request.\n* Please do not leave _+1_ or _me too_ comments, they generate extra noise for issue followers and do not help prioritize the request.\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment.\n* If an issue is assigned to a user, that user is claiming responsibility for the issue.\n* Customers working with a Google Technical Account Manager or Customer Engineer can ask them to [reach out internally](https://github.com/hashicorp/terraform-provider-google/wiki/Customer-Contact#raising-gcp-internal-issues-with-the-provider-development-team) to expedite investigation and resolution of this issue.\n\n\n### Description\n\nMissing `psc_automation_configs` on `google_vertex_ai_index_endpoint`, which is a necessary configuration for deploying Private Service Connect Vertex AI Vector Search endpoints.\n\n### New or Affected Resource(s)\n\n* google_vertex_ai_index_endpoint\n\n\n### Potential Terraform Configuration\n\n```tf\nresource \"google_vertex_ai_index_endpoint\" \"index_endpoint\" {\n  display_name = \"sample-endpoint\"\n  description  = \"A sample vertex endpoint\"\n  region       = \"us-central1\"\n  \n  labels = {\n    label-one = \"value-one\"\n  }\n\n  private_service_connect_config {\n    enable_private_service_connect = true\n    project_allowlist = [\n        data.google_project.project.name,\n    ]\n\n    psc_automation_configs {\n      project_id = data.google_project.project.id\n      network    = google_compute_network.network.id\n    }\n  }\n}\n\nresource \"google_compute_subnetwork\" \"subnetwork\" {\n  name          = \"subnetwork\"\n  ip_cidr_range = \"192.168.0.0/24\"\n  region        = \"us-central1\"\n  network       = google_compute_network.network.id\n}\n\nresource \"google_compute_network\" \"network\" {\n  name                    = \"network\"\n  auto_create_subnetworks = false\n}\n\ndata \"google_project\" \"project\" {}\n```\n\n### References\n\n#24402  \n#24600 \n\nb/459493214",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "size/s",
        "forward/linked",
        "service/aiplatform-matching-engine"
      ],
      "created_at": "2025-11-05T13:01:07Z",
      "closed_at": "2025-12-15T23:02:39Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25032",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25664,
      "title": "Failing test(s): TestAccContainerCluster_withNodeConfigLinuxNodeConfig",
      "problem": "### Impacted tests\n\nTestAccContainerCluster_withNodeConfigLinuxNodeConfig\n\n\n### Affected Resource(s)\n\ngoogle_container_cluster\n\n### Failure rates\n\n\n\n- ga: 100%\n\n\n\n- beta: 100%\n\n\n\n### Message(s)\n\n\n\n\n- [ga error message](https://storage.cloud.google.com/nightly-test-data/test-errors/ga/2025-12-30/TestAccContainerCluster_withNodeConfigLinuxNodeConfig-ga-2025-12-30.txt)\n\n\n\n\n\n- [beta error message](https://storage.cloud.google.com/nightly-test-data/test-errors/beta/2025-12-30/TestAccContainerCluster_withNodeConfigLinuxNodeConfig-beta-2025-12-30.txt)\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n- [ga debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_NIGHTLYTESTS/2025-12-30/9aa985e/debug-google-9aa985e-570184-TestAccContainerCluster_withNodeConfigLinuxNodeConfig.txt)\n\n\n\n\n\n- [beta debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS/2025-12-30/a5906da/debug-google-beta-a5906da-570396-TestAccContainerCluster_withNodeConfigLinuxNodeConfig.txt)\n\n\n\n\nb/472572720",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "service/container",
        "test-failure-100"
      ],
      "created_at": "2025-12-31T03:04:52Z",
      "closed_at": "2026-01-06T18:37:07Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25664",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 20959,
      "title": "Failing test(s): TestAccAccessApprovalSettings/organization",
      "problem": "### Impacted tests\n\n- TestAccAccessApprovalSettings/organization\n\n\n### Affected Resource(s)\n\n- google_project_access_approval_settings\n\n\n### Failure rates\n\n- 100% since 2025-01-14\n\n\n### Message(s)\n\n```\n=== RUN   TestAccAccessApprovalSettings/organization\n    resource_access_approval_organization_settings_test.go:46: Step 5/6 error: After applying this test step and performing a `terraform refresh`, the plan was not empty.\n        stdout\n        Terraform used the selected providers to generate the following execution\n        plan. Resource actions are indicated with the following symbols:\n          ~ update in-place\n        Terraform will perform the following actions:\n          # google_organization_access_approval_settings.organization_access_approval will be updated in-place\n          ~ resource \"google_organization_access_approval_settings\" \"organization_access_approval\" {\n                id                              = \"organizations/529579013760/accessApprovalSettings\"\n                name                            = \"organizations/529579013760/accessApprovalSettings\"\n                # (6 unchanged attributes hidden)\n              - enrolled_services {\n                  - cloud_product    = \"App Engine\" -> null\n                  - enrollment_level = \"BLOCK_ALL\" -> null\n                }\n              - enrolled_services {\n                  - cloud_product    = \"Cloud Dataflow\" -> null\n                  - enrollment_level = \"BLOCK_ALL\" -> null\n                }\n              + enrolled_services {\n                  + cloud_product    = \"all\"\n                  + enrollment_level = \"BLOCK_ALL\"\n                }\n            }\n        Plan: 0 to add, 1 to change, 0 to destroy.\n```\n\n\n### Nightly build test history\n\n- https://hashicorp.teamcity.com/test/1176907843211229648?currentProjectId=TerraformProviders_GoogleCloud_GOOGLE_NIGHTLYTESTS\n\n\nb/390705941",
      "solution": "This is similar to https://github.com/hashicorp/terraform-provider-google/issues/13716#issuecomment-1516655251 from about eight months ago, which was fixed by adding some sleeps.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "test-failure-100",
        "service/accessapproval"
      ],
      "created_at": "2025-01-17T21:30:39Z",
      "closed_at": "2026-02-05T19:17:06Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/20959",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 12793,
      "title": "Cannot create a google_sql_user of type CLOUD_IAM_SERVICE_ACCOUNT for mysql instances",
      "problem": "### Terraform Version\r\n\r\n```shell\r\nTerraform v0.14.11\r\n+ provider registry.terraform.io/cyrilgdn/postgresql v1.14.0\r\n+ provider registry.terraform.io/hashicorp/aws v3.56.0\r\n+ provider registry.terraform.io/hashicorp/google v3.65.0\r\n+ provider registry.terraform.io/hashicorp/google-beta v3.82.0\r\n+ provider registry.terraform.io/hashicorp/http v2.1.0\r\n```\r\n\r\n\r\n### Terraform Configuration Files\r\n\r\nWhat is this syntax? https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/sql_user#import\r\n\r\n`$ terraform import google_sql_user.users my-project/main-instance/my-domain.com/me\r\n`\r\nWhat is domain here?\r\n\r\nMy instance is mysql\r\nMy org is \"mycompany.com\"\r\nMy project is myproject_id\r\nMy connection name is: myproject_id:us-central1:my_instance\r\n\r\nThe user I'm importing is:\r\nname: myuser\r\nemail: myuser@myproject_id.iam.gserviceaccount.com\r\nAuthentication: IAM (service account)\r\n\r\nTF config\r\n```\r\nresource \"google_sql_user\" \"myuser\" {\r\n  name     = myuser@myproject_id.iam.gserviceaccount.com\r\n  instance = \"my_instance\"\r\n  type     = \"CLOUD_IAM_SERVICE_ACCOUNT\"\r\n}\r\n```\r\n\r\nAttempts that throw `Error: Cannot import non-existent remote object`\r\n```\r\nimport google_sql_user.myuser myproject_id/my_instance/myuser\r\nimport google_sql_user.myuser myproject_id/my_instance/myuser@myproject_id.iam.gserviceaccount.com\r\nimport google_sql_user.myuser myproject_id/my_instance/mycompany.com/myuser\r\nimport google_sql_user.myuser myproject_id/my_instance/mycompany.com/myuser@myproject_id.iam.gserviceaccount.com\r\n```\r\n\r\n\r\n### Debug Output\r\n\r\nnot relevant\r\n\r\n### Expected Behavior\r\n\r\nSome documentation with real examples\r\n\r\n### Actual Behavior\r\n\r\nI have no idea what the right syntax is\r\n\r\n### Steps to Reproduce\r\n\r\nNot relevant\r\n\r\n### Additional Context\r\n\r\n_No response_\r\n\r\n### References\r\n\r\n_No response_",
      "solution": "I finally got this after looking at the debug output- this really needs to be documented:\r\n\r\n```\r\n{\r\n\t\"kind\": \"sql#user\",\r\n\t\"etag\": \"dfsdfsdfsdfsdfsdf\",\r\n\t\"name\": \"myuser\",\r\n\t\"host\": \"%\",\r\n\t\"instance\": \"my_instance\",\r\n\t\"project\": \"myproject_id\",\r\n\t\"type\": \"CLOUD_IAM_SERVICE_ACCOUNT\"\r\n}\r\n```\r\n\r\nSo the import statement is this: `import google_sql_user.myuser myproject_id/my_instance/%/myuser`\r\n\r\nBut here is the problem if I create a user with this config I get an error saying the name must be the full email name:\r\n\r\n```\r\nresource \"google_sql_user\" \"myuser\" {\r\n  name     = myuser@myproject_id.iam.gserviceaccount.com\r\n  instance = \"my_instance\"\r\n  type     = \"CLOUD_IAM_SERVICE_ACCOUNT\"\r\n}\r\n```\r\n\r\nTerraform fails but the user is still created and its _name_ is myuser.\r\n\r\nSo currently the only we to terraform a mysql CLOUD_IAM_SERVICE_ACCOUNT user is to:\r\n1. Terraform with full email name and get an error\r\n2. Import the user that was created by terraform when it errored out into the resource definition\r\n3. Change the resource def to use the short name not the email name (I also had to include `host = \"%\"` to avoid a diff)\r\n\r\nI haven't tested creating a new user via terraform with the `host = \"%\"` field but regardless tf shouldn't error like it did.\n\n---\n\nThis may not be a bug, but there is a serious lack of documentation here.   The issue is you have to trim \".gserviceaccount.com\" off the end of any SA name.\r\n\r\ne.g. \r\n```\r\nresource \"google_sql_user\" \"iam_user\" {\r\n  for_each = local.iam_users_set\r\n  name     = endswith(each.key, \".gserviceaccount.com\") ? trimsuffix(each.key,\".gserviceaccount.com\") : each.key\r\n  project  = var.project_id\r\n  instance = var.database_instance_name\r\n  type = endswith(each.key, \".gserviceaccount.com\") ? (\r\n    \"CLOUD_IAM_SERVICE_ACCOUNT\"\r\n    ) : (\r\n    \"CLOUD_IAM_USER\"\r\n  )\r\n}\r\n```\r\nThere is zero documentation or examples on this and it's rather difficult to work out.  The best idea would be to simply fix the provider so it handles this.  i.e. put the above logic into the provider so it's not needed in every call to the resource.\r\n\n\n---\n\nHi @red8888 \n\nIt looks like this was fixed with https://github.com/hashicorp/terraform-provider-google/commit/b06c60056ddbc2b968205cca0174a38c59eaa9f9 but if you are still having the same issue please open a new ticket with your terraform code to check this again without using locals, variables or modules we cannot see. For sensitive data you could use examples like:\n\nproject = \"my-project\"\nuser = \"my-user@mydomain.com\"\norg_id = 1234567890\npassword = \"something\"",
      "labels": [
        "question"
      ],
      "created_at": "2022-10-14T18:29:14Z",
      "closed_at": "2026-02-05T17:04:01Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/12793",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 13838,
      "title": "How to add multiple postgresql_columns  to google_datastream_stream",
      "problem": "When I try:\r\n\r\n```\r\n\"postgresql_tables\" = {\r\n                \"postgresql_columns\" = {\r\n                  \"column\" = \"name\"\r\n                }\r\n\r\n                \"postgresql_columns\" = {\r\n                  \"column\" = \"id\"\r\n\r\n                  \"primary_key\" = true\r\n                }\r\n\r\n                \"table\" = \"will_sync\"\r\n              }\r\n```\r\n\r\nit just crashes... \r\n\r\nGoogle API Response Details\r\n\r\n```\r\nHTTP/2.0 200 OK\r\nAlt-Svc: h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000\r\nCache-Control: private\r\nContent-Type: application/json; charset=UTF-8\r\nDate: Fri, 24 Feb 2023 21:36:12 GMT\r\nServer: ESF\r\nVary: Origin\r\nVary: X-Origin\r\nVary: Referer\r\nX-Content-Type-Options: nosniff\r\nX-Frame-Options: SAMEORIGIN\r\nX-Xss-Protection: 0\r\n\r\n{\r\n  \"name\": \"projects/kelvin-datascience-staging/locations/us-central1/operations/operation-1677274559832-5f578ea5460e4-3123121e-66df20b8\",\r\n  \"metadata\": {\r\n    \"@type\": \"type.googleapis.com/google.cloud.datastream.v1.OperationMetadata\",\r\n    \"createTime\": \"2023-02-24T21:36:00.038421700Z\",\r\n    \"endTime\": \"2023-02-24T21:36:01.528873333Z\",\r\n    \"target\": \"projects/kelvin-datascience-staging/locations/us-central1/streams/test_stream_id\",\r\n    \"verb\": \"create\",\r\n    \"requestedCancellation\": false,\r\n    \"apiVersion\": \"v1\"\r\n  },\r\n  \"done\": true,\r\n  \"error\": {\r\n    \"code\": 13,\r\n    \"message\": \"an internal error has occurred\"\r\n  }\r\n}\r\n```\r\n\r\n```\r\n\u2502 Error: Error waiting to create Stream: Error waiting for Creating Stream:\r\n\u2502\r\n\u2502   with google_datastream_stream.test,\r\n\u2502   on datastream.tf line 22, in resource \"google_datastream_stream\" \"test\":\r\n\u2502   22: resource \"google_datastream_stream\" \"test\" {\r\n\u2502\r\n```",
      "solution": "One workaround that actually works is: to specify multiple `postgresql_columns` in the `exclude_objects` ",
      "labels": [
        "question"
      ],
      "created_at": "2023-02-24T21:21:14Z",
      "closed_at": "2026-02-05T16:59:53Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/13838",
      "comments_count": 14
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 10438,
      "title": "Add support for roles in google_sql_user",
      "problem": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or \"me too\" comments, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment. If the issue is assigned to the \"modular-magician\" user, it is either in the process of being autogenerated, or is planned to be autogenerated soon. If the issue is assigned to a user, that user is claiming responsibility for the issue. If the issue is assigned to \"hashibot\", a community member has claimed the issue already.\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nThe [SqlServerUserDetails](https://cloud.google.com/sql/docs/mysql/admin-api/rest/v1/users#SqlServerUserDetails) in the SQL Admin API supports specifying `serverRoles` that will be attached to a user on creation. This is a request to expose that functionality in the `google_sql_user` resource.\r\n\r\n### New or Affected Resource(s)\r\n\r\n<!--- Please list the new or affected resources and data sources. --->\r\n\r\n* google_sql_user\r\n\r\n### Potential Terraform Configuration\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n```tf\r\nresource \"google_sql_user\" \"users\" {\r\n  name     = \"me@example.com\"\r\n  instance = google_sql_database_instance.master.name\r\n  type     = \"CLOUD_IAM_USER\"\r\n  roles     = [ \"read\", \"write\", \"admin\" ] # or whatever roles a user might have in a database\r\n}\r\n```\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n\r\n* https://issuetracker.google.com/issues/195676939\r\n\r\n<!---\r\nNote Google Cloud customers who are working with a dedicated Technical Account Manager / Customer Engineer: to expedite the investigation and resolution of this issue, please refer to these instructions: https://github.com/hashicorp/terraform-provider-google/wiki/Customer-Contact#raising-gcp-internal-issues-with-the-provider-development-team\r\n--->\r\n\n\nb/314111627",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.\n\n---\n\nReopening this ticket. It is not actually resolved for any sql database types, even sql server. Per https://github.com/GoogleCloudPlatform/magic-modules/pull/6165#pullrequestreview-1030611518 SqlServerUserDetails is actually read-only.",
      "labels": [
        "enhancement",
        "size/s",
        "forward/linked",
        "feature-request",
        "service/sqladmin-infra"
      ],
      "created_at": "2021-10-28T21:18:01Z",
      "closed_at": "2026-02-03T16:17:15Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/10438",
      "comments_count": 18
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25629,
      "title": "Firebase App Hosting with GitHub connection: can't access deployments in Firebase UI",
      "problem": "### Community Note\n\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request.\n* Please do not leave _+1_ or _me too_ comments, they generate extra noise for issue followers and do not help prioritize the request.\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment.\n* If an issue is assigned to a user, that user is claiming responsibility for the issue.\n* Customers working with a Google Technical Account Manager or Customer Engineer can ask them to [reach out internally](https://github.com/hashicorp/terraform-provider-google/wiki/Customer-Contact#raising-gcp-internal-issues-with-the-provider-development-team) to expedite investigation and resolution of this issue.\n\n\n### Terraform Version & Provider Version(s)\n\nTerraform v1.14.0\non <architecture>\n+ provider registry.terraform.io/hashicorp/google v7.12.0\n+ provider registry.terraform.io/hashicorp/google-beta v7.13.0\n\n\n### Affected Resource(s)\n\ngoogle_firebase_app_hosting_backend\ngoogle_developer_connect_git_repository_link\ngoogle_developer_connect_connection\n\n### Terraform Configuration\n\n[Example Usage - Firebase App Hosting Backend Github](https://registry.terraform.io/providers/hashicorp/google/7.10.0/docs/resources/firebase_app_hosting_backend#example-usage---firebase-app-hosting-backend-github)\n```tf\nresource \"google_firebase_app_hosting_backend\" \"example\" {\n  project          = \"my-project-name\"\n\n  # Choose the region closest to your users\n  location         = \"us-central1\"\n  backend_id       = \"my-backend-gh\"\n  app_id           = \"1:0000000000:web:674cde32020e16fbce9dbd\"\n  display_name     = \"My Backend\"\n  serving_locality = \"GLOBAL_ACCESS\"\n  service_account  = \"firebase-app-hosting-compute@my-project-name.iam.gserviceaccount.com\"\n  environment      = \"prod\"\n\n  annotations = {\n    \"key\" = \"value\"\n  }\n\n  labels = {\n    \"key\" = \"value\"\n  }\n\n  codebase {\n    repository = google_developer_connect_git_repository_link.my-repository.name\n    root_directory = \"/\"\n  }\n}\n\nresource \"google_developer_connect_git_repository_link\" \"my-repository\" {\n  project  = \"my-project-name\"\n  location = \"us-central1\"\n\n  git_repository_link_id = \"my-repo\"\n  parent_connection = google_developer_connect_connection.my-connection.connection_id\n  clone_uri = \"https://github.com/myuser/myrepo.git\"\n}\n\n### Include these blocks only once per project if you are starting from scratch ###\nresource \"google_project_service_identity\" \"devconnect-p4sa\" {\n  provider = google-beta\n\n  project  = \"my-project-name\"\n  service  = \"developerconnect.googleapis.com\"\n}\n\nresource \"google_project_iam_member\" \"devconnect-secret\" {\n  project  = \"my-project-name\"\n  role     = \"roles/secretmanager.admin\"\n  member   = google_project_service_identity.devconnect-p4sa.member\n}\n###\n\n### Include these blocks only once per Github account ###\nresource \"google_developer_connect_connection\" \"my-connection\" {\n  project  = \"my-project-name\"\n  location = \"us-central1\"\n  connection_id = \"tf-test-connection-new\"\n  github_config {\n    github_app = \"FIREBASE\"\n  }\n  depends_on = [google_project_iam_member.devconnect-secret]\n}\n\noutput \"next_steps\" {\n  description = \"Follow the action_uri if present to continue setup\"\n  value = google_developer_connect_connection.my-connection.installation_state\n}\n###\n```\n\nLocally I used `europe-west4` as location\n\n### Debug Output\n\n_No response_\n\n### Expected Behavior\n\n- A Firebase App Hosting Backend with working Github connection\n- Deployment Settings can be changed on the Firebase App Hosting settings page\n- Rollouts can be triggered in the Firebase UI\n\n### Actual Behavior\n\n- The deployment settings page shows an infinite spinner\n- Creating rollouts in the Firebase UI doesn't work\n\n### Steps to reproduce\n\n1. `terraform apply`\n2. Go to https://console.cloud.google.com/developer-connect/connections?hl=en&invt=AcE3qg and \"Finish Setup\"\n3. `terraform apply`\n4. Go to https://console.firebase.google.com/project/PROJECT_ID/apphosting/backends/my-backend-gh/locations/europe-west4/settings/deployment => The page doesn't load\n   Creating a rollout doesn't work either because no valid branch name can be loaded\n\n### Important Factoids\n\nWhen creating the Firebase Backend via Firebase UI (click-ops) the connection works as expected\n\n### References\n\nhttps://registry.terraform.io/providers/hashicorp/google/7.10.0/docs/resources/firebase_app_hosting_backend#example-usage---firebase-app-hosting-backend-github",
      "solution": "I tested with a new project but had the same problem.\n\nAs no one else (the +1s are coming from my team mates) seem to have the same problem, I will close the issue\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "forward/review",
        "service/developerconnect",
        "service/firebaseapphosting"
      ],
      "created_at": "2025-12-22T09:56:05Z",
      "closed_at": "2026-01-05T16:02:26Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25629",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25619,
      "title": "Add ssl_config support for PostgreSQL in google_datastream_connection_profile resource",
      "problem": "### Community Note\n\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request.\n* Please do not leave _+1_ or _me too_ comments, they generate extra noise for issue followers and do not help prioritize the request.\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment.\n* If an issue is assigned to a user, that user is claiming responsibility for the issue.\n* Customers working with a Google Technical Account Manager or Customer Engineer can ask them to [reach out internally](https://github.com/hashicorp/terraform-provider-google/wiki/Customer-Contact#raising-gcp-internal-issues-with-the-provider-development-team) to expedite investigation and resolution of this issue.\n\n\n### Description\n\n**Use Case**\nWhen connecting Datastream to a Cloud SQL for PostgreSQL instance that requires client certificate authentication (`ssl_mode = TRUSTED_CLIENT_CERTIFICATE_REQUIRED`), we cannot configure the SSL certificates via Terraform.\n\n<img width=\"699\" height=\"622\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8917436b-815d-4814-ba3b-0b46ee113589\" />\n\nThe google_datastream_connection_profile resource currently supports ssl_config for MySQL connections but does not support it for PostgreSQL connections, even though the underlying GCP Datastream API and gcloud CLI fully support SSL/TLS client certificate authentication for PostgreSQL.\n\n**Requirement**\npostgresql_profile should support an ssl_config block identical to the MySQL implementation, allowing users to specify:\nclient_key - PEM-encoded private key\nclient_certificate - PEM-encoded client certificate\nca_certificate - PEM-encoded CA certificate\n\n### New or Affected Resource(s)\n\n* `google_datastream_connection_profile`\n\n\n\n### Potential Terraform Configuration\n\n```\nresource \"google_datastream_connection_profile\" \"postgres_source\" {\n  display_name          = \"postgres-source-profile\"\n  location              = \"us-central1\"\n  connection_profile_id = \"postgres-source-profile\"\n\n  postgresql_profile {\n    hostname = google_sql_database_instance.postgres.public_ip_address\n    port     = 5432\n    username = \"datastream_user\"\n    password = \"password\"\n    database = \"mydb\"\n\n    # This block is currently NOT supported for PostgreSQL but IS supported for MySQL & Mongodb\n    ssl_config {\n      client_key         = file(\"path/to/client-key.pem\")\n      client_certificate = file(\"path/to/client-cert.pem\")\n      ca_certificate     = file(\"path/to/server-ca.pem\")\n    }\n  }\n}\n```\n\n### References\n\n**GCP Documentation**\n[Datastream PostgreSQL source Terraform configuration](https://registry.terraform.io/providers/hashicorp/google/5.24.0/docs/resources/datastream_connection_profile)\n[gcloud SDK (SSL is supported)](https://docs.cloud.google.com/sdk/gcloud/reference/datastream/connection-profiles/create)\n\nThe gcloud CLI already supports SSL configuration for PostgreSQL:\n```\ngcloud datastream connection-profiles create my-profile \\\n  --type=postgresql \\\n  --postgresql-hostname=... \\\n  --postgresql-client-certificate=/path/to/cert.pem \\\n  --postgresql-client-key=/path/to/key.pem \\\n  --postgresql-ca-certificate=/path/to/ca.pem\n```\n",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "forward/review",
        "service/datastream"
      ],
      "created_at": "2025-12-19T18:20:30Z",
      "closed_at": "2026-01-05T17:51:25Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25619",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25522,
      "title": "Failing test(s): TestAccCloudRunV2WorkerPool_cloudrunv2WorkerPoolCustomAudiencesExample",
      "problem": "### Impacted tests\n\nTestAccCloudRunV2WorkerPool_cloudrunv2WorkerPoolCustomAudiencesExample\n\n\n### Affected Resource(s)\n\ngoogle_cloud_run_v2_worker_pool\n\n### Failure rates\n\n\n\n- ga: 100%\n\n\n\n- beta: 100%\n\n\n\n### Message(s)\n\n\n\n\n- [ga error message](https://storage.cloud.google.com/nightly-test-data/test-errors/ga/2025-12-11/TestAccCloudRunV2WorkerPool_cloudrunv2WorkerPoolCustomAudiencesExample-ga-2025-12-11.txt)\n\n\n\n\n\n- [beta error message](https://storage.cloud.google.com/nightly-test-data/test-errors/beta/2025-12-11/TestAccCloudRunV2WorkerPool_cloudrunv2WorkerPoolCustomAudiencesExample-beta-2025-12-11.txt)\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n- [ga debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_NIGHTLYTESTS/2025-12-11/1895994/debug-google-1895994-553190-TestAccCloudRunV2WorkerPool_cloudrunv2WorkerPoolCustomAudiencesExample.txt)\n\n\n\n\n\n- [beta debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS/2025-12-11/44b99aa/debug-google-beta-44b99aa-552757-TestAccCloudRunV2WorkerPool_cloudrunv2WorkerPoolCustomAudiencesExample.txt)\n\n\n\n\nb/468150506",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "service/run",
        "test-failure-100"
      ],
      "created_at": "2025-12-12T03:05:07Z",
      "closed_at": "2026-01-05T23:18:08Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25522",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25990,
      "title": "Query String length wrong limit in google_sql_database_instance",
      "problem": "### Community Note\n\nWe have an Enterprise Plus Mysql instance and there the query string length is 1048576. Docs: https://docs.cloud.google.com/sql/docs/mysql/using-query-insights\n\nIt works if I set it from the UI, but the Terraform resource gives this error:\n\nError: Error, failed to update instance settings for : googleapi: Error 400: Invalid request: Invalid query string length: 50240. Query String length should be 256-4500., invalid\n\n### Terraform Version & Provider Version(s)\n\nTerraform v1.14.3\non <architecture>\n+ provider registry.terraform.io/hashicorp/google v7.12.0\n+ provider registry.terraform.io/hashicorp/google-beta v7.12.0\n\n\n### Affected Resource(s)\n\ngoogle_sql_database_instance\n",
      "solution": "Actually.. I think [the resource is right](https://github.com/hashicorp/terraform-provider-google/blob/eb9524e00a582a53713dfa80efecfd2b0b4e264a/google/services/sql/resource_sql_database_instance.go#L799), the bug is in the module. @ggtisc you can take a look if that's correct and then the issue can be closed. I will open one in the module.\n\n---\n\nExisting issue here.\nhttps://github.com/hashicorp/terraform-provider-google/issues/24383\nWe're hoping this can be resolved soon \ud83d\ude4f\ud83c\udffb ",
      "labels": [
        "bug",
        "forward/review",
        "service/sqladmin-cp"
      ],
      "created_at": "2026-02-04T18:45:14Z",
      "closed_at": "2026-02-04T21:54:29Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25990",
      "comments_count": 6
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 15047,
      "title": "Unable to connect Dataform to Google Cloud Source Repository",
      "problem": "Hello,\r\nI followed the example usage to create Dataform resources with terraform provided in documentation:\r\n\r\n```\r\nresource \"google_sourcerepo_repository\" \"git_repository\" {\r\n  provider = google-beta\r\n  name = \"my/repository\"\r\n}\r\n\r\nresource \"google_secret_manager_secret\" \"secret\" {\r\n  provider = google-beta\r\n  secret_id = \"secret\"\r\n\r\n  replication {\r\n    automatic = true\r\n  }\r\n}\r\n\r\nresource \"google_secret_manager_secret_version\" \"secret_version\" {\r\n  provider = google-beta\r\n  secret = google_secret_manager_secret.secret.id\r\n\r\n  secret_data = \"secret-data\"\r\n}\r\n\r\nresource \"google_dataform_repository\" \"dataform_respository\" {\r\n  provider = google-beta\r\n  name = \"dataform_repository\"\r\n\r\n  git_remote_settings {\r\n      url = google_sourcerepo_repository.git_repository.url\r\n      default_branch = \"main\"\r\n      authentication_token_secret_version = google_secret_manager_secret_version.secret_version.id\r\n  }\r\n\r\n  workspace_compilation_overrides {\r\n    default_database = \"database\"\r\n    schema_suffix = \"_suffix\"\r\n    table_prefix = \"prefix_\"\r\n  }\r\n}\r\n```\r\nIt seems that Google Cloud Source Repositories doesn't work with this implementation due to its lack of token generation.\r\nHow can I connect my Google Cloud Source Repository to a newly created Dataform Repository?\r\nIs Github\\Gitlab\\Bitbucket mandatory in order to link git with dataform?\r\nDo you have any alternative solutions to solve this issue?\r\n\r\nRegards,",
      "solution": "@edwardmedia Terraform applies the resources successfully. The problem is that they actually don't work on the cloud platform. On UI, the following message appears:\r\n\r\n> We are unable to connect to your Git provider with the configured secret. Check that the token is valid and has not expired. [View docs on connecting a remote git repository](https://cloud.google.com/dataform/docs/connect-repository). \r\n\r\nAs a token I actually provided the string \"secret-data\" as I couldn't find where to generate it on google cloud source repositories.\r\nWhile creating a workspace in dataform repository, on UI, I then get this error:\r\n\r\n> `API request error: Remote repository 'https://source.developers.google.com/p/<project-id>/r/<source-repo-name>' could not be reached.`\r\n\r\nOn the documentation provided before, they just talk about connecting third-party repositories being Github\\Gitlab repositories to dataform.\n\n---\n\n@Stefn93 this site might not be the best place that can help you solve the problem. We are concerned about the terraform. If you experience failures when applying terraform configurations, that is what can help.  It sounds like this is not the case as you said `Terraform applies the resources successfully`.\r\n\r\nThere are many possible reasons that could cause your problems. Without Terraform, are you able to make it working? \n\n---\n\nThis is related with [this issue](https://issuetracker.google.com/issues/287850319) on Google's side, so, as noted before, it will be solved when Google solves this issue.\r\nAnswering to @edwardmedia : In my opinion, what could and **should** be fix is the *documentation*: it is misleading and could potentially make many people loose a lot of time if they think that it is possible to use CSR and (at least) currently is not the case.\r\nThe least that could be added is a warning; and maybe even better, in the meanwhile, to change the example for an external GIT provider that does, indeed, work.",
      "labels": [
        "question"
      ],
      "created_at": "2023-07-05T16:02:18Z",
      "closed_at": "2026-02-04T16:44:07Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/15047",
      "comments_count": 12
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 15212,
      "title": "cloudbuildv2_connection and cloudbuildv2_repository are not usable",
      "problem": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or \"me too\" comments, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment. If the issue is assigned to the \"modular-magician\" user, it is either in the process of being autogenerated, or is planned to be autogenerated soon. If the issue is assigned to a user, that user is claiming responsibility for the issue. If the issue is assigned to \"hashibot\", a community member has claimed the issue already.\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. Including use cases and why it would help you is a great way to convince maintainers to spend time on it. --->\r\nThe new api `google_cloudbuildv2_connection` and `google_cloudbuildv2_repository` are not usable without a way to make a trigger to use them.\r\nI didn't see a tutorial or a way in the elements.\r\n\r\n\r\n### New or Affected Resource(s)\r\n\r\n<!--- Please list the new or affected resources and data sources. Use google_* if all resources or data sources are affected. --->\r\n\r\n* google_cloudbuildv2_repository\r\n* google_cloudbuild_trigger\r\n\r\n### Potential Terraform Configuration\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n```tf\r\nresource \"google_secret_manager_secret\" \"private-key-secret\" {\r\n  provider = google-beta\r\n  secret_id = \"ghe-pk-secret\"\r\n\r\n  replication {\r\n    automatic = true\r\n  }\r\n}\r\n\r\nresource \"google_secret_manager_secret_version\" \"private-key-secret-version\" {\r\n  provider = google-beta\r\n  secret = google_secret_manager_secret.private-key-secret.id\r\n  secret_data = file(\"private-key.pem\")\r\n}\r\n\r\nresource \"google_secret_manager_secret\" \"webhook-secret-secret\" {\r\n  provider = google-beta\r\n  secret_id = \"github-token-secret\"\r\n\r\n  replication {\r\n    automatic = true\r\n  }\r\n}\r\n\r\nresource \"google_secret_manager_secret_version\" \"webhook-secret-secret-version\" {\r\n  provider = google-beta\r\n  secret = google_secret_manager_secret.webhook-secret-secret.id\r\n  secret_data = \"<webhook-secret-data>\"\r\n}\r\n\r\ndata \"google_iam_policy\" \"p4sa-secretAccessor\" {\r\n  provider = google-beta\r\n  binding {\r\n    role = \"roles/secretmanager.secretAccessor\"\r\n    // Here, 123456789 is the Google Cloud project number for the project that contains the connection.\r\n    members = [\"serviceAccount:service-123456789@gcp-sa-cloudbuild.iam.gserviceaccount.com\"]\r\n  }\r\n}\r\n\r\nresource \"google_secret_manager_secret_iam_policy\" \"policy-pk\" {\r\n  provider = google-beta\r\n  secret_id = google_secret_manager_secret.private-key-secret.secret_id\r\n  policy_data = data.google_iam_policy.p4sa-secretAccessor.policy_data\r\n}\r\n\r\nresource \"google_secret_manager_secret_iam_policy\" \"policy-whs\" {\r\n  provider = google-beta\r\n  secret_id = google_secret_manager_secret.webhook-secret-secret.secret_id\r\n  policy_data = data.google_iam_policy.p4sa-secretAccessor.policy_data\r\n}\r\n\r\nresource \"google_cloudbuildv2_connection\" \"my-connection\" {\r\n  provider = google-beta\r\n  location = \"us-central1\"\r\n  name = \"my-terraform-ghe-connection\"\r\n\r\n  github_enterprise_config {\r\n    host_uri = \"https://ghe.com\"\r\n    private_key_secret_version = google_secret_manager_secret_version.private-key-secret-version.id\r\n    webhook_secret_secret_version = google_secret_manager_secret_version.webhook-secret-secret-version.id\r\n    app_id = 200\r\n    app_slug = \"gcb-app\"\r\n    app_installation_id = 300\r\n  }\r\n\r\n  depends_on = [\r\n    google_secret_manager_secret_iam_policy.policy-pk,\r\n    google_secret_manager_secret_iam_policy.policy-whs\r\n  ]\r\n}\r\n\r\nresource \"google_cloudbuildv2_repository\" \"my-repository\" {\r\n  provider = google-beta\r\n  name = \"my-terraform-ghe-repo\"\r\n  location = \"us-central1\"\r\n  parent_connection = google_cloudbuildv2_connection.my-connection.id\r\n  remote_uri = \"https://ghe.com/hashicorp/terraform-provider-google.git\"\r\n}\r\n\r\nresource \"google_cloudbuild_trigger\" \"filename-trigger\" {\r\n  location = \"us-central1\"\r\n\r\n  repository {\r\n    repo_name   = google_cloudbuildv2_repository.my-repository.id\r\n  }\r\n\r\n  substitutions = {\r\n    _FOO = \"bar\"\r\n    _BAZ = \"qux\"\r\n  }\r\n\r\n  filename = \"cloudbuild.yaml\"\r\n}\r\n```\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n\r\n<!---\r\nNote Google Cloud customers who are working with a dedicated Technical Account Manager / Customer Engineer: to expedite the investigation and resolution of this issue, please refer to these instructions: https://github.com/hashicorp/terraform-provider-google/wiki/Customer-Contact#raising-gcp-internal-issues-with-the-provider-development-team\r\n--->\r\n",
      "solution": "@tomerslice I was able to find a few guides like [this one](https://cloud.google.com/build/docs/automating-builds/github/connect-host-github-enterprise?generation=2nd-gen), which include Terraform examples. If you're still having trouble, could you expand on the issue you're having? It's not clear to me if you are observing an issue with the provider, or asking about how to use a resource.\n\n---\n\n@Helcaraxan can you share with us your solution? I have 1:1 copy of the example linked in your post getting `Error creating Trigger: googleapi: Error 400: Request contains an invalid argument.`\n\n---\n\n> @Helcaraxan can you share with us your solution? I have 1:1 copy of the example linked in your post getting `Error creating Trigger: googleapi: Error 400: Request contains an invalid argument.`\r\n\r\nI was tearing my hair out about this but eventually stumbled upon the fact that\r\n- service account is now not optional\r\n- the service account has to be specified in the format `projects/{PROJECT_ID}/serviceAccounts/{ACCOUNT_ID_OR_EMAIL}`\r\n\r\nNo idea why the service account is specified in a different format for this particular resource!\r\n\r\nSee https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/cloudbuild_trigger#service_account",
      "labels": [
        "question",
        "service/cloudbuild"
      ],
      "created_at": "2023-07-18T16:40:00Z",
      "closed_at": "2026-02-04T16:41:21Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/15212",
      "comments_count": 9
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 15596,
      "title": "Trying to update from v3 to v4 but removed attributes in tfstate is added back by v3",
      "problem": "Hello! We're currently trying to upgrade from v3 to v4 and noticed that there are some removed attributes like `bucket_policy_only` in `google_storage_bucket`. We deleted the attribute by manually editing the terraform state file. But whenever terraform refresh is ran while still in v3 (either by me or other developers), the attribute gets added back. We don't explicitly set `bucket_policy_only` in any of our .tf files. We also tried this in `authorized_gae_applications` of `google_sql_database_instance` and same issue happens,\r\n\r\nIs there a general process on how to go about removing the attributes while still in v3 such that we'll have everything compatible to v4 when we actually update the versions used? Thanks!",
      "solution": "@gojanpaolo I guess after you upgraded the provider version from v3 to v4 with `terraform init --upgrade`, things do not work as you wanted so you need to manually fix them? \r\n\r\nDo you have a specific config that you can show us? Please detail the steps how to repro and where to see the issue. \r\n\r\n```\r\nThose attributes does not seem to be automatically handled by terraform / google provider.\r\n```\r\n\r\n\n\n---\n\nAh yes `terraform state pull`. It's only to check that the deprecated attribute (`bucket_policy_only`) is there. It's not necessary to actually reproduce the issue.\r\n\r\nStep 5 demonstrates that it's broken because of the removed attribute in v4.\r\n\r\nOur actual state file resides in a storage bucket.",
      "labels": [
        "question"
      ],
      "created_at": "2023-08-22T17:10:15Z",
      "closed_at": "2026-02-04T16:39:55Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/15596",
      "comments_count": 14
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 16888,
      "title": "Spanner Autoscaling",
      "problem": "\r\nI have a Google Spanner Instance and databases in my project, While trying to update the code with autoscaling config I was unable to update the existing instance. error message: Error 400: cannot update an instance or instance partition that does not have an existing autoscaling config.\r\n\r\n ",
      "solution": " It looks like this was fixed with https://github.com/GoogleCloudPlatform/magic-modules/pull/9814\n\nIf the error persists please open a new issue sharing your terraform code without using locals, variables or modules. For sensitive data you could use examples like:\n\nproject = \"my-project\"\nuser = \"my-user@my-domain.com\"\norg_id = 1234567890",
      "labels": [
        "question"
      ],
      "created_at": "2024-01-02T18:06:02Z",
      "closed_at": "2026-02-04T16:34:10Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/16888",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25665,
      "title": "Failing test(s): TestAccSqlDatabaseInstance_Edition_Downgrade",
      "problem": "### Impacted tests\n\nTestAccSqlDatabaseInstance_Edition_Downgrade\n\n\n### Affected Resource(s)\n\ngoogle_sql_database_instance\n\n### Failure rates\n\n\n\n- ga: 100%\n\n\n\n- beta: 0%\n\n\n\n### Message(s)\n\n\n\n\n- [ga error message](https://storage.cloud.google.com/nightly-test-data/test-errors/ga/2025-12-30/TestAccSqlDatabaseInstance_Edition_Downgrade-ga-2025-12-30.txt)\n\n\n\n\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n- [ga debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_NIGHTLYTESTS/2025-12-30/9aa985e/debug-google-9aa985e-570697-TestAccSqlDatabaseInstance_Edition_Downgrade.txt)\n\n\n\n\n\n\n\n\nb/472573407",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "test-failure-100",
        "service/sqladmin-cp"
      ],
      "created_at": "2025-12-31T03:04:53Z",
      "closed_at": "2026-01-03T03:05:17Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25665",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25500,
      "title": "Failing test(s): TestAccDeveloperConnectConnection_developerConnectConnectionGitlabUpdate",
      "problem": "### Impacted tests\n\nTestAccDeveloperConnectConnection_developerConnectConnectionGitlabUpdate\n\n\n### Affected Resource(s)\n\ngoogle_developer_connect_connection\n\n### Failure rates\n\n\n\n- ga: 100%\n\n\n\n- beta: 100%\n\n\n\n### Message(s)\n\n\n\n\n- [ga error message](https://storage.cloud.google.com/nightly-test-data/test-errors/ga/2025-12-10/TestAccDeveloperConnectConnection_developerConnectConnectionGitlabUpdate-ga-2025-12-10.txt)\n\n\n\n\n\n- [beta error message](https://storage.cloud.google.com/nightly-test-data/test-errors/beta/2025-12-10/TestAccDeveloperConnectConnection_developerConnectConnectionGitlabUpdate-beta-2025-12-10.txt)\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n- [ga debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_NIGHTLYTESTS/2025-12-10/7b3b52c/debug-google-7b3b52c-552195-TestAccDeveloperConnectConnection_developerConnectConnectionGitlabUpdate.txt)\n\n\n\n\n\n- [beta debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS/2025-12-10/dc6168b/debug-google-beta-dc6168b-552200-TestAccDeveloperConnectConnection_developerConnectConnectionGitlabUpdate.txt)\n\n\n\n\nb/467814971",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "test-failure-100",
        "service/developerconnect"
      ],
      "created_at": "2025-12-11T03:05:41Z",
      "closed_at": "2026-01-03T03:05:18Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25500",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25914,
      "title": "google_compute_zones data source includes AI zones",
      "problem": "### Community Note\n\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request.\n* Please do not leave _+1_ or _me too_ comments, they generate extra noise for issue followers and do not help prioritize the request.\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment.\n* If an issue is assigned to a user, that user is claiming responsibility for the issue.\n* Customers working with a Google Technical Account Manager or Customer Engineer can ask them to [reach out internally](https://github.com/hashicorp/terraform-provider-google/wiki/Customer-Contact#raising-gcp-internal-issues-with-the-provider-development-team) to expedite investigation and resolution of this issue.\n\n\n### Terraform Version & Provider Version(s)\n\nOpenTofu v1.10.6\non linux_amd64\n+ provider registry.opentofu.org/hashicorp/google v7.16.0\n+ provider registry.opentofu.org/hashicorp/google-beta v7.16.0\n\n### Affected Resource(s)\n\ngoogle_compute_zones\n\n### Terraform Configuration\n\n```tf\nterraform {\n  required_providers {\n    google = {\n      source  = \"hashicorp/google\"\n      version = \"7.16.0\"\n    }\n  }\n}\n\nprovider \"google\" {\n  project = \"PROJECT_ID\"\n}\n\ndata \"google_compute_zones\" \"available\" {\n  region = \"us-south1\"\n  status = \"UP\"\n}\n\n```\n\n\n### Debug Output\n\nhttps://gist.github.com/jameshartig/f282c87a9222b4234325c453335a283b\n\n### Expected Behavior\n\n`[\"us-south1-a\", \"us-south1-b\", \"us-south1-c\"]`\n\nI expect AI zones to not be returned unless opted into. Many Google services are not available in AI zones and this has broken our existing code because things are trying to be set up in AI zones.\n\n### Actual Behavior\n\n`[\"us-south1-a\" \"us-south1-ai1b\" \"us-south1-b\" \"us-south1-c\"]`\n\nAI zones are included but shouldn't be.\n\n### Steps to reproduce\n\n1. Run plan\n\n### Important Factoids\n\n_No response_\n\n### References\n\n[Related Google Cloud Go Client issue](https://github.com/googleapis/google-cloud-go/issues/13734)\n\n[Documentation about AI Zones](https://docs.cloud.google.com/compute/docs/regions-zones/ai-zones)\n\nThe above says:\n> You must enable the --extraLocationTypes flag when using the [locations.list API](https://docs.cloud.google.com/service-infrastructure/docs/service-metadata/reference/rest/v1/locations/list) to ensure AI zones appear only to those who intend to use them.",
      "solution": "There was a Google incident declared for this and the latest update is:\n\n> The rollback is completed for us-central1 and our engineering team continues to actively work to expedite the mitigation for us-south1.\n> The issue is mitigated for us-central1 and the mitigation for us-south1 is expected to complete by Thursday, 2026-01-29 18:00 PST.\n> We will provide more information by Thursday, 2026-01-29 18:30 US/Pacific with current details.",
      "labels": [
        "bug"
      ],
      "created_at": "2026-01-27T18:17:56Z",
      "closed_at": "2026-02-02T18:11:02Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25914",
      "comments_count": 7
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 17606,
      "title": "Missing link in documentation nested_fast_socket in google_container_cluster ",
      "problem": "### Community Note\n\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request.\r\n* Please do not leave _+1_ or _me too_ comments, they generate extra noise for issue followers and do not help prioritize the request.\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment.\r\n* If an issue is assigned to a user, that user is claiming responsibility for the issue.\r\n* Customers working with a Google Technical Account Manager or Customer Engineer can ask them to [reach out internally](https://github.com/hashicorp/terraform-provider-google/wiki/Customer-Contact#raising-gcp-internal-issues-with-the-provider-development-team) to expedite investigation and resolution of this issue.\r\n\n\n### Terraform Version\n\n5.20.0\n\n### Affected Resource(s)\n\ngoogle_container_cluster\n\n### Terraform Configuration\n\n_No response_\n\n### Debug Output\n\n_No response_\n\n### Expected Behavior\n\nThe NCCL fast socket link in Google container_cluster points a link to the structure of how to use it but the link is broken. \r\n\r\nfast_socket link - (works fine)\r\nhttps://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/container_cluster.html#fast_socket\r\n\r\nstructure of how to use it - (broken)\r\nhttps://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/container_cluster.html#nested_fast_socket (broken)\n\n### Actual Behavior\n\nThe below link should take to the structure of using the fast_socket\r\nhttps://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/container_cluster.html#nested_fast_socket\n\n### Steps to reproduce\n\n_No response_\n\n### Important Factoids\n\n_No response_\n\n### References\n\n_No response_\n\nb/330363199",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "documentation",
        "size/s",
        "forward/linked",
        "service/container"
      ],
      "created_at": "2024-03-17T07:28:51Z",
      "closed_at": "2026-01-02T15:55:22Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/17606",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 24494,
      "title": "Failing test(s): TestAccBigqueryDataTransferConfig",
      "problem": "### Impacted tests\n\nTestAccBigqueryDataTransferConfig\n\n\n### Affected Resource(s)\n\ngoogle_bigquery_data_transfer_config\n\n### Failure rates\n\n\n\n- ga: 100%\n\n\n\n- beta: 29%\n\n\n\n### Message(s)\n\n\n\n\n- [ga error message](https://storage.cloud.google.com/nightly-test-data/test-errors/ga/2025-09-25/TestAccBigqueryDataTransferConfig-ga-2025-09-25.txt)\n\n\n\n\n\n- [beta error message](https://storage.cloud.google.com/nightly-test-data/test-errors/beta/2025-09-25/TestAccBigqueryDataTransferConfig-beta-2025-09-25.txt)\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n- [ga debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_NIGHTLYTESTS/2025-09-25/beb95f7/debug-google-beb95f7-480900-TestAccBigqueryDataTransferConfig.txt)\n\n\n\n\n\n- [beta debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS/2025-09-25/945fd4b/debug-google-beta-945fd4b-481282-TestAccBigqueryDataTransferConfig.txt)\n\n\n\n\nb/447477915",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "test-failure-100",
        "service/bigquery"
      ],
      "created_at": "2025-09-26T02:05:51Z",
      "closed_at": "2026-01-02T17:57:52Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/24494",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25667,
      "title": "Title",
      "problem": "### What kind of contribution is this issue about?\n\nOther (specify in details)\n\n### Details\n\nNo comment at this time\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "technical-debt"
      ],
      "created_at": "2026-01-01T04:01:38Z",
      "closed_at": "2026-01-02T18:55:20Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25667",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 20929,
      "title": "Missing sslConfig support for PostgressqlProfile in projects.locations.connectionProfiles.ConnectionProfile",
      "problem": "### Community Note\n\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request.\n* Please do not leave _+1_ or _me too_ comments, they generate extra noise for issue followers and do not help prioritize the request.\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment.\n* If an issue is assigned to a user, that user is claiming responsibility for the issue.\n* Customers working with a Google Technical Account Manager or Customer Engineer can ask them to [reach out internally](https://github.com/hashicorp/terraform-provider-google/wiki/Customer-Contact#raising-gcp-internal-issues-with-the-provider-development-team) to expedite investigation and resolution of this issue.\n\n\n### Description\n\nConnectionProfiles API, [here](https://cloud.google.com/datastream/docs/reference/rest/v1/projects.locations.connectionProfiles#PostgresqlProfile) supports configuring sslConfig according to the document, however the terraform provider is missing those configuration:\n\nhttps://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/datastream_connection_profile#nested_postgresql_profile\n\n### New or Affected Resource(s)\n\n* google_datastream_connection_profile\n\n\n### Potential Terraform Configuration\n\n```tf \nresource \"google_datastream_connection_profile\" \"cdc\" {\n  display_name          = \"CDC source\"\n  location              = \"region\"\n  connection_profile_id = \"unique-id\"\n  postgresql_profile {\n    hostname = \"ip_address\"\n    username = \"username\"\n    password = \"password\"\n    database = \"database\"\n    ssl_config {\n      server_and_client_verification {\n         client_certificate = \"\"\n         client_key = \"\"\n         ca_certificate = \"\"\n      }\n    }\n  }\n}\n```\n\n\n### References\n\n_No response_\n\nb/391379743",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement",
        "size/s",
        "forward/linked",
        "service/datastream"
      ],
      "created_at": "2025-01-15T19:52:46Z",
      "closed_at": "2026-01-02T19:58:24Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/20929",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25649,
      "title": "Failing test(s): TestAccWorkbenchInstance_workbenchInstanceLabelsStoppedExample",
      "problem": "### Impacted tests\n\nTestAccWorkbenchInstance_workbenchInstanceLabelsStoppedExample\n\n\n### Affected Resource(s)\n\ngoogle_workbench_instance\n\n### Failure rates\n\n\n\n- ga: 100%\n\n\n\n- beta: 29%\n\n\n\n### Message(s)\n\n\n\n\n- [ga error message](https://storage.cloud.google.com/nightly-test-data/test-errors/ga/2025-12-25/TestAccWorkbenchInstance_workbenchInstanceLabelsStoppedExample-ga-2025-12-25.txt)\n\n\n\n\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n- [ga debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_NIGHTLYTESTS/2025-12-25/4f1f64e/debug-google-4f1f64e-566407-TestAccWorkbenchInstance_workbenchInstanceLabelsStoppedExample.txt)\n\n\n\n\n\n\n\n\nb/471687496",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "test-failure-100",
        "service/notebooks"
      ],
      "created_at": "2025-12-26T03:04:36Z",
      "closed_at": "2025-12-31T03:04:57Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25649",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25628,
      "title": "Failing test(s): TestAccApigeeAppGroup_apigeeAppGroupWithAttributesTestExample",
      "problem": "### Impacted tests\n\nTestAccApigeeAppGroup_apigeeAppGroupWithAttributesTestExample\n\n\n### Affected Resource(s)\n\ngoogle_apigee_app_group\n\n### Failure rates\n\n\n\n- ga: 14%\n\n\n\n- beta: 100%\n\n\n\n### Message(s)\n\n\n\n\n\n\n\n\n- [beta error message](https://storage.cloud.google.com/nightly-test-data/test-errors/beta/2025-12-21/TestAccApigeeAppGroup_apigeeAppGroupWithAttributesTestExample-beta-2025-12-21.txt)\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n\n\n\n\n- [beta debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS/2025-12-21/a8264db/debug-google-beta-a8264db-562368-TestAccApigeeAppGroup_apigeeAppGroupWithAttributesTestExample.txt)\n\n\n\n\nb/470829547",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "service/apigee",
        "test-failure-100"
      ],
      "created_at": "2025-12-22T03:04:33Z",
      "closed_at": "2025-12-31T03:04:58Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25628",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 20276,
      "title": "Failing test(s): TestAccVertexAIFeatureOnlineStore_*: Bigtable online store no longer supports embedding management",
      "problem": "### Impacted tests\r\n\r\n- TestAccVertexAIFeatureOnlineStore_vertexAiFeatureonlinestoreWithBetaFieldsBigtableExample\r\n- TestAccVertexAIFeatureOnlineStoreFeatureview_vertexAiFeatureonlinestoreFeatureviewWithVectorSearchExample\r\n\r\n\r\n### Affected Resource(s)\r\n\r\n- google_vertex_ai_feature_online_store\r\n\r\n\r\n### Failure rates\r\n\r\n- 100% since 2024-08-13\r\n\r\n\r\n### Message(s)\r\n\r\n```\r\n vcr_utils.go:152: Step 1/2 error: Error running apply: exit status 1\r\n        Error: Error creating FeatureOnlineStore: googleapi: Error 400: Bigtable online store no longer supports embedding management. Please use Optimized instead.\r\n          with google_vertex_ai_feature_online_store.featureonlinestore\r\n```\r\n\r\n\r\n### Nightly build test history\r\n\r\nhttps://hashicorp.teamcity.com/test/753681418710343357?currentProjectId=TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS\n\nb/378169094",
      "solution": "resolved by https://github.com/GoogleCloudPlatform/magic-modules/pull/13755",
      "labels": [
        "test-failure",
        "forward/linked",
        "test-failure-100",
        "service/aiplatform-featurestore"
      ],
      "created_at": "2024-11-09T00:51:55Z",
      "closed_at": "2026-01-30T22:17:12Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/20276",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25878,
      "title": "google_monitoring_alert_policy Error 404: Notification channel not found",
      "problem": "### Community Note\n\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request.\n* Please do not leave _+1_ or _me too_ comments, they generate extra noise for issue followers and do not help prioritize the request.\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment.\n* If an issue is assigned to a user, that user is claiming responsibility for the issue.\n* Customers working with a Google Technical Account Manager or Customer Engineer can ask them to [reach out internally](https://github.com/hashicorp/terraform-provider-google/wiki/Customer-Contact#raising-gcp-internal-issues-with-the-provider-development-team) to expedite investigation and resolution of this issue.\n\n\n### Terraform Version & Provider Version(s)\n\nTerraform v1.1.3\non linux_amd64\n\nprovider registry.terraform.io/hashicorp/google v4.5.0\nprovider registry.terraform.io/hashicorp/random v3.1.0\n\n\n### Affected Resource(s)\n\ngoogle_monitoring_alert_policy\n\n### Terraform Configuration\n\n```tf\nresource \"google_monitoring_notification_channel\" \"infra_email\" {\n  project      = \"ops-project\"\n  display_name = \"Infra Notification Channel\"\n  type         = \"email\"\n  labels = {\n    email_address = \"<email address>\"\n  }\n}\n```\n\n```tf\ndata \"google_monitoring_notification_channel\" \"infra_email\" {\n  project      = \"ops-project\"\n  display_name = \"Infra Notification Channel\"\n}\n\nresource \"google_monitoring_alert_policy\" \"example_alert\" {\n  project               = \"user-project\"\n  display_name          = \"example alert\"\n  notification_channels = data.google_monitoring_notification_channel.infra_email.*.name\n  ...\n}\n```\n\n### Debug Output\n\n\n\n\n### Expected Behavior\n\nNo error.\n\n### Actual Behavior\n\nError: Error updating AlertPolicy \"projects/intrinsic-assets-prod/alertPolicies/4392447370202719671\": googleapi: Error 404: Notification channel not found: 18160479081545404444\n\n### Steps to reproduce\n\n1. `terraform apply`\n\n### Important Factoids\n\nThe error below above that the data-resource has been properly initialized. Assuming that since it has discovered the notification-channel id. Hence \n\nI can also `gcloud alpha monitoring channels list --project=<ops-project> | grep -C10 18160479081545404444` and see the notification channel.\n\nPreviously we use the above pattern with the data-resource on the same project and that worked. The error only happens if the projects differ. We tried to use a different project as we'd like to avoid creating the same notification channels multiple times.\n\n### References\n\n_No response_",
      "solution": "gemini recommends to use\n```\n# This resource links the projects. \n# It tells user-project: \"You can see and use resources from ops-project\"\nresource \"google_monitoring_monitored_project\" \"ops_in_user_scope\" {\n  # The 'metrics_scope' is the project that will host the alert (your user-project)\n  metrics_scope = \"user-project\"\n\n  # The 'name' is the project being added to the scope (your ops-project)\n  # NOTE: This must be the PROJECT_ID (the string), not the numeric ID.\n  name = \"ops-project\"\n}\n```\nI'll try this next. If that worked the \"404 error\" is really wrong.",
      "labels": [
        "bug",
        "service/monitoring-alerting",
        "forward/review"
      ],
      "created_at": "2026-01-23T11:17:41Z",
      "closed_at": "2026-01-23T18:21:48Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25878",
      "comments_count": 6
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25091,
      "title": "Failing test(s): TestAccApigeeApiProduct_apigeeApiProduct_full",
      "problem": "### Impacted tests\n\nTestAccApigeeApiProduct_apigeeApiProduct_full\n\n\n### Affected Resource(s)\n\ngoogle_apigee_api_product\n\n### Failure rates\n\n\n\n- ga: 100%\n\n\n\n- beta: 29%\n\n\n\n### Message(s)\n\n\n\n\n- [ga error message](https://storage.cloud.google.com/nightly-test-data/test-errors/ga/2025-11-09/TestAccApigeeApiProduct_apigeeApiProduct_full-ga-2025-11-09.txt)\n\n\n\n\n\n- [beta error message](https://storage.cloud.google.com/nightly-test-data/test-errors/beta/2025-11-09/TestAccApigeeApiProduct_apigeeApiProduct_full-beta-2025-11-09.txt)\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n- [ga debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_NIGHTLYTESTS/2025-11-09/57bc314/debug-google-57bc314-523336-TestAccApigeeApiProduct_apigeeApiProduct_full.txt)\n\n\n\n\n\n- [beta debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS/2025-11-09/713b697/debug-google-beta-713b697-522860-TestAccApigeeApiProduct_apigeeApiProduct_full.txt)\n\n\n\n\nb/459261725",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "service/apigee",
        "test-failure-100"
      ],
      "created_at": "2025-11-10T03:04:38Z",
      "closed_at": "2025-12-30T03:04:46Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25091",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 24262,
      "title": "Failing test(s): TestAccApigeeApiProduct_apigeeApiProductWithLegacyOperationTestExample",
      "problem": "### Impacted tests\n\nTestAccApigeeApiProduct_apigeeApiProductWithLegacyOperationTestExample\n\n\n### Affected Resource(s)\n\ngoogle_apigee_api_product\n\n### Failure rates\n\n\n\n- ga: 0%\n\n\n\n- beta: 57%\n\n\n\n### Message(s)\n\n\n\n\n\n\n\n\n- [beta error message](https://storage.cloud.google.com/nightly-test-data/test-errors/beta/2025-09-03/TestAccApigeeApiProduct_apigeeApiProductWithLegacyOperationTestExample-beta-2025-09-03.txt)\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n\n\n\n\n- [beta debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS/2025-09-03/69a2901/debug-google-beta-69a2901-457646-TestAccApigeeApiProduct_apigeeApiProductWithLegacyOperationTestExample.txt)\n\n\n\n\nb/442934491",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "service/apigee",
        "test-failure-100"
      ],
      "created_at": "2025-09-04T02:05:19Z",
      "closed_at": "2025-12-30T03:04:49Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/24262",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25827,
      "title": "Provider panic: strconv.ParseInt overflow on large resource ID values (>int32 max)",
      "problem": "### Community Note\n\n I have searched for existing issues and confirmed this is not a duplicate\n\n\n### Terraform Version & Provider Version(s)\n\nTerraform v1.x.x\nProvider v7.16.0\n\n### Affected Resource(s)\n\ngoogle_compute_disk\ngoogle_compute_instance\nPotentially other compute resources with large GCP resource IDs\n\n### Terraform Configuration\n\nresource \"google_compute_disk\" \"example\" {\n  name  = \"example-disk\"\n  zone  = \"us-central1-a\"\n  type  = \"pd-standard\"\n  size  = 100\n}\n\n### Debug Output\n\npanic: Error reading level state: strconv.ParseInt: parsing \"XXXXXXXXXXXXXXXXXX\": value out of range\n\ngoroutine XXX [running]:\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*ResourceData).get(...)\ngithub.com/hashicorp/terraform-plugin-sdk/v2@v2.38.1/helper/schema/resource_data.go:694\n\n### Expected Behavior\n\nTerraform plan/apply should work correctly with any GCP resource ID values, regardless of size.\n\n### Actual Behavior\n\nProvider crashes with strconv.ParseInt: parsing \"...\": value out of range error when reading Terraform state containing resource ID values exceeding int32 maximum (2,147,483,647).\n\n### Steps to reproduce\n\nCreate or import a compute disk resource\nGCP may assign a resource ID > 2,147,483,647 (int32 max)\nRun terraform plan or terraform apply\nProvider panics during state refresh\n\n### Important Factoids\n\nGCP uses uint64/int64 for resource IDs\nProvider appears to parse these values as int32 in some code paths\nPotentially affected fields: disk_id, source_image_id, source_disk_id, and similar ID fields\nThis is a data type mismatch between GCP API (uint64) and provider parsing logic (int32)\n\n### References\n\nWorkaround:\nNone found. Cannot proceed with terraform operations on affected resources.",
      "solution": "Are you using Terraform on a 32bit system or a 32bit executable on a 64bit system? The Terraform install page makes it easy to install a 32-bit executable in particular because of how it's laid out, with the 386 versions of the binaries on the left side. Most users are on 64-bit systems and want the appropriate 64-bit binary:\n\n<img width=\"1050\" height=\"900\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/6a62d3ce-8136-449d-9751-1953b5e52a79\" />\n\nLast I recall the issue was actually in Terraform Core/Plugin SDK code and not provider code directly, as Terraform ints (\"[TypeInt](https://developer.hashicorp.com/terraform/plugin/sdkv2/schemas/schema-types#typeint)\") are treated as system ints internally.\n\nThis is _possible_ to mitigate in a provider, but the options aren't great. While we could use a different type for these kinds of fields, the choices from https://developer.hashicorp.com/terraform/plugin/sdkv2/schemas/schema-types are: `TypeInt` which is a system int, `TypeFloat` with is a `float64`, and `TypeString` which is a string. `TypeInt` -> `TypeString` would be most viable, but that changes the [user-facing type](https://developer.hashicorp.com/terraform/language/expressions/types#types) of the fields from `number` to `string` with some unknown backwards compatibility impact. So we're left weighing a breaking change that could impact any/all users (and users using modules in particular) vs leaving this broken for 32-bit users. If a `TypeInt64` was available we could presumably readily switch to that, but it's never been added by HashiCorp.\n",
      "labels": [
        "bug",
        "crash",
        "service/compute-pd",
        "forward/review",
        "service/compute-instances"
      ],
      "created_at": "2026-01-19T13:17:13Z",
      "closed_at": "2026-01-29T18:24:18Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25827",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25090,
      "title": "Failing test(s): TestAccApigeeApiProduct_apigeeApiProductWithAttributesTestExample",
      "problem": "### Impacted tests\n\nTestAccApigeeApiProduct_apigeeApiProductWithAttributesTestExample\n\n\n### Affected Resource(s)\n\ngoogle_apigee_api_product\n\n### Failure rates\n\n\n\n- ga: 29%\n\n\n\n- beta: 100%\n\n\n\n### Message(s)\n\n\n\n\n- [ga error message](https://storage.cloud.google.com/nightly-test-data/test-errors/ga/2025-11-09/TestAccApigeeApiProduct_apigeeApiProductWithAttributesTestExample-ga-2025-11-09.txt)\n\n\n\n\n\n- [beta error message](https://storage.cloud.google.com/nightly-test-data/test-errors/beta/2025-11-09/TestAccApigeeApiProduct_apigeeApiProductWithAttributesTestExample-beta-2025-11-09.txt)\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n- [ga debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_NIGHTLYTESTS/2025-11-09/57bc314/debug-google-57bc314-523336-TestAccApigeeApiProduct_apigeeApiProductWithAttributesTestExample.txt)\n\n\n\n\n\n- [beta debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS/2025-11-09/713b697/debug-google-beta-713b697-522860-TestAccApigeeApiProduct_apigeeApiProductWithAttributesTestExample.txt)\n\n\n\n\nb/459261902",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "service/apigee",
        "test-failure-100"
      ],
      "created_at": "2025-11-10T03:04:38Z",
      "closed_at": "2025-12-29T03:04:37Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25090",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25646,
      "title": "b64url_mac_key returns empty value",
      "problem": "### Community Note\n\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request.\n* Please do not leave _+1_ or _me too_ comments, they generate extra noise for issue followers and do not help prioritize the request.\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment.\n* If an issue is assigned to a user, that user is claiming responsibility for the issue.\n* Customers working with a Google Technical Account Manager or Customer Engineer can ask them to [reach out internally](https://github.com/hashicorp/terraform-provider-google/wiki/Customer-Contact#raising-gcp-internal-issues-with-the-provider-development-team) to expedite investigation and resolution of this issue.\n\n\n### Terraform Version & Provider Version(s)\n\nTerraform v1.11.2\non <architecture>\n+ provider registry.terraform.io/hashicorp/google v7.141\n\n### Affected Resource(s)\n\ngoogle_public_ca_external_account_key\n\n### Terraform Configuration\n\n```tf\nresource \"google_project_service\" \"publicca\" {\n  provider = google.default\n\n  project            = local.project_id\n  service            = \"publicca.googleapis.com\"\n  disable_on_destroy = false\n}\n\nresource \"google_public_ca_external_account_key\" \"eab\" {\n  provider = google.default\n\n  project = local.project_id\n\n  depends_on = [google_project_service.publicca]\n}\n```\n\n\n### Debug Output\n\n_No response_\n\n### Expected Behavior\n\n`google_public_ca_external_account_key.eab.b64url_mac_key` should not be empty\n\n### Actual Behavior\n\n`google_public_ca_external_account_key.eab.b64url_mac_key` is an empty string\n\n### Steps to reproduce\n\n1. `terraform apply`\n2. `terraform state pull` and check the attribute in the tfstate file\n\n### Important Factoids\n\n_No response_\n\n### References\n\nhttps://github.com/hashicorp/terraform-provider-google/issues/20801",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "forward/review",
        "service/publicca"
      ],
      "created_at": "2025-12-24T04:04:53Z",
      "closed_at": "2025-12-26T22:22:31Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25646",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25558,
      "title": "Failing test(s): TestAccDataplexEntry_dataplexEntryBigqueryTableExample",
      "problem": "### Impacted tests\n\nTestAccDataplexEntry_dataplexEntryBigqueryTableExample\n\n\n### Affected Resource(s)\n\ngoogle_dataplex_entry\n\n### Failure rates\n\n\n\n- ga: 100%\n\n\n\n- beta: 100%\n\n\n\n### Message(s)\n\n\n\n\n- [ga error message](https://storage.cloud.google.com/nightly-test-data/test-errors/ga/2025-12-14/TestAccDataplexEntry_dataplexEntryBigqueryTableExample-ga-2025-12-14.txt)\n\n\n\n\n\n- [beta error message](https://storage.cloud.google.com/nightly-test-data/test-errors/beta/2025-12-14/TestAccDataplexEntry_dataplexEntryBigqueryTableExample-beta-2025-12-14.txt)\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n- [ga debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_NIGHTLYTESTS/2025-12-14/c99a3a1/debug-google-c99a3a1-556015-TestAccDataplexEntry_dataplexEntryBigqueryTableExample.txt)\n\n\n\n\n\n- [beta debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS/2025-12-14/dbf5c67/debug-google-beta-dbf5c67-556243-TestAccDataplexEntry_dataplexEntryBigqueryTableExample.txt)\n\n\n\n\nb/468899926",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "test-failure-100",
        "service/dataplex"
      ],
      "created_at": "2025-12-15T03:05:06Z",
      "closed_at": "2025-12-29T18:31:11Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25558",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 23924,
      "title": "google_secret_manager_secret_version panics if reading secret value returns API error",
      "problem": "### Community Note\n\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request.\n* Please do not leave _+1_ or _me too_ comments, they generate extra noise for issue followers and do not help prioritize the request.\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment.\n* If an issue is assigned to a user, that user is claiming responsibility for the issue.\n* Customers working with a Google Technical Account Manager or Customer Engineer can ask them to [reach out internally](https://github.com/hashicorp/terraform-provider-google/wiki/Customer-Contact#raising-gcp-internal-issues-with-the-provider-development-team) to expedite investigation and resolution of this issue.\n\n\n### Terraform Version & Provider Version(s)\n\nTerraform vX.X.X\non <architecture>\n+ provider registry.terraform.io/hashicorp/google v6.47.0\n\n\n### Affected Resource(s)\n\ngoogle_secret_manager_secret_version\n\n### Terraform Configuration\n\nN/A - as far as I can tell this isn't directly triggered by a specific configuration\n\n### Debug Output\n\n```\npanic: interface conversion: interface {} is *url.Error, not []interface {}\n\ngoroutine 34136 [running]:\ngithub.com/hashicorp/terraform-provider-google-beta/google-beta/services/secretmanager.resourceSecretManagerSecretVersionRead(0xc012c3b050, {0x52bc620?, 0xc0214eb208})\n\t/go/src/github.com/modular-magician/terraform-provider-google-beta/google-beta/services/secretmanager/resource_secret_manager_secret_version.go:333 +0xc5b\ngithub.com/hashicorp/terraform-provider-google-beta/google-beta/services/secretmanager.resourceSecretManagerSecretVersionCreate(0xc012c3b050, {0x52bc620, 0xc0214eb208})\n\t/go/src/github.com/modular-magician/terraform-provider-google-beta/google-beta/services/secretmanager/resource_secret_manager_secret_version.go:252 +0x985\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).create(0x5d44d60?, {0x5d44d60?, 0xc006dcc480?}, 0xd?, {0x52bc620?, 0xc0214eb208?})\n\t/go/pkg/mod/github.com/hashicorp/terraform-plugin-sdk/v2@v2.37.0/helper/schema/resource.go:837 +0x15f\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*Resource).Apply(0xc0012e5b00, {0x5d44d60, 0xc006dcc480}, 0xc01eedb5f0, 0xc012c3af30, {0x52bc620, 0xc0214eb208})\n\t/go/pkg/mod/github.com/hashicorp/terraform-plugin-sdk/v2@v2.37.0/helper/schema/resource.go:980 +0xafa\ngithub.com/hashicorp/terraform-plugin-sdk/v2/helper/schema.(*GRPCProviderServer).ApplyResourceChange(0xc003ca0498, {0x5d44d60?, 0xc006dcc3f0?}, 0xc00da2c230)\n\t/go/pkg/mod/github.com/hashicorp/terraform-plugin-sdk/v2@v2.37.0/helper/schema/grpc_provider.go:1484 +0x10b1\ngithub.com/hashicorp/terraform-plugin-mux/tf5muxserver.(*muxServer).ApplyResourceChange(0xc004c8a780, {0x5d44d60?, 0xc006dcc150?}, 0xc00da2c230)\n\t/go/pkg/mod/github.com/hashicorp/terraform-plugin-mux@v0.20.0/tf5muxserver/mux_server_ApplyResourceChange.go:36 +0x193\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/tf5server.(*server).ApplyResourceChange(0xc00a5f1540, {0x5d44d60?, 0xc0076eb8c0?}, 0xc0094d5b80)\n\t/go/pkg/mod/github.com/hashicorp/terraform-plugin-go@v0.28.0/tfprotov5/tf5server/server.go:941 +0x3bc\ngithub.com/hashicorp/terraform-plugin-go/tfprotov5/internal/tfplugin5._Provider_ApplyResourceChange_Handler({0x5283fc0, 0xc00a5f1540}, {0x5d44d60, 0xc0076eb8c0}, 0xc0094d5a00, 0x0)\n\t/go/pkg/mod/github.com/hashicorp/terraform-plugin-go@v0.28.0/tfprotov5/internal/tfplugin5/tfplugin5_grpc.pb.go:687 +0x1a6\ngoogle.golang.org/grpc.(*Server).processUnaryRPC(0xc02851cc00, {0x5d44d60, 0xc0076eb830}, 0xc002c21560, 0xc012f0bbc0, 0x824fc48, 0x0)\n\t/go/pkg/mod/google.golang.org/grpc@v1.73.0/server.go:1405 +0x103b\ngoogle.golang.org/grpc.(*Server).handleStream(0xc02851cc00, {0x5d45da8, 0xc018d1a000}, 0xc002c21560)\n\t/go/pkg/mod/google.golang.org/grpc@v1.73.0/server.go:1815 +0xbaa\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1()\n\t/go/pkg/mod/google.golang.org/grpc@v1.73.0/server.go:1035 +0x7f\ncreated by google.golang.org/grpc.(*Server).serveStreams.func2 in goroutine 33190\n\t/go/pkg/mod/google.golang.org/grpc@v1.73.0/server.go:1046 +0x125\nFAIL\tgithub.com/hashicorp/terraform-provider-google-beta/google-beta/services/secretmanager\t5.366s\n```\n\n### Expected Behavior\n\nTest / read should have failed gracefully\n\n### Actual Behavior\n\n`panic: interface conversion: interface {} is *url.Error, not []interface {}`\n\n### Steps to reproduce\n\n1. `terraform apply` in a way that triggers an error while fetching the payload value\n\n### Important Factoids\n\nThe problem is that `flattenSecretManagerSecretVersionPayload` sometimes returns an error, but that's not a valid return value - the calling code expects a `[]interface{}`. Basically if there's an API error reading the secret value, this will always panic. Probably the logic should be in a [custom decoder](https://googlecloudplatform.github.io/magic-modules/develop/custom-code/#decoder) instead (because that can return an error meaningfully).\n\nTemplate that defines `flattenSecretManagerSecretVersionPayload` is [/mmv1/templates/terraform/custom_flatten/secret_version_access.go.tmpl](https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/templates/terraform/custom_flatten/secret_version_access.go.tmpl)\n\nNote that this template is shared with `RegionalSecretVersion` so any updates would need to be made there as well.\n\n### References\n\nhttps://github.com/GoogleCloudPlatform/magic-modules/pull/14230#issuecomment-3169394783\n\nb/437430452",
      "solution": "This should be resolved by https://github.com/GoogleCloudPlatform/magic-modules/pull/15082.\n\n---\n\nI'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "bug",
        "crash",
        "forward/linked",
        "service/secretmanager"
      ],
      "created_at": "2025-08-08T23:02:45Z",
      "closed_at": "2025-12-29T19:32:18Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/23924",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25651,
      "title": "Add `prefix_length` to `google_compute_addresses` plural data source",
      "problem": "### Community Note\n\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request.\n* Please do not leave _+1_ or _me too_ comments, they generate extra noise for issue followers and do not help prioritize the request.\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment.\n* If an issue is assigned to a user, that user is claiming responsibility for the issue.\n* Customers working with a Google Technical Account Manager or Customer Engineer can ask them to [reach out internally](https://github.com/hashicorp/terraform-provider-google/wiki/Customer-Contact#raising-gcp-internal-issues-with-the-provider-development-team) to expedite investigation and resolution of this issue.\n\n\n### Description\n\nThe data source `google_compute_addresses` is missing the field `prefix_length`.\n\n### Affected Resource\n\n* google_compute_addresses\n\n\n### Potential Terraform Configuration\n\n```tf \ndata \"google_compute_addresses\" \"example\" {\n  project = \"example-project\"\n}\n```\n\n\n### References\n\n* https://registry.terraform.io/providers/hashicorp/google/latest/docs/data-sources/compute_addresses",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "enhancement"
      ],
      "created_at": "2025-12-28T12:16:25Z",
      "closed_at": "2025-12-29T19:35:26Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25651",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 19759,
      "title": "Enable marketplace items for project",
      "problem": "### Question\n\nIs it possible to enable marketplace items like the [Identity Platform](https://console.cloud.google.com/marketplace/details/google-cloud-platform/customer-identity) via terraform. If so, how? If not, what is the issue which blocks such a feature.\r\nI was unable to find any resources related to this question.\r\n\r\nThank you.",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question"
      ],
      "created_at": "2024-10-04T18:32:23Z",
      "closed_at": "2025-12-29T21:06:06Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/19759",
      "comments_count": 3
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25343,
      "title": "Failure to force_destroy bucket unless there is `storage.anywhereCaches.list` permission",
      "problem": "### Community Note\n\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request.\n* Please do not leave _+1_ or _me too_ comments, they generate extra noise for issue followers and do not help prioritize the request.\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment.\n* If an issue is assigned to a user, that user is claiming responsibility for the issue.\n* Customers working with a Google Technical Account Manager or Customer Engineer can ask them to [reach out internally](https://github.com/hashicorp/terraform-provider-google/wiki/Customer-Contact#raising-gcp-internal-issues-with-the-provider-development-team) to expedite investigation and resolution of this issue.\n\n\n### Terraform Version & Provider Version(s)\n\nTerraform v1.13.3\non linux_amd64\n+ provider registry.terraform.io/hashicorp/google v7.12.0\n\n\n### Affected Resource(s)\n\ngoogle_storage_bucket\n\n### Terraform Configuration\n\n```tf\nprovider \"google\" {\n  project = \"demo-project\"\n\n  impersonate_service_account = \"demo-sa@demo-project.iam.gserviceaccount.com\"\n}\n\nresource \"google_storage_bucket\" \"test\" {\n  name          = \"test-jballet-och3rae6dadu\"\n  location      = \"europe-west1\"\n  force_destroy = true\n\n  uniform_bucket_level_access = true\n\n  soft_delete_policy {\n    retention_duration_seconds = 604800\n  }\n}\n```\n\n\n### Debug Output\n\nhttps://gist.github.com/sjiekak/d184583bea84fa96d29020aa45af0d0e\n\n### Expected Behavior\n\nThe bucket is not empty. We expect `force_destroy` to be applied:\n- bucket objects are deleted\n- bucket is deleted\n\n### Actual Behavior\n\nThe bucket deletion fails with \n\n```\n2025-12-01T12:09:02.604+0100 [ERROR] vertex \"google_storage_bucket.test (destroy)\" error: googleapi: Error 409: The bucket you tried to delete is not empty., conflict\n\u2577\n\u2502 Error: googleapi: Error 409: The bucket you tried to delete is not empty., conflict\n```\n\n### Steps to reproduce\n\n1. `terraform apply`\n2. upload any document in the bucket (eg the terraform `gsutil cp test.tf gs://test-jballet-och3rae6dadu/test.tf`)\n3. `terraform destroy`\n\n### Important Factoids\n\n- Authenticating as a service account (impersonating a service account) with custom permissions\n\n```\nresource \"google_project_iam_custom_role\" \"test_permission\" {\n  role_id = \"sjiekak.demo.gcs.editor\"\n  title   = \"Permissions for theTest\"\n  stage   = \"GA\"\n  permissions = [\n    # GCS Bucket permissions\n    # https://cloud.google.com/storage/docs/access-control/iam-permissions#buckets\n    \"storage.buckets.create\",\n    \"storage.buckets.delete\",\n    \"storage.buckets.get\",\n    \"storage.buckets.list\",\n    \"storage.buckets.update\",\n    \"storage.buckets.enableObjectRetention\",\n    \"storage.buckets.setIamPolicy\",\n    \"storage.buckets.getIamPolicy\",\n\n    # Required for the Crossplane GCS provider to delete objects in the bucket.\n    # GCS Object permissions\n    # https://cloud.google.com/storage/docs/access-control/iam-permissions#objects\n    \"storage.objects.list\",\n    \"storage.objects.delete\",\n  ]\n}\n```\n\n- [Suspecting this code logic is culprit](https://github.com/hashicorp/terraform-provider-google/blob/066076c47a0afd9f81aa8f5ebf5bf9436e97aaa4/google/services/storage/resource_storage_bucket.go#L1216) \n\n### References\n\npossibly caused by https://github.com/hashicorp/terraform-provider-google/pull/22438 resolving https://github.com/hashicorp/terraform-provider-google/issues/13724\n\nb/471006177",
      "solution": "Hi @sjiekak \n\nCould you help us with more information:\n\n1. Did you apply the `force_destroy` change after trying to delete the bucket?\n2. Did you ensure your terraform user has enough permissions to perform this action (`storage.objects.list`, `storage.objects.delete`, `roles/storage.admin`, etc)?\n\nFinally: If the bucket has a Retention Policy applied and that policy has been Locked, the bucket cannot be deleted, even if it's empty, until the retention period expires. Locking the policy is a powerful, immutable protection.\n\nResolution: A locked retention policy cannot be removed or shortened by any user, including the project owner, until its shortest retention period has passed. This is a hard-and-fast rule in GCP designed for regulatory compliance.\n\nObject Holds (Event-Based or Temporary): If any individual object inside the bucket has an Object Hold (either an Event-Based Hold or a Temporary Hold), that specific object cannot be deleted. Since force_destroy = true works by deleting all objects, the presence of even one held object will cause the pre-deletion cleanup to fail, stopping the entire bucket destroy process.\n\nMake sure you follow through on what you said and don't fall into any of the scenarios mentioned above in order to achieve your goal.\n\n---\n\nThanks for your answer @sjiekak \n\nAs you said it is depending on the user permissions, You need to ensure that the user performing this action has the appropriate permissions and that any additional permissions, policies, groups, etc., do not conflict with each other.\n\n---\n\n> You need to ensure that the user performing this action has the appropriate permissions \n\n@ggtisc this is the whole point, right ? That a seemingly unrelated permission is required to force destroy\n\n[This is how force_destroy is documented](https://registry.terraform.io/providers/hashicorp/google/7.13.0/docs/resources/storage_bucket#force_destroy-3)\n\n> force_destroy - (Optional, Default: false) When deleting a bucket, this boolean option will delete all contained objects. If you try to delete a bucket that contains objects, Terraform will fail that run.\n\n1. There are no mentions of anywhere caches being deleted as well\n2. The need for a `storage.anywhereCaches.list` permission is not documented anywhere else\n3. Requiring a permission `storage.anywhereCaches.list` to delete a bucket object is not intuitive, and is a behavior introduced by newer versions.",
      "labels": [
        "bug",
        "forward/linked",
        "service/storage"
      ],
      "created_at": "2025-12-01T11:33:44Z",
      "closed_at": "2025-12-29T21:22:59Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25343",
      "comments_count": 8
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 16295,
      "title": "google_cloudbuild_trigger can't create a real manual invocation",
      "problem": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a \ud83d\udc4d [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or \"me too\" comments, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment. If the issue is assigned to the \"modular-magician\" user, it is either in the process of being autogenerated, or is planned to be autogenerated soon. If the issue is assigned to a user, that user is claiming responsibility for the issue. If the issue is assigned to \"hashibot\", a community member has claimed the issue already.\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nHi,\r\n\r\n**The context**\r\n\r\nOur project uses two types of triggers:\r\n* \"build\" triggers to create artifacts (npm modules or Docker images) from from various Git repositories\r\n* \"deploy\" triggers to deploy Docker images to Cloud Run\r\n\r\nWe use distinct GCP project for environments (dev, integration, production).\r\nDocker images are generated by a single project and this one has \"build\" triggers (and \"deploy\" triggers).\r\nOther projects have only \"deploy\" triggers (and constraints over images that can be deployed) but no \"build\" triggers. So it makes no sense for these projects to declare Git repositories as all they need is an access to an artifact registry repository. However...\r\n\r\n**The problem**\r\n\r\nAs far as I know, event with the latest version of the provider (5.2.0 today, beta or not), `google_cloudbuild_trigger` can't be used to create a real manual invocation trigger because\r\n\r\n> one of `bitbucket_server_trigger_config,github,pubsub_config,repository_event_config,source_to_build,trigger_template,webhook_config` must be specified`\r\n\r\nHere is a screenshot of what I'd like to obtain.\r\n\r\n![google_cloudbuild_trigger_manual](https://github.com/hashicorp/terraform-provider-google/assets/129528201/ba16a46c-5ce4-4176-8036-ae4111df8e59)\r\n\r\nHere are trigger definitions obtained with `gcloud builds triggers list`.\r\n\r\nWhat I can create with GCP Console (useless but kept simple):\r\n```\r\nbuild:\r\n  steps:\r\n  - args:\r\n    - echo\r\n    - hello world\r\n    name: ubuntu\r\ncreateTime: whatever\r\nid: whatever\r\nname: manual-invocation\r\nresourceName: whatever\r\n```\r\n\r\nWhat I can create with `google_cloudbuild_trigger`\r\nusing `trigger_template`\r\n```\r\nbuild:\r\n  steps:\r\n  - args:\r\n    - echo\r\n    - hello world\r\n    name: ubuntu\r\ncreateTime: whatever\r\nid: whatever\r\nname: not-a-manual-invocation\r\nresourceName: whatever\r\ntriggerTemplate:\r\n  branchName: main\r\n  projectId: whatever\r\n  repoName: default\r\n```\r\nusing `source_to_build`\r\n```\r\nbuild:\r\n  steps:\r\n  - args:\r\n    - echo\r\n    - hello world\r\n    name: ubuntu\r\ncreateTime: whatever\r\nid: whatever\r\nname: not-a-manual-invocation\r\nresourceName: whatever\r\nsourceToBuild:\r\n  ref: refs/heads/main\r\n  repoType: GITHUB\r\n  uri: whatever\r\n```\r\n\r\nSo, the current workaround is to define \"deploy\" triggers with `trigger_template` or `source_to_build` but it requires to declare a source repository in every project, even if it's not used.\r\n\r\n<!--- Please leave a helpful description of the feature request here. Including use cases and why it would help you is a great way to convince maintainers to spend time on it. --->\r\n\r\n### New or Affected Resource(s)\r\n\r\n<!--- Please list the new or affected resources and data sources. Use google_* if all resources or data sources are affected. --->\r\n\r\n* google_cloudbuild_trigger\r\n\r\n### Potential Terraform Configuration\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n```tf\r\nresource \"google_cloudbuild_trigger\" \"manual_invocation\" {\r\n  location = var.region\r\n  name     = \"manual-invocation\"\r\n  build {\r\n    step {\r\n      name = \"ubuntu\"\r\n      args = [\"echo\", \"hello world\"]\r\n    }\r\n  }\r\n  # trigger_template {\r\n  #   branch_name = \"main\"\r\n  # }\r\n}\r\n```\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n\r\n* https://github.com/GoogleCloudPlatform/magic-modules/pull/5738\r\n\r\n<!---\r\nNote Google Cloud customers who are working with a dedicated Technical Account Manager / Customer Engineer: to expedite the investigation and resolution of this issue, please refer to these instructions: https://github.com/hashicorp/terraform-provider-google/wiki/Customer-Contact#raising-gcp-internal-issues-with-the-provider-development-team\r\n--->\r\n\r\n\r\nb/307910874\r\n",
      "solution": "2025, I still face the same error, although the workarounds. Will this be look into? ",
      "labels": [
        "bug",
        "forward/linked",
        "service/cloudbuild"
      ],
      "created_at": "2023-10-18T09:04:48Z",
      "closed_at": "2026-01-28T21:28:36Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/16295",
      "comments_count": 9
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25905,
      "title": "Failing test(s): TestAccTags",
      "problem": "### Impacted tests\n\nTestAccTags\n\n\n### Affected Resource(s)\n\ngoogle_tags\n\n### Failure rates\n\n\n\n- ga: 100%\n\n\n\n- beta: 100%\n\n\n\n### Message(s)\n\n\n\n\n- [ga error message](https://storage.cloud.google.com/nightly-test-data/test-errors/ga/2026-01-25/TestAccTags-ga-2026-01-25.txt)\n\n\n\n\n\n- [beta error message](https://storage.cloud.google.com/nightly-test-data/test-errors/beta/2026-01-25/TestAccTags-beta-2026-01-25.txt)\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n- [ga debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_NIGHTLYTESTS/2026-01-25/fd9453f/debug-google-fd9453f-595091-TestAccTags.txt)\n\n\n\n\n\n- [beta debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS/2026-01-25/ece3bb8/debug-google-beta-ece3bb8-595003-TestAccTags.txt)\n\n\n",
      "solution": "Fixed by https://github.com/GoogleCloudPlatform/magic-modules/pull/16229",
      "labels": [
        "size/xs",
        "test-failure",
        "test-failure-100"
      ],
      "created_at": "2026-01-26T03:04:42Z",
      "closed_at": "2026-01-28T17:10:57Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25905",
      "comments_count": 1
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25334,
      "title": "Failing test(s): TestAccBigQueryTable_IgnoreSchemaDataPoliciesChanges",
      "problem": "### Impacted tests\n\nTestAccBigQueryTable_IgnoreSchemaDataPoliciesChanges\n\n\n### Affected Resource(s)\n\ngoogle_bigquery_table\n\n### Failure rates\n\n\n\n- ga: 100%\n\n\n\n- beta: 100%\n\n\n\n### Message(s)\n\n\n\n\n- [ga error message](https://storage.cloud.google.com/nightly-test-data/test-errors/ga/2025-11-27/TestAccBigQueryTable_IgnoreSchemaDataPoliciesChanges-ga-2025-11-27.txt)\n\n\n\n\n\n- [beta error message](https://storage.cloud.google.com/nightly-test-data/test-errors/beta/2025-11-27/TestAccBigQueryTable_IgnoreSchemaDataPoliciesChanges-beta-2025-11-27.txt)\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n- [ga debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_NIGHTLYTESTS/2025-11-27/a78fae5/debug-google-a78fae5-540358-TestAccBigQueryTable_IgnoreSchemaDataPoliciesChanges.txt)\n\n\n\n\n\n- [beta debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS/2025-11-27/50b931c/debug-google-beta-50b931c-539782-TestAccBigQueryTable_IgnoreSchemaDataPoliciesChanges.txt)\n\n\n\n\nb/464371304",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "test-failure-100",
        "service/bigquery"
      ],
      "created_at": "2025-11-28T03:05:13Z",
      "closed_at": "2025-12-28T03:04:38Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25334",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 18215,
      "title": "Update generated IAM acceptance tests to include conditions, or omit IAM conditions from missing test detector",
      "problem": "### What kind of contribution is this issue about?\n\nMMv1-based resource\n\n### Details\n\nWhen new resources are added to the provider and associated IAM resources are added at the same time there are missing test detector messages like this: https://github.com/GoogleCloudPlatform/magic-modules/pull/10757#issuecomment-2123420422\r\n\r\nThe PR author doesn't have power to update the IAM resource tests because they are generated, and the PR reviewer needs to know context about IAM resource generation.\r\n\r\nI imagine that generated IAM resource tests don't include conditions because they aren't available for all IAM resources, which is fair enough! If that is the case it would be good to come up with a way to either stop the missing test detector flagging condition arguments in IAM resources, or enable conditions to be conditionally included in generated IAM acc tests.\n\n### References\n\n_No response_",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/m",
        "technical-debt",
        "magician-pr-ux",
        "magician"
      ],
      "created_at": "2024-05-22T10:40:40Z",
      "closed_at": "2026-01-28T00:37:14Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/18215",
      "comments_count": 7
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25645,
      "title": "Failing test(s): TestAccContainerCluster_withNodeConfigKubeletConfigSettingsInNodePool",
      "problem": "### Impacted tests\n\nTestAccContainerCluster_withNodeConfigKubeletConfigSettingsInNodePool\n\n\n### Affected Resource(s)\n\ngoogle_container_cluster\n\n### Failure rates\n\n\n\n- ga: 100%\n\n\n\n- beta: 29%\n\n\n\n### Message(s)\n\n\n\n\n- [ga error message](https://storage.cloud.google.com/nightly-test-data/test-errors/ga/2025-12-23/TestAccContainerCluster_withNodeConfigKubeletConfigSettingsInNodePool-ga-2025-12-23.txt)\n\n\n\n\n\n- [beta error message](https://storage.cloud.google.com/nightly-test-data/test-errors/beta/2025-12-23/TestAccContainerCluster_withNodeConfigKubeletConfigSettingsInNodePool-beta-2025-12-23.txt)\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n- [ga debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_NIGHTLYTESTS/2025-12-23/556a1b6/debug-google-556a1b6-564670-TestAccContainerCluster_withNodeConfigKubeletConfigSettingsInNodePool.txt)\n\n\n\n\n\n- [beta debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS/2025-12-23/59fd6b1/debug-google-beta-59fd6b1-564162-TestAccContainerCluster_withNodeConfigKubeletConfigSettingsInNodePool.txt)\n\n\n\n\nb/471313013",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "service/container",
        "test-failure-100"
      ],
      "created_at": "2025-12-24T03:05:35Z",
      "closed_at": "2025-12-27T03:04:13Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25645",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25447,
      "title": "Failing test(s): TestAccComputeInterconnect_resourceManagerTags",
      "problem": "### Impacted tests\n\nTestAccComputeInterconnect_resourceManagerTags\n\n\n### Affected Resource(s)\n\ngoogle_compute_interconnect\n\n### Failure rates\n\n\n\n- ga: 100%\n\n\n\n- beta: 100%\n\n\n\n### Message(s)\n\n\n\n\n- [ga error message](https://storage.cloud.google.com/nightly-test-data/test-errors/ga/2025-12-04/TestAccComputeInterconnect_resourceManagerTags-ga-2025-12-04.txt)\n\n\n\n\n\n- [beta error message](https://storage.cloud.google.com/nightly-test-data/test-errors/beta/2025-12-04/TestAccComputeInterconnect_resourceManagerTags-beta-2025-12-04.txt)\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n- [ga debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_NIGHTLYTESTS/2025-12-04/1c3c760/debug-google-1c3c760-546572-TestAccComputeInterconnect_resourceManagerTags.txt)\n\n\n\n\n\n- [beta debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS/2025-12-04/73fe1d7/debug-google-beta-73fe1d7-546125-TestAccComputeInterconnect_resourceManagerTags.txt)\n\n\n\n\nb/466220875",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "test-failure-100",
        "service/compute-interconnect"
      ],
      "created_at": "2025-12-05T03:05:03Z",
      "closed_at": "2025-12-27T03:04:14Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25447",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 16894,
      "title": "Error creating Database: googleapi: Error 403: The client is not authorized to make this request., notAuthorized",
      "problem": "I getting the error Error creating Database: googleapi: Error 403: The client is not authorized to make this request., notAuthorized when trying to run the creation of one postgresql instance with the creation of one database. \r\n\r\n**module code:** \r\n\r\n```\r\nlocals {\r\n   #provider_name                                           = var.provider_name == null ? \"GCP\" : var.provider_name\r\n   #provider_region                                         = var.provider_region == null ? \"CENTRAL_US\" : var.provider_region\r\n   #zone_name                                               = var.zone_name == null ? \"${local.provider_name}-${local.provider_region}\" : var.zone_name\r\n   environment_name                                        = \"${terraform.workspace}\"\r\n   #project_name                                            = \"${terraform.workspace}\" == \"master\" ? \"production\" : \"${terraform.workspace}\"\r\n\r\n    required_tags                                           = {\r\n        env                                                 = local.environment_name\r\n        infrastructure_owner                                = \"DBRE\"\r\n    }\r\n\r\n    #labels                                                  = merge(local.required_tags, var.resource_tags)\r\n\r\n    env                                                     = {\r\n        master                                              = \"prd\",\r\n        staging                                             = \"stg\",\r\n        develop                                             = \"dev\"\r\n    }\r\n\r\n    env_type                                                = {\r\n        master                                              = \"prod\",\r\n        staging                                             = \"nonprod\",\r\n        develop                                             = \"nonprod\"\r\n    }\r\n}\r\n\r\nresource \"random_password\" \"pwd\" {\r\n    length                                                  = 16\r\n    special                                                 = false\r\n}\r\n\r\nresource \"google_sql_database_instance\" \"primary\" {\r\n  #provider = google-beta\r\n\r\n  name                                                = var.instance_name\r\n  region                                              = var.region\r\n  database_version                                    = var.database_version\r\n  project                                             = var.project_id #\"${var.project_id[terraform.workspace]}\"\r\n  root_password                                       = random_password.pwd.result\r\n  deletion_protection                                 = var.deletion_protection\r\n\r\n  #depends_on = [google_service_networking_connection.private_vpc_connection]\r\n\r\n  dynamic \"settings\" {\r\n    for_each                                          = var.env_setting[local.env[terraform.workspace]]\r\n    content {\r\n      tier                                            =  settings.value.tier \r\n      availability_type                               =  settings.value.availability_type\r\n      disk_size                                       =  settings.value.disk_size\r\n\r\n      database_flags {\r\n        name                                          = \"cloudsql.iam_authentication\"\r\n        value                                         = \"on\"\r\n      }\r\n\r\n     backup_configuration {\r\n       enabled                                        = settings.value.backup_configuration.enable_backup\r\n       start_time                                     = settings.value.backup_configuration.start_time\r\n       point_in_time_recovery_enabled                 = settings.value.backup_configuration.enable_backup == true ? true : false\r\n       #location                                       = settings.value.backup_configuration.location\r\n       transaction_log_retention_days                 = settings.value.backup_configuration.transaction_log_retention_days\r\n       \r\n       backup_retention_settings {\r\n        retained_backups                              = settings.value.backup_configuration.backup_retention_settings.retained_backups\r\n        retention_unit                                = settings.value.backup_configuration.backup_retention_settings.retention_unit\r\n        }\r\n     }\r\n\r\n      ip_configuration {\r\n        private_network                               = settings.value.ip_configuration.private_network #\"projects/${var.network_id[terraform.workspace]}/global/networks/${var.network_vpc[terraform.workspace]}\"\r\n        ipv4_enabled                                  = settings.value.ip_configuration.ipv4_enabled\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n#[START google_sql_database]\r\nresource \"google_sql_database\" \"database\" {\r\n  depends_on                                          = [google_sql_database_instance.read_replica]\r\n  count                                               = length(var.database_name)\r\n  name                                                = var.database_name[count.index]\r\n  instance                                            = google_sql_database_instance.primary.name\r\n  #project                                             = local.env[terraform.workspace]\r\n}\r\n## [END google_sql_database]\r\n\r\n\r\n\r\n\r\n# [START cloud_sql_postgres_instance_read_replica]\r\nresource \"google_sql_database_instance\" \"read_replica\" {\r\n  depends_on                                        = [google_sql_database_instance.primary]\r\n  #count                                             = var.num_read_replica[local.env[terraform.workspace]] \r\n\r\n  name                                              = \"${google_sql_database_instance.primary.name}-read\" #\"${var.prefix_engine}-${var.environment[terraform.workspace]}-${var.instance_name}-read-${count.index}\"\r\n  master_instance_name                              = google_sql_database_instance.primary.name\r\n  database_version                                  = google_sql_database_instance.primary.database_version\r\n  project                                           = google_sql_database_instance.primary.project #\"${var.project_id[terraform.workspace]}\"\r\n\r\n  deletion_protection                               = var.deletion_protection\r\n  region                                            = google_sql_database_instance.primary.region #var.region_primary[var.environment[terraform.workspace]]\r\n\r\n  replica_configuration {\r\n    failover_target                                 = false\r\n  }\r\n\r\n  dynamic \"settings\" {\r\n    for_each                                          = var.env_setting[local.env[terraform.workspace]]\r\n    content {\r\n      tier                                            =  settings.value.tier \r\n      availability_type                               =  settings.value.availability_type\r\n      disk_size                                       =  settings.value.disk_size\r\n\r\n      database_flags {\r\n        name                                          = \"cloudsql.iam_authentication\"\r\n        value                                         = \"on\"\r\n      }\r\n\r\n     backup_configuration {\r\n       enabled                                        = settings.value.backup_configuration.enable_backup\r\n       start_time                                     = settings.value.backup_configuration.start_time\r\n       point_in_time_recovery_enabled                 = settings.value.backup_configuration.enable_backup == true ? true : false\r\n       #location                                       = settings.value.backup_configuration.location\r\n       transaction_log_retention_days                 = settings.value.backup_configuration.transaction_log_retention_days\r\n       \r\n       backup_retention_settings {\r\n        retained_backups                              = settings.value.backup_configuration.backup_retention_settings.retained_backups\r\n        retention_unit                                = settings.value.backup_configuration.backup_retention_settings.retention_unit\r\n        }\r\n     }\r\n\r\n      ip_configuration {\r\n        private_network                               = settings.value.ip_configuration.private_network #\"projects/${var.network_id[terraform.workspace]}/global/networks/${var.network_vpc[terraform.workspace]}\"\r\n        ipv4_enabled                                  = settings.value.ip_configuration.ipv4_enabled\r\n      }\r\n    }\r\n  }\r\n}\r\n## [END cloud_sql_postgres_instance_primary]\r\n\r\n\r\n# ------------------------------------------------------------------------------\r\n# GCP SECRET MANAGER\r\n# ------------------------------------------------------------------------------\r\nresource \"google_secret_manager_secret\" \"default\" {\r\n    project                   = \"${var.project_secret[terraform.workspace]}\"\r\n    secret_id                 = local.secret_id\r\n    labels                    = var.secret_labels\r\n    replication {\r\n       auto {}\r\n    }\r\n}\r\n#\r\n## ------------------------------------------------------------------------------\r\n## GCP SECRET VERSION\r\n## ------------------------------------------------------------------------------\r\nresource \"google_secret_manager_secret_version\" \"default\" {\r\n    secret                    = google_secret_manager_secret.default.id\r\n    secret_data               = local.private_connection_string\r\n}\r\n\r\n## ------------------------------------------------------------------------------\r\n## CREATE PRIVATE CONNECTION STRING FOR SECRET MANAGER\r\n## POSTGRES_PASSWORD_PGS_DEV_PGSQL\r\n## ------------------------------------------------------------------------------\r\nlocals {\r\n  instance_name               = google_sql_database_instance.primary.name\r\n  engine_name                 = replace(var.database_version, \"/_.*/\", \"\")\r\n  secret_id                   = replace(\"${upper(local.engine_name)}_PASSWORD_${upper(local.instance_name)}\", \"-\", \"_\")\r\n  private_connection_string   = google_sql_database_instance.primary.root_password\r\n  rrdatas_replica             = \"${google_sql_database_instance.read_replica[*].ip_address.0.ip_address}\"\r\n  dns_record_replica          = \"${google_sql_database_instance.read_replica[*].name}\"\r\n}\r\n\r\nmodule \"dns-record-primary\" {\r\n  source            = \"git::https://github.com/tag-trade-repository/tf-module-dns-record.git\"\r\n  depends_on        = [google_sql_database_instance.primary]\r\n  \r\n  dns_record        = \"${google_sql_database_instance.primary.name}\"\r\n  dns_zone_name     = \"tag-internal-${terraform.workspace}\"\r\n  zone_project_id   = var.zone_project_id[terraform.workspace] \r\n  dns_record_type   = \"A\"\r\n\r\n  dns_record_ttl    = 60\r\n  rrdatas           = [\"${google_sql_database_instance.primary.ip_address.0.ip_address}\"]\r\n} \r\n\r\nmodule \"dns-record-replica\" {\r\n  count             = var.num_read_replica[local.env[terraform.workspace]]\r\n\r\n  source            = \"git::https://github.com/tag-trade-repository/tf-module-dns-record.git\"\r\n  depends_on        = [google_sql_database_instance.read_replica]\r\n  \r\n  dns_record        = element(local.dns_record_replica, count.index)\r\n  dns_zone_name     = \"tag-internal-${terraform.workspace}\"\r\n  zone_project_id   = var.zone_project_id[terraform.workspace] \r\n  dns_record_type   = \"A\"\r\n\r\n  dns_record_ttl    = 60\r\n  rrdatas           = [element(local.rrdatas_replica, count.index)]\r\n} \r\n\r\n```\r\n\r\n**resource code** \r\n\r\n```\r\nlocals {\r\n    prefix                                                  = \"pgs\"\r\n    version                                                 = \"POSTGRES\"\r\n}\r\n\r\nterraform {\r\n  source                                                    = \"${find_in_parent_folders(\"modules/cloud-sql/cluster\")}\"\r\n}\r\n\r\ninclude {\r\n  path                                                      = find_in_parent_folders()\r\n}\r\n\r\n\r\n\r\ninputs                                                      = {\r\n    instance_name                                           = \"pg-dbre-teste-aut-v2\"\r\n    region                                                  = \"us-east1\"\r\n    database_version                                        = \"POSTGRES_15\"\r\n    project_id                                              = \"db-receivables-dev-r202103\"\r\n    database_name                                           = [\"db_postgres_15_dbre\"]\r\n    deletion_protection                                     = false    \r\n  #root_password                                       = random_password.pwd.result\r\n\r\n  #depends_on = [google_service_networking_connection.private_vpc_connection]\r\n\r\n  env_setting                                              = {\r\n    dev =   [\r\n        {\r\n            tier                                            =   \"db-f1-micro\"\r\n            availability_type                               =   \"ZONAL\"\r\n            disk_size                                       =   10\r\n            backup_configuration                            =   {\r\n                enable_backup                               =   false\r\n                start_time                                  =   \"00:00\"\r\n                point_in_time_recovery_enabled              =   false\r\n                #location                                    =   \r\n                transaction_log_retention_days              =   2\r\n                backup_retention_settings                   =   {\r\n                    retained_backups                        =   7\r\n                    retention_unit                          =   \"COUNT\"\r\n                }\r\n            }\r\n           ip_configuration                                 =   {\r\n                private_network                             =   \"projects/inf-global-nonprod-r202104/global/networks/vpc-inf-global-develop\"\r\n                ipv4_enabled                                =   false\r\n            }\r\n        }\r\n    ]\r\n    }\r\n}\r\n\r\n```\r\n\r\nby the error it returns, it seems to be a permission that is missing but my iam group already has the permission Cloud SQL Administrator. do you guys see what could be the cause for this error? \r\n\r\nthank you Lucas Ramos \r\n\r\n",
      "solution": "Hi @ramosdelucas \r\n\r\nI think below might be one of the reason for this issue occuarnce.\r\n\r\n1. **Please check Service Account Permission :** Even though you have Cloud SQL Admin role, the specific service account you're using might not have the required permissions. This you can verify in IAM Section of cloud console.\r\n\r\n2. **Double-Check Project and Instance Details:**\r\nMake sure you're creating the instance and database in the correct project. Typos can lead to permission errors sometime.\r\nVerify: Double-check the project ID in your Terraform configuration or script matches the project where you want the resources created.\r\n\r\n3. **Temporary Permissions Issue:**\r\n\r\nIn rare cases, there might be a temporary permissions issue with Google Cloud.\r\nWait and Retry: Try waiting a few minutes and then re-running your script or Terraform configuration to see if this resolve the issue.\r\n\r\nHope this might helps.\r\n\r\nThank you.\r\n\r\nSankalp\r\n\n\n---\n\nHi ramosdelucas, \r\n\r\nHave you got the solution for this??\r\n\r\nEven i am facing the same issue when trying to create it through terraform.\r\n\r\nThanks,\r\nPriyanka.\n\n---\n\nAny news on that topic? We encountered the same issue with the initial run. Running `terraform apply` just really seconds later than the first run made the issue disappearing. ",
      "labels": [
        "question"
      ],
      "created_at": "2024-01-03T15:38:22Z",
      "closed_at": "2026-01-26T18:01:33Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/16894",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 18186,
      "title": "Issue with edition attribute",
      "problem": "### Question\n\nI am creating an cloud sql instance and while writing a terraform script, I have mentioned edition = \"ENTERPRISE_PLUS\" under the setting attribute, but while doing plan, I am getting the error that this field is not supported at this place whereas, I can see in the document of this google_sql_database_instance resource, it's mentioned there.",
      "solution": "It looks that this was fixed on [6.4.0](https://github.com/hashicorp/terraform-provider-google/releases/tag/v6.4.0). If this situation persists please raise a new ticket",
      "labels": [
        "question"
      ],
      "created_at": "2024-05-20T14:01:18Z",
      "closed_at": "2026-01-26T17:29:03Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/18186",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 18199,
      "title": " Error: Provider produced inconsistent final plan",
      "problem": "### Question\r\n\r\ni encountered the following error:\r\nWhen expanding the plan for google_cloud_scheduler_job.ads_policy_daily_scheduler to include new values learned so far during apply, provider \"registry.terraform.io/hashicorp/google\" produced an invalid new value for .http_target[0].oidc_token[0].audience: was null, but now cty.StringVal(\"####\"). \r\nThis is a bug in the provider, which should be reported in the provider's own issue tracker.",
      "solution": "Saw the same error -- our workaround was to specify the audience (the URI of a Cloud Run service)\n\n---\n\n> Saw the same error -- our workaround was to specify the audience (the URI of a Cloud Run service)\r\n\r\nThanks for that. Im gonna try this too!",
      "labels": [
        "question"
      ],
      "created_at": "2024-05-21T10:52:45Z",
      "closed_at": "2026-01-26T17:27:31Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/18199",
      "comments_count": 4
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 18826,
      "title": "Error updating GlobalAddress googleapi: Error 412: Labels fingerprint either invalid or resource labels have changed",
      "problem": "### Question\r\n\r\nAfter the update, the global addresses began to fail, the plan shows that the required labels would be added, however when executing apply it shows the error:\r\n\r\n`Error: Error updating GlobalAddress \"projects/my-project-id/global/addresses/my-global-address\": googleapi: Error 412: Labels fingerprint either invalid or resource labels have changed, conditionNotMet` (This is an example)\r\n\r\nAfter checking the tfstate I realized that the \"Label fingerprint\" has not been added to all global address resources correctly.\r\n\r\nI tried to delete the resource from the tfstate and reimport it but the error persists, the only way to avoid the error is to go back to the previous version.\r\n\r\nIs there any way to correct this error?\r\n\r\nUPDATE:\r\nTo create a new global address show a similar error\r\n Error: Error adding labels to ComputeGlobalAddress \"projects/my-project-id/global/addresses/my-global-address\": googleapi: Error 412: Labels fingerprint either invalid or resource labels have changed, conditionNotMet\r\n",
      "solution": "It looks like this issue was solved after version [5.37](https://github.com/hashicorp/terraform-provider-google/issues/18739#issuecomment-2299505059). If the error persists please raise a new ticket",
      "labels": [
        "question"
      ],
      "created_at": "2024-07-24T09:39:38Z",
      "closed_at": "2026-01-26T17:25:35Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/18826",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25535,
      "title": "Failing test(s): TestAccPubsubSubscriptionCloudStorage_serviceAccount",
      "problem": "### Impacted tests\n\nTestAccPubsubSubscriptionCloudStorage_serviceAccount\n\n\n### Affected Resource(s)\n\ngoogle_pubsub_subscription_cloud_storage\n\n### Failure rates\n\n\n\n- ga: 0%\n\n\n\n- beta: 100%\n\n\n\n### Message(s)\n\n\n\n\n\n\n\n\n- [beta error message](https://storage.cloud.google.com/nightly-test-data/test-errors/beta/2025-12-12/TestAccPubsubSubscriptionCloudStorage_serviceAccount-beta-2025-12-12.txt)\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n\n\n\n\n- [beta debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS/2025-12-12/1209213/debug-google-beta-1209213-553869-TestAccPubsubSubscriptionCloudStorage_serviceAccount.txt)\n\n\n\n\nb/468509511",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "test-failure-100",
        "service/pubsub"
      ],
      "created_at": "2025-12-13T07:02:06Z",
      "closed_at": "2025-12-26T03:04:41Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25535",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 19724,
      "title": "Import google_project_default_service_accounts resource ",
      "problem": "### Question\r\n\r\nI cound't find why this [resource](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google_project_default_service_accounts) does not support import. I'm trying to migrate a gcp project from one terraform state to another. \r\nThis is the resource \r\n```terraform\r\n resource \"google_project_default_service_accounts\" \"default_service_accounts\" {\r\n   action            = \"DISABLE\"\r\n   project           = var.project\r\n   restore_policy    = \"REVERT_AND_IGNORE_FAILURE\"\r\n   service_accounts  = {}\r\n }\r\n```\r\n\r\nDo you happen to know if there is a side-effect by deleting and recreating the default project service account?\r\n\r\n",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "question"
      ],
      "created_at": "2024-10-02T17:28:04Z",
      "closed_at": "2025-12-26T22:27:35Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/19724",
      "comments_count": 2
    },
    {
      "tech": "terraform",
      "repo": "hashicorp/terraform-provider-google",
      "issue_number": 25627,
      "title": "Failing test(s): TestAccFirestoreField_firestoreFieldMatchOverrideExample",
      "problem": "### Impacted tests\n\nTestAccFirestoreField_firestoreFieldMatchOverrideExample\n\n\n### Affected Resource(s)\n\ngoogle_firestore_field\n\n### Failure rates\n\n\n\n- ga: 0%\n\n\n\n- beta: 100%\n\n\n\n### Message(s)\n\n\n\n\n\n\n\n\n- [beta error message](https://storage.cloud.google.com/nightly-test-data/test-errors/beta/2025-12-21/TestAccFirestoreField_firestoreFieldMatchOverrideExample-beta-2025-12-21.txt)\n\n\n\n\n\n### Test Debug Log\n\n\n\n\n\n\n\n\n- [beta debug log](https://storage.cloud.google.com/teamcity-logs/nightly/TerraformProviders_GoogleCloud_GOOGLE_BETA_NIGHTLYTESTS/2025-12-21/a8264db/debug-google-beta-a8264db-562322-TestAccFirestoreField_firestoreFieldMatchOverrideExample.txt)\n\n\n\n\nb/470829244",
      "solution": "I'm going to lock this issue because it has been closed for _30 days_ \u23f3. This helps our maintainers find and focus on the active issues.\nIf you have found a problem that seems similar to this, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further.",
      "labels": [
        "size/xs",
        "test-failure",
        "forward/linked",
        "service/firestore-dataplane",
        "test-failure-100"
      ],
      "created_at": "2025-12-22T03:04:33Z",
      "closed_at": "2025-12-25T03:04:38Z",
      "url": "https://github.com/hashicorp/terraform-provider-google/issues/25627",
      "comments_count": 2
    }
  ]
}